webpackJsonp([0],Array(307).concat([function(e,t,i){"use strict";const s=i(310),r=i(320),a=i(309),o="1.10.508";s.ccxtVersion=o;const n={_1broker:i(371),_1btcxe:i(328),acx:i(323),allcoin:i(372),anxpro:i(373),binance:i(374),bit2c:i(375),bitbay:i(376),bitcoincoid:i(377),bitfinex:i(329),bitfinex2:i(378),bitflyer:i(379),bithumb:i(380),bitlish:i(381),bitmarket:i(382),bitmex:i(383),bitso:i(384),bitstamp:i(385),bitstamp1:i(386),bittrex:i(330),bl3p:i(387),bleutrade:i(388),btcbox:i(331),btcchina:i(389),btcexchange:i(390),btcmarkets:i(391),btctradeua:i(392),btcturk:i(332),btcx:i(393),bter:i(333),bxinth:i(394),ccex:i(395),cex:i(396),chbtc:i(397),chilebit:i(398),coincheck:i(399),coinfloor:i(400),coingi:i(401),coinmarketcap:i(402),coinmate:i(403),coinsecure:i(404),coinspot:i(405),cryptopia:i(406),dsx:i(407),exmo:i(408),flowbtc:i(409),foxbit:i(316),fybse:i(335),fybsg:i(410),gatecoin:i(411),gateio:i(412),gdax:i(413),gemini:i(414),getbtc:i(415),hitbtc:i(336),hitbtc2:i(416),huobi:i(417),huobicny:i(418),huobipro:i(337),independentreserve:i(419),itbit:i(420),jubi:i(421),kraken:i(422),kucoin:i(423),kuna:i(424),lakebtc:i(425),liqui:i(317),livecoin:i(426),luno:i(427),mercado:i(428),mixcoins:i(429),nova:i(430),okcoincny:i(431),okcoinusd:i(319),okex:i(432),paymium:i(433),poloniex:i(434),qryptos:i(338),quadrigacx:i(435),quoine:i(436),southxchange:i(437),surbitcoin:i(438),therock:i(439),tidex:i(440),urdubit:i(441),vaultoro:i(442),vbtc:i(443),virwox:i(444),wex:i(445),xbtce:i(446),yobit:i(447),yunbi:i(448),zaif:i(449),zb:i(334)};e.exports=Object.assign({version:o,Exchange:s,exchanges:Object.keys(n)},n,r,a)},,function(e,t){class i extends Error{constructor(e){super(e),this.constructor=i,this.__proto__=i.prototype,this.message=e}}class s extends i{constructor(e){super(e),this.constructor=s,this.__proto__=s.prototype,this.message=e}}class r extends s{constructor(e){super(e),this.constructor=r,this.__proto__=r.prototype,this.message=e}}class a extends s{constructor(e){super(e),this.constructor=a,this.__proto__=a.prototype,this.message=e}}class o extends s{constructor(e){super(e),this.constructor=o,this.__proto__=o.prototype,this.message=e}}class n extends s{constructor(e){super(e),this.constructor=n,this.__proto__=n.prototype,this.message=e}}class d extends s{constructor(e){super(e),this.constructor=d,this.__proto__=d.prototype,this.message=e}}class c extends d{constructor(e){super(e),this.constructor=c,this.__proto__=c.prototype,this.message=e}}class h extends d{constructor(e){super(e),this.constructor=h,this.__proto__=h.prototype,this.message=e}}class l extends d{constructor(e){super(e),this.constructor=l,this.__proto__=l.prototype,this.message=e}}class u extends i{constructor(e){super(e),this.constructor=u,this.__proto__=u.prototype,this.message=e}}class p extends u{constructor(e){super(e),this.constructor=p,this.__proto__=p.prototype,this.message=e}}class m extends u{constructor(e){super(e),this.constructor=m,this.__proto__=m.prototype,this.message=e}}class f extends u{constructor(e){super(e),this.constructor=f,this.__proto__=f.prototype,this.message=e}}e.exports={BaseError:i,ExchangeError:s,NotSupported:r,AuthenticationError:a,InvalidNonce:o,InsufficientFunds:n,InvalidOrder:d,OrderNotFound:c,OrderNotCached:h,CancelPending:l,NetworkError:u,DDoSProtection:p,RequestTimeout:m,ExchangeNotAvailable:f}},function(e,t,i){"use strict";(function(t){const s="undefined"===typeof window,r=i(320),a=i(368),o=i(369)().fetch,n=i(370),{deepExtend:d,extend:c,sleep:h,timeout:l,flatten:u,indexBy:p,sortBy:m,groupBy:f,aggregate:y,uuid:b,precisionFromString:w}=r,{ExchangeError:k,NotSupported:g,AuthenticationError:T,DDoSProtection:v,RequestTimeout:C,ExchangeNotAvailable:O}=i(309),B=void 0;e.exports=class{getMarket(e){this.marketClasses||(this.marketClasses={});let t=this.marketClasses[e];return t||(t=new n(this,e),this.marketClasses[e]=t,t)}describe(){return{}}constructor(e={}){Object.assign(this,r,{encode:e=>e,decode:e=>e}),s&&(this.nodeVersion=t.version.match(/\d+\.\d+.\d+/)[0]),this.userAgents={chrome:"Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/62.0.3202.94 Safari/537.36",chrome39:"Mozilla/5.0 (Windows NT 6.1; WOW64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/39.0.2171.71 Safari/537.36"},this.headers={},this.proxy="",this.origin="*",this.iso8601=(e=>new Date(e).toISOString()),this.parse8601=(e=>Date.parse(e.indexOf("+")>=0||"Z"==e.slice(-1)?e:e+"Z")),this.milliseconds=Date.now,this.microseconds=(()=>Math.floor(1e3*this.milliseconds())),this.seconds=(()=>Math.floor(this.milliseconds()/1e3)),this.id=void 0,this.enableRateLimit=!1,this.rateLimit=2e3,this.parseJsonResponse=!0,this.substituteCommonCurrencyCodes=!0,this.parseBalanceFromOpenOrders=!1,this.timeout=1e4,this.verbose=!1,this.debug=!1,this.journal="debug.json",this.userAgent=void 0,this.twofa=!1,this.timeframes=void 0,this.hasPublicAPI=!0,this.hasPrivateAPI=!0,this.hasCORS=!1,this.hasDeposit=!1,this.hasFetchBalance=!0,this.hasFetchClosedOrders=!1,this.hasFetchCurrencies=!1,this.hasFetchMyTrades=!1,this.hasFetchOHLCV=!1,this.hasFetchOpenOrders=!1,this.hasFetchOrder=!1,this.hasFetchOrderBook=!0,this.hasFetchOrders=!1,this.hasFetchTicker=!0,this.hasFetchTickers=!1,this.hasFetchTrades=!0,this.hasWithdraw=!1,this.hasCreateOrder=this.hasPrivateAPI,this.hasCancelOrder=this.hasPrivateAPI,this.requiredCredentials={apiKey:!0,secret:!0,uid:!1,login:!1,password:!1},this.balance={},this.orderbooks={},this.tickers={},this.fees={},this.orders={},this.trades={},this.currencies={},this.last_http_response=void 0,this.last_json_response=void 0,this.arrayConcat=((e,t)=>e.concat(t)),this.market_id=this.marketId,this.market_ids=this.marketIds,this.array_concat=this.arrayConcat,this.implode_params=this.implodeParams,this.extract_params=this.extractParams,this.fetch_balance=this.fetchBalance,this.fetch_free_balance=this.fetchFreeBalance,this.fetch_used_balance=this.fetchUsedBalance,this.fetch_total_balance=this.fetchTotalBalance,this.fetch_l2_order_book=this.fetchL2OrderBook,this.fetch_order_book=this.fetchOrderBook,this.fetch_tickers=this.fetchTickers,this.fetch_ticker=this.fetchTicker,this.fetch_trades=this.fetchTrades,this.fetch_order=this.fetchOrder,this.fetch_orders=this.fetchOrders,this.fetch_open_orders=this.fetchOpenOrders,this.fetch_closed_orders=this.fetchClosedOrders,this.fetch_order_status=this.fetchOrderStatus,this.fetch_markets=this.fetchMarkets,this.load_markets=this.loadMarkets,this.set_markets=this.setMarkets,this.parse_balance=this.parseBalance,this.parse_bid_ask=this.parseBidAsk,this.parse_bids_asks=this.parseBidsAsks,this.parse_order_book=this.parseOrderBook,this.parse_trades=this.parseTrades,this.parse_orders=this.parseOrders,this.parse_ohlcv=this.parseOHLCV,this.parse_ohlcvs=this.parseOHLCVs,this.edit_limit_buy_order=this.editLimitBuyOrder,this.edit_limit_sell_order=this.editLimitSellOrder,this.edit_limit_order=this.editLimitOrder,this.edit_order=this.editOrder,this.create_limit_buy_order=this.createLimitBuyOrder,this.create_limit_sell_order=this.createLimitSellOrder,this.create_market_buy_order=this.createMarketBuyOrder,this.create_market_sell_order=this.createMarketSellOrder,this.create_order=this.createOrder,this.calculate_fee=this.calculateFee,this.common_currency_code=this.commonCurrencyCode,this.price_to_precision=this.priceToPrecision,this.amount_to_precision=this.amountToPrecision,this.fee_to_precision=this.feeToPrecision,this.cost_to_precision=this.costToPrecision,this.precisionFromString=w,this.precision_from_string=w,this.truncate=r.truncate,this.uuid=b,this.has={cancelOrder:this.hasPrivateAPI,createDepositAddress:!1,createOrder:this.hasPrivateAPI,deposit:!1,fetchBalance:this.hasPrivateAPI,fetchClosedOrders:!1,fetchCurrencies:!1,fetchDepositAddress:!1,fetchMarkets:!0,fetchMyTrades:!1,fetchOHLCV:!1,fetchOpenOrders:!1,fetchOrder:!1,fetchOrderBook:!0,fetchOrders:!1,fetchTicker:!0,fetchTickers:!1,fetchTrades:!0,withdraw:!1};const i=d(this.describe(),e);for(const[t,s]of Object.entries(i))this[t]=d(this[t],s);this.api&&this.defineRestApi(this.api,"request"),this.initRestRateLimiter(),this.markets&&this.setMarkets(this.markets),this.debug&&B&&B(()=>this.journal,this,Object.keys(this.has))}defaults(){return{}}nonce(){return this.seconds()}encodeURIComponent(...e){return encodeURIComponent(...e)}checkRequiredCredentials(){Object.keys(this.requiredCredentials).map(e=>{if(this.requiredCredentials[e]&&!this[e])throw new T(this.id+" requires `"+e+"`")})}initRestRateLimiter(){this.tokenBucket=this.extend({refillRate:1/this.rateLimit,delay:1,capacity:1,defaultCost:1,maxCapacity:1e3},this.tokenBucket),this.throttle=a(this.tokenBucket),this.executeRestRequest=function(e,t="GET",i,r){let a=o(e,{method:t,headers:i,body:r,agent:this.tunnelAgent||null,timeout:this.timeout}).catch(i=>{if(s)throw new O([this.id,t,e,i.type,i.message].join(" "));throw i}).then(s=>this.handleRestErrors(s,e,t,i,r)).then(s=>this.handleRestResponse(s,e,t,i,r));return l(this.timeout,a).catch(i=>{if(i instanceof C)throw new C(this.id+" "+t+" "+e+" "+i.message+" ("+this.timeout+" ms)");throw i})}}defineRestApi(e,t,i={}){for(const s of Object.keys(e))for(const r of Object.keys(e[s])){let a=e[s][r];for(let e=0;e<a.length;e++){let o=a[e].trim(),n=o.split(/[^a-zA-Z0-9]/),d=r.toUpperCase(),c=r.toLowerCase(),h=this.capitalize(c),l=n.map(this.capitalize).join(""),u=n.map(e=>e.trim().toLowerCase()).filter(e=>e.length>0).join("_");0===l.indexOf(h)&&(l=l.slice(h.length)),0===u.indexOf(c)&&(u=u.slice(c.length));let p=s+h+this.capitalize(l),m=s+"_"+c+"_"+u;"suffixes"in i&&("camelcase"in i.suffixes&&(p+=i.suffixes.camelcase),"underscore"in i.suffixes&&(m+=i.suffixes.underscore)),"underscore_suffix"in i&&(m+=i.underscoreSuffix),"camelcase_suffix"in i&&(p+=i.camelcaseSuffix);let f=async e=>this[t](o,s,d,e||{});this[p]=f,this[m]=f}}}fetch(e,t="GET",i,r){return s&&this.userAgent&&("string"==typeof this.userAgent?i=c({"User-Agent":this.userAgent},i):"object"==typeof this.userAgent&&"User-Agent"in this.userAgent&&(i=c(this.userAgent,i))),"function"==typeof this.proxy?(e=this.proxy(e),s&&(i=c({Origin:this.origin},i))):"string"==typeof this.proxy&&(this.proxy.length&&s&&(i=c({Origin:this.origin},i)),e=this.proxy+e),i=c(this.headers,i),this.verbose&&console.log(this.id,t,e,"\nRequest:\n",i,r),this.executeRestRequest(e,t,i,r)}async fetch2(e,t="public",i="GET",s={},r,a){this.enableRateLimit&&await this.throttle();let o=this.sign(e,t,i,s,r,a);return this.fetch(o.url,o.method,o.headers,o.body)}request(e,t="public",i="GET",s={},r,a){return this.fetch2(e,t,i,s,r,a)}handleErrors(e,t,i,s,r,a){}defaultErrorHandler(e,t,i,s,r,a){if(this.verbose&&console.log(this.id,s,i,e,t,a?"\nResponse:\n"+a:""),e>=200&&e<=300)return a;let o=void 0;this.last_http_response=a;let n=a,d=a.match(/\<title\>([^<]+)/i);if(d&&(n=d[1].trim()),[418,429].includes(e))o=v;else if([404,409,422,500,501,502,520,521,522,525].includes(e))o=O;else if([400,403,405,503,530].includes(e)){a.match(/cloudflare|incapsula/i)?o=v:(o=O,n+=" (possible reasons: "+["invalid API keys","bad or old nonce","exchange is down or offline","on maintenance","DDoS protection","rate-limiting"].join(", ")+")")}else o=[408,504].includes(e)?C:[401,511].includes(e)?T:k;throw new o([this.id,s,i,e,t,n].join(" "))}handleRestErrors(e,t,i="GET",s,r){return"string"==typeof e?e:e.text().then(r=>{const a=[e.status,e.statusText,t,i,s,r];return this.handleErrors(...a),this.defaultErrorHandler(...a)})}handleRestResponse(e,t,i="GET",s,r){try{return this.last_http_response=e,this.parseJsonResponse?(this.last_json_response="string"==typeof e&&e.length>1?JSON.parse(e):e,this.last_json_response):e}catch(s){let r=e.match(/offline|busy|retry|wait|unavailable|maintain|maintenance|maintenancing/i),a=e.match(/cloudflare|incapsula|overload/i);if(s instanceof SyntaxError){let e=O,s="not accessible from this location at the moment";throw r&&(s="offline, on maintenance or unreachable from this location at the moment"),a&&(e=v),new e([this.id,i,t,s].join(" "))}throw this.verbose&&console.log(this.id,i,t,"error",s,"response body:\n'"+e+"'"),s}}setMarkets(e,t){let i=Object.values(e).map(e=>d({limits:this.limits,precision:this.precision},this.fees.trading,e));if(this.markets=d(this.markets,p(i,"symbol")),this.marketsById=p(e,"id"),this.markets_by_id=this.marketsById,this.symbols=Object.keys(this.markets).sort(),this.ids=Object.keys(this.markets_by_id).sort(),t)this.currencies=d(t,this.currencies);else{const e=i.filter(e=>"base"in e).map(e=>({id:e.baseId||e.base,code:e.base,precision:e.precision?e.precision.base||e.precision.amount:8})),t=i.filter(e=>"quote"in e).map(e=>({id:e.quoteId||e.quote,code:e.quote,precision:e.precision?e.precision.quote||e.precision.price:8})),s=e.concat(t),r=f(s,"code"),a=Object.keys(r).map(e=>r[e].reduce((e,t)=>e.precision>t.precision?e:t,r[e][0])),o=m(u(a),"code");this.currencies=d(p(o,"code"),this.currencies)}return this.markets}async loadMarkets(e=!1){if(!e&&this.markets)return this.marketsById?this.markets:this.setMarkets(this.markets);const t=await this.fetchMarkets();let i=void 0;return this.has.fetchCurrencies&&(i=await this.fetchCurrencies()),this.setMarkets(t,i)}fetchTickers(e,t={}){throw new g(this.id+" fetchTickers not supported yet")}fetchOrder(e,t,i={}){throw new g(this.id+" fetchOrder not supported yet")}fetchOrders(e,t,i,s={}){throw new g(this.id+" fetchOrders not supported yet")}fetchOpenOrders(e,t,i,s={}){throw new g(this.id+" fetchOpenOrders not supported yet")}fetchClosedOrders(e,t,i,s={}){throw new g(this.id+" fetchClosedOrders not supported yet")}fetchMyTrades(e,t,i,s={}){throw new g(this.id+" fetchMyTrades not supported yet")}fetchCurrencies(){throw new g(this.id+" fetchCurrencies not supported yet")}fetchMarkets(){return new Promise((e,t)=>e(this.markets))}async fetchOrderStatus(e,t){return(await this.fetchOrder(e)).status}account(){return{free:0,used:0,total:0}}commonCurrencyCode(e){return this.substituteCommonCurrencyCodes?"XBT"==e?"BTC":"BCC"==e?"BCH":"DRK"==e?"DASH":e:e}currency(e){if("undefined"==typeof this.currencies)return new k(this.id+" currencies not loaded");if("string"===typeof e&&e in this.currencies)return this.currencies[e];throw new k(this.id+" does not have currency code "+e)}market(e){if("undefined"==typeof this.markets)return new k(this.id+" markets not loaded");if("string"===typeof e&&e in this.markets)return this.markets[e];throw new k(this.id+" does not have market symbol "+e)}marketId(e){return this.market(e).id||e}marketIds(e){return e.map(e=>this.marketId(e))}symbol(e){return this.market(e).symbol||e}extractParams(e){let t,i=/{([a-zA-Z0-9_]+?)}/g,s=[];for(;t=i.exec(e);)s.push(t[1]);return s}implodeParams(e,t){for(let i in t)e=e.replace("{"+i+"}",t[i]);return e}url(e,t={}){let i=this.implodeParams(e,t),s=this.omit(t,this.extractParams(e));return Object.keys(s).length&&(i+="?"+this.urlencode(s)),i}parseBidAsk(e,t=0,i=1){return[parseFloat(e[t]),parseFloat(e[i])]}parseBidsAsks(e,t=0,i=1){return Object.values(e||[]).map(e=>this.parseBidAsk(e,t,i))}async fetchL2OrderBook(e,t={}){let i=await this.fetchOrderBook(e,t);return c(i,{bids:m(y(i.bids),0,!0),asks:m(y(i.asks),0)})}parseOrderBook(e,t,i="bids",s="asks",r=0,a=1){return t=t||this.milliseconds(),{bids:i in e?this.parseBidsAsks(e[i],r,a):[],asks:s in e?this.parseBidsAsks(e[s],r,a):[],timestamp:t,datetime:this.iso8601(t)}}getCurrencyUsedOnOpenOrders(e){return Object.values(this.orders).filter(e=>"open"==e.status).reduce((t,i)=>{let s=i.symbol,r=this.markets[s],a=i.remaining;return e==r.base&&"sell"==i.side?t+a:e==r.quote&&"buy"==i.side?t+(i.cost||i.price*a):t},0)}parseBalance(e){return Object.keys(this.omit(e,"info")).forEach(t=>{if("undefined"==typeof e[t].used)if(this.parseBalanceFromOpenOrders&&"open_orders"in e.info){const i=e.info.open_orders;Object.values(this.orders).filter(e=>"open"==e.status).length==i&&(e[t].used=this.getCurrencyUsedOnOpenOrders(t),e[t].total=e[t].used+e[t].free)}else e[t].used=this.getCurrencyUsedOnOpenOrders(t),e[t].total=e[t].used+e[t].free;["free","used","total"].forEach(i=>{e[i]=e[i]||{},e[i][t]=e[t][i]})}),e}async fetchPartialBalance(e,t={}){return(await this.fetchBalance(t))[e]}fetchFreeBalance(e={}){return this.fetchPartialBalance("free",e)}fetchUsedBalance(e={}){return this.fetchPartialBalance("used",e)}fetchTotalBalance(e={}){return this.fetchPartialBalance("total",e)}filterBySinceLimit(e,t,i){return t&&(e=e.filter(e=>e.timestamp>t)),i&&(e=e.slice(0,i)),e}parseTrades(e,t,i,s){let r=Object.values(e).map(e=>this.parseTrade(e,t));return r=m(r,"timestamp",!0),this.filterBySinceLimit(r,i,s)}parseOrders(e,t,i,s){let r=Object.values(e).map(e=>this.parseOrder(e,t));return this.filterBySinceLimit(r,i,s)}filterOrdersBySymbol(e,t){let i=this.groupBy(e,"symbol");return t?t in i?i[t]:[]:e}parseOHLCV(e,t,i="1m",s,r){return e}parseOHLCVs(e,t,i="1m",s,r){e=Object.values(e);let a=[];for(let o=0;o<e.length&&!(r&&a.length>=r);o++){let n=this.parseOHLCV(e[o],t,i,s,r);s&&n[0]<s||a.push(n)}return a}editLimitBuyOrder(e,t,...i){return this.editLimitOrder(e,t,"buy",...i)}editLimitSellOrder(e,t,...i){return this.editLimitOrder(e,t,"sell",...i)}editLimitOrder(e,t,...i){return this.editOrder(e,t,"limit",...i)}async editOrder(e,t,...i){if(!this.enableRateLimit)throw new k(this.id+" editOrder() requires enableRateLimit = true");return await this.cancelOrder(e,t),this.createOrder(t,...i)}createLimitBuyOrder(e,...t){return this.createOrder(e,"limit","buy",...t)}createLimitSellOrder(e,...t){return this.createOrder(e,"limit","sell",...t)}createMarketBuyOrder(e,t,i={}){return this.createOrder(e,"market","buy",t,void 0,i)}createMarketSellOrder(e,t,i={}){return this.createOrder(e,"market","sell",t,void 0,i)}costToPrecision(e,t){return parseFloat(t).toFixed(this.markets[e].precision.price)}priceToPrecision(e,t){return parseFloat(t).toFixed(this.markets[e].precision.price)}amountToPrecision(e,t){return this.truncate(t,this.markets[e].precision.amount)}amountToLots(e,t){return this.amountToPrecision(e,Math.floor(t/this.markets[e].lot)*this.markets[e].lot)}feeToPrecision(e,t){return parseFloat(t).toFixed(this.markets[e].precision.price)}calculateFee(e,t,i,s,r,a="taker",o={}){let n=this.markets[e],d=n[a],c=parseFloat(this.costToPrecision(e,s*r));return{type:a,currency:n.quote,rate:d,cost:parseFloat(this.feeToPrecision(e,d*c))}}Ymd(e,t=" "){let i=new Date(e),s=i.getUTCFullYear(),r=i.getUTCMonth()+1,a=i.getUTCDate();return r=r<10?"0"+r:r,a=a<10?"0"+a:a,s+"-"+r+"-"+a}YmdHMS(e,t=" "){let i=new Date(e),s=i.getUTCFullYear(),r=i.getUTCMonth()+1,a=i.getUTCDate(),o=i.getUTCHours(),n=i.getUTCMinutes(),d=i.getUTCSeconds();return r=r<10?"0"+r:r,a=a<10?"0"+a:a,o=o<10?"0"+o:o,n=n<10?"0"+n:n,d=d<10?"0"+d:d,s+"-"+r+"-"+a+t+o+":"+n+":"+d}}}).call(t,i(340))},function(e,t,i){!function(t,i){e.exports=i()}(0,function(){var e=e||function(e,t){var i=Object.create||function(){function e(){}return function(t){var i;return e.prototype=t,i=new e,e.prototype=null,i}}(),s={},r=s.lib={},a=r.Base={extend:function(e){var t=i(this);return e&&t.mixIn(e),t.hasOwnProperty("init")&&this.init!==t.init||(t.init=function(){t.$super.init.apply(this,arguments)}),t.init.prototype=t,t.$super=this,t},create:function(){var e=this.extend();return e.init.apply(e,arguments),e},init:function(){},mixIn:function(e){for(var t in e)e.hasOwnProperty(t)&&(this[t]=e[t]);e.hasOwnProperty("toString")&&(this.toString=e.toString)},clone:function(){return this.init.prototype.extend(this)}},o=r.WordArray=a.extend({init:function(e,t){e=this.words=e||[],this.sigBytes=void 0!=t?t:4*e.length},toString:function(e){return(e||d).stringify(this)},concat:function(e){var t=this.words,i=e.words,s=this.sigBytes,r=e.sigBytes;if(this.clamp(),s%4)for(var a=0;a<r;a++){var o=i[a>>>2]>>>24-a%4*8&255;t[s+a>>>2]|=o<<24-(s+a)%4*8}else for(a=0;a<r;a+=4)t[s+a>>>2]=i[a>>>2];return this.sigBytes+=r,this},clamp:function(){var t=this.words,i=this.sigBytes;t[i>>>2]&=4294967295<<32-i%4*8,t.length=e.ceil(i/4)},clone:function(){var e=a.clone.call(this);return e.words=this.words.slice(0),e},random:function(t){for(var i,s=[],r=function(t){t=t;var i=987654321,s=4294967295;return function(){var r=((i=36969*(65535&i)+(i>>16)&s)<<16)+(t=18e3*(65535&t)+(t>>16)&s)&s;return r/=4294967296,(r+=.5)*(e.random()>.5?1:-1)}},a=0;a<t;a+=4){var n=r(4294967296*(i||e.random()));i=987654071*n(),s.push(4294967296*n()|0)}return new o.init(s,t)}}),n=s.enc={},d=n.Hex={stringify:function(e){for(var t=e.words,i=e.sigBytes,s=[],r=0;r<i;r++){var a=t[r>>>2]>>>24-r%4*8&255;s.push((a>>>4).toString(16)),s.push((15&a).toString(16))}return s.join("")},parse:function(e){for(var t=e.length,i=[],s=0;s<t;s+=2)i[s>>>3]|=parseInt(e.substr(s,2),16)<<24-s%8*4;return new o.init(i,t/2)}},c=n.Latin1={stringify:function(e){for(var t=e.words,i=e.sigBytes,s=[],r=0;r<i;r++){var a=t[r>>>2]>>>24-r%4*8&255;s.push(String.fromCharCode(a))}return s.join("")},parse:function(e){for(var t=e.length,i=[],s=0;s<t;s++)i[s>>>2]|=(255&e.charCodeAt(s))<<24-s%4*8;return new o.init(i,t)}},h=n.Utf8={stringify:function(e){try{return decodeURIComponent(escape(c.stringify(e)))}catch(e){throw new Error("Malformed UTF-8 data")}},parse:function(e){return c.parse(unescape(encodeURIComponent(e)))}},l=r.BufferedBlockAlgorithm=a.extend({reset:function(){this._data=new o.init,this._nDataBytes=0},_append:function(e){"string"==typeof e&&(e=h.parse(e)),this._data.concat(e),this._nDataBytes+=e.sigBytes},_process:function(t){var i=this._data,s=i.words,r=i.sigBytes,a=this.blockSize,n=r/(4*a),d=(n=t?e.ceil(n):e.max((0|n)-this._minBufferSize,0))*a,c=e.min(4*d,r);if(d){for(var h=0;h<d;h+=a)this._doProcessBlock(s,h);var l=s.splice(0,d);i.sigBytes-=c}return new o.init(l,c)},clone:function(){var e=a.clone.call(this);return e._data=this._data.clone(),e},_minBufferSize:0}),u=(r.Hasher=l.extend({cfg:a.extend(),init:function(e){this.cfg=this.cfg.extend(e),this.reset()},reset:function(){l.reset.call(this),this._doReset()},update:function(e){return this._append(e),this._process(),this},finalize:function(e){e&&this._append(e);return this._doFinalize()},blockSize:16,_createHelper:function(e){return function(t,i){return new e.init(i).finalize(t)}},_createHmacHelper:function(e){return function(t,i){return new u.HMAC.init(e,i).finalize(t)}}}),s.algo={});return s}(Math);return e})},function(e,t,i){!function(t,s,r){e.exports=s(i(311),i(313))}(0,function(e){e.lib.Cipher||function(t){var i=e,s=i.lib,r=s.Base,a=s.WordArray,o=s.BufferedBlockAlgorithm,n=i.enc,d=(n.Utf8,n.Base64),c=i.algo.EvpKDF,h=s.Cipher=o.extend({cfg:r.extend(),createEncryptor:function(e,t){return this.create(this._ENC_XFORM_MODE,e,t)},createDecryptor:function(e,t){return this.create(this._DEC_XFORM_MODE,e,t)},init:function(e,t,i){this.cfg=this.cfg.extend(i),this._xformMode=e,this._key=t,this.reset()},reset:function(){o.reset.call(this),this._doReset()},process:function(e){return this._append(e),this._process()},finalize:function(e){e&&this._append(e);return this._doFinalize()},keySize:4,ivSize:4,_ENC_XFORM_MODE:1,_DEC_XFORM_MODE:2,_createHelper:function(){function e(e){return"string"==typeof e?k:b}return function(t){return{encrypt:function(i,s,r){return e(s).encrypt(t,i,s,r)},decrypt:function(i,s,r){return e(s).decrypt(t,i,s,r)}}}}()}),l=(s.StreamCipher=h.extend({_doFinalize:function(){return this._process(!0)},blockSize:1}),i.mode={}),u=s.BlockCipherMode=r.extend({createEncryptor:function(e,t){return this.Encryptor.create(e,t)},createDecryptor:function(e,t){return this.Decryptor.create(e,t)},init:function(e,t){this._cipher=e,this._iv=t}}),p=l.CBC=function(){function e(e,i,s){var r=this._iv;if(r){var a=r;this._iv=t}else a=this._prevBlock;for(var o=0;o<s;o++)e[i+o]^=a[o]}var i=u.extend();return i.Encryptor=i.extend({processBlock:function(t,i){var s=this._cipher,r=s.blockSize;e.call(this,t,i,r),s.encryptBlock(t,i),this._prevBlock=t.slice(i,i+r)}}),i.Decryptor=i.extend({processBlock:function(t,i){var s=this._cipher,r=s.blockSize,a=t.slice(i,i+r);s.decryptBlock(t,i),e.call(this,t,i,r),this._prevBlock=a}}),i}(),m=(i.pad={}).Pkcs7={pad:function(e,t){for(var i=4*t,s=i-e.sigBytes%i,r=s<<24|s<<16|s<<8|s,o=[],n=0;n<s;n+=4)o.push(r);var d=a.create(o,s);e.concat(d)},unpad:function(e){var t=255&e.words[e.sigBytes-1>>>2];e.sigBytes-=t}},f=(s.BlockCipher=h.extend({cfg:h.cfg.extend({mode:p,padding:m}),reset:function(){h.reset.call(this);var e=this.cfg,t=e.iv,i=e.mode;if(this._xformMode==this._ENC_XFORM_MODE)var s=i.createEncryptor;else{s=i.createDecryptor;this._minBufferSize=1}this._mode&&this._mode.__creator==s?this._mode.init(this,t&&t.words):(this._mode=s.call(i,this,t&&t.words),this._mode.__creator=s)},_doProcessBlock:function(e,t){this._mode.processBlock(e,t)},_doFinalize:function(){var e=this.cfg.padding;if(this._xformMode==this._ENC_XFORM_MODE){e.pad(this._data,this.blockSize);var t=this._process(!0)}else{t=this._process(!0);e.unpad(t)}return t},blockSize:4}),s.CipherParams=r.extend({init:function(e){this.mixIn(e)},toString:function(e){return(e||this.formatter).stringify(this)}})),y=(i.format={}).OpenSSL={stringify:function(e){var t=e.ciphertext,i=e.salt;if(i)var s=a.create([1398893684,1701076831]).concat(i).concat(t);else s=t;return s.toString(d)},parse:function(e){var t=d.parse(e),i=t.words;if(1398893684==i[0]&&1701076831==i[1]){var s=a.create(i.slice(2,4));i.splice(0,4),t.sigBytes-=16}return f.create({ciphertext:t,salt:s})}},b=s.SerializableCipher=r.extend({cfg:r.extend({format:y}),encrypt:function(e,t,i,s){s=this.cfg.extend(s);var r=e.createEncryptor(i,s),a=r.finalize(t),o=r.cfg;return f.create({ciphertext:a,key:i,iv:o.iv,algorithm:e,mode:o.mode,padding:o.padding,blockSize:e.blockSize,formatter:s.format})},decrypt:function(e,t,i,s){s=this.cfg.extend(s),t=this._parse(t,s.format);return e.createDecryptor(i,s).finalize(t.ciphertext)},_parse:function(e,t){return"string"==typeof e?t.parse(e,this):e}}),w=(i.kdf={}).OpenSSL={execute:function(e,t,i,s){s||(s=a.random(8));var r=c.create({keySize:t+i}).compute(e,s),o=a.create(r.words.slice(t),4*i);return r.sigBytes=4*t,f.create({key:r,iv:o,salt:s})}},k=s.PasswordBasedCipher=b.extend({cfg:b.cfg.extend({kdf:w}),encrypt:function(e,t,i,s){var r=(s=this.cfg.extend(s)).kdf.execute(i,e.keySize,e.ivSize);s.iv=r.iv;var a=b.encrypt.call(this,e,t,r.key,s);return a.mixIn(r),a},decrypt:function(e,t,i,s){s=this.cfg.extend(s),t=this._parse(t,s.format);var r=s.kdf.execute(i,e.keySize,e.ivSize,t.salt);s.iv=r.iv;return b.decrypt.call(this,e,t,r.key,s)}})}()})},function(e,t,i){!function(t,s,r){e.exports=s(i(311),i(321),i(322))}(0,function(e){return function(){var t=e,i=t.lib,s=i.Base,r=i.WordArray,a=t.algo,o=a.MD5,n=a.EvpKDF=s.extend({cfg:s.extend({keySize:4,hasher:o,iterations:1}),init:function(e){this.cfg=this.cfg.extend(e)},compute:function(e,t){for(var i=this.cfg,s=i.hasher.create(),a=r.create(),o=a.words,n=i.keySize,d=i.iterations;o.length<n;){c&&s.update(c);var c=s.update(e).finalize(t);s.reset();for(var h=1;h<d;h++)c=s.finalize(c),s.reset();a.concat(c)}return a.sigBytes=4*n,a}});t.EvpKDF=function(e,t,i){return n.create(i).compute(e,t)}}(),e.EvpKDF})},function(e,t,i){!function(t,s){e.exports=s(i(311))}(0,function(e){return function(){var t=e,i=t.lib.WordArray;t.enc.Base64={stringify:function(e){var t=e.words,i=e.sigBytes,s=this._map;e.clamp();for(var r=[],a=0;a<i;a+=3)for(var o=(t[a>>>2]>>>24-a%4*8&255)<<16|(t[a+1>>>2]>>>24-(a+1)%4*8&255)<<8|t[a+2>>>2]>>>24-(a+2)%4*8&255,n=0;n<4&&a+.75*n<i;n++)r.push(s.charAt(o>>>6*(3-n)&63));var d=s.charAt(64);if(d)for(;r.length%4;)r.push(d);return r.join("")},parse:function(e){var t=e.length,s=this._map,r=this._reverseMap;if(!r){r=this._reverseMap=[];for(var a=0;a<s.length;a++)r[s.charCodeAt(a)]=a}var o=s.charAt(64);if(o){var n=e.indexOf(o);-1!==n&&(t=n)}return function(e,t,s){for(var r=[],a=0,o=0;o<t;o++)if(o%4){var n=s[e.charCodeAt(o-1)]<<o%4*2,d=s[e.charCodeAt(o)]>>>6-o%4*2;r[a>>>2]|=(n|d)<<24-a%4*8,a++}return i.create(r,a)}(e,t,r)},_map:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/="}}(),e.enc.Base64})},function(e,t,i){!function(t,s){e.exports=s(i(311))}(0,function(e){return function(t){function i(e,t,i,s,r,a,o){var n=e+(t&i|~t&s)+r+o;return(n<<a|n>>>32-a)+t}function s(e,t,i,s,r,a,o){var n=e+(t&s|i&~s)+r+o;return(n<<a|n>>>32-a)+t}function r(e,t,i,s,r,a,o){var n=e+(t^i^s)+r+o;return(n<<a|n>>>32-a)+t}function a(e,t,i,s,r,a,o){var n=e+(i^(t|~s))+r+o;return(n<<a|n>>>32-a)+t}var o=e,n=o.lib,d=n.WordArray,c=n.Hasher,h=o.algo,l=[];!function(){for(var e=0;e<64;e++)l[e]=4294967296*t.abs(t.sin(e+1))|0}();var u=h.MD5=c.extend({_doReset:function(){this._hash=new d.init([1732584193,4023233417,2562383102,271733878])},_doProcessBlock:function(e,t){for(var o=0;o<16;o++){var n=t+o,d=e[n];e[n]=16711935&(d<<8|d>>>24)|4278255360&(d<<24|d>>>8)}var c=this._hash.words,h=e[t+0],u=e[t+1],p=e[t+2],m=e[t+3],f=e[t+4],y=e[t+5],b=e[t+6],w=e[t+7],k=e[t+8],g=e[t+9],T=e[t+10],v=e[t+11],C=e[t+12],O=e[t+13],B=e[t+14],x=e[t+15],_=c[0],S=c[1],E=c[2],F=c[3];S=a(S=a(S=a(S=a(S=r(S=r(S=r(S=r(S=s(S=s(S=s(S=s(S=i(S=i(S=i(S=i(S,E=i(E,F=i(F,_=i(_,S,E,F,h,7,l[0]),S,E,u,12,l[1]),_,S,p,17,l[2]),F,_,m,22,l[3]),E=i(E,F=i(F,_=i(_,S,E,F,f,7,l[4]),S,E,y,12,l[5]),_,S,b,17,l[6]),F,_,w,22,l[7]),E=i(E,F=i(F,_=i(_,S,E,F,k,7,l[8]),S,E,g,12,l[9]),_,S,T,17,l[10]),F,_,v,22,l[11]),E=i(E,F=i(F,_=i(_,S,E,F,C,7,l[12]),S,E,O,12,l[13]),_,S,B,17,l[14]),F,_,x,22,l[15]),E=s(E,F=s(F,_=s(_,S,E,F,u,5,l[16]),S,E,b,9,l[17]),_,S,v,14,l[18]),F,_,h,20,l[19]),E=s(E,F=s(F,_=s(_,S,E,F,y,5,l[20]),S,E,T,9,l[21]),_,S,x,14,l[22]),F,_,f,20,l[23]),E=s(E,F=s(F,_=s(_,S,E,F,g,5,l[24]),S,E,B,9,l[25]),_,S,m,14,l[26]),F,_,k,20,l[27]),E=s(E,F=s(F,_=s(_,S,E,F,O,5,l[28]),S,E,p,9,l[29]),_,S,w,14,l[30]),F,_,C,20,l[31]),E=r(E,F=r(F,_=r(_,S,E,F,y,4,l[32]),S,E,k,11,l[33]),_,S,v,16,l[34]),F,_,B,23,l[35]),E=r(E,F=r(F,_=r(_,S,E,F,u,4,l[36]),S,E,f,11,l[37]),_,S,w,16,l[38]),F,_,T,23,l[39]),E=r(E,F=r(F,_=r(_,S,E,F,O,4,l[40]),S,E,h,11,l[41]),_,S,m,16,l[42]),F,_,b,23,l[43]),E=r(E,F=r(F,_=r(_,S,E,F,g,4,l[44]),S,E,C,11,l[45]),_,S,x,16,l[46]),F,_,p,23,l[47]),E=a(E,F=a(F,_=a(_,S,E,F,h,6,l[48]),S,E,w,10,l[49]),_,S,B,15,l[50]),F,_,y,21,l[51]),E=a(E,F=a(F,_=a(_,S,E,F,C,6,l[52]),S,E,m,10,l[53]),_,S,T,15,l[54]),F,_,u,21,l[55]),E=a(E,F=a(F,_=a(_,S,E,F,k,6,l[56]),S,E,x,10,l[57]),_,S,b,15,l[58]),F,_,O,21,l[59]),E=a(E,F=a(F,_=a(_,S,E,F,f,6,l[60]),S,E,v,10,l[61]),_,S,p,15,l[62]),F,_,g,21,l[63]),c[0]=c[0]+_|0,c[1]=c[1]+S|0,c[2]=c[2]+E|0,c[3]=c[3]+F|0},_doFinalize:function(){var e=this._data,i=e.words,s=8*this._nDataBytes,r=8*e.sigBytes;i[r>>>5]|=128<<24-r%32;var a=t.floor(s/4294967296),o=s;i[15+(r+64>>>9<<4)]=16711935&(a<<8|a>>>24)|4278255360&(a<<24|a>>>8),i[14+(r+64>>>9<<4)]=16711935&(o<<8|o>>>24)|4278255360&(o<<24|o>>>8),e.sigBytes=4*(i.length+1),this._process();for(var n=this._hash,d=n.words,c=0;c<4;c++){var h=d[c];d[c]=16711935&(h<<8|h>>>24)|4278255360&(h<<24|h>>>8)}return n},clone:function(){var e=c.clone.call(this);return e._hash=this._hash.clone(),e}});o.MD5=c._createHelper(u),o.HmacMD5=c._createHmacHelper(u)}(Math),e.MD5})},function(e,t,i){"use strict";const s=i(310),{ExchangeError:r}=i(309);e.exports=class extends s{describe(){return this.deepExtend(super.describe(),{id:"foxbit",name:"FoxBit",countries:"BR",hasCORS:!1,rateLimit:1e3,version:"v1",urls:{logo:"https://user-images.githubusercontent.com/1294454/27991413-11b40d42-647f-11e7-91ee-78ced874dd09.jpg",api:{public:"https://api.blinktrade.com/api",private:"https://api.blinktrade.com/tapi"},www:"https://foxbit.exchange",doc:"https://blinktrade.com/docs"},comment:"Blinktrade API",api:{public:{get:["{currency}/ticker","{currency}/orderbook","{currency}/trades"]},private:{post:["D","F","U2","U4","U6","U18","U24","U26","U30","U34","U70"]}},markets:{"BTC/VEF":{id:"BTCVEF",symbol:"BTC/VEF",base:"BTC",quote:"VEF",brokerId:1,broker:"SurBitcoin"},"BTC/VND":{id:"BTCVND",symbol:"BTC/VND",base:"BTC",quote:"VND",brokerId:3,broker:"VBTC"},"BTC/BRL":{id:"BTCBRL",symbol:"BTC/BRL",base:"BTC",quote:"BRL",brokerId:4,broker:"FoxBit"},"BTC/PKR":{id:"BTCPKR",symbol:"BTC/PKR",base:"BTC",quote:"PKR",brokerId:8,broker:"UrduBit"},"BTC/CLP":{id:"BTCCLP",symbol:"BTC/CLP",base:"BTC",quote:"CLP",brokerId:9,broker:"ChileBit"}}})}fetchBalance(e={}){return this.privatePostU2({BalanceReqID:this.nonce()})}async fetchOrderBook(e,t={}){let i=this.market(e),s=await this.publicGetCurrencyOrderbook(this.extend({currency:i.quote,crypto_currency:i.base},t));return this.parseOrderBook(s)}async fetchTicker(e,t={}){let i=this.market(e),s=await this.publicGetCurrencyTicker(this.extend({currency:i.quote,crypto_currency:i.base},t)),r=this.milliseconds(),a="vol_"+i.quote.toLowerCase();return{symbol:e,timestamp:r,datetime:this.iso8601(r),high:parseFloat(s.high),low:parseFloat(s.low),bid:parseFloat(s.buy),ask:parseFloat(s.sell),vwap:void 0,open:void 0,close:void 0,first:void 0,last:parseFloat(s.last),change:void 0,percentage:void 0,average:void 0,baseVolume:parseFloat(s.vol),quoteVolume:parseFloat(s[a]),info:s}}parseTrade(e,t){let i=1e3*e.date;return{id:e.tid,info:e,timestamp:i,datetime:this.iso8601(i),symbol:t.symbol,type:void 0,side:e.side,price:e.price,amount:e.amount}}async fetchTrades(e,t,i,s={}){let r=this.market(e),a=await this.publicGetCurrencyTrades(this.extend({currency:r.quote,crypto_currency:r.base},s));return this.parseTrades(a,r,t,i)}async createOrder(e,t,i,s,a,o={}){if("market"==t)throw new r(this.id+" allows limit orders only");let n=this.market(e),d="buy"==i?"1":"2",c={ClOrdID:this.nonce(),Symbol:n.id,Side:d,OrdType:"2",Price:a,OrderQty:s,BrokerID:n.brokerId},h=await this.privatePostD(this.extend(c,o));return{info:h,id:this.indexBy(h.Responses,"MsgType")[8].OrderID}}async cancelOrder(e,t,i={}){return await this.privatePostF(this.extend({ClOrdID:e},i))}sign(e,t="public",i="GET",s={},r,a){let o=this.urls.api[t]+"/"+this.version+"/"+this.implodeParams(e,s),n=this.omit(s,this.extractParams(e));if("public"==t)Object.keys(n).length&&(o+="?"+this.urlencode(n));else{this.checkRequiredCredentials();let t=this.nonce().toString(),i=this.extend({MsgType:e},n);a=this.json(i),r={APIKey:this.apiKey,Nonce:t,Signature:this.hmac(this.encode(t),this.encode(this.secret)),"Content-Type":"application/json"}}return{url:o,method:i,body:a,headers:r}}async request(e,t="public",i="GET",s={},a,o){let n=await this.fetch2(e,t,i,s,a,o);if("Status"in n&&200!=n.Status)throw new r(this.id+" "+this.json(n));return n}}},function(e,t,i){"use strict";const s=i(310),{ExchangeError:r,InsufficientFunds:a,OrderNotFound:o,DDoSProtection:n}=i(309);e.exports=class extends s{describe(){return this.deepExtend(super.describe(),{id:"liqui",name:"Liqui",countries:"UA",rateLimit:2500,version:"3",hasCORS:!1,hasFetchOrder:!0,hasFetchOrders:!0,hasFetchOpenOrders:!0,hasFetchClosedOrders:!0,hasFetchTickers:!0,hasFetchMyTrades:!0,hasWithdraw:!0,has:{fetchOrder:!0,fetchOrders:"emulated",fetchOpenOrders:!0,fetchClosedOrders:"emulated",fetchTickers:!0,fetchMyTrades:!0,withdraw:!0},urls:{logo:"https://user-images.githubusercontent.com/1294454/27982022-75aea828-63a0-11e7-9511-ca584a8edd74.jpg",api:{public:"https://api.liqui.io/api",private:"https://api.liqui.io/tapi"},www:"https://liqui.io",doc:"https://liqui.io/api",fees:"https://liqui.io/fee"},api:{public:{get:["info","ticker/{pair}","depth/{pair}","trades/{pair}"]},private:{post:["getInfo","Trade","ActiveOrders","OrderInfo","CancelOrder","TradeHistory","TransHistory","CoinDepositAddress","WithdrawCoin","CreateCoupon","RedeemCoupon"]}},fees:{trading:{maker:.001,taker:.0025},funding:0}})}calculateFee(e,t,i,s,r,a="taker",o={}){let n=this.markets[e],d="quote",c=n[a],h=parseFloat(this.costToPrecision(e,s*c));return"sell"==i?h*=r:d="base",{type:a,currency:n[d],rate:c,cost:h}}commonCurrencyCode(e){return this.substituteCommonCurrencyCodes?"XBT"==e?"BTC":"BCC"==e?"BCH":"DRK"==e?"DASH":"DSH"==e?"DASH":e:e}getBaseQuoteFromMarketId(e){let t=e.toUpperCase(),[i,s]=t.split("_");return i=this.commonCurrencyCode(i),s=this.commonCurrencyCode(s),[i,s]}async fetchMarkets(){let e=(await this.publicGetInfo()).pairs,t=Object.keys(e),i=[];for(let s=0;s<t.length;s++){let r=t[s],a=e[r],[o,n]=this.getBaseQuoteFromMarketId(r),d=o+"/"+n,c={amount:this.safeInteger(a,"decimal_places"),price:this.safeInteger(a,"decimal_places")},h={min:this.safeFloat(a,"min_amount"),max:this.safeFloat(a,"max_amount")},l={amount:h,price:{min:this.safeFloat(a,"min_price"),max:this.safeFloat(a,"max_price")},cost:{min:this.safeFloat(a,"min_total")}},u=0==a.hidden;i.push(this.extend(this.fees.trading,{id:r,symbol:d,base:o,quote:n,active:u,taker:a.fee/100,lot:h.min,precision:c,limits:l,info:a}))}return i}async fetchBalance(e={}){await this.loadMarkets();let t=(await this.privatePostGetInfo()).return,i={info:t},s=t.funds,r=Object.keys(s);for(let a=0;a<r.length;a++){let e=r[a],o=e.toUpperCase();o=this.commonCurrencyCode(o);let n=void 0,d=void 0;0==t.open_orders&&(n=s[e],d=0);let c={free:s[e],used:d,total:n};i[o]=c}return this.parseBalance(i)}async fetchOrderBook(e,t={}){await this.loadMarkets();let i=this.market(e),s=await this.publicGetDepthPair(this.extend({pair:i.id},t));if(!(i.id in s))throw new r(this.id+" "+i.symbol+" order book is empty or not available");let a=s[i.id],o=this.parseOrderBook(a);return o.bids=this.sortBy(o.bids,0,!0),o.asks=this.sortBy(o.asks,0),o}parseTicker(e,t){let i=1e3*e.updated,s=void 0;return t&&(s=t.symbol),{symbol:s,timestamp:i,datetime:this.iso8601(i),high:this.safeFloat(e,"high"),low:this.safeFloat(e,"low"),bid:this.safeFloat(e,"buy"),ask:this.safeFloat(e,"sell"),vwap:void 0,open:void 0,close:void 0,first:void 0,last:this.safeFloat(e,"last"),change:void 0,percentage:void 0,average:this.safeFloat(e,"avg"),baseVolume:this.safeFloat(e,"vol_cur"),quoteVolume:this.safeFloat(e,"vol"),info:e}}async fetchTickers(e,t={}){await this.loadMarkets();let i=void 0;i=e?this.marketIds(e):this.ids;let s=await this.publicGetTickerPair(this.extend({pair:i.join("-")},t)),r={},a=Object.keys(s);for(let o=0;o<a.length;o++){let e=a[o],t=s[e],i=this.markets_by_id[e];r[i.symbol]=this.parseTicker(t,i)}return r}async fetchTicker(e,t={}){return(await this.fetchTickers([e],t))[e]}parseTrade(e,t){let i=1e3*e.timestamp,s=e.type;"ask"==s&&(s="sell"),"bid"==s&&(s="buy");let r=this.safeFloat(e,"price");"rate"in e&&(r=this.safeFloat(e,"rate"));let a=this.safeString(e,"tid");"trade_id"in e&&(a=this.safeString(e,"trade_id"));let o=this.safeString(e,this.getOrderIdKey());if("pair"in e){let i=e.pair;t=this.markets_by_id[i]}let n=void 0;t&&(n=t.symbol);let d=e.amount;return{id:a,order:o,timestamp:i,datetime:this.iso8601(i),symbol:n,type:"limit",side:s,price:r,amount:d,fee:void 0,info:e}}async fetchTrades(e,t,i,s={}){await this.loadMarkets();let r=this.market(e),a={pair:r.id};i&&(a.limit=i);let o=await this.publicGetTradesPair(this.extend(a,s));return this.parseTrades(o[r.id],r,t,i)}async createOrder(e,t,i,s,a,o={}){if("market"==t)throw new r(this.id+" allows limit orders only");await this.loadMarkets();let n={pair:this.market(e).id,type:i,amount:this.amountToPrecision(e,s),rate:this.priceToPrecision(e,a)},d=await this.privatePostTrade(this.extend(n,o)),c=this.safeString(d.return,this.getOrderIdKey());c||(c=this.safeString(d.return,"init_order_id"));let h=this.milliseconds();a=parseFloat(a),s=parseFloat(s);let l={id:c,timestamp:h,datetime:this.iso8601(h),status:"open",symbol:e,type:t,side:i,price:a,cost:a*s,amount:s,remaining:s,filled:0,fee:void 0};return this.orders[c]=l,this.extend({info:d},l)}getOrderIdKey(){return"order_id"}async cancelOrder(e,t,i={}){await this.loadMarkets();let s=void 0;try{let t={};t[this.getOrderIdKey()]=e,s=await this.privatePostCancelOrder(this.extend(t,i)),e in this.orders&&(this.orders[e].status="canceled")}catch(e){if(this.last_json_response){let e=this.safeString(this.last_json_response,"error");if(e&&e.indexOf("not found")>=0)throw new o(this.id+" cancelOrder() error: "+this.last_http_response)}throw e}return s}parseOrder(e,t){let i=e.id.toString(),s=e.status;0==s?s="open":1==s?s="closed":2!=s&&3!=s||(s="canceled");let r=1e3*parseInt(e.timestamp_created),a=void 0;t||(t=this.markets_by_id[e.pair]),t&&(a=t.symbol);let o=this.safeFloat(e,"amount"),n=this.safeFloat(e,"start_amount",o);"undefined"==typeof n&&i in this.orders&&(n=this.safeFloat(this.orders[i],"amount"));let d=this.safeFloat(e,"rate"),c=void 0,h=void 0;"undefined"!=typeof n&&"undefined"!=typeof o&&(h=d*(c=n-o));return{info:e,id:i,symbol:a,timestamp:r,datetime:this.iso8601(r),type:"limit",side:e.type,price:d,cost:h,amount:n,remaining:o,filled:c,status:s,fee:void 0}}parseOrders(e,t,i,s){let r=Object.keys(e),a=[];for(let o=0;o<r.length;o++){let i=r[o],s=e[i],n=this.extend(s,{id:i});a.push(this.parseOrder(n,t))}return this.filterBySinceLimit(a,i,s)}async fetchOrder(e,t,i={}){await this.loadMarkets();let s=await this.privatePostOrderInfo(this.extend({order_id:parseInt(e)},i));e=e.toString();let r=this.parseOrder(this.extend({id:e},s.return[e])),a=e in this.orders?this.orders[e]:{};return this.orders[e]=this.extend(a,r),this.orders[e]}async fetchOrders(e,t,i,s={}){if(!e)throw new r(this.id+" fetchOrders requires a symbol");await this.loadMarkets();let a=this.market(e),o={pair:a.id},n=await this.privatePostActiveOrders(this.extend(o,s)),d=[];"return"in n&&(d=this.parseOrders(n.return,a));for(let r=0;r<d.length;r++)this.orders[d[r].id]=d[r];let c=this.indexBy(d,"id"),h=Object.keys(this.orders),l=[];for(let r=0;r<h.length;r++){let t=h[r];if(t in c)this.orders[t]=this.extend(this.orders[t],c[t]);else{let e=this.orders[t];"open"==e.status&&(this.orders[t]=this.extend(e,{status:"closed",cost:e.amount*e.price,filled:e.amount,remaining:0}))}let i=this.orders[t];i.symbol==e&&l.push(i)}return this.filterBySinceLimit(l,t,i)}async fetchOpenOrders(e,t,i,s={}){let r=await this.fetchOrders(e,t,i,s),a=[];for(let o=0;o<r.length;o++)"open"==r[o].status&&a.push(r[o]);return a}async fetchClosedOrders(e,t,i,s={}){let r=await this.fetchOrders(e,t,i,s),a=[];for(let o=0;o<r.length;o++)"closed"==r[o].status&&a.push(r[o]);return a}async fetchMyTrades(e,t,i,s={}){await this.loadMarkets();let r=void 0,a={};e&&(r=this.market(e),a.pair=r.id),i&&(a.count=parseInt(i)),t&&(a.since=parseInt(t/1e3));let o=await this.privatePostTradeHistory(this.extend(a,s)),n=[];return"return"in o&&(n=o.return),this.parseTrades(n,r,t,i)}async withdraw(e,t,i,s={}){await this.loadMarkets();let r=await this.privatePostWithdrawCoin(this.extend({coinName:e,amount:parseFloat(t),address:i},s));return{info:r,id:r.return.tId}}signBodyWithSecret(e){return this.hmac(this.encode(e),this.encode(this.secret),"sha512")}getVersionString(){return"/"+this.version}sign(e,t="public",i="GET",s={},r,a){let o=this.urls.api[t],n=this.omit(s,this.extractParams(e));if("private"==t){this.checkRequiredCredentials();let t=this.nonce();a=this.urlencode(this.extend({nonce:t,method:e},n));let i=this.signBodyWithSecret(a);r={"Content-Type":"application/x-www-form-urlencoded",Key:this.apiKey,Sign:i}}else o+=this.getVersionString()+"/"+this.implodeParams(e,s),Object.keys(n).length&&(o+="?"+this.urlencode(n));return{url:o,method:i,body:a,headers:r}}async request(e,t="public",i="GET",s={},o,d){let c=await this.fetch2(e,t,i,s,o,d);if("success"in c&&!c.success)throw c.error.indexOf("Not enougth")>=0?new a(this.id+" "+this.json(c)):"Requests too often"==c.error?new n(this.id+" "+this.json(c)):"not available"==c.error||"external service unavailable"==c.error?new n(this.id+" "+this.json(c)):new r(this.id+" "+this.json(c));return c}}},function(e,t,i){!function(t,s){e.exports=s(i(311))}(0,function(e){return function(t){var i=e,s=i.lib,r=s.Base,a=s.WordArray,o=i.x64={};o.Word=r.extend({init:function(e,t){this.high=e,this.low=t}}),o.WordArray=r.extend({init:function(e,t){e=this.words=e||[],this.sigBytes=void 0!=t?t:8*e.length},toX32:function(){for(var e=this.words,t=e.length,i=[],s=0;s<t;s++){var r=e[s];i.push(r.high),i.push(r.low)}return a.create(i,this.sigBytes)},clone:function(){for(var e=r.clone.call(this),t=e.words=this.words.slice(0),i=t.length,s=0;s<i;s++)t[s]=t[s].clone();return e}})}(),e})},function(e,t,i){"use strict";const s=i(310),{ExchangeError:r}=i(309);e.exports=class extends s{describe(){return this.deepExtend(super.describe(),{id:"okcoinusd",name:"OKCoin USD",countries:["CN","US"],hasCORS:!1,version:"v1",rateLimit:1e3,hasFetchOHLCV:!0,hasFetchOrder:!0,hasFetchOrders:!0,hasFetchOpenOrders:!0,hasFetchClosedOrders:!0,hasWithdraw:!0,has:{fetchOHLCV:!0,fetchOrder:!0,fetchOrders:!0,fetchOpenOrders:!0,fetchClosedOrders:!0,withdraw:!0},extension:".do",hasFutureMarkets:!1,timeframes:{"1m":"1min","3m":"3min","5m":"5min","15m":"15min","30m":"30min","1h":"1hour","2h":"2hour","4h":"4hour","6h":"6hour","12h":"12hour","1d":"1day","3d":"3day","1w":"1week"},api:{web:{get:["markets/currencies","markets/products"]},public:{get:["depth","exchange_rate","future_depth","future_estimated_price","future_hold_amount","future_index","future_kline","future_price_limit","future_ticker","future_trades","kline","otcs","ticker","trades"]},private:{post:["account_records","batch_trade","borrow_money","borrow_order_info","borrows_info","cancel_borrow","cancel_order","cancel_otc_order","cancel_withdraw","future_batch_trade","future_cancel","future_devolve","future_explosive","future_order_info","future_orders_info","future_position","future_position_4fix","future_trade","future_trades_history","future_userinfo","future_userinfo_4fix","lend_depth","order_fee","order_history","order_info","orders_info","otc_order_history","otc_order_info","repayment","submit_otc_order","trade","trade_history","trade_otc_order","withdraw","withdraw_info","unrepayments_info","userinfo"]}},urls:{logo:"https://user-images.githubusercontent.com/1294454/27766791-89ffb502-5ee5-11e7-8a5b-c5950b68ac65.jpg",api:{web:"https://www.okcoin.com/v2",public:"https://www.okcoin.com/api",private:"https://www.okcoin.com/api"},www:"https://www.okcoin.com",doc:["https://www.okcoin.com/rest_getStarted.html","https://www.npmjs.com/package/okcoin.com"]}})}async fetchMarkets(){let e=(await this.webGetMarketsProducts()).data,t=[];for(let i=0;i<e.length;i++){let s=e[i].symbol,r=s.toUpperCase(),[a,o]=r.split("_"),n=a+"/"+o,d={amount:e[i].maxSizeDigit,price:e[i].maxPriceDigit},c=Math.pow(10,-d.amount),h=this.extend(this.fees.trading,{id:s,symbol:n,base:a,quote:o,info:e[i],type:"spot",spot:!0,future:!1,lot:c,active:!0,precision:d,limits:{amount:{min:e[i].minTradeSize,max:void 0},price:{min:void 0,max:void 0},cost:{min:void 0,max:void 0}}});t.push(h),this.hasFutureMarkets&&"USDT"==h.quote&&t.push(this.extend(h,{quote:"USD",symbol:h.base+"/USD",id:h.id.replace("usdt","usd"),type:"future",spot:!1,future:!0}))}return t}async fetchOrderBook(e,t={}){await this.loadMarkets();let i=this.market(e),s="publicGet",r={symbol:i.id};i.future&&(s+="Future",r.contract_type="this_week"),s+="Depth";let a=await this[s](this.extend(r,t)),o=this.milliseconds();return{bids:a.bids,asks:this.sortBy(a.asks,0),timestamp:o,datetime:this.iso8601(o)}}parseTicker(e,t){let i=e.timestamp,s=void 0;return t&&(s=t.symbol),{symbol:s,timestamp:i,datetime:this.iso8601(i),high:parseFloat(e.high),low:parseFloat(e.low),bid:parseFloat(e.buy),ask:parseFloat(e.sell),vwap:void 0,open:void 0,close:void 0,first:void 0,last:parseFloat(e.last),change:void 0,percentage:void 0,average:void 0,baseVolume:parseFloat(e.vol),quoteVolume:void 0,info:e}}async fetchTicker(e,t={}){await this.loadMarkets();let i=this.market(e),s="publicGet",r={symbol:i.id};i.future&&(s+="Future",r.contract_type="this_week"),s+="Ticker";let a=await this[s](this.extend(r,t)),o=1e3*parseInt(a.date),n=this.extend(a.ticker,{timestamp:o});return this.parseTicker(n,i)}parseTrade(e,t){let i=void 0;return t&&(i=t.symbol),{info:e,timestamp:e.date_ms,datetime:this.iso8601(e.date_ms),symbol:i,id:e.tid.toString(),order:void 0,type:void 0,side:e.type,price:parseFloat(e.price),amount:parseFloat(e.amount)}}async fetchTrades(e,t,i,s={}){await this.loadMarkets();let r=this.market(e),a="publicGet",o={symbol:r.id};r.future&&(a+="Future",o.contract_type="this_week"),a+="Trades";let n=await this[a](this.extend(o,s));return this.parseTrades(n,r,t,i)}async fetchOHLCV(e,t="1m",i,s=1440,r={}){await this.loadMarkets();let a=this.market(e),o="publicGet",n={symbol:a.id,type:this.timeframes[t]};a.future&&(o+="Future",n.contract_type="this_week"),o+="Kline",s&&(n.size=parseInt(s)),n.since=i||this.milliseconds()-864e5;let d=await this[o](this.extend(n,r));return this.parseOHLCVs(d,a,t,i,s)}async fetchBalance(e={}){await this.loadMarkets();let t=await this.privatePostUserinfo(),i=t.info.funds,s={info:t},r=Object.keys(this.currencies);for(let a=0;a<r.length;a++){let e=r[a],t=e.toLowerCase(),o=this.account();o.free=this.safeFloat(i.free,t,0),o.used=this.safeFloat(i.freezed,t,0),o.total=this.sum(o.free,o.used),s[e]=o}return this.parseBalance(s)}async createOrder(e,t,i,s,a,o={}){await this.loadMarkets();let n=this.market(e),d="privatePost",c={symbol:n.id,type:i};if(n.future)d+="Future",c=this.extend(c,{contract_type:"this_week",match_price:0,lever_rate:10,price:a,amount:s});else if("limit"==t)c.price=a,c.amount=s;else if(c.type+="_market","buy"==i){if(c.price=this.safeFloat(o,"cost"),!c.price)throw new r(this.id+" market buy orders require an additional cost parameter, cost = price * amount")}else c.amount=s;o=this.omit(o,"cost"),d+="Trade";let h=await this[d](this.extend(c,o));return{info:h,id:h.order_id.toString()}}async cancelOrder(e,t,i={}){if(!t)throw new r(this.id+" cancelOrder() requires a symbol argument");let s=this.market(t),a={symbol:s.id,order_id:e},o="privatePost";s.future?(o+="FutureCancel",a.contract_type="this_week"):o+="CancelOrder";return await this[o](this.extend(a,i))}parseOrderStatus(e){return-1==e?"canceled":0==e?"open":1==e?"partial":2==e?"closed":4==e?"canceled":e}parseOrder(e,t){let i=void 0,s=void 0;"type"in e&&("buy"==e.type||"sell"==e.type?(i=e.type,s="limit"):(i="buy_market"==e.type?"buy":"sell",s="market"));let r=this.parseOrderStatus(e.status),a=void 0;t||"symbol"in e&&e.symbol in this.markets_by_id&&(t=this.markets_by_id[e.symbol]),t&&(a=t.symbol);let o=void 0,n=this.getCreateDateField();n in e&&(o=e[n]);let d=e.amount,c=e.deal_amount,h=d-c,l=e.avg_price,u=l*c;return{info:e,id:e.order_id,timestamp:o,datetime:this.iso8601(o),symbol:a,type:s,side:i,price:e.price,average:l,cost:u,amount:d,filled:c,remaining:h,status:r,fee:void 0}}getCreateDateField(){return"create_date"}getOrdersField(){return"orders"}async fetchOrder(e,t,i={}){if(!t)throw new r(this.id+"fetchOrders requires a symbol parameter");await this.loadMarkets();let s=this.market(t),a="privatePost",o={order_id:e,symbol:s.id};s.future&&(a+="Future",o.contract_type="this_week"),a+="OrderInfo";let n=await this[a](this.extend(o,i)),d=this.getOrdersField();return this.parseOrder(n[d][0])}async fetchOrders(e,t,i,s={}){if(!e)throw new r(this.id+"fetchOrders requires a symbol parameter");await this.loadMarkets();let a=this.market(e),o="privatePost",n={symbol:a.id},d="order_id"in s;if(a.future){if(o+="FutureOrdersInfo",n.contract_type="this_week",!d)throw new r(this.id+" fetchOrders() requires order_id param for futures market "+e+" (a string of one or more order ids, comma-separated)")}else{let t=void 0;if("type"in s)t=s.type;else{if(!("status"in s))throw new r(this.id+" fetchOrders() requires type param or status param for spot market "+e+' (0 or "open" for unfilled orders, 1 or "closed" for filled orders)');t=s.status}"open"==t&&(t=0),"closed"==t&&(t=1),d?(o+="OrdersInfo",n=this.extend(n,{type:t})):(o+="OrderHistory",n=this.extend(n,{status:t,current_page:1,page_length:200})),s=this.omit(s,["type","status"])}let c=await this[o](this.extend(n,s)),h=this.getOrdersField();return this.parseOrders(c[h],a,t,i)}async fetchOpenOrders(e,t,i,s={}){return await this.fetchOrders(e,void 0,void 0,this.extend({status:0},s))}async fetchClosedOrders(e,t,i,s={}){return await this.fetchOrders(e,void 0,void 0,this.extend({status:1},s))}async withdraw(e,t,i,s={}){await this.loadMarkets();let a={symbol:e.toLowerCase()+"_usd",withdraw_address:i,withdraw_amount:t,target:"address"},o=s;if(!("chargefee"in o))throw new r(this.id+" withdraw() requires a `chargefee` parameter");a.chargefee=o.chargefee,o=this.omit(o,"chargefee");let n=void 0;if(this.password?(a.trade_pwd=this.password,n=this.password):"password"in o?(a.trade_pwd=o.password,o=this.omit(o,"password")):"trade_pwd"in o&&(a.trade_pwd=o.trade_pwd,o=this.omit(o,"trade_pwd")),!n)throw new r(this.id+" withdraw() requires this.password set on the exchange instance or a password / trade_pwd parameter");let d=await this.privatePostWithdraw(this.extend(a,o));return{info:d,id:this.safeString(d,"withdraw_id")}}sign(e,t="public",i="GET",s={},r,a){let o="/";if("web"!=t&&(o+=this.version+"/"),o+=e+this.extension,"private"==t){this.checkRequiredCredentials();let e=this.keysort(this.extend({api_key:this.apiKey},s)),t=this.rawencode(e)+"&secret_key="+this.secret;e.sign=this.hash(this.encode(t)).toUpperCase(),a=this.urlencode(e),r={"Content-Type":"application/x-www-form-urlencoded"}}else Object.keys(s).length&&(o+="?"+this.urlencode(s));return o=this.urls.api[t]+o,{url:o,method:i,body:a,headers:r}}async request(e,t="public",i="GET",s={},a,o){let n=await this.fetch2(e,t,i,s,a,o);if("result"in n&&!n.result)throw new r(this.id+" "+this.json(n));if("error_code"in n)throw new r(this.id+" "+this.json(n));return n}}},function(e,t,i){"use strict";const s=i(341),r=i(365),{RequestTimeout:a}=i(309),o=setTimeout,n=(e,t,i=o,s=Date.now()+t)=>{let r=()=>{},a=!0,d=i(()=>{a=!0;const t=s-Date.now();t>0?r=n(e,t,i,s):e()},t);return function(){a&&(a=!1,clearTimeout(d)),r()}},d=e=>e.length?e.charAt(0).toUpperCase()+e.slice(1):e,c=(...e)=>Object.assign({},...e),h=function(...e){let t=void 0;for(const i of e)if(!i||"object"!=typeof i||i.constructor!==Object&&"constructor"in i)t=i;else{"object"!=typeof t&&(t={});for(const e in i)t[e]=h(t[e],i[e])}return t},l=(e,t)=>{const i={};return Object.values(e).filter(e=>"undefined"!=e[t]).forEach(e=>{"undefined"==typeof i[e[t]]&&(i[e[t]]=[]),i[e[t]].push(e)}),i},u=(e,t,i)=>{if(i){let s=l(e,t);return i in s?s[i]:[]}return e},p=(e,t)=>{const i={};return Object.values(e).filter(e=>"undefined"!=e[t]).forEach(e=>{i[e[t]]=e}),i},m=(e,t,i=!1)=>(i=i?-1:1,e.sort((e,s)=>e[t]<s[t]?-i:e[t]>s[t]?i:0)),f=(e,t=[])=>{for(let i=0,s=e.length;i<s;i++){const s=e[i];Array.isArray(s)?f(s,t):t.push(s)}return t},y=(e,t,i)=>{if(t in e){if("number"==typeof e[t])return e[t];if("string"==typeof e[t]&&e[t])return parseFloat(e[t])}return i},b=(e,t,i)=>e&&t in e&&e[t]?e[t].toString():i,w=(e,t,i)=>t in e&&e[t]?parseInt(e[t]):i,k=(e,t,i)=>t in e&&e[t]?e[t]:i,g=e=>e?(e^16*Math.random()>>e/4).toString(16):([1e7]+-1e3+-4e3+-8e3+-1e11).replace(/[018]/g,g),T=[],v=e=>s.enc.Latin1.parse(e).toString(s.enc.Base64),C=e=>s.enc.Utf16.parse(e).toString(s.enc.Base64),O=e=>e.replace(/[=]+$/,"").replace(/\+/g,"-").replace(/\//g,"_"),B=(e,t,i="sha256",r="hex")=>{const a="binary"==r?"Latin1":d(r);return s["Hmac"+i.toUpperCase()](e,t).toString(s.enc[d(a)])};e.exports={setTimeout_safe:n,sleep:e=>new Promise(t=>n(t,e)),timeout:async(e,t)=>{let i=()=>{};const s=new Promise(t=>i=n(t,e));try{return await Promise.race([t,s.then(()=>{throw new a("request timed out")})])}finally{i()}},capitalize:d,keysort:e=>{const t={};return Object.keys(e).sort().forEach(i=>t[i]=e[i]),t},extend:c,deepExtend:h,omit:(e,...t)=>{const i=c(e);for(const s of t)if("string"===typeof s)delete i[s];else if(Array.isArray(s))for(const e of s)delete i[e];return i},groupBy:l,indexBy:p,sortBy:m,filterBy:u,flatten:f,unique:e=>e.filter((e,t,i)=>i.indexOf(e)==t),pluck:(e,t)=>e.filter(e=>"undefined"!=typeof e[t]).map(e=>e[t]),urlencode:e=>r.stringify(e),rawencode:e=>r.stringify(e,{encode:!1}),sum:(...e)=>{const t=e.filter(e=>"undefined"!=typeof e);return t.length>0?t.reduce((e,t)=>e+t,0):void 0},decimal:e=>parseFloat(e).toString(),safeFloat:y,safeString:b,safeInteger:w,safeValue:k,ordered:e=>e,aggregate:function(e){let t={};return e.forEach(([e,i])=>{i>0&&(t[e]=(t[e]||0)+i)}),Object.keys(t).map(e=>[parseFloat(e),parseFloat(t[e])])},truncate:(e,t=0)=>{e=function(e){if(Math.abs(e)<1){const t=parseInt(e.toString().split("e-")[1]);t&&(e*=Math.pow(10,t-1),e="0."+new Array(t).join("0")+e.toString().substring(2))}else{let t=parseInt(e.toString().split("+")[1]);t>20&&(t-=20,e/=Math.pow(10,t),e+=new Array(t+1).join("0"))}return e}(e);const i=T[t]||(T[t]=new RegExp("([-]*\\d+\\.\\d{"+t+"})(\\d)")),[,s]=e.toString().match(i)||[null,e];return parseFloat(s)},uuid:g,precisionFromString:e=>{const t=e.replace(/0+$/g,"").split(".");return t.length>1?t[1].length:0},index_by:p,sort_by:m,group_by:l,filter_by:u,safe_float:y,safe_string:b,safe_integer:w,safe_value:k,binaryConcat:(...e)=>e.reduce((e,t)=>e.concat(t)),stringToBinary:e=>{const t=new Uint8Array(e.length);for(let i=0;i<e.length;i++)t[i]=e.charCodeAt(i);return s.lib.WordArray.create(t)},binaryToString:e=>e,stringToBase64:v,utf16ToBase64:C,base64ToBinary:e=>s.enc.Base64.parse(e),base64ToString:e=>s.enc.Base64.parse(e).toString(s.enc.Utf8),urlencodeBase64:O,hash:(e,t="md5",i="hex")=>{const r=s[t.toUpperCase()](e);return"binary"==i?r:r.toString(s.enc[d(i)])},hmac:B,jwt:(e,t,i="HS256",s="sha256")=>{const r=[O(v(JSON.stringify({alg:i,typ:"JWT"}))),O(v(JSON.stringify(e)))].join(".");return[r,O(C(B(r,t,s,"utf16")))].join(".")},json:JSON.stringify,unjson:JSON.parse}},function(e,t,i){!function(t,s){e.exports=s(i(311))}(0,function(e){return function(){var t=e,i=t.lib,s=i.WordArray,r=i.Hasher,a=[],o=t.algo.SHA1=r.extend({_doReset:function(){this._hash=new s.init([1732584193,4023233417,2562383102,271733878,3285377520])},_doProcessBlock:function(e,t){for(var i=this._hash.words,s=i[0],r=i[1],o=i[2],n=i[3],d=i[4],c=0;c<80;c++){if(c<16)a[c]=0|e[t+c];else{var h=a[c-3]^a[c-8]^a[c-14]^a[c-16];a[c]=h<<1|h>>>31}var l=(s<<5|s>>>27)+d+a[c];l+=c<20?1518500249+(r&o|~r&n):c<40?1859775393+(r^o^n):c<60?(r&o|r&n|o&n)-1894007588:(r^o^n)-899497514,d=n,n=o,o=r<<30|r>>>2,r=s,s=l}i[0]=i[0]+s|0,i[1]=i[1]+r|0,i[2]=i[2]+o|0,i[3]=i[3]+n|0,i[4]=i[4]+d|0},_doFinalize:function(){var e=this._data,t=e.words,i=8*this._nDataBytes,s=8*e.sigBytes;return t[s>>>5]|=128<<24-s%32,t[14+(s+64>>>9<<4)]=Math.floor(i/4294967296),t[15+(s+64>>>9<<4)]=i,e.sigBytes=4*t.length,this._process(),this._hash},clone:function(){var e=r.clone.call(this);return e._hash=this._hash.clone(),e}});t.SHA1=r._createHelper(o),t.HmacSHA1=r._createHmacHelper(o)}(),e.SHA1})},function(e,t,i){!function(t,s){e.exports=s(i(311))}(0,function(e){!function(){var t=e,i=t.lib.Base,s=t.enc.Utf8;t.algo.HMAC=i.extend({init:function(e,t){e=this._hasher=new e.init,"string"==typeof t&&(t=s.parse(t));var i=e.blockSize,r=4*i;t.sigBytes>r&&(t=e.finalize(t)),t.clamp();for(var a=this._oKey=t.clone(),o=this._iKey=t.clone(),n=a.words,d=o.words,c=0;c<i;c++)n[c]^=1549556828,d[c]^=909522486;a.sigBytes=o.sigBytes=r,this.reset()},reset:function(){var e=this._hasher;e.reset(),e.update(this._iKey)},update:function(e){return this._hasher.update(e),this},finalize:function(e){var t=this._hasher,i=t.finalize(e);t.reset();return t.finalize(this._oKey.clone().concat(i))}})}()})},function(e,t,i){"use strict";const s=i(310),{ExchangeError:r,OrderNotFound:a}=i(309);e.exports=class extends s{describe(){return this.deepExtend(super.describe(),{id:"acx",name:"ACX",countries:"AU",rateLimit:1e3,version:"v2",hasCORS:!0,hasFetchTickers:!0,hasFetchOHLCV:!0,hasWithdraw:!0,timeframes:{"1m":"1","5m":"5","15m":"15","30m":"30","1h":"60","2h":"120","4h":"240","12h":"720","1d":"1440","3d":"4320","1w":"10080"},urls:{logo:"https://user-images.githubusercontent.com/1294454/30247614-1fe61c74-9621-11e7-9e8c-f1a627afa279.jpg",extension:".json",api:"https://acx.io/api",www:"https://acx.io",doc:"https://acx.io/documents/api_v2"},api:{public:{get:["markets","tickers","tickers/{market}","trades","order_book","depth","k","k_with_pending_trades","timestamp"]},private:{get:["members/me","deposits","deposit","deposit_address","orders","order","trades/my","withdraws","withdraw"],post:["orders","orders/multi","orders/clear","order/delete","withdraw"]}},fees:{trading:{tierBased:!1,percentage:!0,maker:0,taker:0},funding:{tierBased:!1,percentage:!0,withdraw:0}}})}async fetchMarkets(){let e=await this.publicGetMarkets(),t=[];for(let i=0;i<e.length;i++){let s=e[i],r=s.id,a=s.name,[o,n]=a.split("/");o=this.commonCurrencyCode(o),n=this.commonCurrencyCode(n),t.push({id:r,symbol:a,base:o,quote:n,info:s})}return t}async fetchBalance(e={}){await this.loadMarkets();let t=(await this.privateGetMembersMe()).accounts,i={info:t};for(let s=0;s<t.length;s++){let e=t[s],r=e.currency.toUpperCase(),a={free:parseFloat(e.balance),used:parseFloat(e.locked),total:0};a.total=this.sum(a.free,a.used),i[r]=a}return this.parseBalance(i)}async fetchOrderBook(e,t={}){await this.loadMarkets();let i=this.market(e),s=await this.publicGetDepth(this.extend({market:i.id,limit:300},t)),r=1e3*s.timestamp,a=this.parseOrderBook(s,r);return a.bids=this.sortBy(a.bids,0,!0),a.asks=this.sortBy(a.asks,0),a}parseTicker(e,t){let i=1e3*e.at;e=e.ticker;let s=void 0;return t&&(s=t.symbol),{symbol:s,timestamp:i,datetime:this.iso8601(i),high:this.safeFloat(e,"high",void 0),low:this.safeFloat(e,"low",void 0),bid:this.safeFloat(e,"buy",void 0),ask:this.safeFloat(e,"sell",void 0),vwap:void 0,open:void 0,close:void 0,first:void 0,last:this.safeFloat(e,"last",void 0),change:void 0,percentage:void 0,average:void 0,baseVolume:this.safeFloat(e,"vol",void 0),quoteVolume:void 0,info:e}}async fetchTickers(e,t={}){await this.loadMarkets();let i=await this.publicGetTickers(t),s=Object.keys(i),r={};for(let a=0;a<s.length;a++){let e=s[a],t=void 0,o=e;if(e in this.markets_by_id)o=(t=this.markets_by_id[e]).symbol;else{let t=e.slice(0,3),i=e.slice(3,6);t=t.toUpperCase(),i=i.toUpperCase();t=this.commonCurrencyCode(t),i=this.commonCurrencyCode(i)}let n=i[e];r[o]=this.parseTicker(n,t)}return r}async fetchTicker(e,t={}){await this.loadMarkets();let i=this.market(e),s=await this.publicGetTickersMarket(this.extend({market:i.id},t));return this.parseTicker(s,i)}parseTrade(e,t){let i=1e3*e.timestamp,s="bid"==e.type?"buy":"sell";return{info:e,id:e.tid.toString(),timestamp:i,datetime:this.iso8601(i),symbol:t.symbol,type:void 0,side:s,price:e.price,amount:e.amount}}async fetchTrades(e,t,i,s={}){await this.loadMarkets();let r=this.market(e);return await this.publicGetTrades(this.extend({market:r.id},s))}parseOHLCV(e,t,i="1m",s,r){return[1e3*e[0],e[1],e[2],e[3],e[4],e[5]]}async fetchOHLCV(e,t="1m",i,s,r={}){await this.loadMarkets();let a=this.market(e);s||(s=500);let o={market:a.id,period:this.timeframes[t],limit:s};i&&(o.timestamp=i);let n=await this.publicGetK(this.extend(o,r));return this.parseOHLCVs(n,a,t,i,s)}parseOrder(e,t){let i=void 0;if(t)i=t.symbol;else{let t=e.market;i=this.marketsById[t].symbol}let s=this.parse8601(e.created_at),r=e.state,a=void 0;return"done"==r?a="closed":"wait"==r?a="open":"cancel"==r&&(a="canceled"),{id:e.id,timestamp:s,datetime:this.iso8601(s),status:a,symbol:i,type:e.ord_type,side:e.side,price:parseFloat(e.price),amount:parseFloat(e.volume),filled:parseFloat(e.executed_volume),remaining:parseFloat(e.remaining_volume),trades:void 0,fee:void 0,info:e}}async createOrder(e,t,i,s,r,a={}){await this.loadMarkets();let o={market:this.marketId(e),side:i,volume:s.toString(),ord_type:t};"limit"==t&&(o.price=r.toString());let n=await this.privatePostOrders(this.extend(o,a)),d=this.marketsById[n.market];return this.parseOrder(n,d)}async cancelOrder(e,t,i={}){await this.loadMarkets();let s=await this.privatePostOrderDelete({id:e}),r=this.parseOrder(s);if("closed"==r.status)throw new a(this.id+" "+s);return r}async withdraw(e,t,i,s={}){await this.loadMarkets();return{info:await this.privatePostWithdraw(this.extend({currency:e.toLowerCase(),sum:t,address:i},s)),id:void 0}}nonce(){return this.milliseconds()}encodeParams(e){if("orders"in e){let t=e.orders,i=this.urlencode(this.keysort(this.omit(e,"orders")));for(let e=0;e<t.length;e++){let s=t[e],r=Object.keys(s);for(let e=0;e<r.length;e++){let t=r[e];i+="&orders%5B%5D%5B"+t+"%5D="+s[t].toString()}}return i}return this.urlencode(this.keysort(e))}sign(e,t="public",i="GET",s={},r,a){let o="/api/"+this.version+"/"+this.implodeParams(e,s);"extension"in this.urls&&(o+=this.urls.extension);let n=this.omit(s,this.extractParams(e)),d=this.urls.api+o;if("public"==t)Object.keys(n).length&&(d+="?"+this.urlencode(n));else{this.checkRequiredCredentials();let e=this.nonce().toString(),t=this.encodeParams(this.extend({access_key:this.apiKey,tonce:e},s)),n=i+"|"+o+"|"+t,c=t+"&signature="+this.hmac(this.encode(n),this.encode(this.secret));"GET"==i?d+="?"+c:(a=c,r={"Content-Type":"application/x-www-form-urlencoded"})}return{url:d,method:i,body:a,headers:r}}async request(e,t="public",i="GET",s={},a,o){let n=await this.fetch2(e,t,i,s,a,o);if("error"in n)throw new r(this.id+" "+this.json(n));return n}}},function(e,t,i){!function(t,s){e.exports=s(i(311))}(0,function(e){return function(t){var i=e,s=i.lib,r=s.WordArray,a=s.Hasher,o=i.algo,n=[],d=[];!function(){function e(e){for(var i=t.sqrt(e),s=2;s<=i;s++)if(!(e%s))return!1;return!0}function i(e){return 4294967296*(e-(0|e))|0}for(var s=2,r=0;r<64;)e(s)&&(r<8&&(n[r]=i(t.pow(s,.5))),d[r]=i(t.pow(s,1/3)),r++),s++}();var c=[],h=o.SHA256=a.extend({_doReset:function(){this._hash=new r.init(n.slice(0))},_doProcessBlock:function(e,t){for(var i=this._hash.words,s=i[0],r=i[1],a=i[2],o=i[3],n=i[4],h=i[5],l=i[6],u=i[7],p=0;p<64;p++){if(p<16)c[p]=0|e[t+p];else{var m=c[p-15],f=(m<<25|m>>>7)^(m<<14|m>>>18)^m>>>3,y=c[p-2],b=(y<<15|y>>>17)^(y<<13|y>>>19)^y>>>10;c[p]=f+c[p-7]+b+c[p-16]}var w=s&r^s&a^r&a,k=(s<<30|s>>>2)^(s<<19|s>>>13)^(s<<10|s>>>22),g=u+((n<<26|n>>>6)^(n<<21|n>>>11)^(n<<7|n>>>25))+(n&h^~n&l)+d[p]+c[p];u=l,l=h,h=n,n=o+g|0,o=a,a=r,r=s,s=g+(k+w)|0}i[0]=i[0]+s|0,i[1]=i[1]+r|0,i[2]=i[2]+a|0,i[3]=i[3]+o|0,i[4]=i[4]+n|0,i[5]=i[5]+h|0,i[6]=i[6]+l|0,i[7]=i[7]+u|0},_doFinalize:function(){var e=this._data,i=e.words,s=8*this._nDataBytes,r=8*e.sigBytes;return i[r>>>5]|=128<<24-r%32,i[14+(r+64>>>9<<4)]=t.floor(s/4294967296),i[15+(r+64>>>9<<4)]=s,e.sigBytes=4*i.length,this._process(),this._hash},clone:function(){var e=a.clone.call(this);return e._hash=this._hash.clone(),e}});i.SHA256=a._createHelper(h),i.HmacSHA256=a._createHmacHelper(h)}(Math),e.SHA256})},function(e,t,i){!function(t,s,r){e.exports=s(i(311),i(318))}(0,function(e){return function(){function t(){return a.create.apply(a,arguments)}var i=e,s=i.lib.Hasher,r=i.x64,a=r.Word,o=r.WordArray,n=i.algo,d=[t(1116352408,3609767458),t(1899447441,602891725),t(3049323471,3964484399),t(3921009573,2173295548),t(961987163,4081628472),t(1508970993,3053834265),t(2453635748,2937671579),t(2870763221,3664609560),t(3624381080,2734883394),t(310598401,1164996542),t(607225278,1323610764),t(1426881987,3590304994),t(1925078388,4068182383),t(2162078206,991336113),t(2614888103,633803317),t(3248222580,3479774868),t(3835390401,2666613458),t(4022224774,944711139),t(264347078,2341262773),t(604807628,2007800933),t(770255983,1495990901),t(1249150122,1856431235),t(1555081692,3175218132),t(1996064986,2198950837),t(2554220882,3999719339),t(2821834349,766784016),t(2952996808,2566594879),t(3210313671,3203337956),t(3336571891,1034457026),t(3584528711,2466948901),t(113926993,3758326383),t(338241895,168717936),t(666307205,1188179964),t(773529912,1546045734),t(1294757372,1522805485),t(1396182291,2643833823),t(1695183700,2343527390),t(1986661051,1014477480),t(2177026350,1206759142),t(2456956037,344077627),t(2730485921,1290863460),t(2820302411,3158454273),t(3259730800,3505952657),t(3345764771,106217008),t(3516065817,3606008344),t(3600352804,1432725776),t(4094571909,1467031594),t(275423344,851169720),t(430227734,3100823752),t(506948616,1363258195),t(659060556,3750685593),t(883997877,3785050280),t(958139571,3318307427),t(1322822218,3812723403),t(1537002063,2003034995),t(1747873779,3602036899),t(1955562222,1575990012),t(2024104815,1125592928),t(2227730452,2716904306),t(2361852424,442776044),t(2428436474,593698344),t(2756734187,3733110249),t(3204031479,2999351573),t(3329325298,3815920427),t(3391569614,3928383900),t(3515267271,566280711),t(3940187606,3454069534),t(4118630271,4000239992),t(116418474,1914138554),t(174292421,2731055270),t(289380356,3203993006),t(460393269,320620315),t(685471733,587496836),t(852142971,1086792851),t(1017036298,365543100),t(1126000580,2618297676),t(1288033470,3409855158),t(1501505948,4234509866),t(1607167915,987167468),t(1816402316,1246189591)],c=[];!function(){for(var e=0;e<80;e++)c[e]=t()}();var h=n.SHA512=s.extend({_doReset:function(){this._hash=new o.init([new a.init(1779033703,4089235720),new a.init(3144134277,2227873595),new a.init(1013904242,4271175723),new a.init(2773480762,1595750129),new a.init(1359893119,2917565137),new a.init(2600822924,725511199),new a.init(528734635,4215389547),new a.init(1541459225,327033209)])},_doProcessBlock:function(e,t){for(var i=this._hash.words,s=i[0],r=i[1],a=i[2],o=i[3],n=i[4],h=i[5],l=i[6],u=i[7],p=s.high,m=s.low,f=r.high,y=r.low,b=a.high,w=a.low,k=o.high,g=o.low,T=n.high,v=n.low,C=h.high,O=h.low,B=l.high,x=l.low,_=u.high,S=u.low,E=p,F=m,P=f,M=y,A=b,D=w,I=k,G=g,R=T,L=v,q=C,U=O,H=B,N=x,j=_,V=S,K=0;K<80;K++){var X=c[K];if(K<16)var z=X.high=0|e[t+2*K],W=X.low=0|e[t+2*K+1];else{var Y=c[K-15],Q=Y.high,Z=Y.low,J=(Q>>>1|Z<<31)^(Q>>>8|Z<<24)^Q>>>7,$=(Z>>>1|Q<<31)^(Z>>>8|Q<<24)^(Z>>>7|Q<<25),ee=c[K-2],te=ee.high,ie=ee.low,se=(te>>>19|ie<<13)^(te<<3|ie>>>29)^te>>>6,re=(ie>>>19|te<<13)^(ie<<3|te>>>29)^(ie>>>6|te<<26),ae=c[K-7],oe=ae.high,ne=ae.low,de=c[K-16],ce=de.high,he=de.low;z=(z=(z=J+oe+((W=$+ne)>>>0<$>>>0?1:0))+se+((W=W+re)>>>0<re>>>0?1:0))+ce+((W=W+he)>>>0<he>>>0?1:0);X.high=z,X.low=W}var le,ue=R&q^~R&H,pe=L&U^~L&N,me=E&P^E&A^P&A,fe=F&M^F&D^M&D,ye=(E>>>28|F<<4)^(E<<30|F>>>2)^(E<<25|F>>>7),be=(F>>>28|E<<4)^(F<<30|E>>>2)^(F<<25|E>>>7),we=(R>>>14|L<<18)^(R>>>18|L<<14)^(R<<23|L>>>9),ke=(L>>>14|R<<18)^(L>>>18|R<<14)^(L<<23|R>>>9),ge=d[K],Te=ge.high,ve=ge.low,Ce=j+we+((le=V+ke)>>>0<V>>>0?1:0),Oe=be+fe;j=H,V=N,H=q,N=U,q=R,U=L,R=I+(Ce=(Ce=(Ce=Ce+ue+((le=le+pe)>>>0<pe>>>0?1:0))+Te+((le=le+ve)>>>0<ve>>>0?1:0))+z+((le=le+W)>>>0<W>>>0?1:0))+((L=G+le|0)>>>0<G>>>0?1:0)|0,I=A,G=D,A=P,D=M,P=E,M=F,E=Ce+(ye+me+(Oe>>>0<be>>>0?1:0))+((F=le+Oe|0)>>>0<le>>>0?1:0)|0}m=s.low=m+F,s.high=p+E+(m>>>0<F>>>0?1:0),y=r.low=y+M,r.high=f+P+(y>>>0<M>>>0?1:0),w=a.low=w+D,a.high=b+A+(w>>>0<D>>>0?1:0),g=o.low=g+G,o.high=k+I+(g>>>0<G>>>0?1:0),v=n.low=v+L,n.high=T+R+(v>>>0<L>>>0?1:0),O=h.low=O+U,h.high=C+q+(O>>>0<U>>>0?1:0),x=l.low=x+N,l.high=B+H+(x>>>0<N>>>0?1:0),S=u.low=S+V,u.high=_+j+(S>>>0<V>>>0?1:0)},_doFinalize:function(){var e=this._data,t=e.words,i=8*this._nDataBytes,s=8*e.sigBytes;t[s>>>5]|=128<<24-s%32,t[30+(s+128>>>10<<5)]=Math.floor(i/4294967296),t[31+(s+128>>>10<<5)]=i,e.sigBytes=4*t.length,this._process();return this._hash.toX32()},clone:function(){var e=s.clone.call(this);return e._hash=this._hash.clone(),e},blockSize:32});i.SHA512=s._createHelper(h),i.HmacSHA512=s._createHmacHelper(h)}(),e.SHA512})},function(e,t,i){"use strict";var s=Object.prototype.hasOwnProperty,r=function(){for(var e=[],t=0;t<256;++t)e.push("%"+((t<16?"0":"")+t.toString(16)).toUpperCase());return e}();t.arrayToObject=function(e,t){for(var i=t&&t.plainObjects?Object.create(null):{},s=0;s<e.length;++s)"undefined"!==typeof e[s]&&(i[s]=e[s]);return i},t.merge=function(e,i,r){if(!i)return e;if("object"!==typeof i){if(Array.isArray(e))e.push(i);else{if("object"!==typeof e)return[e,i];(r.plainObjects||r.allowPrototypes||!s.call(Object.prototype,i))&&(e[i]=!0)}return e}if("object"!==typeof e)return[e].concat(i);var a=e;return Array.isArray(e)&&!Array.isArray(i)&&(a=t.arrayToObject(e,r)),Array.isArray(e)&&Array.isArray(i)?(i.forEach(function(i,a){s.call(e,a)?e[a]&&"object"===typeof e[a]?e[a]=t.merge(e[a],i,r):e.push(i):e[a]=i}),e):Object.keys(i).reduce(function(e,a){var o=i[a];return s.call(e,a)?e[a]=t.merge(e[a],o,r):e[a]=o,e},a)},t.assign=function(e,t){return Object.keys(t).reduce(function(e,i){return e[i]=t[i],e},e)},t.decode=function(e){try{return decodeURIComponent(e.replace(/\+/g," "))}catch(t){return e}},t.encode=function(e){if(0===e.length)return e;for(var t="string"===typeof e?e:String(e),i="",s=0;s<t.length;++s){var a=t.charCodeAt(s);45===a||46===a||95===a||126===a||a>=48&&a<=57||a>=65&&a<=90||a>=97&&a<=122?i+=t.charAt(s):a<128?i+=r[a]:a<2048?i+=r[192|a>>6]+r[128|63&a]:a<55296||a>=57344?i+=r[224|a>>12]+r[128|a>>6&63]+r[128|63&a]:(s+=1,a=65536+((1023&a)<<10|1023&t.charCodeAt(s)),i+=r[240|a>>18]+r[128|a>>12&63]+r[128|a>>6&63]+r[128|63&a])}return i},t.compact=function(e){for(var t=[{obj:{o:e},prop:"o"}],i=[],s=0;s<t.length;++s)for(var r=t[s],a=r.obj[r.prop],o=Object.keys(a),n=0;n<o.length;++n){var d=o[n],c=a[d];"object"===typeof c&&null!==c&&-1===i.indexOf(c)&&(t.push({obj:a,prop:d}),i.push(c))}return function(e){for(var t;e.length;){var i=e.pop();if(t=i.obj[i.prop],Array.isArray(t)){for(var s=[],r=0;r<t.length;++r)"undefined"!==typeof t[r]&&s.push(t[r]);i.obj[i.prop]=s}}return t}(t)},t.isRegExp=function(e){return"[object RegExp]"===Object.prototype.toString.call(e)},t.isBuffer=function(e){return null!==e&&"undefined"!==typeof e&&!!(e.constructor&&e.constructor.isBuffer&&e.constructor.isBuffer(e))}},function(e,t,i){"use strict";var s=String.prototype.replace,r=/%20/g;e.exports={default:"RFC3986",formatters:{RFC1738:function(e){return s.call(e,r,"+")},RFC3986:function(e){return e}},RFC1738:"RFC1738",RFC3986:"RFC3986"}},function(e,t,i){"use strict";const s=i(310),{ExchangeError:r}=i(309);e.exports=class extends s{describe(){return this.deepExtend(super.describe(),{id:"_1btcxe",name:"1BTCXE",countries:"PA",comment:"Crypto Capital API",hasCORS:!0,hasFetchOHLCV:!0,hasWithdraw:!0,timeframes:{"1d":"1year"},urls:{logo:"https://user-images.githubusercontent.com/1294454/27766049-2b294408-5ecc-11e7-85cc-adaff013dc1a.jpg",api:"https://1btcxe.com/api",www:"https://1btcxe.com",doc:"https://1btcxe.com/api-docs.php"},api:{public:{get:["stats","historical-prices","order-book","transactions"]},private:{post:["balances-and-info","open-orders","user-transactions","btc-deposit-address/get","btc-deposit-address/new","deposits/get","withdrawals/get","orders/new","orders/edit","orders/cancel","orders/status","withdrawals/new"]}},markets:{"BTC/USD":{id:"USD",symbol:"BTC/USD",base:"BTC",quote:"USD"},"BTC/EUR":{id:"EUR",symbol:"BTC/EUR",base:"BTC",quote:"EUR"},"BTC/CNY":{id:"CNY",symbol:"BTC/CNY",base:"BTC",quote:"CNY"},"BTC/RUB":{id:"RUB",symbol:"BTC/RUB",base:"BTC",quote:"RUB"},"BTC/CHF":{id:"CHF",symbol:"BTC/CHF",base:"BTC",quote:"CHF"},"BTC/JPY":{id:"JPY",symbol:"BTC/JPY",base:"BTC",quote:"JPY"},"BTC/GBP":{id:"GBP",symbol:"BTC/GBP",base:"BTC",quote:"GBP"},"BTC/CAD":{id:"CAD",symbol:"BTC/CAD",base:"BTC",quote:"CAD"},"BTC/AUD":{id:"AUD",symbol:"BTC/AUD",base:"BTC",quote:"AUD"},"BTC/AED":{id:"AED",symbol:"BTC/AED",base:"BTC",quote:"AED"},"BTC/BGN":{id:"BGN",symbol:"BTC/BGN",base:"BTC",quote:"BGN"},"BTC/CZK":{id:"CZK",symbol:"BTC/CZK",base:"BTC",quote:"CZK"},"BTC/DKK":{id:"DKK",symbol:"BTC/DKK",base:"BTC",quote:"DKK"},"BTC/HKD":{id:"HKD",symbol:"BTC/HKD",base:"BTC",quote:"HKD"},"BTC/HRK":{id:"HRK",symbol:"BTC/HRK",base:"BTC",quote:"HRK"},"BTC/HUF":{id:"HUF",symbol:"BTC/HUF",base:"BTC",quote:"HUF"},"BTC/ILS":{id:"ILS",symbol:"BTC/ILS",base:"BTC",quote:"ILS"},"BTC/INR":{id:"INR",symbol:"BTC/INR",base:"BTC",quote:"INR"},"BTC/MUR":{id:"MUR",symbol:"BTC/MUR",base:"BTC",quote:"MUR"},"BTC/MXN":{id:"MXN",symbol:"BTC/MXN",base:"BTC",quote:"MXN"},"BTC/NOK":{id:"NOK",symbol:"BTC/NOK",base:"BTC",quote:"NOK"},"BTC/NZD":{id:"NZD",symbol:"BTC/NZD",base:"BTC",quote:"NZD"},"BTC/PLN":{id:"PLN",symbol:"BTC/PLN",base:"BTC",quote:"PLN"},"BTC/RON":{id:"RON",symbol:"BTC/RON",base:"BTC",quote:"RON"},"BTC/SEK":{id:"SEK",symbol:"BTC/SEK",base:"BTC",quote:"SEK"},"BTC/SGD":{id:"SGD",symbol:"BTC/SGD",base:"BTC",quote:"SGD"},"BTC/THB":{id:"THB",symbol:"BTC/THB",base:"BTC",quote:"THB"},"BTC/TRY":{id:"TRY",symbol:"BTC/TRY",base:"BTC",quote:"TRY"},"BTC/ZAR":{id:"ZAR",symbol:"BTC/ZAR",base:"BTC",quote:"ZAR"}}})}async fetchBalance(e={}){let t=(await this.privatePostBalancesAndInfo())["balances-and-info"],i={info:t},s=Object.keys(this.currencies);for(let r=0;r<s.length;r++){let e=s[r],a=this.account();a.free=this.safeFloat(t.available,e,0),a.used=this.safeFloat(t.on_hold,e,0),a.total=this.sum(a.free,a.used),i[e]=a}return this.parseBalance(i)}async fetchOrderBook(e,t={}){let i=await this.publicGetOrderBook(this.extend({currency:this.marketId(e)},t));return this.parseOrderBook(i["order-book"],void 0,"bid","ask","price","order_amount")}async fetchTicker(e,t={}){let i=(await this.publicGetStats(this.extend({currency:this.marketId(e)},t))).stats,s=this.milliseconds();return{symbol:e,timestamp:s,datetime:this.iso8601(s),high:parseFloat(i.max),low:parseFloat(i.min),bid:parseFloat(i.bid),ask:parseFloat(i.ask),vwap:void 0,open:parseFloat(i.open),close:void 0,first:void 0,last:parseFloat(i.last_price),change:parseFloat(i.daily_change),percentage:void 0,average:void 0,baseVolume:void 0,quoteVolume:parseFloat(i.total_btc_traded)}}parseOHLCV(e,t,i="1d",s,r){return[this.parse8601(e.date+" 00:00:00"),void 0,void 0,void 0,parseFloat(e.price),void 0]}async fetchOHLCV(e,t="1d",i,s,r={}){let a=this.market(e),o=await this.publicGetHistoricalPrices(this.extend({currency:a.id,timeframe:this.timeframes[t]},r)),n=this.omit(o["historical-prices"],"request_currency");return this.parseOHLCVs(n,a,t,i,s)}parseTrade(e,t){let i=1e3*parseInt(e.timestamp);return{id:e.id,info:e,timestamp:i,datetime:this.iso8601(i),symbol:t.symbol,order:void 0,type:void 0,side:e.maker_type,price:parseFloat(e.price),amount:parseFloat(e.amount)}}async fetchTrades(e,t,i,s={}){let r=this.market(e),a=await this.publicGetTransactions(this.extend({currency:r.id},s)),o=this.omit(a.transactions,"request_currency");return this.parseTrades(o,r,t,i)}async createOrder(e,t,i,s,r,a={}){let o={side:i,type:t,currency:this.marketId(e),amount:s};"limit"==t&&(o.limit_price=r);let n=await this.privatePostOrdersNew(this.extend(o,a));return{info:n,id:n}}async cancelOrder(e,t,i={}){return await this.privatePostOrdersCancel({id:e})}async withdraw(e,t,i,s={}){await this.loadMarkets();let r=await this.privatePostWithdrawalsNew(this.extend({currency:e,amount:parseFloat(t),address:i},s));return{info:r,id:r.result.uuid}}sign(e,t="public",i="GET",s={},a,o){if("cryptocapital"==this.id)throw new r(this.id+" is an abstract base API for _1btcxe");let n=this.urls.api+"/"+e;if("public"==t)Object.keys(s).length&&(n+="?"+this.urlencode(s));else{this.checkRequiredCredentials();let e=this.extend({api_key:this.apiKey,nonce:this.nonce()},s),t=this.json(e);e.signature=this.hmac(this.encode(t),this.encode(this.secret)),o=this.json(e),a={"Content-Type":"application/json"}}return{url:n,method:i,body:o,headers:a}}async request(e,t="public",i="GET",s={},a,o){let n=await this.fetch2(e,t,i,s,a,o);if("errors"in n){let e=[];for(let t=0;t<n.errors.length;t++){let i=n.errors[t];e.push(i.code+": "+i.message)}throw e=e.join(" "),new r(this.id+" "+e)}return n}}},function(e,t,i){"use strict";const s=i(310),{ExchangeError:r,InsufficientFunds:a,NotSupported:o,InvalidOrder:n,OrderNotFound:d}=i(309);e.exports=class extends s{describe(){return this.deepExtend(super.describe(),{id:"bitfinex",name:"Bitfinex",countries:"VG",version:"v1",rateLimit:1500,hasCORS:!1,hasFetchOrder:!0,hasFetchTickers:!0,hasDeposit:!0,hasWithdraw:!0,hasFetchOHLCV:!0,hasFetchOpenOrders:!0,hasFetchClosedOrders:!0,has:{fetchOHLCV:!0,fetchTickers:!0,fetchOrder:!0,fetchOpenOrders:!0,fetchClosedOrders:!0,fetchMyTrades:!0,withdraw:!0,deposit:!0},timeframes:{"1m":"1m","5m":"5m","15m":"15m","30m":"30m","1h":"1h","3h":"3h","6h":"6h","12h":"12h","1d":"1D","1w":"7D","2w":"14D","1M":"1M"},urls:{logo:"https://user-images.githubusercontent.com/1294454/27766244-e328a50c-5ed2-11e7-947b-041416579bb3.jpg",api:"https://api.bitfinex.com",www:"https://www.bitfinex.com",doc:["https://bitfinex.readme.io/v1/docs","https://github.com/bitfinexcom/bitfinex-api-node"]},api:{v2:{get:["candles/trade:{timeframe}:{symbol}/{section}","candles/trade:{timeframe}:{symbol}/last","candles/trade:{timeframe}:{symbol}/hist"]},public:{get:["book/{symbol}","lendbook/{currency}","lends/{currency}","pubticker/{symbol}","stats/{symbol}","symbols","symbols_details","tickers","today","trades/{symbol}"]},private:{post:["account_fees","account_infos","balances","basket_manage","credits","deposit/new","funding/close","history","history/movements","key_info","margin_infos","mytrades","mytrades_funding","offer/cancel","offer/new","offer/status","offers","offers/hist","order/cancel","order/cancel/all","order/cancel/multi","order/cancel/replace","order/new","order/new/multi","order/status","orders","orders/hist","position/claim","positions","summary","taken_funds","total_taken_funds","transfer","unused_taken_funds","withdraw"]}},fees:{trading:{tierBased:!0,percentage:!0,maker:.001,taker:.002,tiers:{taker:[[0,.002],[5e5,.002],[1e6,.002],[25e5,.002],[5e6,.002],[75e5,.002],[1e7,.0018],[15e6,.0016],[2e7,.14/100],[25e6,.0012],[3e7,.001]],maker:[[0,.001],[5e5,8e-4],[1e6,6e-4],[25e5,4e-4],[5e6,2e-4],[75e5,0],[1e7,0],[15e6,0],[2e7,0],[25e6,0],[3e7,0]]}},funding:{tierBased:!1,percentage:!1,deposit:{BTC:5e-4,IOTA:.5,ETH:.01,BCH:.01,LTC:.1,EOS:.1,XMR:.04,SAN:.1,DASH:.01,ETC:.01,XPR:.02,YYW:.1,NEO:0,ZEC:.1,BTG:0,OMG:.1,DATA:1,QASH:1,ETP:.01,QTUM:.01,EDO:.5,AVT:.5,USDT:0},withdraw:{BTC:5e-4,IOTA:.5,ETH:.01,BCH:.01,LTC:.1,EOS:.1,XMR:.04,SAN:.1,DASH:.01,ETC:.01,XPR:.02,YYW:.1,NEO:0,ZEC:.1,BTG:0,OMG:.1,DATA:1,QASH:1,ETP:.01,QTUM:.01,EDO:.5,AVT:.5,USDT:5}}}})}commonCurrencyCode(e){return"DSH"==e?"DASH":"QTM"==e?"QTUM":"BCC"==e?"CST_BCC":"BCU"==e?"CST_BCU":"IOT"==e?"IOTA":e}async fetchMarkets(){let e=await this.publicGetSymbolsDetails(),t=[];for(let i=0;i<e.length;i++){let s=e[i],r=s.pair.toUpperCase(),a=r.slice(0,3),o=r.slice(3,6),n=this.commonCurrencyCode(a),d=this.commonCurrencyCode(o),c=n+"/"+d,h={price:s.price_precision,amount:s.price_precision};t.push(this.extend(this.fees.trading,{id:r,symbol:c,base:n,quote:d,baseId:a,quoteId:o,active:!0,info:s,precision:h,limits:{amount:{min:parseFloat(s.minimum_order_size),max:parseFloat(s.maximum_order_size)},price:{min:Math.pow(10,-h.price),max:Math.pow(10,h.price)},cost:{min:void 0,max:void 0}}}))}return t}async fetchBalance(e={}){await this.loadMarkets();let t=this.safeString(e,"type","exchange"),i=await this.privatePostBalances(),s={info:i};for(let r=0;r<i.length;r++){let e=i[r];if(e.type==t){let t=e.currency.toUpperCase();t=this.commonCurrencyCode(t);let i=this.account();i.free=parseFloat(e.available),i.total=parseFloat(e.amount),i.used=i.total-i.free,s[t]=i}}return this.parseBalance(s)}async fetchOrderBook(e,t={}){await this.loadMarkets();let i=await this.publicGetBookSymbol(this.extend({symbol:this.marketId(e)},t));return this.parseOrderBook(i,void 0,"bids","asks","price","amount")}async fetchTickers(e,t={}){await this.loadMarkets();let i=await this.publicGetTickers(t),s={};for(let a=0;a<i.length;a++){let e=i[a];if(!("pair"in e))throw new r(this.id+" fetchTickers() response not recognized "+this.json(i));{let t=e.pair;if(!(t in this.markets_by_id))throw new r(this.id+" fetchTickers() failed to recognize symbol "+t+" "+this.json(e));{let i=this.markets_by_id[t];s[i.symbol]=this.parseTicker(e,i)}}}return s}async fetchTicker(e,t={}){await this.loadMarkets();let i=this.market(e),s=await this.publicGetPubtickerSymbol(this.extend({symbol:i.id},t));return this.parseTicker(s,i)}parseTicker(e,t){let i=1e3*parseFloat(e.timestamp),s=void 0;if(t)s=t.symbol;else if("pair"in e){let i=e.pair;if(!(i in this.markets_by_id))throw new r(this.id+" unrecognized ticker symbol "+i+" "+this.json(e));s=(t=this.markets_by_id[i]).symbol}return{symbol:s,timestamp:i,datetime:this.iso8601(i),high:parseFloat(e.high),low:parseFloat(e.low),bid:parseFloat(e.bid),ask:parseFloat(e.ask),vwap:void 0,open:void 0,close:void 0,first:void 0,last:parseFloat(e.last_price),change:void 0,percentage:void 0,average:parseFloat(e.mid),baseVolume:parseFloat(e.volume),quoteVolume:void 0,info:e}}parseTrade(e,t){let i=1e3*parseInt(parseFloat(e.timestamp)),s=e.type.toLowerCase(),r=this.safeString(e,"order_id"),a=parseFloat(e.price),o=parseFloat(e.amount),n=a*o;return{id:e.tid.toString(),info:e,timestamp:i,datetime:this.iso8601(i),symbol:t.symbol,type:void 0,order:r,side:s,price:a,amount:o,cost:n,fee:void 0}}async fetchTrades(e,t,i,s={}){await this.loadMarkets();let r=this.market(e),a=await this.publicGetTradesSymbol(this.extend({symbol:r.id},s));return this.parseTrades(a,r,t,i)}async fetchMyTrades(e,t,i,s={}){await this.loadMarkets();let r=this.market(e),a={symbol:r.id};i&&(a.limit_trades=i),t&&(a.timestamp=parseInt(t/1e3));let o=await this.privatePostMytrades(this.extend(a,s));return this.parseTrades(o,r,t,i)}async createOrder(e,t,i,s,r,a={}){await this.loadMarkets();let o=t;"limit"!=t&&"market"!=t||(o="exchange "+t);let n={symbol:this.marketId(e),amount:s.toString(),side:i,type:o,ocoorder:!1,buy_price_oco:0,sell_price_oco:0};n.price="market"==t?this.nonce().toString():r.toString();let d=await this.privatePostOrderNew(this.extend(n,a));return this.parseOrder(d)}async cancelOrder(e,t,i={}){return await this.loadMarkets(),await this.privatePostOrderCancel({order_id:parseInt(e)})}parseOrder(e,t){let i=e.side,s=e.is_live,r=e.is_cancelled,a=void 0;a=s?"open":r?"canceled":"closed";let o=void 0;if(!t){let i=e.symbol.toUpperCase();i in this.markets_by_id&&(t=this.markets_by_id[i])}t&&(o=t.symbol);let n=e.type;if(n.indexOf("exchange ")>=0){let[t,i]=e.type.split(" ")}let d=parseInt(1e3*parseFloat(e.timestamp));return{info:e,id:e.id.toString(),timestamp:d,datetime:this.iso8601(d),symbol:o,type:n,side:i,price:parseFloat(e.price),average:parseFloat(e.avg_execution_price),amount:parseFloat(e.original_amount),remaining:parseFloat(e.remaining_amount),filled:parseFloat(e.executed_amount),status:a,fee:void 0}}async fetchOpenOrders(e,t,i,s={}){await this.loadMarkets();let r=await this.privatePostOrders(s),a=this.parseOrders(r,void 0,t,i);return e&&(a=this.filterBy(a,"symbol",e)),a}async fetchClosedOrders(e,t,i,s={}){await this.loadMarkets();let r={};i&&(r.limit=i);let a=await this.privatePostOrdersHist(this.extend(r,s)),o=this.parseOrders(a,void 0,t,i);return e&&(o=this.filterBy(o,"symbol",e)),o=this.filterBy(o,"status","closed")}async fetchOrder(e,t,i={}){await this.loadMarkets();let s=await this.privatePostOrderStatus(this.extend({order_id:parseInt(e)},i));return this.parseOrder(s)}parseOHLCV(e,t,i="1m",s,r){return[e[0],e[1],e[3],e[4],e[2],e[5]]}async fetchOHLCV(e,t="1m",i,s,r={}){await this.loadMarkets();let a=this.market(e),o={symbol:"t"+a.id,timeframe:this.timeframes[t]};s&&(o.limit=s),i&&(o.start=i),o=this.extend(o,r);let n=await this.v2GetCandlesTradeTimeframeSymbolHist(o);return this.parseOHLCVs(n,a,t,i,s)}getCurrencyName(e){if("BTC"==e)return"bitcoin";if("LTC"==e)return"litecoin";if("ETH"==e)return"ethereum";if("ETC"==e)return"ethereumc";if("OMNI"==e)return"mastercoin";if("ZEC"==e)return"zcash";if("XMR"==e)return"monero";if("USD"==e)return"wire";if("DASH"==e)return"dash";if("XRP"==e)return"ripple";if("EOS"==e)return"eos";if("BCH"==e)return"bcash";if("USDT"==e)return"tetheruso";throw new o(this.id+" "+e+" not supported for withdrawal")}async createDepositAddress(e,t={}){let i=await this.fetchDepositAddress(e,this.extend({renew:1},t));return{currency:e,address:i.address,status:"ok",info:i.info}}async fetchDepositAddress(e,t={}){let i={method:this.getCurrencyName(e),wallet_name:"exchange",renew:0},s=await this.privatePostDepositNew(this.extend(i,t));return{currency:e,address:s.address,status:"ok",info:s}}async withdraw(e,t,i,s={}){let r={withdraw_type:this.getCurrencyName(e),walletselected:"exchange",amount:t.toString(),address:i},a=(await this.privatePostWithdraw(this.extend(r,s)))[0];return{info:a,id:a.withdrawal_id}}nonce(){return this.milliseconds()}sign(e,t="public",i="GET",s={},r,a){let o="/"+this.implodeParams(e,s);o="v2"==t?"/"+t+o:"/"+this.version+o;let n=this.omit(s,this.extractParams(e)),d=this.urls.api+o;if(("public"==t||e.indexOf("/hist")>=0)&&Object.keys(n).length){let e="?"+this.urlencode(n);d+=e,o+=e}if("private"==t){this.checkRequiredCredentials();let e=this.nonce();n=this.extend({nonce:e.toString(),request:o},n),n=this.json(n),n=this.encode(n);let t=this.stringToBase64(n),i=this.encode(this.secret),s=this.hmac(t,i,"sha384");r={"X-BFX-APIKEY":this.apiKey,"X-BFX-PAYLOAD":this.decode(t),"X-BFX-SIGNATURE":s}}return{url:d,method:i,body:a,headers:r}}handleErrors(e,t,i,s,o,c){if(400==e){if("{"==c[0]){let e=JSON.parse(c).message;if(e.indexOf("Key price should be a decimal number")>=0)throw new n(this.id+" "+e);if(e.indexOf("Invalid order: not enough exchange balance")>=0)throw new a(this.id+" "+e);if(e.indexOf("Invalid order")>=0)throw new n(this.id+" "+e);if(e.indexOf("Order could not be cancelled.")>=0)throw new d(this.id+" "+e)}throw new r(this.id+" "+c)}}async request(e,t="public",i="GET",s={},a,o){let n=await this.fetch2(e,t,i,s,a,o);if("message"in n)throw new r(this.id+" "+this.json(n));return n}}},function(e,t,i){"use strict";const s=i(310),{ExchangeError:r,AuthenticationError:a,InvalidOrder:o,InsufficientFunds:n,OrderNotFound:d,DDoSProtection:c}=i(309);e.exports=class extends s{describe(){return this.deepExtend(super.describe(),{id:"bittrex",name:"Bittrex",countries:"US",version:"v1.1",rateLimit:1500,hasAlreadyAuthenticatedSuccessfully:!1,hasCORS:!1,hasFetchTickers:!0,hasFetchOHLCV:!0,hasFetchOrder:!0,hasFetchOrders:!0,hasFetchClosedOrders:!0,hasFetchOpenOrders:!0,hasFetchMyTrades:!1,hasFetchCurrencies:!0,hasWithdraw:!0,has:{fetchTickers:!0,fetchOHLCV:!0,fetchOrder:!0,fetchOrders:!0,fetchClosedOrders:"emulated",fetchOpenOrders:!0,fetchMyTrades:!1,fetchCurrencies:!0,withdraw:!0},timeframes:{"1m":"oneMin","5m":"fiveMin","30m":"thirtyMin","1h":"hour","1d":"day"},urls:{logo:"https://user-images.githubusercontent.com/1294454/27766352-cf0b3c26-5ed5-11e7-82b7-f3826b7a97d8.jpg",api:{public:"https://bittrex.com/api",account:"https://bittrex.com/api",market:"https://bittrex.com/api",v2:"https://bittrex.com/api/v2.0/pub"},www:"https://bittrex.com",doc:["https://bittrex.com/Home/Api","https://www.npmjs.org/package/node.bittrex.api"],fees:["https://bittrex.com/Fees","https://support.bittrex.com/hc/en-us/articles/115000199651-What-fees-does-Bittrex-charge-"]},api:{v2:{get:["currencies/GetBTCPrice","market/GetTicks","market/GetLatestTick","Markets/GetMarketSummaries","market/GetLatestTick"]},public:{get:["currencies","markethistory","markets","marketsummaries","marketsummary","orderbook","ticker"]},account:{get:["balance","balances","depositaddress","deposithistory","order","orderhistory","withdrawalhistory","withdraw"]},market:{get:["buylimit","buymarket","cancel","openorders","selllimit","sellmarket"]}},fees:{trading:{tierBased:!1,percentage:!0,maker:.0025,taker:.0025},funding:{tierBased:!1,percentage:!1,withdraw:{BTC:.001,LTC:.01,DOGE:2,VTC:.02,PPC:.02,FTC:.2,RDD:2,NXT:2,DASH:.002,POT:.002},deposit:{BTC:0,LTC:0,DOGE:0,VTC:0,PPC:0,FTC:0,RDD:0,NXT:0,DASH:0,POT:0}}}})}costToPrecision(e,t){return this.truncate(parseFloat(t),this.markets[e].precision.price)}feeToPrecision(e,t){return this.truncate(parseFloat(t),this.markets[e].precision.price)}async fetchMarkets(){let e=await this.v2GetMarketsGetMarketSummaries(),t=[];for(let i=0;i<e.result.length;i++){let s=e.result[i].Market,r=s.MarketName,a=s.MarketCurrency,o=s.BaseCurrency,n=(a=this.commonCurrencyCode(a))+"/"+(o=this.commonCurrencyCode(o)),d={amount:8,price:8},c=s.IsActive;t.push(this.extend(this.fees.trading,{id:r,symbol:n,base:a,quote:o,active:c,info:s,lot:Math.pow(10,-d.amount),precision:d,limits:{amount:{min:s.MinTradeSize,max:void 0},price:{min:void 0,max:void 0}}}))}return t}async fetchBalance(e={}){await this.loadMarkets();let t=(await this.accountGetBalances()).result,i={info:t},s=this.indexBy(t,"Currency"),r=Object.keys(s);for(let a=0;a<r.length;a++){let e=r[a],t=this.commonCurrencyCode(e),o=this.account(),n=s[e],d=parseFloat(n.Available),c=parseFloat(n.Balance),h=c-d;o.free=d,o.used=h,o.total=c,i[t]=o}return this.parseBalance(i)}async fetchOrderBook(e,t={}){await this.loadMarkets();let i=await this.publicGetOrderbook(this.extend({market:this.marketId(e),type:"both"},t)),s=i.result;return"type"in t&&("buy"==t.type?s={buy:i.result,sell:[]}:"sell"==t.type&&(s={buy:[],sell:i.result})),this.parseOrderBook(s,void 0,"buy","sell","Rate","Quantity")}parseTicker(e,t){let i=this.parse8601(e.TimeStamp),s=void 0;return t&&(s=t.symbol),{symbol:s,timestamp:i,datetime:this.iso8601(i),high:this.safeFloat(e,"High"),low:this.safeFloat(e,"Low"),bid:this.safeFloat(e,"Bid"),ask:this.safeFloat(e,"Ask"),vwap:void 0,open:void 0,close:void 0,first:void 0,last:this.safeFloat(e,"Last"),change:void 0,percentage:void 0,average:void 0,baseVolume:this.safeFloat(e,"Volume"),quoteVolume:this.safeFloat(e,"BaseVolume"),info:e}}async fetchCurrencies(e={}){let t=(await this.publicGetCurrencies(e)).result,i={};for(let s=0;s<t.length;s++){let e=t[s],r=e.Currency,a=this.commonCurrencyCode(r);i[a]={id:r,code:a,info:e,name:e.CurrencyLong,active:e.IsActive,status:"ok",fee:e.TxFee,precision:8,limits:{amount:{min:Math.pow(10,-8),max:Math.pow(10,8)},price:{min:Math.pow(10,-8),max:Math.pow(10,8)},cost:{min:void 0,max:void 0},withdraw:{min:e.TxFee,max:Math.pow(10,8)}}}}return i}async fetchTickers(e,t={}){await this.loadMarkets();let i=(await this.publicGetMarketsummaries(t)).result,s={};for(let r=0;r<i.length;r++){let e=i[r],t=e.MarketName,a=void 0,o=t;if(t in this.markets_by_id)o=(a=this.markets_by_id[t]).symbol;else{let[e,i]=t.split("-");o=(i=this.commonCurrencyCode(i))+"/"+(e=this.commonCurrencyCode(e))}s[o]=this.parseTicker(e,a)}return s}async fetchTicker(e,t={}){await this.loadMarkets();let i=this.market(e),s=(await this.publicGetMarketsummary(this.extend({market:i.id},t))).result[0];return this.parseTicker(s,i)}parseTrade(e,t){let i=this.parse8601(e.TimeStamp),s=void 0;"BUY"==e.OrderType?s="buy":"SELL"==e.OrderType&&(s="sell");let r=void 0;return"Id"in e&&(r=e.Id.toString()),{id:r,info:e,timestamp:i,datetime:this.iso8601(i),symbol:t.symbol,type:"limit",side:s,price:parseFloat(e.Price),amount:parseFloat(e.Quantity)}}async fetchTrades(e,t,i,s={}){await this.loadMarkets();let a=this.market(e),o=await this.publicGetMarkethistory(this.extend({market:a.id},s));if("result"in o&&"undefined"!=typeof o.result)return this.parseTrades(o.result,a,t,i);throw new r(this.id+" fetchTrades() returned undefined response")}parseOHLCV(e,t,i="1d",s,r){return[this.parse8601(e.T),e.O,e.H,e.L,e.C,e.V]}async fetchOHLCV(e,t="1m",i,s,a={}){await this.loadMarkets();let o=this.market(e),n={tickInterval:this.timeframes[t],marketName:o.id},d=await this.v2GetMarketGetTicks(this.extend(n,a));if("result"in d&&d.result)return this.parseOHLCVs(d.result,o,t,i,s);throw new r(this.id+" returned an empty or unrecognized response: "+this.json(d))}async fetchOpenOrders(e,t,i,s={}){await this.loadMarkets();let r={},a=void 0;e&&(a=this.market(e),r.market=a.id);let o=await this.marketGetOpenorders(this.extend(r,s)),n=this.parseOrders(o.result,a,t,i);return this.filterOrdersBySymbol(n,e)}async createOrder(e,t,i,s,r,a={}){await this.loadMarkets();let o=this.market(e),n="marketGet"+this.capitalize(i)+t,d={market:o.id,quantity:this.amountToPrecision(e,s)};"limit"==t&&(d.rate=this.priceToPrecision(e,r));let c=await this[n](this.extend(d,a));return{info:c,id:c.result.uuid}}async cancelOrder(e,t,i={}){await this.loadMarkets();let s=void 0;try{s=await this.marketGetCancel(this.extend({uuid:e},i))}catch(e){if(this.last_json_response){let e=this.safeString(this.last_json_response,"message");if("ORDER_NOT_OPEN"==e)throw new o(this.id+" cancelOrder() error: "+this.last_http_response);if("UUID_INVALID"==e)throw new d(this.id+" cancelOrder() error: "+this.last_http_response)}throw e}return s}parseOrder(e,t){let i=void 0;"OrderType"in e&&(i="LIMIT_BUY"==e.OrderType?"buy":"sell"),"Type"in e&&(i="LIMIT_BUY"==e.Type?"buy":"sell");let s="open";e.Closed?s="closed":e.CancelInitiated&&(s="canceled");let r=void 0;t||"Exchange"in e&&e.Exchange in this.markets_by_id&&(t=this.markets_by_id[e.Exchange]),t&&(r=t.symbol);let a=void 0;"Opened"in e&&(a=this.parse8601(e.Opened)),"TimeStamp"in e&&(a=this.parse8601(e.TimeStamp));let o=void 0,n=void 0;"Commission"in e?n="Commission":"CommissionPaid"in e&&(n="CommissionPaid"),n&&(o={cost:parseFloat(e[n]),currency:t.quote});let d=this.safeFloat(e,"Limit"),c=this.safeFloat(e,"Price"),h=this.safeFloat(e,"Quantity"),l=this.safeFloat(e,"QuantityRemaining",0),u=h-l;c||d&&h&&(c=d*h),d||c&&u&&(d=c/u);let p=this.safeFloat(e,"PricePerUnit");return{info:e,id:e.OrderUuid,timestamp:a,datetime:this.iso8601(a),symbol:r,type:"limit",side:i,price:d,cost:c,average:p,amount:h,filled:u,remaining:l,status:s,fee:o}}async fetchOrder(e,t,i={}){await this.loadMarkets();let s=void 0;try{s=await this.accountGetOrder(this.extend({uuid:e},i))}catch(e){if(this.last_json_response){if("UUID_INVALID"==this.safeString(this.last_json_response,"message"))throw new d(this.id+" fetchOrder() error: "+this.last_http_response)}throw e}return this.parseOrder(s.result)}async fetchOrders(e,t,i,s={}){await this.loadMarkets();let r={},a=void 0;e&&(a=this.market(e),r.market=a.id);let o=await this.accountGetOrderhistory(this.extend(r,s)),n=this.parseOrders(o.result,a,t,i);return this.filterOrdersBySymbol(n,e)}async fetchClosedOrders(e,t,i,s={}){let r=await this.fetchOrders(e,s);return this.filterBy(r,"status","closed")}currencyId(e){return"BCH"==e?"BCC":e}async fetchDepositAddress(e,t={}){let i=this.currencyId(e),s=await this.accountGetDepositaddress(this.extend({currency:i},t)),r=this.safeString(s.result,"Address"),a=this.safeString(s,"message"),o="ok";return r&&"ADDRESS_GENERATING"!=a||(o="pending"),{currency:e,address:r,status:o,info:s}}async withdraw(e,t,i,s={}){let r=this.currencyId(e),a=await this.accountGetWithdraw(this.extend({currency:r,quantity:t,address:i},s)),o=void 0;return"result"in a&&"uuid"in a.result&&(o=a.result.uuid),{info:a,id:o}}sign(e,t="public",i="GET",s={},r,a){let o=this.urls.api[t]+"/";if("v2"!=t&&(o+=this.version+"/"),"public"==t)o+=t+"/"+i.toLowerCase()+e,Object.keys(s).length&&(o+="?"+this.urlencode(s));else if("v2"==t)o+=e,Object.keys(s).length&&(o+="?"+this.urlencode(s));else{this.checkRequiredCredentials();let a=this.nonce();o+=t+"/",("account"==t&&"withdraw"!=e||"openorders"==e)&&(o+=i.toLowerCase()),o+=e+"?"+this.urlencode(this.extend({nonce:a,apikey:this.apiKey},s));r={apisign:this.hmac(this.encode(o),this.encode(this.secret),"sha512")}}return{url:o,method:i,body:a,headers:r}}handleErrors(e,t,i,s,d,h){if(e>=400&&"{"==h[0]){let e=JSON.parse(h);if("success"in e&&!e.success){if("message"in e){if("INSUFFICIENT_FUNDS"==e.message)throw new n(this.id+" "+this.json(e));if("MIN_TRADE_REQUIREMENT_NOT_MET"==e.message)throw new o(this.id+" "+this.json(e));if("APIKEY_INVALID"==e.message)throw this.hasAlreadyAuthenticatedSuccessfully?new c(this.id+" "+this.json(e)):new a(this.id+" "+this.json(e));if("DUST_TRADE_DISALLOWED_MIN_VALUE_50K_SAT"==e.message)throw new o(this.id+" order cost should be over 50k satoshi "+this.json(e))}throw new r(this.id+" "+this.json(e))}}}async request(e,t="public",i="GET",s={},o,d){let h=await this.fetch2(e,t,i,s,o,d);if("success"in h&&h.success)return"account"!=t&&"market"!=t||(this.hasAlreadyAuthenticatedSuccessfully=!0),h;if("message"in h){if("ADDRESS_GENERATING"==h.message)return h;if("INSUFFICIENT_FUNDS"==h.message)throw new n(this.id+" "+this.json(h));if("APIKEY_INVALID"==h.message)throw this.hasAlreadyAuthenticatedSuccessfully?new c(this.id+" "+this.json(h)):new a(this.id+" "+this.json(h))}throw new r(this.id+" "+this.json(h))}}},function(e,t,i){"use strict";const s=i(310),{ExchangeError:r}=i(309);e.exports=class extends s{describe(){return this.deepExtend(super.describe(),{id:"btcbox",name:"BtcBox",countries:"JP",rateLimit:1e3,version:"v1",hasCORS:!1,hasFetchOHLCV:!1,urls:{logo:"https://user-images.githubusercontent.com/1294454/31275803-4df755a8-aaa1-11e7-9abb-11ec2fad9f2d.jpg",api:"https://www.btcbox.co.jp/api",www:"https://www.btcbox.co.jp/",doc:"https://www.btcbox.co.jp/help/asm"},api:{public:{get:["depth","orders","ticker","allticker"]},private:{post:["balance","trade_add","trade_cancel","trade_list","trade_view","wallet"]}},markets:{"BTC/JPY":{id:"BTC/JPY",symbol:"BTC/JPY",base:"BTC",quote:"JPY"}}})}async fetchBalance(e={}){await this.loadMarkets();let t=await this.privatePostBalance(),i={info:t},s=Object.keys(this.currencies);for(let r=0;r<s.length;r++){let e=s[r],a=e.toLowerCase();"dash"==a&&(a="drk");let o=this.account(),n=a+"_balance",d=a+"_lock";n in t&&(o.free=parseFloat(t[n])),d in t&&(o.used=parseFloat(t[d])),o.total=this.sum(o.free,o.used),i[e]=o}return this.parseBalance(i)}async fetchOrderBook(e,t={}){await this.loadMarkets();let i=this.market(e),s={};this.symbols.length>1&&(s.coin=i.id);let r=await this.publicGetDepth(this.extend(s,t)),a=this.parseOrderBook(r);return a.asks=this.sortBy(a.asks,0),a}parseTicker(e,t){let i=this.milliseconds(),s=void 0;return t&&(s=t.symbol),{symbol:s,timestamp:i,datetime:this.iso8601(i),high:this.safeFloat(e,"high"),low:this.safeFloat(e,"low"),bid:this.safeFloat(e,"buy"),ask:this.safeFloat(e,"sell"),vwap:void 0,open:void 0,close:void 0,first:void 0,last:this.safeFloat(e,"last"),change:void 0,percentage:void 0,average:void 0,baseVolume:this.safeFloat(e,"vol"),quoteVolume:this.safeFloat(e,"volume"),info:e}}async fetchTickers(e,t={}){await this.loadMarkets();let i=await this.publicGetAllticker(t),s=Object.keys(i),r={};for(let a=0;a<s.length;a++){let e=s[a],t=this.markets_by_id[e],o=t.symbol,n=i[e];r[o]=this.parseTicker(n,t)}return r}async fetchTicker(e,t={}){await this.loadMarkets();let i=this.market(e),s={};this.symbols.length>1&&(s.coin=i.id);let r=await this.publicGetTicker(this.extend(s,t));return this.parseTicker(r,i)}parseTrade(e,t){let i=1e3*parseInt(e.date);return{info:e,id:e.tid,order:void 0,timestamp:i,datetime:this.iso8601(i),symbol:t.symbol,type:void 0,side:e.type,price:e.price,amount:e.amount}}async fetchTrades(e,t,i,s={}){await this.loadMarkets();let r=this.market(e),a={};this.symbols.length>1&&(a.coin=r.id);let o=await this.publicGetOrders(this.extend(a,s));return this.parseTrades(o,r,t,i)}async createOrder(e,t,i,s,r,a={}){await this.loadMarkets();let o=this.market(e),n={amount:s,price:r,type:i};this.symbols.length>1&&(n.coin=o.id);let d=await this.privatePostTradeAdd(this.extend(n,a));return{info:d,id:d.id}}async cancelOrder(e,t,i={}){return await this.loadMarkets(),await this.privatePostTradeCancel(this.extend({id:e},i))}sign(e,t="public",i="GET",s={},r,a){let o=this.urls.api+"/"+this.version+"/"+e;if("public"==t)Object.keys(s).length&&(o+="?"+this.urlencode(s));else{this.checkRequiredCredentials();let e=this.nonce().toString(),t=this.extend({key:this.apiKey,nonce:e},s),i=this.urlencode(t),o=this.hash(this.encode(this.secret));t.signature=this.hmac(this.encode(i),this.encode(o)),a=this.urlencode(t),r={"Content-Type":"application/x-www-form-urlencoded"}}return{url:o,method:i,body:a,headers:r}}async request(e,t="public",i="GET",s={},a,o){let n=await this.fetch2(e,t,i,s,a,o);if("result"in n&&!n.result)throw new r(this.id+" "+this.json(n));return n}}},function(e,t,i){"use strict";const s=i(310),{ExchangeError:r}=i(309);e.exports=class extends s{describe(){return this.deepExtend(super.describe(),{id:"btcturk",name:"BTCTurk",countries:"TR",rateLimit:1e3,hasCORS:!0,hasFetchTickers:!0,hasFetchOHLCV:!0,timeframes:{"1d":"1d"},urls:{logo:"https://user-images.githubusercontent.com/1294454/27992709-18e15646-64a3-11e7-9fa2-b0950ec7712f.jpg",api:"https://www.btcturk.com/api",www:"https://www.btcturk.com",doc:"https://github.com/BTCTrader/broker-api-docs"},api:{public:{get:["ohlcdata","orderbook","ticker","trades"]},private:{get:["balance","openOrders","userTransactions"],post:["buy","cancelOrder","sell"]}},markets:{"BTC/TRY":{id:"BTCTRY",symbol:"BTC/TRY",base:"BTC",quote:"TRY",maker:.00236,taker:.00413},"ETH/TRY":{id:"ETHTRY",symbol:"ETH/TRY",base:"ETH",quote:"TRY",maker:.00236,taker:.00413},"ETH/BTC":{id:"ETHBTC",symbol:"ETH/BTC",base:"ETH",quote:"BTC",maker:.00236,taker:.00413}}})}async fetchBalance(e={}){let t=await this.privateGetBalance(),i={info:t},s={free:t.bitcoin_available,used:t.bitcoin_reserved,total:t.bitcoin_balance},r={free:t.money_available,used:t.money_reserved,total:t.money_balance},a=this.symbols[0],o=this.markets[a];return i[o.base]=s,i[o.quote]=r,this.parseBalance(i)}async fetchOrderBook(e,t={}){let i=this.market(e),s=await this.publicGetOrderbook(this.extend({pairSymbol:i.id},t)),r=parseInt(1e3*s.timestamp);return this.parseOrderBook(s,r)}parseTicker(e,t){let i=void 0;t&&(i=t.symbol);let s=1e3*parseInt(e.timestamp);return{symbol:i,timestamp:s,datetime:this.iso8601(s),high:parseFloat(e.high),low:parseFloat(e.low),bid:parseFloat(e.bid),ask:parseFloat(e.ask),vwap:void 0,open:parseFloat(e.open),close:void 0,first:void 0,last:parseFloat(e.last),change:void 0,percentage:void 0,average:parseFloat(e.average),baseVolume:parseFloat(e.volume),quoteVolume:void 0,info:e}}async fetchTickers(e,t={}){await this.loadMarkets();let i=await this.publicGetTicker(t),s={};for(let r=0;r<i.length;r++){let e=i[r],t=e.pair,a=void 0;t in this.markets_by_id&&(t=(a=this.markets_by_id[t]).symbol),s[t]=this.parseTicker(e,a)}return s}async fetchTicker(e,t={}){await this.loadMarkets();let i=await this.fetchTickers(),s=void 0;return e in i&&(s=i[e]),s}parseTrade(e,t){let i=1e3*e.date;return{id:e.tid,info:e,timestamp:i,datetime:this.iso8601(i),symbol:t.symbol,type:void 0,side:void 0,price:e.price,amount:e.amount}}async fetchTrades(e,t,i,s={}){let r=this.market(e),a=await this.publicGetTrades(this.extend({pairSymbol:r.id},s));return this.parseTrades(a,r,t,i)}parseOHLCV(e,t,i="1d",s,r){return[this.parse8601(e.Time),e.Open,e.High,e.Low,e.Close,e.Volume]}async fetchOHLCV(e,t="1d",i,s,r={}){await this.loadMarkets();let a=this.market(e),o={};s&&(o.last=s);let n=await this.publicGetOhlcdata(this.extend(o,r));return this.parseOHLCVs(n,a,t,i,s)}async createOrder(e,t,i,s,r,a={}){let o="privatePost"+this.capitalize(i),n={Type:"buy"==i?"BuyBtc":"SelBtc",IsMarketOrder:"market"==t?1:0};"market"==t?"buy"==i?n.Total=s:n.Amount=s:(n.Price=r,n.Amount=s);let d=await this[o](this.extend(n,a));return{info:d,id:d.id}}async cancelOrder(e,t,i={}){return await this.privatePostCancelOrder({id:e})}nonce(){return this.milliseconds()}sign(e,t="public",i="GET",s={},a,o){if("btctrader"==this.id)throw new r(this.id+" is an abstract base API for BTCExchange, BTCTurk");let n=this.urls.api+"/"+e;if("public"==t)Object.keys(s).length&&(n+="?"+this.urlencode(s));else{this.checkRequiredCredentials();let e=this.nonce().toString();o=this.urlencode(s);let t=this.base64ToBinary(this.secret),i=this.apiKey+e;a={"X-PCK":this.apiKey,"X-Stamp":e,"X-Signature":this.stringToBase64(this.hmac(this.encode(i),t,"sha256","binary")),"Content-Type":"application/x-www-form-urlencoded"}}return{url:n,method:i,body:o,headers:a}}}},function(e,t,i){"use strict";const s=i(310),{ExchangeError:r}=i(309);e.exports=class extends s{describe(){return this.deepExtend(super.describe(),{id:"bter",name:"Bter",countries:["VG","CN"],version:"2",hasCORS:!1,hasFetchTickers:!0,hasWithdraw:!0,urls:{logo:"https://user-images.githubusercontent.com/1294454/27980479-cfa3188c-6387-11e7-8191-93fc4184ba5c.jpg",api:{public:"https://data.bter.com/api",private:"https://api.bter.com/api"},www:"https://bter.com",doc:"https://bter.com/api2"},api:{public:{get:["pairs","marketinfo","marketlist","tickers","ticker/{id}","orderBook/{id}","trade/{id}","tradeHistory/{id}","tradeHistory/{id}/{tid}"]},private:{post:["balances","depositAddress","newAddress","depositsWithdrawals","buy","sell","cancelOrder","cancelAllOrders","getOrder","openOrders","tradeHistory","withdraw"]}}})}async fetchMarkets(){let e=await this.publicGetMarketinfo(),t=this.safeValue(e,"pairs");if(!t)throw new r(this.id+" fetchMarkets got an unrecognized response");let i=[];for(let s=0;s<t.length;s++){let e=t[s],r=Object.keys(e)[0],a=e[r],[o,n]=r.split("_");o=o.toUpperCase(),n=n.toUpperCase();let d=(o=this.commonCurrencyCode(o))+"/"+(n=this.commonCurrencyCode(n)),c={amount:a.decimal_places,price:a.decimal_places},h={amount:{min:a.min_amount,max:void 0},price:{min:void 0,max:void 0}};i.push({id:r,symbol:d,base:o,quote:n,info:e,maker:a.fee/100,taker:a.fee/100,precision:c,limits:h})}return i}async fetchBalance(e={}){await this.loadMarkets();let t=await this.privatePostBalances(),i={info:t},s=Object.keys(this.currencies);for(let r=0;r<s.length;r++){let e=s[r],a=this.commonCurrencyCode(e),o=this.account();"available"in t&&e in t.available&&(o.free=parseFloat(t.available[e])),"locked"in t&&e in t.locked&&(o.used=parseFloat(t.locked[e])),o.total=this.sum(o.free,o.used),i[a]=o}return this.parseBalance(i)}async fetchOrderBook(e,t={}){await this.loadMarkets();let i=await this.publicGetOrderBookId(this.extend({id:this.marketId(e)},t)),s=this.parseOrderBook(i);return s.asks=this.sortBy(s.asks,0),s}parseTicker(e,t){let i=this.milliseconds(),s=void 0;return t&&(s=t.symbol),{symbol:s,timestamp:i,datetime:this.iso8601(i),high:parseFloat(e.high24hr),low:parseFloat(e.low24hr),bid:parseFloat(e.highestBid),ask:parseFloat(e.lowestAsk),vwap:void 0,open:void 0,close:void 0,first:void 0,last:parseFloat(e.last),change:parseFloat(e.percentChange),percentage:void 0,average:void 0,baseVolume:parseFloat(e.quoteVolume),quoteVolume:parseFloat(e.baseVolume),info:e}}async fetchTickers(e,t={}){await this.loadMarkets();let i=await this.publicGetTickers(t),s={},r=Object.keys(i);for(let a=0;a<r.length;a++){let e=r[a],[t,o]=e.split("_"),n=t.toUpperCase(),d=o.toUpperCase(),c=(n=this.commonCurrencyCode(n))+"/"+(d=this.commonCurrencyCode(d)),h=i[e],l=void 0;c in this.markets&&(l=this.markets[c]),e in this.markets_by_id&&(l=this.markets_by_id[e]),s[c]=this.parseTicker(h,l)}return s}async fetchTicker(e,t={}){await this.loadMarkets();let i=this.market(e),s=await this.publicGetTickerId(this.extend({id:i.id},t));return this.parseTicker(s,i)}parseTrade(e,t){let i=this.parse8601(e.date);return{id:e.tradeID,info:e,timestamp:i,datetime:this.iso8601(i),symbol:t.symbol,type:void 0,side:e.type,price:e.rate,amount:this.safeFloat(e,"amount")}}async fetchTrades(e,t,i,s={}){await this.loadMarkets();let r=this.market(e),a=await this.publicGetTradeHistoryId(this.extend({id:r.id},s));return this.parseTrades(a.data,r,t,i)}async createOrder(e,t,i,s,a,o={}){if("market"==t)throw new r(this.id+" allows limit orders only");await this.loadMarkets();let n="privatePost"+this.capitalize(i),d={currencyPair:this.marketId(e),rate:a,amount:s},c=await this[n](this.extend(d,o));return{info:c,id:c.orderNumber}}async cancelOrder(e,t,i={}){return await this.loadMarkets(),await this.privatePostCancelOrder({orderNumber:e})}async withdraw(e,t,i,s={}){await this.loadMarkets();return{info:await this.privatePostWithdraw(this.extend({currency:e.toLowerCase(),amount:t,address:i},s)),id:void 0}}sign(e,t="public",i="GET",s={},r,a){let o="private"==t?t+"/":"",n=this.urls.api[t]+this.version+"/1/"+o+this.implodeParams(e,s),d=this.omit(s,this.extractParams(e));if("public"==t)Object.keys(d).length&&(n+="?"+this.urlencode(d));else{this.checkRequiredCredentials();let e={nonce:this.nonce()};a=this.urlencode(this.extend(e,d));let t=this.hmac(this.encode(a),this.encode(this.secret),"sha512");r={Key:this.apiKey,Sign:t,"Content-Type":"application/x-www-form-urlencoded"}}return{url:n,method:i,body:a,headers:r}}async request(e,t="public",i="GET",s={},a,o){let n=await this.fetch2(e,t,i,s,a,o);if("result"in n&&"true"!=n.result)throw new r(this.id+" "+this.json(n));return n}}},function(e,t,i){"use strict";const s=i(310),{ExchangeError:r}=i(309);e.exports=class extends s{describe(){return this.deepExtend(super.describe(),{id:"zb",name:"ZB",countries:"CN",rateLimit:1e3,version:"v1",hasCORS:!1,hasFetchOrder:!0,urls:{logo:"https://user-images.githubusercontent.com/1294454/32859187-cd5214f0-ca5e-11e7-967d-96568e2e2bd1.jpg",api:{public:"http://api.zb.com/data",private:"https://trade.zb.com/api"},www:"https://trade.zb.com/api",doc:"https://www.zb.com/i/developer"},api:{public:{get:["markets","ticker","depth","trades","kline"]},private:{post:["order","cancelOrder","getOrder","getOrders","getOrdersNew","getOrdersIgnoreTradeType","getUnfinishedOrdersIgnoreTradeType","getAccountInfo","getUserAddress","getWithdrawAddress","getWithdrawRecord","getChargeRecord","getCnyWithdrawRecord","getCnyChargeRecord","withdraw"]}}})}getTradingFeeFromBaseQuote(e,t){let i={BTC:{USDT:0},BCH:{BTC:.001,USDT:.001},LTC:{BTC:.001,USDT:0},ETH:{BTC:.001,USDT:0},ETC:{BTC:.001,USDT:0},BTS:{BTC:.001,USDT:.001},EOS:{BTC:.001,USDT:.001},HSR:{BTC:.001,USDT:.001},QTUM:{BTC:.001,USDT:.001},USDT:{BTC:0}};if(e in i){let s=i[e];if(t in s)return s[t]}}async fetchMarkets(){let e=await this.publicGetMarkets(),t=Object.keys(e),i=[];for(let s=0;s<t.length;s++){let r=t[s],a=e[r],[o,n]=r.split("_"),d=this.commonCurrencyCode(o.toUpperCase()),c=this.commonCurrencyCode(n.toUpperCase()),h=d+"/"+c,l=this.getTradingFeeFromBaseQuote(d,c),u={amount:a.amountScale,price:a.priceScale},p=Math.pow(10,-u.amount);i.push({id:r,symbol:h,baseId:o,quoteId:n,base:d,quote:c,info:a,maker:l,taker:l,lot:p,active:!0,precision:u,limits:{amount:{min:p,max:void 0},price:{min:Math.pow(10,-u.price),max:void 0},cost:{min:0,max:void 0}}})}return i}async fetchBalance(e={}){await this.loadMarkets();let t=(await this.privatePostGetAccountInfo()).result,i={info:t},s=Object.keys(this.currencies);for(let r=0;r<s.length;r++){let e=s[r],a=this.account();e in t.balance&&(a.free=parseFloat(t.balance[e].amount)),e in t.frozen&&(a.used=parseFloat(t.frozen[e].amount)),a.total=this.sum(a.free,a.used),i[e]=a}return this.parseBalance(i)}getMarketFieldName(){return"market"}async fetchOrderBook(e,t={}){await this.loadMarkets();let i=this.market(e),s={};s[this.getMarketFieldName()]=i.id;let r=await this.publicGetDepth(this.extend(s,t)),a=this.milliseconds(),o=void 0,n=void 0;"bids"in r&&(o=r.bids),"asks"in r&&(n=r.asks);let d={bids:o,asks:n,timestamp:a,datetime:this.iso8601(a)};return d.bids&&(d.bids=this.sortBy(d.bids,0,!0)),d.asks&&(d.asks=this.sortBy(d.asks,0)),d}async fetchTicker(e,t={}){await this.loadMarkets();let i=this.market(e),s={};s[this.getMarketFieldName()]=i.id;let r=(await this.publicGetTicker(this.extend(s,t))).ticker,a=this.milliseconds();return{symbol:e,timestamp:a,datetime:this.iso8601(a),high:parseFloat(r.high),low:parseFloat(r.low),bid:parseFloat(r.buy),ask:parseFloat(r.sell),vwap:void 0,open:void 0,close:void 0,first:void 0,last:parseFloat(r.last),change:void 0,percentage:void 0,average:void 0,baseVolume:parseFloat(r.vol),quoteVolume:void 0,info:r}}parseTrade(e,t){let i=1e3*e.date,s="bid"==e.trade_type?"buy":"sell";return{info:e,id:e.tid.toString(),timestamp:i,datetime:this.iso8601(i),symbol:t.symbol,type:void 0,side:s,price:parseFloat(e.price),amount:parseFloat(e.amount)}}async fetchTrades(e,t,i,s={}){await this.loadMarkets();let r=this.market(e),a={};a[this.getMarketFieldName()]=r.id;let o=await this.publicGetTrades(this.extend(a,s));return this.parseTrades(o,r,t,i)}async createOrder(e,t,i,s,r,a={}){await this.loadMarkets();let o="&price="+r.toString();o+="&amount="+s.toString();o+="&tradeType="+("buy"==i?"1":"0"),o+="&currency="+this.marketId(e);let n=await this.privatePostOrder(o);return{info:n,id:n.id}}async cancelOrder(e,t,i={}){await this.loadMarkets();let s="&id="+e.toString();return"currency"in i&&(s+="&currency="+i.currency),await this.privatePostCancelOrder(s)}async fetchOrder(e,t,i={}){await this.loadMarkets();let s="&id="+e.toString();return"currency"in i&&(s+="&currency="+i.currency),await this.privatePostGetOrder(s)}nonce(){return this.milliseconds()}sign(e,t="public",i="GET",s={},r,a){let o=this.urls.api[t];if("public"==t)o+="/"+this.version+"/"+e,Object.keys(s).length&&(o+="?"+this.urlencode(s));else{this.checkRequiredCredentials();let t=s.length,i=this.nonce(),r="method="+e;r+="&accesskey="+this.apiKey,r+=t?s:"";let a=this.hash(this.encode(this.secret),"sha1");o+="/"+e+"?"+r+"&"+("sign="+this.hmac(this.encode(r),this.encode(a),"md5")+"&reqTime="+i.toString())}return{url:o,method:i,body:a,headers:r}}async request(e,t="public",i="GET",s={},a,o){let n=await this.fetch2(e,t,i,s,a,o);if("private"==t&&"code"in n)throw new r(this.id+" "+this.json(n));return n}}},function(e,t,i){"use strict";const s=i(310),{ExchangeError:r}=i(309);e.exports=class extends s{describe(){return this.deepExtend(super.describe(),{id:"fybse",name:"FYB-SE",countries:"SE",hasCORS:!1,rateLimit:1500,urls:{logo:"https://user-images.githubusercontent.com/1294454/27766512-31019772-5edb-11e7-8241-2e675e6797f1.jpg",api:"https://www.fybse.se/api/SEK",www:"https://www.fybse.se",doc:"http://docs.fyb.apiary.io"},api:{public:{get:["ticker","tickerdetailed","orderbook","trades"]},private:{post:["test","getaccinfo","getpendingorders","getorderhistory","cancelpendingorder","placeorder","withdraw"]}},markets:{"BTC/SEK":{id:"SEK",symbol:"BTC/SEK",base:"BTC",quote:"SEK"}}})}async fetchBalance(e={}){let t=await this.privatePostGetaccinfo(),i=parseFloat(t.btcBal),s=this.symbols[0],r=this.markets[s].quote,a=r.toLowerCase()+"Bal",o=parseFloat(t[a]),n={BTC:{free:i,used:0,total:i}};return n[r]={free:o,used:0,total:o},n.info=t,this.parseBalance(n)}async fetchOrderBook(e,t={}){let i=await this.publicGetOrderbook(t);return this.parseOrderBook(i)}async fetchTicker(e,t={}){let i=await this.publicGetTickerdetailed(t),s=this.milliseconds(),r=void 0,a=void 0;return"last"in i&&(r=parseFloat(i.last)),"vol"in i&&(a=parseFloat(i.vol)),{symbol:e,timestamp:s,datetime:this.iso8601(s),high:void 0,low:void 0,bid:parseFloat(i.bid),ask:parseFloat(i.ask),vwap:void 0,open:void 0,close:void 0,first:void 0,last:r,change:void 0,percentage:void 0,average:void 0,baseVolume:a,quoteVolume:void 0,info:i}}parseTrade(e,t){let i=1e3*parseInt(e.date);return{info:e,id:e.tid.toString(),order:void 0,timestamp:i,datetime:this.iso8601(i),symbol:t.symbol,type:void 0,side:void 0,price:parseFloat(e.price),amount:parseFloat(e.amount)}}async fetchTrades(e,t,i,s={}){let r=this.market(e),a=await this.publicGetTrades(s);return this.parseTrades(a,r,t,i)}async createOrder(e,t,i,s,r,a={}){let o=await this.privatePostPlaceorder(this.extend({qty:s,price:r,type:i[0].toUpperCase()},a));return{info:o,id:o.pending_oid}}async cancelOrder(e,t,i={}){return await this.privatePostCancelpendingorder({orderNo:e})}sign(e,t="public",i="GET",s={},r,a){let o=this.urls.api+"/"+e;if("public"==t)o+=".json";else{this.checkRequiredCredentials();let e=this.nonce();a=this.urlencode(this.extend({timestamp:e},s)),r={"Content-Type":"application/x-www-form-urlencoded",key:this.apiKey,sig:this.hmac(this.encode(a),this.encode(this.secret),"sha1")}}return{url:o,method:i,body:a,headers:r}}async request(e,t="public",i="GET",s={},a,o){let n=await this.fetch2(e,t,i,s,a,o);if("private"==t&&"error"in n&&n.error)throw new r(this.id+" "+this.json(n));return n}}},function(e,t,i){"use strict";const s=i(310),{ExchangeError:r,InsufficientFunds:a}=i(309);e.exports=class extends s{describe(){return this.deepExtend(super.describe(),{id:"hitbtc",name:"HitBTC",countries:"HK",rateLimit:1500,version:"1",hasCORS:!1,hasFetchTickers:!0,hasFetchOrder:!0,hasFetchOpenOrders:!0,hasFetchClosedOrders:!0,hasWithdraw:!0,urls:{logo:"https://user-images.githubusercontent.com/1294454/27766555-8eaec20e-5edc-11e7-9c5b-6dc69fc42f5e.jpg",api:"http://api.hitbtc.com",www:"https://hitbtc.com",doc:"https://github.com/hitbtc-com/hitbtc-api/blob/master/APIv1.md"},api:{public:{get:["{symbol}/orderbook","{symbol}/ticker","{symbol}/trades","{symbol}/trades/recent","symbols","ticker","time,"]},trading:{get:["balance","orders/active","orders/recent","order","trades/by/order","trades"],post:["new_order","cancel_order","cancel_orders"]},payment:{get:["balance","address/{currency}","transactions","transactions/{transaction}"],post:["transfer_to_trading","transfer_to_main","address/{currency}","payout"]}},fees:{trading:{tierBased:!1,percentage:!0,maker:-1e-4,taker:.001},funding:{tierBased:!1,percentage:!1,withdraw:{BTC:7e-4,ETH:.00958,BCH:.0018,USDT:5,BTG:5e-4,LTC:.003,ZEC:1e-4,XMR:.09,"1ST":.84,ADX:5.7,AE:6.7,AEON:.01006,AIR:565,AMP:9,ANT:6.7,ARDR:2,ARN:18.5,ART:26,ATB:4e-4,ATL:27,ATM:504,ATS:860,AVT:1.9,BAS:113,BCN:.1,BET:124,BKB:46,BMC:32,BMT:100,BNT:2.57,BQX:4.7,BTM:40,BTX:.04,BUS:.004,CCT:115,CDT:100,CDX:30,CFI:61,CLD:.88,CND:574,CNX:.04,COSS:65,CSNO:16,CTR:15,CTX:146,CVC:8.46,DBIX:.0168,DCN:12e4,DCT:.02,DDF:342,DENT:6240,DGB:.4,DGD:.01,DICE:.32,DLT:.26,DNT:.21,DOGE:2,DOV:34,DRPU:24,DRT:240,DSH:.017,EBET:84,EBTC:20,EBTCOLD:6.6,ECAT:14,EDG:2,EDO:2.9,ELE:.00172,ELM:.004,EMC:.03,EMGO:14,ENJ:163,EOS:1.5,ERO:34,ETBS:15,ETC:.002,ETP:.004,EVX:5.4,EXN:456,FRD:65,FUEL:123.00105,FUN:202.9598309,FYN:1.849,FYP:66.13,GNO:.0034,GUP:4,GVT:1.2,HAC:144,HDG:7,HGT:1082,HPC:.4,HVN:120,ICN:.55,ICO:34,ICOS:.35,IND:76,INDI:5913,ITS:15.0012,IXT:11,KBR:143,KICK:112,LA:41,LAT:1.44,LIFE:13e3,LRC:27,LSK:.3,LUN:.34,MAID:5,MANA:143,MCAP:5.44,MIPS:43,MNE:1.33,MSP:121,MTH:92,MYB:3.9,NDC:165,NEBL:.04,NET:3.96,NTO:998,NXC:13.39,NXT:3,OAX:15,ODN:.004,OMG:2,OPT:335,ORME:2.8,OTN:.57,PAY:3.1,PIX:96,PLBT:.33,PLR:114,PLU:.87,POE:784,POLL:3.5,PPT:2,PRE:32,PRG:39,PRO:41,PRS:60,PTOY:.5,QAU:63,QCN:.03,QTUM:.04,QVT:64,REP:.02,RKC:15,RVT:14,SAN:2.24,SBD:.03,SCL:2.6,SISA:1640,SKIN:407,SMART:.4,SMS:.0375,SNC:36,SNGLS:4,SNM:48,SNT:233,STEEM:.01,STRAT:.01,STU:14,STX:11,SUB:17,SUR:3,SWT:.51,TAAS:.91,TBT:2.37,TFL:15,TIME:.03,TIX:7.1,TKN:1,TKR:84,TNT:90,TRST:1.6,TRX:1395,UET:480,UGT:15,VEN:14,VERI:.037,VIB:50,VIBE:145,VOISE:618,WEALTH:.0168,WINGS:2.4,WTC:.75,XAUR:3.23,XDN:.01,XEM:15,XUC:.9,YOYOW:140,ZAP:24,ZRX:23,ZSC:191},deposit:{BTC:0,ETH:0,BCH:0,USDT:0,BTG:0,LTC:0,ZEC:0,XMR:0,"1ST":0,ADX:0,AE:0,AEON:0,AIR:0,AMP:0,ANT:0,ARDR:0,ARN:0,ART:0,ATB:0,ATL:0,ATM:0,ATS:0,AVT:0,BAS:0,BCN:0,BET:0,BKB:0,BMC:0,BMT:0,BNT:0,BQX:0,BTM:0,BTX:0,BUS:0,CCT:0,CDT:0,CDX:0,CFI:0,CLD:0,CND:0,CNX:0,COSS:0,CSNO:0,CTR:0,CTX:0,CVC:0,DBIX:0,DCN:0,DCT:0,DDF:0,DENT:0,DGB:0,DGD:0,DICE:0,DLT:0,DNT:0,DOGE:0,DOV:0,DRPU:0,DRT:0,DSH:0,EBET:0,EBTC:0,EBTCOLD:0,ECAT:0,EDG:0,EDO:0,ELE:0,ELM:0,EMC:0,EMGO:0,ENJ:0,EOS:0,ERO:0,ETBS:0,ETC:0,ETP:0,EVX:0,EXN:0,FRD:0,FUEL:0,FUN:0,FYN:0,FYP:0,GNO:0,GUP:0,GVT:0,HAC:0,HDG:0,HGT:0,HPC:0,HVN:0,ICN:0,ICO:0,ICOS:0,IND:0,INDI:0,ITS:0,IXT:0,KBR:0,KICK:0,LA:0,LAT:0,LIFE:0,LRC:0,LSK:0,LUN:0,MAID:0,MANA:0,MCAP:0,MIPS:0,MNE:0,MSP:0,MTH:0,MYB:0,NDC:0,NEBL:0,NET:0,NTO:0,NXC:0,NXT:0,OAX:0,ODN:0,OMG:0,OPT:0,ORME:0,OTN:0,PAY:0,PIX:0,PLBT:0,PLR:0,PLU:0,POE:0,POLL:0,PPT:0,PRE:0,PRG:0,PRO:0,PRS:0,PTOY:0,QAU:0,QCN:0,QTUM:0,QVT:0,REP:0,RKC:0,RVT:0,SAN:0,SBD:0,SCL:0,SISA:0,SKIN:0,SMART:0,SMS:0,SNC:0,SNGLS:0,SNM:0,SNT:0,STEEM:0,STRAT:0,STU:0,STX:0,SUB:0,SUR:0,SWT:0,TAAS:0,TBT:0,TFL:0,TIME:0,TIX:0,TKN:0,TKR:0,TNT:0,TRST:0,TRX:0,UET:0,UGT:0,VEN:0,VERI:0,VIB:0,VIBE:0,VOISE:0,WEALTH:0,WINGS:0,WTC:0,XAUR:0,XDN:0,XEM:0,XUC:0,YOYOW:0,ZAP:0,ZRX:0,ZSC:0}}}})}commonCurrencyCode(e){return"XBT"==e?"BTC":"DRK"==e?"DASH":"CAT"==e?"BitClave":"USD"==e?"USDT":e}async fetchMarkets(){let e=await this.publicGetSymbols(),t=[];for(let i=0;i<e.symbols.length;i++){let s=e.symbols[i],r=s.symbol,a=s.commodity,o=s.currency,n=parseFloat(s.lot),d=parseFloat(s.step),c=this.commonCurrencyCode(a),h=this.commonCurrencyCode(o),l=c+"/"+h;t.push({id:r,symbol:l,base:c,quote:h,baseId:a,quoteId:o,lot:n,step:d,info:s,precision:{amount:this.precisionFromString(s.lot),price:this.precisionFromString(s.step)},limits:{amount:{min:n,max:void 0},price:{min:d,max:void 0},cost:{min:void 0,max:void 0}}})}return t}async fetchBalance(e={}){await this.loadMarkets();let t=this.safeString(e,"type","trading");t+="GetBalance";let i=this.omit(e,"type"),s=(await this[t](i)).balance,r={info:s};for(let a=0;a<s.length;a++){let e=s[a],t=e.currency_code,i=this.commonCurrencyCode(t),o=this.safeFloat(e,"cash",0);o=this.safeFloat(e,"balance",o);let n=this.safeFloat(e,"reserved",0),d={free:o,used:n,total:this.sum(o,n)};r[i]=d}return this.parseBalance(r)}async fetchOrderBook(e,t={}){await this.loadMarkets();let i=await this.publicGetSymbolOrderbook(this.extend({symbol:this.marketId(e)},t));return this.parseOrderBook(i)}parseTicker(e,t){let i=e.timestamp,s=void 0;return t&&(s=t.symbol),{symbol:s,timestamp:i,datetime:this.iso8601(i),high:this.safeFloat(e,"high"),low:this.safeFloat(e,"low"),bid:this.safeFloat(e,"bid"),ask:this.safeFloat(e,"ask"),vwap:void 0,open:this.safeFloat(e,"open"),close:void 0,first:void 0,last:this.safeFloat(e,"last"),change:void 0,percentage:void 0,average:void 0,baseVolume:this.safeFloat(e,"volume"),quoteVolume:this.safeFloat(e,"volume_quote"),info:e}}async fetchTickers(e,t={}){await this.loadMarkets();let i=await this.publicGetTicker(t),s=Object.keys(i),r={};for(let a=0;a<s.length;a++){let e=s[a],t=this.markets_by_id[e],o=t.symbol,n=i[e];r[o]=this.parseTicker(n,t)}return r}async fetchTicker(e,t={}){await this.loadMarkets();let i=this.market(e),s=await this.publicGetSymbolTicker(this.extend({symbol:i.id},t));if("message"in s)throw new r(this.id+" "+s.message);return this.parseTicker(s,i)}parseTrade(e,t){return{info:e,id:e[0],timestamp:e[3],datetime:this.iso8601(e[3]),symbol:t.symbol,type:void 0,side:e[4],price:parseFloat(e[1]),amount:parseFloat(e[2])}}async fetchTrades(e,t,i,s={}){await this.loadMarkets();let r=this.market(e),a=await this.publicGetSymbolTrades(this.extend({symbol:r.id,side:"true"},s));return this.parseTrades(a.trades,r,t,i)}async createOrder(e,t,i,s,a,o={}){await this.loadMarkets();let n=this.market(e),d=parseFloat(s)/n.lot,c=Math.round(d),h=d-c;if(Math.abs(h)>n.step)throw new r(this.id+" order amount should be evenly divisible by lot unit size of "+n.lot.toString());let l={clientOrderId:this.milliseconds().toString(),symbol:n.id,side:i,quantity:c.toString(),type:t};"limit"==t?l.price=this.priceToPrecision(e,a):l.timeInForce="FOK";let u=await this.tradingPostNewOrder(this.extend(l,o));return{info:u,id:u.ExecutionReport.clientOrderId}}async cancelOrder(e,t,i={}){return await this.loadMarkets(),await this.tradingPostCancelOrder(this.extend({clientOrderId:e},i))}parseOrderStatus(e){return this.safeString({new:"open",partiallyFilled:"open",filled:"closed",canceled:"canceled",rejected:"rejected",expired:"expired"},e)}parseOrder(e,t){let i=parseInt(e.lastTimestamp),s=void 0;t||(t=this.markets_by_id[e.symbol]);let r=this.safeString(e,"orderStatus");r&&(r=this.parseOrderStatus(r));let a=this.safeFloat(e,"avgPrice",0),o=this.safeFloat(e,"orderPrice"),n=this.safeFloat(e,"orderQuantity"),d=this.safeFloat(e,"quantityLeaves"),c=void 0,h=void 0;return t&&(s=t.symbol,n*=t.lot,d*=t.lot),n&&d&&(h=a*(c=n-d)),{id:e.clientOrderId.toString(),info:e,timestamp:i,datetime:this.iso8601(i),status:r,symbol:s,type:e.type,side:e.side,price:o,cost:h,amount:n,filled:c,remaining:d,fee:void 0}}async fetchOrder(e,t,i={}){await this.loadMarkets();let s=await this.tradingGetOrder(this.extend({clientOrderId:e},i));return this.parseOrder(s.orders[0])}async fetchOpenOrders(e,t,i,s={}){await this.loadMarkets();let r=void 0,a={sort:"desc",statuses:["new","partiallyFiiled"].join(",")};e&&(r=this.market(e),a.symbols=r.id);let o=await this.tradingGetOrdersActive(this.extend(a,s));return this.parseOrders(o.orders,r,t,i)}async fetchClosedOrders(e,t,i,s={}){await this.loadMarkets();let r=void 0,a={sort:"desc",statuses:["filled","canceled","rejected","expired"].join(","),max_results:1e3};e&&(r=this.market(e),a.symbols=r.id);let o=await this.tradingGetOrdersRecent(this.extend(a,s));return this.parseOrders(o.orders,r,t,i)}async withdraw(e,t,i,s={}){await this.loadMarkets();let r=this.currency(e),a=await this.paymentPostPayout(this.extend({currency_code:r.id,amount:t,address:i},s));return{info:a,id:a.transaction}}nonce(){return this.milliseconds()}sign(e,t="public",i="GET",s={},r,a){let o="/api/"+this.version+"/"+t+"/"+this.implodeParams(e,s),n=this.omit(s,this.extractParams(e));if("public"==t)Object.keys(n).length&&(o+="?"+this.urlencode(n));else{this.checkRequiredCredentials();let e={nonce:this.nonce(),apikey:this.apiKey};n=this.extend(e,n);let t=o+="GET"==i?"?"+this.urlencode(n):"?"+this.urlencode(e);"POST"==i&&Object.keys(n).length&&(t+=a=this.urlencode(n)),r={"Content-Type":"application/x-www-form-urlencoded","X-Signature":this.hmac(this.encode(t),this.encode(this.secret),"sha512").toLowerCase()}}return o=this.urls.api+o,{url:o,method:i,body:a,headers:r}}async request(e,t="public",i="GET",s={},o,n){let d=await this.fetch2(e,t,i,s,o,n);if("code"in d){if("ExecutionReport"in d&&"orderExceedsLimit"==d.ExecutionReport.orderRejectReason)throw new a(this.id+" "+this.json(d));throw new r(this.id+" "+this.json(d))}return d}}},function(e,t,i){"use strict";const s=i(310),{ExchangeError:r}=i(309);e.exports=class extends s{describe(){return this.deepExtend(super.describe(),{id:"huobipro",name:"Huobi Pro",countries:"CN",rateLimit:2e3,userAgent:this.userAgents.chrome39,version:"v1",accounts:void 0,accountsById:void 0,hostname:"api.huobi.pro",hasCORS:!1,hasFetchOHLCV:!0,hasFetchOrders:!0,hasFetchOpenOrders:!0,has:{fetchOHCLV:!0,fetchOrders:!0,fetchOpenOrders:!0},timeframes:{"1m":"1min","5m":"5min","15m":"15min","30m":"30min","1h":"60min","1d":"1day","1w":"1week","1M":"1mon","1y":"1year"},urls:{logo:"https://user-images.githubusercontent.com/1294454/27766569-15aa7b9a-5edd-11e7-9e7f-44791f4ee49c.jpg",api:"https://api.huobi.pro",www:"https://www.huobi.pro",doc:"https://github.com/huobiapi/API_Docs/wiki/REST_api_reference"},api:{market:{get:["history/kline","detail/merged","depth","trade","history/trade","detail"]},public:{get:["common/symbols","common/currencys","common/timestamp"]},private:{get:["account/accounts","account/accounts/{id}/balance","order/orders/{id}","order/orders/{id}/matchresults","order/orders","order/matchresults","dw/withdraw-virtual/addresses"],post:["order/orders/place","order/orders","order/orders/{id}/place","order/orders/{id}/submitcancel","order/orders/batchcancel","dw/balance/transfer","dw/withdraw-virtual/create","dw/withdraw-virtual/{id}/place","dw/withdraw-virtual/{id}/cancel"]}}})}async fetchMarkets(){let e=await this.publicGetCommonSymbols(),t=e.data;if(t.length<1)throw new r(this.id+" publicGetCommonSymbols returned empty response: "+this.json(e));let i=[];for(let s=0;s<t.length;s++){let e=t[s],r=e["base-currency"],a=e["quote-currency"],o=r.toUpperCase(),n=a.toUpperCase(),d=r+a,c=(o=this.commonCurrencyCode(o))+"/"+(n=this.commonCurrencyCode(n)),h={amount:e["amount-precision"],price:e["price-precision"]},l=Math.pow(10,-h.amount),u="OMG"==o?0:.002,p="OMG"==o?0:.002;i.push({id:d,symbol:c,base:o,quote:n,lot:l,precision:h,taker:p,maker:u,limits:{amount:{min:l,max:Math.pow(10,h.amount)},price:{min:Math.pow(10,-h.price),max:void 0},cost:{min:0,max:void 0}},info:e})}return i}parseTicker(e,t){let i=void 0;t&&(i=t.symbol);let s=void 0;"last"in e&&(s=e.last);let r=this.milliseconds();"ts"in e&&(r=e.ts);let a=void 0,o=void 0;return"bid"in e&&e.bid&&(a=this.safeFloat(e.bid,0)),"ask"in e&&e.ask&&(o=this.safeFloat(e.ask,0)),{symbol:i,timestamp:r,datetime:this.iso8601(r),high:e.high,low:e.low,bid:a,ask:o,vwap:void 0,open:e.open,close:e.close,first:void 0,last:s,change:void 0,percentage:void 0,average:void 0,baseVolume:parseFloat(e.amount),quoteVolume:e.vol,info:e}}async fetchOrderBook(e,t={}){await this.loadMarkets();let i=this.market(e),s=await this.marketGetDepth(this.extend({symbol:i.id,type:"step0"},t));if("tick"in s){if(!s.tick)throw new r(this.id+" fetchOrderBook() returned empty response: "+this.json(s));return this.parseOrderBook(s.tick,s.tick.ts)}throw new r(this.id+" fetchOrderBook() returned unrecognized response: "+this.json(s))}async fetchTicker(e,t={}){await this.loadMarkets();let i=this.market(e),s=await this.marketGetDetailMerged(this.extend({symbol:i.id},t));return this.parseTicker(s.tick,i)}parseTrade(e,t){let i=e.ts;return{info:e,id:e.id.toString(),order:void 0,timestamp:i,datetime:this.iso8601(i),symbol:t.symbol,type:void 0,side:e.direction,price:e.price,amount:e.amount}}parseTradesData(e,t,i,s){let r=[];for(let a=0;a<e.length;a++){let o=this.parseTrades(e[a].data,t,i,s);for(let e=0;e<o.length;e++)r.push(o[e])}return r}async fetchTrades(e,t,i,s={}){await this.loadMarkets();let r=this.market(e),a=await this.marketGetHistoryTrade(this.extend({symbol:r.id,size:2e3},s));return this.parseTradesData(a.data,r,t,i)}parseOHLCV(e,t,i="1m",s,r){return[1e3*e.id,e.open,e.high,e.low,e.close,e.vol]}async fetchOHLCV(e,t="1m",i,s,r={}){await this.loadMarkets();let a=this.market(e),o=await this.marketGetHistoryKline(this.extend({symbol:a.id,period:this.timeframes[t],size:2e3},r));return this.parseOHLCVs(o.data,a,t,i,s)}async loadAccounts(e=!1){if(e)this.accounts=await this.fetchAccounts();else{if(this.accounts)return this.accounts;this.accounts=await this.fetchAccounts(),this.accountsById=this.indexBy(this.accounts,"id")}return this.accounts}async fetchAccounts(){await this.loadMarkets();return(await this.privateGetAccountAccounts()).data}async fetchBalance(e={}){await this.loadMarkets(),await this.loadAccounts();let t=await this.privateGetAccountAccountsIdBalance(this.extend({id:this.accounts[0].id},e)),i=t.data.list,s={info:t};for(let r=0;r<i.length;r++){let e=i[r],t=e.currency.toUpperCase(),a=this.commonCurrencyCode(t),o=void 0;o=a in s?s[a]:this.account(),"trade"==e.type&&(o.free=parseFloat(e.balance)),"frozen"==e.type&&(o.used=parseFloat(e.balance)),o.total=this.sum(o.free,o.used),s[a]=o}return this.parseBalance(s)}async fetchOrders(e,t,i,s={}){if(!e)throw new r(this.id+" fetchOrders() requires a symbol parameter");this.load_markets();let a=this.market(e),o=void 0;if("type"in s)o=s.type;else{if(!("status"in s))throw new r(this.id+" fetchOrders() requires type param or status param for spot market "+e+'(0 or "open" for unfilled or partial filled orders, 1 or "closed" for filled orders)');o=s.status}if(0==o||"open"==o)o="submitted,partial-filled";else{if(1!=o&&"closed"!=o)throw new r(this.id+" fetchOrders() wrong type param or status param for spot market "+e+'(0 or "open" for unfilled or partial filled orders, 1 or "closed" for filled orders)');o="filled,partial-canceled"}let n=await this.privateGetOrderOrders(this.extend({symbol:a.id,states:o}));return this.parseOrders(n.data,a,t,i)}async fetchOpenOrders(e,t,i,s={}){return this.fetchOrders(e,void 0,void 0,this.extend({status:0},s))}parseOrderStatus(e){return"partial-filled"==e?"open":"filled"==e?"closed":"canceled"==e?"canceled":"submitted"==e?"open":e}parseOrder(e,t){let i=void 0,s=void 0,r=void 0;if("type"in e){let t=e.type.split("-");i=t[0],s=t[1],r=this.parseOrderStatus(e.state)}let a=void 0;if(!t&&"symbol"in e&&e.symbol in this.markets_by_id){let i=e.symbol;t=this.markets_by_id[i]}t&&(a=t.symbol);let o=e["created-at"],n=parseFloat(e.amount),d=parseFloat(e["field-amount"]),c=n-d,h=parseFloat(e.price),l=parseFloat(e["field-cash-amount"]),u=0;d&&(u=parseFloat(l/d));return{info:e,id:e.id,timestamp:o,datetime:this.iso8601(o),symbol:a,type:s,side:i,price:h,average:u,cost:l,amount:n,filled:d,remaining:c,status:r,fee:void 0}}async createOrder(e,t,i,s,r,a={}){await this.loadMarkets(),await this.loadAccounts();let o=this.market(e),n={"account-id":this.accounts[0].id,amount:this.amountToPrecision(e,s),symbol:o.id,type:i+"-"+t};"limit"==t&&(n.price=this.priceToPrecision(e,r));let d=await this.privatePostOrderOrdersPlace(this.extend(n,a));return{info:d,id:d.data}}async cancelOrder(e,t,i={}){return await this.privatePostOrderOrdersIdSubmitcancel({id:e})}sign(e,t="public",i="GET",s={},r,a){let o="/";o+="market"==t?t:this.version,o+="/"+this.implodeParams(e,s);let n=this.omit(s,this.extractParams(e));if("private"==t){this.checkRequiredCredentials();let e=this.YmdHMS(this.milliseconds(),"T"),t=this.keysort(this.extend({SignatureMethod:"HmacSHA256",SignatureVersion:"2",AccessKeyId:this.apiKey,Timestamp:e},n)),s=this.urlencode(t),d=[i,this.hostname,o,s].join("\n"),c=this.hmac(this.encode(d),this.encode(this.secret),"sha256","base64");o+="?"+(s+="&"+this.urlencode({Signature:c})),"POST"==i&&(a=this.json(n),r={"Content-Type":"application/json"})}else Object.keys(s).length&&(o+="?"+this.urlencode(s));return o=this.urls.api+o,{url:o,method:i,body:a,headers:r}}async request(e,t="public",i="GET",s={},a,o){let n=await this.fetch2(e,t,i,s,a,o);if("status"in n&&"error"==n.status)throw new r(this.id+" "+this.json(n));return n}}},function(e,t,i){"use strict";const s=i(310),{ExchangeError:r,OrderNotFound:a,InvalidOrder:o,InsufficientFunds:n}=i(309);e.exports=class extends s{describe(){return this.deepExtend(super.describe(),{id:"qryptos",name:"QRYPTOS",countries:["CN","TW"],version:"2",rateLimit:1e3,hasFetchTickers:!0,hasCORS:!1,has:{fetchOrder:!0,fetchOrders:!0,fetchOpenOrders:!0,fetchClosedOrders:!0},urls:{logo:"https://user-images.githubusercontent.com/1294454/30953915-b1611dc0-a436-11e7-8947-c95bd5a42086.jpg",api:"https://api.qryptos.com",www:"https://www.qryptos.com",doc:"https://developers.quoine.com"},api:{public:{get:["products","products/{id}","products/{id}/price_levels","executions","ir_ladders/{currency}"]},private:{get:["accounts/balance","crypto_accounts","executions/me","fiat_accounts","loan_bids","loans","orders","orders/{id}","orders/{id}/trades","trades","trades/{id}/loans","trading_accounts","trading_accounts/{id}"],post:["fiat_accounts","loan_bids","orders"],put:["loan_bids/{id}/close","loans/{id}","orders/{id}","orders/{id}/cancel","trades/{id}","trades/{id}/close","trades/close_all","trading_accounts/{id}"]}}})}async fetchMarkets(){let e=await this.publicGetProducts(),t=[];for(let i=0;i<e.length;i++){let s=e[i],r=s.id,a=s.base_currency,o=s.quoted_currency,n=a+"/"+o,d=this.safeFloat(s,"maker_fee"),c=this.safeFloat(s,"taker_fee"),h=!s.disabled;t.push({id:r,symbol:n,base:a,quote:o,maker:d,taker:c,active:h,info:s})}return t}async fetchBalance(e={}){await this.loadMarkets();let t=await this.privateGetAccountsBalance(),i={info:t};for(let s=0;s<t.length;s++){let e=t[s],r=e.currency,a=parseFloat(e.balance),o={free:a,used:0,total:a};i[r]=o}return this.parseBalance(i)}async fetchOrderBook(e,t={}){await this.loadMarkets();let i=await this.publicGetProductsIdPriceLevels(this.extend({id:this.marketId(e)},t));return this.parseOrderBook(i,void 0,"buy_price_levels","sell_price_levels")}parseTicker(e,t){let i=this.milliseconds(),s=void 0;if("last_traded_price"in e&&e.last_traded_price){e.last_traded_price.length>0&&(s=parseFloat(e.last_traded_price))}let r=void 0;return t&&(r=t.symbol),{symbol:r,timestamp:i,datetime:this.iso8601(i),high:this.safeFloat(e,"high_market_ask"),low:this.safeFloat(e,"low_market_bid"),bid:this.safeFloat(e,"market_bid"),ask:this.safeFloat(e,"market_ask"),vwap:void 0,open:void 0,close:void 0,first:void 0,last:s,change:void 0,percentage:void 0,average:void 0,baseVolume:this.safeFloat(e,"volume_24h"),quoteVolume:void 0,info:e}}async fetchTickers(e,t={}){await this.loadMarkets();let i=await this.publicGetProducts(t),s={};for(let r=0;r<i.length;r++){let e=i[r],t=e.base_currency+"/"+e.quoted_currency,a=this.markets[t];s[t]=this.parseTicker(e,a)}return s}async fetchTicker(e,t={}){await this.loadMarkets();let i=this.market(e),s=await this.publicGetProductsId(this.extend({id:i.id},t));return this.parseTicker(s,i)}parseTrade(e,t){let i=1e3*e.created_at;return{info:e,id:e.id.toString(),order:void 0,timestamp:i,datetime:this.iso8601(i),symbol:t.symbol,type:void 0,side:e.taker_side,price:parseFloat(e.price),amount:parseFloat(e.quantity)}}async fetchTrades(e,t,i,s={}){await this.loadMarkets();let r=this.market(e),a={product_id:r.id};i&&(a.limit=i);let o=await this.publicGetExecutions(this.extend(a,s));return this.parseTrades(o.models,r,t,i)}async createOrder(e,t,i,s,r,a={}){await this.loadMarkets();let o={order_type:t,product_id:this.marketId(e),side:i,quantity:s};"limit"==t&&(o.price=r);let n=await this.privatePostOrders(this.extend({order:o},a));return this.parseOrder(n)}async cancelOrder(e,t,i={}){await this.loadMarkets();let s=await this.privatePutOrdersIdCancel(this.extend({id:e},i)),r=this.parseOrder(s);if("closed"==r.status)throw new a(this.id+" "+this.json(r));return r}parseOrder(e){let t=1e3*e.created_at,i=e.product_id,s=this.marketsById[i],r=void 0;"status"in e&&("live"==e.status?r="open":"filled"==e.status?r="closed":"cancelled"==e.status&&(r="canceled"));let a=parseFloat(e.quantity),o=parseFloat(e.filled_quantity),n=void 0;return s&&(n=s.symbol),{id:e.id,timestamp:t,datetime:this.iso8601(t),type:e.order_type,status:r,symbol:n,side:e.side,price:e.price,amount:a,filled:o,remaining:a-o,trades:void 0,fee:{currency:void 0,cost:parseFloat(e.order_fee)},info:e}}async fetchOrder(e,t,i={}){await this.loadMarkets();let s=await this.privateGetOrdersId(this.extend({id:e},i));return this.parseOrder(s)}async fetchOrders(e,t,i,s={}){await this.loadMarkets();let r=void 0,a={};e&&(r=this.market(e),a.product_id=r.id);let o=s.status;"open"==o?a.status="live":"closed"==o?a.status="filled":"canceled"==o&&(a.status="cancelled");let n=(await this.privateGetOrders(a)).models;return this.parseOrders(n,r,t,i)}fetchOpenOrders(e,t,i,s={}){return this.fetchOrders(e,t,i,this.extend({status:"open"},s))}fetchClosedOrders(e,t,i,s={}){return this.fetchOrders(e,t,i,this.extend({status:"closed"},s))}handleErrors(e,t,i,s,d,c){let h=void 0;if(200==e||404==e||422==e){if("{"!=c[0]&&"["!=c[0])throw new r(this.id+" returned a non-JSON reply: "+c);h=JSON.parse(c)}if(404==e){if("message"in h&&"Order not found"==h.message)throw new a(this.id+" "+c)}else if(422==e&&"errors"in h){let e=h.errors;if("user"in e){if(e.user.indexOf("not_enough_free_balance")>=0)throw new n(this.id+" "+c)}else if("quantity"in e){if(e.quantity.indexOf("less_than_order_size")>=0)throw new o(this.id+" "+c)}}}nonce(){return this.milliseconds()}sign(e,t="public",i="GET",s={},r,a){let o="/"+this.implodeParams(e,s),n=this.omit(s,this.extractParams(e));if(r={"X-Quoine-API-Version":this.version,"Content-Type":"application/json"},"public"==t)Object.keys(n).length&&(o+="?"+this.urlencode(n));else{this.checkRequiredCredentials(),"GET"==i?Object.keys(n).length&&(o+="?"+this.urlencode(n)):Object.keys(n).length&&(a=this.json(n));let e=this.nonce(),t={path:o,nonce:e,token_id:this.apiKey,iat:Math.floor(e/1e3)};r["X-Quoine-Auth"]=this.jwt(t,this.secret)}return o=this.urls.api+o,{url:o,method:i,body:a,headers:r}}}},,function(e,t){function i(){throw new Error("setTimeout has not been defined")}function s(){throw new Error("clearTimeout has not been defined")}function r(e){if(c===setTimeout)return setTimeout(e,0);if((c===i||!c)&&setTimeout)return c=setTimeout,setTimeout(e,0);try{return c(e,0)}catch(t){try{return c.call(null,e,0)}catch(t){return c.call(this,e,0)}}}function a(){m&&u&&(m=!1,u.length?p=u.concat(p):f=-1,p.length&&o())}function o(){if(!m){var e=r(a);m=!0;for(var t=p.length;t;){for(u=p,p=[];++f<t;)u&&u[f].run();f=-1,t=p.length}u=null,m=!1,function(e){if(h===clearTimeout)return clearTimeout(e);if((h===s||!h)&&clearTimeout)return h=clearTimeout,clearTimeout(e);try{h(e)}catch(t){try{return h.call(null,e)}catch(t){return h.call(this,e)}}}(e)}}function n(e,t){this.fun=e,this.array=t}function d(){}var c,h,l=e.exports={};!function(){try{c="function"===typeof setTimeout?setTimeout:i}catch(e){c=i}try{h="function"===typeof clearTimeout?clearTimeout:s}catch(e){h=s}}();var u,p=[],m=!1,f=-1;l.nextTick=function(e){var t=new Array(arguments.length-1);if(arguments.length>1)for(var i=1;i<arguments.length;i++)t[i-1]=arguments[i];p.push(new n(e,t)),1!==p.length||m||r(o)},n.prototype.run=function(){this.fun.apply(null,this.array)},l.title="browser",l.browser=!0,l.env={},l.argv=[],l.version="",l.versions={},l.on=d,l.addListener=d,l.once=d,l.off=d,l.removeListener=d,l.removeAllListeners=d,l.emit=d,l.prependListener=d,l.prependOnceListener=d,l.listeners=function(e){return[]},l.binding=function(e){throw new Error("process.binding is not supported")},l.cwd=function(){return"/"},l.chdir=function(e){throw new Error("process.chdir is not supported")},l.umask=function(){return 0}},function(e,t,i){!function(t,s,r){e.exports=s(i(311),i(318),i(342),i(343),i(314),i(315),i(321),i(324),i(344),i(325),i(345),i(346),i(347),i(322),i(348),i(313),i(312),i(349),i(350),i(351),i(352),i(353),i(354),i(355),i(356),i(357),i(358),i(359),i(360),i(361),i(362),i(363),i(364))}(0,function(e){return e})},function(e,t,i){!function(t,s){e.exports=s(i(311))}(0,function(e){return function(){if("function"==typeof ArrayBuffer){var t=e.lib.WordArray,i=t.init;(t.init=function(e){if(e instanceof ArrayBuffer&&(e=new Uint8Array(e)),(e instanceof Int8Array||"undefined"!==typeof Uint8ClampedArray&&e instanceof Uint8ClampedArray||e instanceof Int16Array||e instanceof Uint16Array||e instanceof Int32Array||e instanceof Uint32Array||e instanceof Float32Array||e instanceof Float64Array)&&(e=new Uint8Array(e.buffer,e.byteOffset,e.byteLength)),e instanceof Uint8Array){for(var t=e.byteLength,s=[],r=0;r<t;r++)s[r>>>2]|=e[r]<<24-r%4*8;i.call(this,s,t)}else i.apply(this,arguments)}).prototype=t}}(),e.lib.WordArray})},function(e,t,i){!function(t,s){e.exports=s(i(311))}(0,function(e){return function(){function t(e){return e<<8&4278255360|e>>>8&16711935}var i=e,s=i.lib.WordArray,r=i.enc;r.Utf16=r.Utf16BE={stringify:function(e){for(var t=e.words,i=e.sigBytes,s=[],r=0;r<i;r+=2){var a=t[r>>>2]>>>16-r%4*8&65535;s.push(String.fromCharCode(a))}return s.join("")},parse:function(e){for(var t=e.length,i=[],r=0;r<t;r++)i[r>>>1]|=e.charCodeAt(r)<<16-r%2*16;return s.create(i,2*t)}};r.Utf16LE={stringify:function(e){for(var i=e.words,s=e.sigBytes,r=[],a=0;a<s;a+=2){var o=t(i[a>>>2]>>>16-a%4*8&65535);r.push(String.fromCharCode(o))}return r.join("")},parse:function(e){for(var i=e.length,r=[],a=0;a<i;a++)r[a>>>1]|=t(e.charCodeAt(a)<<16-a%2*16);return s.create(r,2*i)}}}(),e.enc.Utf16})},function(e,t,i){!function(t,s,r){e.exports=s(i(311),i(324))}(0,function(e){return function(){var t=e,i=t.lib.WordArray,s=t.algo,r=s.SHA256,a=s.SHA224=r.extend({_doReset:function(){this._hash=new i.init([3238371032,914150663,812702999,4144912697,4290775857,1750603025,1694076839,3204075428])},_doFinalize:function(){var e=r._doFinalize.call(this);return e.sigBytes-=4,e}});t.SHA224=r._createHelper(a),t.HmacSHA224=r._createHmacHelper(a)}(),e.SHA224})},function(e,t,i){!function(t,s,r){e.exports=s(i(311),i(318),i(325))}(0,function(e){return function(){var t=e,i=t.x64,s=i.Word,r=i.WordArray,a=t.algo,o=a.SHA512,n=a.SHA384=o.extend({_doReset:function(){this._hash=new r.init([new s.init(3418070365,3238371032),new s.init(1654270250,914150663),new s.init(2438529370,812702999),new s.init(355462360,4144912697),new s.init(1731405415,4290775857),new s.init(2394180231,1750603025),new s.init(3675008525,1694076839),new s.init(1203062813,3204075428)])},_doFinalize:function(){var e=o._doFinalize.call(this);return e.sigBytes-=16,e}});t.SHA384=o._createHelper(n),t.HmacSHA384=o._createHmacHelper(n)}(),e.SHA384})},function(e,t,i){!function(t,s,r){e.exports=s(i(311),i(318))}(0,function(e){return function(t){var i=e,s=i.lib,r=s.WordArray,a=s.Hasher,o=i.x64.Word,n=i.algo,d=[],c=[],h=[];!function(){for(var e=1,t=0,i=0;i<24;i++){d[e+5*t]=(i+1)*(i+2)/2%64;var s=(2*e+3*t)%5;e=t%5,t=s}for(e=0;e<5;e++)for(t=0;t<5;t++)c[e+5*t]=t+(2*e+3*t)%5*5;for(var r=1,a=0;a<24;a++){for(var n=0,l=0,u=0;u<7;u++){if(1&r){var p=(1<<u)-1;p<32?l^=1<<p:n^=1<<p-32}128&r?r=r<<1^113:r<<=1}h[a]=o.create(n,l)}}();var l=[];!function(){for(var e=0;e<25;e++)l[e]=o.create()}();var u=n.SHA3=a.extend({cfg:a.cfg.extend({outputLength:512}),_doReset:function(){for(var e=this._state=[],t=0;t<25;t++)e[t]=new o.init;this.blockSize=(1600-2*this.cfg.outputLength)/32},_doProcessBlock:function(e,t){for(var i=this._state,s=this.blockSize/2,r=0;r<s;r++){var a=e[t+2*r],o=e[t+2*r+1];a=16711935&(a<<8|a>>>24)|4278255360&(a<<24|a>>>8),o=16711935&(o<<8|o>>>24)|4278255360&(o<<24|o>>>8);(S=i[r]).high^=o,S.low^=a}for(var n=0;n<24;n++){for(var u=0;u<5;u++){for(var p=0,m=0,f=0;f<5;f++){p^=(S=i[u+5*f]).high,m^=S.low}var y=l[u];y.high=p,y.low=m}for(u=0;u<5;u++){var b=l[(u+4)%5],w=l[(u+1)%5],k=w.high,g=w.low;for(p=b.high^(k<<1|g>>>31),m=b.low^(g<<1|k>>>31),f=0;f<5;f++){(S=i[u+5*f]).high^=p,S.low^=m}}for(var T=1;T<25;T++){var v=(S=i[T]).high,C=S.low,O=d[T];if(O<32)p=v<<O|C>>>32-O,m=C<<O|v>>>32-O;else p=C<<O-32|v>>>64-O,m=v<<O-32|C>>>64-O;var B=l[c[T]];B.high=p,B.low=m}var x=l[0],_=i[0];x.high=_.high,x.low=_.low;for(u=0;u<5;u++)for(f=0;f<5;f++){var S=i[T=u+5*f],E=l[T],F=l[(u+1)%5+5*f],P=l[(u+2)%5+5*f];S.high=E.high^~F.high&P.high,S.low=E.low^~F.low&P.low}S=i[0];var M=h[n];S.high^=M.high,S.low^=M.low}},_doFinalize:function(){var e=this._data,i=e.words,s=(this._nDataBytes,8*e.sigBytes),a=32*this.blockSize;i[s>>>5]|=1<<24-s%32,i[(t.ceil((s+1)/a)*a>>>5)-1]|=128,e.sigBytes=4*i.length,this._process();for(var o=this._state,n=this.cfg.outputLength/8,d=n/8,c=[],h=0;h<d;h++){var l=o[h],u=l.high,p=l.low;u=16711935&(u<<8|u>>>24)|4278255360&(u<<24|u>>>8),p=16711935&(p<<8|p>>>24)|4278255360&(p<<24|p>>>8),c.push(p),c.push(u)}return new r.init(c,n)},clone:function(){for(var e=a.clone.call(this),t=e._state=this._state.slice(0),i=0;i<25;i++)t[i]=t[i].clone();return e}});i.SHA3=a._createHelper(u),i.HmacSHA3=a._createHmacHelper(u)}(Math),e.SHA3})},function(e,t,i){!function(t,s){e.exports=s(i(311))}(0,function(e){return function(t){function i(e,t,i){return e^t^i}function s(e,t,i){return e&t|~e&i}function r(e,t,i){return(e|~t)^i}function a(e,t,i){return e&i|t&~i}function o(e,t,i){return e^(t|~i)}function n(e,t){return e<<t|e>>>32-t}var d=e,c=d.lib,h=c.WordArray,l=c.Hasher,u=d.algo,p=h.create([0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,7,4,13,1,10,6,15,3,12,0,9,5,2,14,11,8,3,10,14,4,9,15,8,1,2,7,0,6,13,11,5,12,1,9,11,10,0,8,12,4,13,3,7,15,14,5,6,2,4,0,5,9,7,12,2,10,14,1,3,8,11,6,15,13]),m=h.create([5,14,7,0,9,2,11,4,13,6,15,8,1,10,3,12,6,11,3,7,0,13,5,10,14,15,8,12,4,9,1,2,15,5,1,3,7,14,6,9,11,8,12,2,10,0,4,13,8,6,4,1,3,11,15,0,5,12,2,13,9,7,10,14,12,15,10,4,1,5,8,7,6,2,13,14,0,3,9,11]),f=h.create([11,14,15,12,5,8,7,9,11,13,14,15,6,7,9,8,7,6,8,13,11,9,7,15,7,12,15,9,11,7,13,12,11,13,6,7,14,9,13,15,14,8,13,6,5,12,7,5,11,12,14,15,14,15,9,8,9,14,5,6,8,6,5,12,9,15,5,11,6,8,13,12,5,12,13,14,11,8,5,6]),y=h.create([8,9,9,11,13,15,15,5,7,7,8,11,14,14,12,6,9,13,15,7,12,8,9,11,7,7,12,7,6,15,13,11,9,7,15,11,8,6,6,14,12,13,5,14,13,13,7,5,15,5,8,11,14,14,6,14,6,9,12,9,12,5,15,8,8,5,12,9,12,5,14,6,8,13,6,5,15,13,11,11]),b=h.create([0,1518500249,1859775393,2400959708,2840853838]),w=h.create([1352829926,1548603684,1836072691,2053994217,0]),k=u.RIPEMD160=l.extend({_doReset:function(){this._hash=h.create([1732584193,4023233417,2562383102,271733878,3285377520])},_doProcessBlock:function(e,t){for(var d=0;d<16;d++){var c=t+d,h=e[c];e[c]=16711935&(h<<8|h>>>24)|4278255360&(h<<24|h>>>8)}var l,u,k,g,T,v,C,O,B,x,_=this._hash.words,S=b.words,E=w.words,F=p.words,P=m.words,M=f.words,A=y.words;v=l=_[0],C=u=_[1],O=k=_[2],B=g=_[3],x=T=_[4];var D;for(d=0;d<80;d+=1)D=l+e[t+F[d]]|0,D+=d<16?i(u,k,g)+S[0]:d<32?s(u,k,g)+S[1]:d<48?r(u,k,g)+S[2]:d<64?a(u,k,g)+S[3]:o(u,k,g)+S[4],D=(D=n(D|=0,M[d]))+T|0,l=T,T=g,g=n(k,10),k=u,u=D,D=v+e[t+P[d]]|0,D+=d<16?o(C,O,B)+E[0]:d<32?a(C,O,B)+E[1]:d<48?r(C,O,B)+E[2]:d<64?s(C,O,B)+E[3]:i(C,O,B)+E[4],D=(D=n(D|=0,A[d]))+x|0,v=x,x=B,B=n(O,10),O=C,C=D;D=_[1]+k+B|0,_[1]=_[2]+g+x|0,_[2]=_[3]+T+v|0,_[3]=_[4]+l+C|0,_[4]=_[0]+u+O|0,_[0]=D},_doFinalize:function(){var e=this._data,t=e.words,i=8*this._nDataBytes,s=8*e.sigBytes;t[s>>>5]|=128<<24-s%32,t[14+(s+64>>>9<<4)]=16711935&(i<<8|i>>>24)|4278255360&(i<<24|i>>>8),e.sigBytes=4*(t.length+1),this._process();for(var r=this._hash,a=r.words,o=0;o<5;o++){var n=a[o];a[o]=16711935&(n<<8|n>>>24)|4278255360&(n<<24|n>>>8)}return r},clone:function(){var e=l.clone.call(this);return e._hash=this._hash.clone(),e}});d.RIPEMD160=l._createHelper(k),d.HmacRIPEMD160=l._createHmacHelper(k)}(Math),e.RIPEMD160})},function(e,t,i){!function(t,s,r){e.exports=s(i(311),i(321),i(322))}(0,function(e){return function(){var t=e,i=t.lib,s=i.Base,r=i.WordArray,a=t.algo,o=a.SHA1,n=a.HMAC,d=a.PBKDF2=s.extend({cfg:s.extend({keySize:4,hasher:o,iterations:1}),init:function(e){this.cfg=this.cfg.extend(e)},compute:function(e,t){for(var i=this.cfg,s=n.create(i.hasher,e),a=r.create(),o=r.create([1]),d=a.words,c=o.words,h=i.keySize,l=i.iterations;d.length<h;){var u=s.update(t).finalize(o);s.reset();for(var p=u.words,m=p.length,f=u,y=1;y<l;y++){f=s.finalize(f),s.reset();for(var b=f.words,w=0;w<m;w++)p[w]^=b[w]}a.concat(u),c[0]++}return a.sigBytes=4*h,a}});t.PBKDF2=function(e,t,i){return d.create(i).compute(e,t)}}(),e.PBKDF2})},function(e,t,i){!function(t,s,r){e.exports=s(i(311),i(312))}(0,function(e){return e.mode.CFB=function(){function t(e,t,i,s){var r=this._iv;if(r){var a=r.slice(0);this._iv=void 0}else a=this._prevBlock;s.encryptBlock(a,0);for(var o=0;o<i;o++)e[t+o]^=a[o]}var i=e.lib.BlockCipherMode.extend();return i.Encryptor=i.extend({processBlock:function(e,i){var s=this._cipher,r=s.blockSize;t.call(this,e,i,r,s),this._prevBlock=e.slice(i,i+r)}}),i.Decryptor=i.extend({processBlock:function(e,i){var s=this._cipher,r=s.blockSize,a=e.slice(i,i+r);t.call(this,e,i,r,s),this._prevBlock=a}}),i}(),e.mode.CFB})},function(e,t,i){!function(t,s,r){e.exports=s(i(311),i(312))}(0,function(e){return e.mode.CTR=function(){var t=e.lib.BlockCipherMode.extend(),i=t.Encryptor=t.extend({processBlock:function(e,t){var i=this._cipher,s=i.blockSize,r=this._iv,a=this._counter;r&&(a=this._counter=r.slice(0),this._iv=void 0);var o=a.slice(0);i.encryptBlock(o,0),a[s-1]=a[s-1]+1|0;for(var n=0;n<s;n++)e[t+n]^=o[n]}});return t.Decryptor=i,t}(),e.mode.CTR})},function(e,t,i){!function(t,s,r){e.exports=s(i(311),i(312))}(0,function(e){return e.mode.CTRGladman=function(){function t(e){if(255===(e>>24&255)){var t=e>>16&255,i=e>>8&255,s=255&e;255===t?(t=0,255===i?(i=0,255===s?s=0:++s):++i):++t,e=0,e+=t<<16,e+=i<<8,e+=s}else e+=1<<24;return e}var i=e.lib.BlockCipherMode.extend(),s=i.Encryptor=i.extend({processBlock:function(e,i){var s=this._cipher,r=s.blockSize,a=this._iv,o=this._counter;a&&(o=this._counter=a.slice(0),this._iv=void 0),function(e){0===(e[0]=t(e[0]))&&(e[1]=t(e[1]))}(o);var n=o.slice(0);s.encryptBlock(n,0);for(var d=0;d<r;d++)e[i+d]^=n[d]}});return i.Decryptor=s,i}(),e.mode.CTRGladman})},function(e,t,i){!function(t,s,r){e.exports=s(i(311),i(312))}(0,function(e){return e.mode.OFB=function(){var t=e.lib.BlockCipherMode.extend(),i=t.Encryptor=t.extend({processBlock:function(e,t){var i=this._cipher,s=i.blockSize,r=this._iv,a=this._keystream;r&&(a=this._keystream=r.slice(0),this._iv=void 0),i.encryptBlock(a,0);for(var o=0;o<s;o++)e[t+o]^=a[o]}});return t.Decryptor=i,t}(),e.mode.OFB})},function(e,t,i){!function(t,s,r){e.exports=s(i(311),i(312))}(0,function(e){return e.mode.ECB=function(){var t=e.lib.BlockCipherMode.extend();return t.Encryptor=t.extend({processBlock:function(e,t){this._cipher.encryptBlock(e,t)}}),t.Decryptor=t.extend({processBlock:function(e,t){this._cipher.decryptBlock(e,t)}}),t}(),e.mode.ECB})},function(e,t,i){!function(t,s,r){e.exports=s(i(311),i(312))}(0,function(e){return e.pad.AnsiX923={pad:function(e,t){var i=e.sigBytes,s=4*t,r=s-i%s,a=i+r-1;e.clamp(),e.words[a>>>2]|=r<<24-a%4*8,e.sigBytes+=r},unpad:function(e){var t=255&e.words[e.sigBytes-1>>>2];e.sigBytes-=t}},e.pad.Ansix923})},function(e,t,i){!function(t,s,r){e.exports=s(i(311),i(312))}(0,function(e){return e.pad.Iso10126={pad:function(t,i){var s=4*i,r=s-t.sigBytes%s;t.concat(e.lib.WordArray.random(r-1)).concat(e.lib.WordArray.create([r<<24],1))},unpad:function(e){var t=255&e.words[e.sigBytes-1>>>2];e.sigBytes-=t}},e.pad.Iso10126})},function(e,t,i){!function(t,s,r){e.exports=s(i(311),i(312))}(0,function(e){return e.pad.Iso97971={pad:function(t,i){t.concat(e.lib.WordArray.create([2147483648],1)),e.pad.ZeroPadding.pad(t,i)},unpad:function(t){e.pad.ZeroPadding.unpad(t),t.sigBytes--}},e.pad.Iso97971})},function(e,t,i){!function(t,s,r){e.exports=s(i(311),i(312))}(0,function(e){return e.pad.ZeroPadding={pad:function(e,t){var i=4*t;e.clamp(),e.sigBytes+=i-(e.sigBytes%i||i)},unpad:function(e){for(var t=e.words,i=e.sigBytes-1;!(t[i>>>2]>>>24-i%4*8&255);)i--;e.sigBytes=i+1}},e.pad.ZeroPadding})},function(e,t,i){!function(t,s,r){e.exports=s(i(311),i(312))}(0,function(e){return e.pad.NoPadding={pad:function(){},unpad:function(){}},e.pad.NoPadding})},function(e,t,i){!function(t,s,r){e.exports=s(i(311),i(312))}(0,function(e){return function(t){var i=e,s=i.lib.CipherParams,r=i.enc.Hex;i.format.Hex={stringify:function(e){return e.ciphertext.toString(r)},parse:function(e){var t=r.parse(e);return s.create({ciphertext:t})}}}(),e.format.Hex})},function(e,t,i){!function(t,s,r){e.exports=s(i(311),i(314),i(315),i(313),i(312))}(0,function(e){return function(){var t=e,i=t.lib.BlockCipher,s=t.algo,r=[],a=[],o=[],n=[],d=[],c=[],h=[],l=[],u=[],p=[];!function(){for(var e=[],t=0;t<256;t++)e[t]=t<128?t<<1:t<<1^283;var i=0,s=0;for(t=0;t<256;t++){var m=s^s<<1^s<<2^s<<3^s<<4;m=m>>>8^255&m^99,r[i]=m,a[m]=i;var f=e[i],y=e[f],b=e[y],w=257*e[m]^16843008*m;o[i]=w<<24|w>>>8,n[i]=w<<16|w>>>16,d[i]=w<<8|w>>>24,c[i]=w;w=16843009*b^65537*y^257*f^16843008*i;h[m]=w<<24|w>>>8,l[m]=w<<16|w>>>16,u[m]=w<<8|w>>>24,p[m]=w,i?(i=f^e[e[e[b^f]]],s^=e[e[s]]):i=s=1}}();var m=[0,1,2,4,8,16,32,64,128,27,54],f=s.AES=i.extend({_doReset:function(){if(!this._nRounds||this._keyPriorReset!==this._key){for(var e=this._keyPriorReset=this._key,t=e.words,i=e.sigBytes/4,s=4*((this._nRounds=i+6)+1),a=this._keySchedule=[],o=0;o<s;o++)if(o<i)a[o]=t[o];else{var n=a[o-1];o%i?i>6&&o%i==4&&(n=r[n>>>24]<<24|r[n>>>16&255]<<16|r[n>>>8&255]<<8|r[255&n]):(n=r[(n=n<<8|n>>>24)>>>24]<<24|r[n>>>16&255]<<16|r[n>>>8&255]<<8|r[255&n],n^=m[o/i|0]<<24),a[o]=a[o-i]^n}for(var d=this._invKeySchedule=[],c=0;c<s;c++){o=s-c;if(c%4)n=a[o];else n=a[o-4];d[c]=c<4||o<=4?n:h[r[n>>>24]]^l[r[n>>>16&255]]^u[r[n>>>8&255]]^p[r[255&n]]}}},encryptBlock:function(e,t){this._doCryptBlock(e,t,this._keySchedule,o,n,d,c,r)},decryptBlock:function(e,t){var i=e[t+1];e[t+1]=e[t+3],e[t+3]=i,this._doCryptBlock(e,t,this._invKeySchedule,h,l,u,p,a);i=e[t+1];e[t+1]=e[t+3],e[t+3]=i},_doCryptBlock:function(e,t,i,s,r,a,o,n){for(var d=this._nRounds,c=e[t]^i[0],h=e[t+1]^i[1],l=e[t+2]^i[2],u=e[t+3]^i[3],p=4,m=1;m<d;m++){var f=s[c>>>24]^r[h>>>16&255]^a[l>>>8&255]^o[255&u]^i[p++],y=s[h>>>24]^r[l>>>16&255]^a[u>>>8&255]^o[255&c]^i[p++],b=s[l>>>24]^r[u>>>16&255]^a[c>>>8&255]^o[255&h]^i[p++],w=s[u>>>24]^r[c>>>16&255]^a[h>>>8&255]^o[255&l]^i[p++];c=f,h=y,l=b,u=w}f=(n[c>>>24]<<24|n[h>>>16&255]<<16|n[l>>>8&255]<<8|n[255&u])^i[p++],y=(n[h>>>24]<<24|n[l>>>16&255]<<16|n[u>>>8&255]<<8|n[255&c])^i[p++],b=(n[l>>>24]<<24|n[u>>>16&255]<<16|n[c>>>8&255]<<8|n[255&h])^i[p++],w=(n[u>>>24]<<24|n[c>>>16&255]<<16|n[h>>>8&255]<<8|n[255&l])^i[p++];e[t]=f,e[t+1]=y,e[t+2]=b,e[t+3]=w},keySize:8});t.AES=i._createHelper(f)}(),e.AES})},function(e,t,i){!function(t,s,r){e.exports=s(i(311),i(314),i(315),i(313),i(312))}(0,function(e){return function(){function t(e,t){var i=(this._lBlock>>>e^this._rBlock)&t;this._rBlock^=i,this._lBlock^=i<<e}function i(e,t){var i=(this._rBlock>>>e^this._lBlock)&t;this._lBlock^=i,this._rBlock^=i<<e}var s=e,r=s.lib,a=r.WordArray,o=r.BlockCipher,n=s.algo,d=[57,49,41,33,25,17,9,1,58,50,42,34,26,18,10,2,59,51,43,35,27,19,11,3,60,52,44,36,63,55,47,39,31,23,15,7,62,54,46,38,30,22,14,6,61,53,45,37,29,21,13,5,28,20,12,4],c=[14,17,11,24,1,5,3,28,15,6,21,10,23,19,12,4,26,8,16,7,27,20,13,2,41,52,31,37,47,55,30,40,51,45,33,48,44,49,39,56,34,53,46,42,50,36,29,32],h=[1,2,4,6,8,10,12,14,15,17,19,21,23,25,27,28],l=[{0:8421888,268435456:32768,536870912:8421378,805306368:2,1073741824:512,1342177280:8421890,1610612736:8389122,1879048192:8388608,2147483648:514,2415919104:8389120,2684354560:33280,2952790016:8421376,3221225472:32770,3489660928:8388610,3758096384:0,4026531840:33282,134217728:0,402653184:8421890,671088640:33282,939524096:32768,1207959552:8421888,1476395008:512,1744830464:8421378,2013265920:2,2281701376:8389120,2550136832:33280,2818572288:8421376,3087007744:8389122,3355443200:8388610,3623878656:32770,3892314112:514,4160749568:8388608,1:32768,268435457:2,536870913:8421888,805306369:8388608,1073741825:8421378,1342177281:33280,1610612737:512,1879048193:8389122,2147483649:8421890,2415919105:8421376,2684354561:8388610,2952790017:33282,3221225473:514,3489660929:8389120,3758096385:32770,4026531841:0,134217729:8421890,402653185:8421376,671088641:8388608,939524097:512,1207959553:32768,1476395009:8388610,1744830465:2,2013265921:33282,2281701377:32770,2550136833:8389122,2818572289:514,3087007745:8421888,3355443201:8389120,3623878657:0,3892314113:33280,4160749569:8421378},{0:1074282512,16777216:16384,33554432:524288,50331648:1074266128,67108864:1073741840,83886080:1074282496,100663296:1073758208,117440512:16,134217728:540672,150994944:1073758224,167772160:1073741824,184549376:540688,201326592:524304,218103808:0,234881024:16400,251658240:1074266112,8388608:1073758208,25165824:540688,41943040:16,58720256:1073758224,75497472:1074282512,92274688:1073741824,109051904:524288,125829120:1074266128,142606336:524304,159383552:0,176160768:16384,192937984:1074266112,209715200:1073741840,226492416:540672,243269632:1074282496,260046848:16400,268435456:0,285212672:1074266128,301989888:1073758224,318767104:1074282496,335544320:1074266112,352321536:16,369098752:540688,385875968:16384,402653184:16400,419430400:524288,436207616:524304,452984832:1073741840,469762048:540672,486539264:1073758208,503316480:1073741824,520093696:1074282512,276824064:540688,293601280:524288,310378496:1074266112,327155712:16384,343932928:1073758208,360710144:1074282512,377487360:16,394264576:1073741824,411041792:1074282496,427819008:1073741840,444596224:1073758224,461373440:524304,478150656:0,494927872:16400,511705088:1074266128,528482304:540672},{0:260,1048576:0,2097152:67109120,3145728:65796,4194304:65540,5242880:67108868,6291456:67174660,7340032:67174400,8388608:67108864,9437184:67174656,10485760:65792,11534336:67174404,12582912:67109124,13631488:65536,14680064:4,15728640:256,524288:67174656,1572864:67174404,2621440:0,3670016:67109120,4718592:67108868,5767168:65536,6815744:65540,7864320:260,8912896:4,9961472:256,11010048:67174400,12058624:65796,13107200:65792,14155776:67109124,15204352:67174660,16252928:67108864,16777216:67174656,17825792:65540,18874368:65536,19922944:67109120,20971520:256,22020096:67174660,23068672:67108868,24117248:0,25165824:67109124,26214400:67108864,27262976:4,28311552:65792,29360128:67174400,30408704:260,31457280:65796,32505856:67174404,17301504:67108864,18350080:260,19398656:67174656,20447232:0,21495808:65540,22544384:67109120,23592960:256,24641536:67174404,25690112:65536,26738688:67174660,27787264:65796,28835840:67108868,29884416:67109124,30932992:67174400,31981568:4,33030144:65792},{0:2151682048,65536:2147487808,131072:4198464,196608:2151677952,262144:0,327680:4198400,393216:2147483712,458752:4194368,524288:2147483648,589824:4194304,655360:64,720896:2147487744,786432:2151678016,851968:4160,917504:4096,983040:2151682112,32768:2147487808,98304:64,163840:2151678016,229376:2147487744,294912:4198400,360448:2151682112,425984:0,491520:2151677952,557056:4096,622592:2151682048,688128:4194304,753664:4160,819200:2147483648,884736:4194368,950272:4198464,1015808:2147483712,1048576:4194368,1114112:4198400,1179648:2147483712,1245184:0,1310720:4160,1376256:2151678016,1441792:2151682048,1507328:2147487808,1572864:2151682112,1638400:2147483648,1703936:2151677952,1769472:4198464,1835008:2147487744,1900544:4194304,1966080:64,2031616:4096,1081344:2151677952,1146880:2151682112,1212416:0,1277952:4198400,1343488:4194368,1409024:2147483648,1474560:2147487808,1540096:64,1605632:2147483712,1671168:4096,1736704:2147487744,1802240:2151678016,1867776:4160,1933312:2151682048,1998848:4194304,2064384:4198464},{0:128,4096:17039360,8192:262144,12288:536870912,16384:537133184,20480:16777344,24576:553648256,28672:262272,32768:16777216,36864:537133056,40960:536871040,45056:553910400,49152:553910272,53248:0,57344:17039488,61440:553648128,2048:17039488,6144:553648256,10240:128,14336:17039360,18432:262144,22528:537133184,26624:553910272,30720:536870912,34816:537133056,38912:0,43008:553910400,47104:16777344,51200:536871040,55296:553648128,59392:16777216,63488:262272,65536:262144,69632:128,73728:536870912,77824:553648256,81920:16777344,86016:553910272,90112:537133184,94208:16777216,98304:553910400,102400:553648128,106496:17039360,110592:537133056,114688:262272,118784:536871040,122880:0,126976:17039488,67584:553648256,71680:16777216,75776:17039360,79872:537133184,83968:536870912,88064:17039488,92160:128,96256:553910272,100352:262272,104448:553910400,108544:0,112640:553648128,116736:16777344,120832:262144,124928:537133056,129024:536871040},{0:268435464,256:8192,512:270532608,768:270540808,1024:268443648,1280:2097152,1536:2097160,1792:268435456,2048:0,2304:268443656,2560:2105344,2816:8,3072:270532616,3328:2105352,3584:8200,3840:270540800,128:270532608,384:270540808,640:8,896:2097152,1152:2105352,1408:268435464,1664:268443648,1920:8200,2176:2097160,2432:8192,2688:268443656,2944:270532616,3200:0,3456:270540800,3712:2105344,3968:268435456,4096:268443648,4352:270532616,4608:270540808,4864:8200,5120:2097152,5376:268435456,5632:268435464,5888:2105344,6144:2105352,6400:0,6656:8,6912:270532608,7168:8192,7424:268443656,7680:270540800,7936:2097160,4224:8,4480:2105344,4736:2097152,4992:268435464,5248:268443648,5504:8200,5760:270540808,6016:270532608,6272:270540800,6528:270532616,6784:8192,7040:2105352,7296:2097160,7552:0,7808:268435456,8064:268443656},{0:1048576,16:33555457,32:1024,48:1049601,64:34604033,80:0,96:1,112:34603009,128:33555456,144:1048577,160:33554433,176:34604032,192:34603008,208:1025,224:1049600,240:33554432,8:34603009,24:0,40:33555457,56:34604032,72:1048576,88:33554433,104:33554432,120:1025,136:1049601,152:33555456,168:34603008,184:1048577,200:1024,216:34604033,232:1,248:1049600,256:33554432,272:1048576,288:33555457,304:34603009,320:1048577,336:33555456,352:34604032,368:1049601,384:1025,400:34604033,416:1049600,432:1,448:0,464:34603008,480:33554433,496:1024,264:1049600,280:33555457,296:34603009,312:1,328:33554432,344:1048576,360:1025,376:34604032,392:33554433,408:34603008,424:0,440:34604033,456:1049601,472:1024,488:33555456,504:1048577},{0:134219808,1:131072,2:134217728,3:32,4:131104,5:134350880,6:134350848,7:2048,8:134348800,9:134219776,10:133120,11:134348832,12:2080,13:0,14:134217760,15:133152,2147483648:2048,2147483649:134350880,2147483650:134219808,2147483651:134217728,2147483652:134348800,2147483653:133120,2147483654:133152,2147483655:32,2147483656:134217760,2147483657:2080,2147483658:131104,2147483659:134350848,2147483660:0,2147483661:134348832,2147483662:134219776,2147483663:131072,16:133152,17:134350848,18:32,19:2048,20:134219776,21:134217760,22:134348832,23:131072,24:0,25:131104,26:134348800,27:134219808,28:134350880,29:133120,30:2080,31:134217728,2147483664:131072,2147483665:2048,2147483666:134348832,2147483667:133152,2147483668:32,2147483669:134348800,2147483670:134217728,2147483671:134219808,2147483672:134350880,2147483673:134217760,2147483674:134219776,2147483675:0,2147483676:133120,2147483677:2080,2147483678:131104,2147483679:134350848}],u=[4160749569,528482304,33030144,2064384,129024,8064,504,2147483679],p=n.DES=o.extend({_doReset:function(){for(var e=this._key.words,t=[],i=0;i<56;i++){var s=d[i]-1;t[i]=e[s>>>5]>>>31-s%32&1}for(var r=this._subKeys=[],a=0;a<16;a++){var o=r[a]=[],n=h[a];for(i=0;i<24;i++)o[i/6|0]|=t[(c[i]-1+n)%28]<<31-i%6,o[4+(i/6|0)]|=t[28+(c[i+24]-1+n)%28]<<31-i%6;o[0]=o[0]<<1|o[0]>>>31;for(i=1;i<7;i++)o[i]=o[i]>>>4*(i-1)+3;o[7]=o[7]<<5|o[7]>>>27}var l=this._invSubKeys=[];for(i=0;i<16;i++)l[i]=r[15-i]},encryptBlock:function(e,t){this._doCryptBlock(e,t,this._subKeys)},decryptBlock:function(e,t){this._doCryptBlock(e,t,this._invSubKeys)},_doCryptBlock:function(e,s,r){this._lBlock=e[s],this._rBlock=e[s+1],t.call(this,4,252645135),t.call(this,16,65535),i.call(this,2,858993459),i.call(this,8,16711935),t.call(this,1,1431655765);for(var a=0;a<16;a++){for(var o=r[a],n=this._lBlock,d=this._rBlock,c=0,h=0;h<8;h++)c|=l[h][((d^o[h])&u[h])>>>0];this._lBlock=d,this._rBlock=n^c}var p=this._lBlock;this._lBlock=this._rBlock,this._rBlock=p,t.call(this,1,1431655765),i.call(this,8,16711935),i.call(this,2,858993459),t.call(this,16,65535),t.call(this,4,252645135),e[s]=this._lBlock,e[s+1]=this._rBlock},keySize:2,ivSize:2,blockSize:2});s.DES=o._createHelper(p);var m=n.TripleDES=o.extend({_doReset:function(){var e=this._key.words;this._des1=p.createEncryptor(a.create(e.slice(0,2))),this._des2=p.createEncryptor(a.create(e.slice(2,4))),this._des3=p.createEncryptor(a.create(e.slice(4,6)))},encryptBlock:function(e,t){this._des1.encryptBlock(e,t),this._des2.decryptBlock(e,t),this._des3.encryptBlock(e,t)},decryptBlock:function(e,t){this._des3.decryptBlock(e,t),this._des2.encryptBlock(e,t),this._des1.decryptBlock(e,t)},keySize:6,ivSize:2,blockSize:2});s.TripleDES=o._createHelper(m)}(),e.TripleDES})},function(e,t,i){!function(t,s,r){e.exports=s(i(311),i(314),i(315),i(313),i(312))}(0,function(e){return function(){function t(){for(var e=this._S,t=this._i,i=this._j,s=0,r=0;r<4;r++){i=(i+e[t=(t+1)%256])%256;var a=e[t];e[t]=e[i],e[i]=a,s|=e[(e[t]+e[i])%256]<<24-8*r}return this._i=t,this._j=i,s}var i=e,s=i.lib.StreamCipher,r=i.algo,a=r.RC4=s.extend({_doReset:function(){for(var e=this._key,t=e.words,i=e.sigBytes,s=this._S=[],r=0;r<256;r++)s[r]=r;r=0;for(var a=0;r<256;r++){var o=r%i,n=t[o>>>2]>>>24-o%4*8&255;a=(a+s[r]+n)%256;var d=s[r];s[r]=s[a],s[a]=d}this._i=this._j=0},_doProcessBlock:function(e,i){e[i]^=t.call(this)},keySize:8,ivSize:0});i.RC4=s._createHelper(a);var o=r.RC4Drop=a.extend({cfg:a.cfg.extend({drop:192}),_doReset:function(){a._doReset.call(this);for(var e=this.cfg.drop;e>0;e--)t.call(this)}});i.RC4Drop=s._createHelper(o)}(),e.RC4})},function(e,t,i){!function(t,s,r){e.exports=s(i(311),i(314),i(315),i(313),i(312))}(0,function(e){return function(){function t(){for(var e=this._X,t=this._C,i=0;i<8;i++)a[i]=t[i];t[0]=t[0]+1295307597+this._b|0,t[1]=t[1]+3545052371+(t[0]>>>0<a[0]>>>0?1:0)|0,t[2]=t[2]+886263092+(t[1]>>>0<a[1]>>>0?1:0)|0,t[3]=t[3]+1295307597+(t[2]>>>0<a[2]>>>0?1:0)|0,t[4]=t[4]+3545052371+(t[3]>>>0<a[3]>>>0?1:0)|0,t[5]=t[5]+886263092+(t[4]>>>0<a[4]>>>0?1:0)|0,t[6]=t[6]+1295307597+(t[5]>>>0<a[5]>>>0?1:0)|0,t[7]=t[7]+3545052371+(t[6]>>>0<a[6]>>>0?1:0)|0,this._b=t[7]>>>0<a[7]>>>0?1:0;for(i=0;i<8;i++){var s=e[i]+t[i],r=65535&s,n=s>>>16,d=((r*r>>>17)+r*n>>>15)+n*n,c=((4294901760&s)*s|0)+((65535&s)*s|0);o[i]=d^c}e[0]=o[0]+(o[7]<<16|o[7]>>>16)+(o[6]<<16|o[6]>>>16)|0,e[1]=o[1]+(o[0]<<8|o[0]>>>24)+o[7]|0,e[2]=o[2]+(o[1]<<16|o[1]>>>16)+(o[0]<<16|o[0]>>>16)|0,e[3]=o[3]+(o[2]<<8|o[2]>>>24)+o[1]|0,e[4]=o[4]+(o[3]<<16|o[3]>>>16)+(o[2]<<16|o[2]>>>16)|0,e[5]=o[5]+(o[4]<<8|o[4]>>>24)+o[3]|0,e[6]=o[6]+(o[5]<<16|o[5]>>>16)+(o[4]<<16|o[4]>>>16)|0,e[7]=o[7]+(o[6]<<8|o[6]>>>24)+o[5]|0}var i=e,s=i.lib.StreamCipher,r=[],a=[],o=[],n=i.algo.Rabbit=s.extend({_doReset:function(){for(var e=this._key.words,i=this.cfg.iv,s=0;s<4;s++)e[s]=16711935&(e[s]<<8|e[s]>>>24)|4278255360&(e[s]<<24|e[s]>>>8);var r=this._X=[e[0],e[3]<<16|e[2]>>>16,e[1],e[0]<<16|e[3]>>>16,e[2],e[1]<<16|e[0]>>>16,e[3],e[2]<<16|e[1]>>>16],a=this._C=[e[2]<<16|e[2]>>>16,4294901760&e[0]|65535&e[1],e[3]<<16|e[3]>>>16,4294901760&e[1]|65535&e[2],e[0]<<16|e[0]>>>16,4294901760&e[2]|65535&e[3],e[1]<<16|e[1]>>>16,4294901760&e[3]|65535&e[0]];this._b=0;for(s=0;s<4;s++)t.call(this);for(s=0;s<8;s++)a[s]^=r[s+4&7];if(i){var o=i.words,n=o[0],d=o[1],c=16711935&(n<<8|n>>>24)|4278255360&(n<<24|n>>>8),h=16711935&(d<<8|d>>>24)|4278255360&(d<<24|d>>>8),l=c>>>16|4294901760&h,u=h<<16|65535&c;a[0]^=c,a[1]^=l,a[2]^=h,a[3]^=u,a[4]^=c,a[5]^=l,a[6]^=h,a[7]^=u;for(s=0;s<4;s++)t.call(this)}},_doProcessBlock:function(e,i){var s=this._X;t.call(this),r[0]=s[0]^s[5]>>>16^s[3]<<16,r[1]=s[2]^s[7]>>>16^s[5]<<16,r[2]=s[4]^s[1]>>>16^s[7]<<16,r[3]=s[6]^s[3]>>>16^s[1]<<16;for(var a=0;a<4;a++)r[a]=16711935&(r[a]<<8|r[a]>>>24)|4278255360&(r[a]<<24|r[a]>>>8),e[i+a]^=r[a]},blockSize:4,ivSize:2});i.Rabbit=s._createHelper(n)}(),e.Rabbit})},function(e,t,i){!function(t,s,r){e.exports=s(i(311),i(314),i(315),i(313),i(312))}(0,function(e){return function(){function t(){for(var e=this._X,t=this._C,i=0;i<8;i++)a[i]=t[i];t[0]=t[0]+1295307597+this._b|0,t[1]=t[1]+3545052371+(t[0]>>>0<a[0]>>>0?1:0)|0,t[2]=t[2]+886263092+(t[1]>>>0<a[1]>>>0?1:0)|0,t[3]=t[3]+1295307597+(t[2]>>>0<a[2]>>>0?1:0)|0,t[4]=t[4]+3545052371+(t[3]>>>0<a[3]>>>0?1:0)|0,t[5]=t[5]+886263092+(t[4]>>>0<a[4]>>>0?1:0)|0,t[6]=t[6]+1295307597+(t[5]>>>0<a[5]>>>0?1:0)|0,t[7]=t[7]+3545052371+(t[6]>>>0<a[6]>>>0?1:0)|0,this._b=t[7]>>>0<a[7]>>>0?1:0;for(i=0;i<8;i++){var s=e[i]+t[i],r=65535&s,n=s>>>16,d=((r*r>>>17)+r*n>>>15)+n*n,c=((4294901760&s)*s|0)+((65535&s)*s|0);o[i]=d^c}e[0]=o[0]+(o[7]<<16|o[7]>>>16)+(o[6]<<16|o[6]>>>16)|0,e[1]=o[1]+(o[0]<<8|o[0]>>>24)+o[7]|0,e[2]=o[2]+(o[1]<<16|o[1]>>>16)+(o[0]<<16|o[0]>>>16)|0,e[3]=o[3]+(o[2]<<8|o[2]>>>24)+o[1]|0,e[4]=o[4]+(o[3]<<16|o[3]>>>16)+(o[2]<<16|o[2]>>>16)|0,e[5]=o[5]+(o[4]<<8|o[4]>>>24)+o[3]|0,e[6]=o[6]+(o[5]<<16|o[5]>>>16)+(o[4]<<16|o[4]>>>16)|0,e[7]=o[7]+(o[6]<<8|o[6]>>>24)+o[5]|0}var i=e,s=i.lib.StreamCipher,r=[],a=[],o=[],n=i.algo.RabbitLegacy=s.extend({_doReset:function(){var e=this._key.words,i=this.cfg.iv,s=this._X=[e[0],e[3]<<16|e[2]>>>16,e[1],e[0]<<16|e[3]>>>16,e[2],e[1]<<16|e[0]>>>16,e[3],e[2]<<16|e[1]>>>16],r=this._C=[e[2]<<16|e[2]>>>16,4294901760&e[0]|65535&e[1],e[3]<<16|e[3]>>>16,4294901760&e[1]|65535&e[2],e[0]<<16|e[0]>>>16,4294901760&e[2]|65535&e[3],e[1]<<16|e[1]>>>16,4294901760&e[3]|65535&e[0]];this._b=0;for(var a=0;a<4;a++)t.call(this);for(a=0;a<8;a++)r[a]^=s[a+4&7];if(i){var o=i.words,n=o[0],d=o[1],c=16711935&(n<<8|n>>>24)|4278255360&(n<<24|n>>>8),h=16711935&(d<<8|d>>>24)|4278255360&(d<<24|d>>>8),l=c>>>16|4294901760&h,u=h<<16|65535&c;r[0]^=c,r[1]^=l,r[2]^=h,r[3]^=u,r[4]^=c,r[5]^=l,r[6]^=h,r[7]^=u;for(a=0;a<4;a++)t.call(this)}},_doProcessBlock:function(e,i){var s=this._X;t.call(this),r[0]=s[0]^s[5]>>>16^s[3]<<16,r[1]=s[2]^s[7]>>>16^s[5]<<16,r[2]=s[4]^s[1]>>>16^s[7]<<16,r[3]=s[6]^s[3]>>>16^s[1]<<16;for(var a=0;a<4;a++)r[a]=16711935&(r[a]<<8|r[a]>>>24)|4278255360&(r[a]<<24|r[a]>>>8),e[i+a]^=r[a]},blockSize:4,ivSize:2});i.RabbitLegacy=s._createHelper(n)}(),e.RabbitLegacy})},function(e,t,i){"use strict";var s=i(366),r=i(367),a=i(327);e.exports={formats:a,parse:r,stringify:s}},function(e,t,i){"use strict";var s=i(326),r=i(327),a={brackets:function(e){return e+"[]"},indices:function(e,t){return e+"["+t+"]"},repeat:function(e){return e}},o=Date.prototype.toISOString,n={delimiter:"&",encode:!0,encoder:s.encode,encodeValuesOnly:!1,serializeDate:function(e){return o.call(e)},skipNulls:!1,strictNullHandling:!1},d=function e(t,i,r,a,o,d,c,h,l,u,p,m){var f=t;if("function"===typeof c)f=c(i,f);else if(f instanceof Date)f=u(f);else if(null===f){if(a)return d&&!m?d(i,n.encoder):i;f=""}if("string"===typeof f||"number"===typeof f||"boolean"===typeof f||s.isBuffer(f)){if(d){return[p(m?i:d(i,n.encoder))+"="+p(d(f,n.encoder))]}return[p(i)+"="+p(String(f))]}var y=[];if("undefined"===typeof f)return y;var b;if(Array.isArray(c))b=c;else{var w=Object.keys(f);b=h?w.sort(h):w}for(var k=0;k<b.length;++k){var g=b[k];o&&null===f[g]||(y=Array.isArray(f)?y.concat(e(f[g],r(i,g),r,a,o,d,c,h,l,u,p,m)):y.concat(e(f[g],i+(l?"."+g:"["+g+"]"),r,a,o,d,c,h,l,u,p,m)))}return y};e.exports=function(e,t){var i=e,o=t?s.assign({},t):{};if(null!==o.encoder&&void 0!==o.encoder&&"function"!==typeof o.encoder)throw new TypeError("Encoder has to be a function.");var c="undefined"===typeof o.delimiter?n.delimiter:o.delimiter,h="boolean"===typeof o.strictNullHandling?o.strictNullHandling:n.strictNullHandling,l="boolean"===typeof o.skipNulls?o.skipNulls:n.skipNulls,u="boolean"===typeof o.encode?o.encode:n.encode,p="function"===typeof o.encoder?o.encoder:n.encoder,m="function"===typeof o.sort?o.sort:null,f="undefined"!==typeof o.allowDots&&o.allowDots,y="function"===typeof o.serializeDate?o.serializeDate:n.serializeDate,b="boolean"===typeof o.encodeValuesOnly?o.encodeValuesOnly:n.encodeValuesOnly;if("undefined"===typeof o.format)o.format=r.default;else if(!Object.prototype.hasOwnProperty.call(r.formatters,o.format))throw new TypeError("Unknown format option provided.");var w,k,g=r.formatters[o.format];"function"===typeof o.filter?i=(k=o.filter)("",i):Array.isArray(o.filter)&&(w=k=o.filter);var T=[];if("object"!==typeof i||null===i)return"";var v;v=o.arrayFormat in a?o.arrayFormat:"indices"in o?o.indices?"indices":"repeat":"indices";var C=a[v];w||(w=Object.keys(i)),m&&w.sort(m);for(var O=0;O<w.length;++O){var B=w[O];l&&null===i[B]||(T=T.concat(d(i[B],B,C,h,l,u?p:null,k,m,f,y,g,b)))}var x=T.join(c),_=!0===o.addQueryPrefix?"?":"";return x.length>0?_+x:""}},function(e,t,i){"use strict";var s=i(326),r=Object.prototype.hasOwnProperty,a={allowDots:!1,allowPrototypes:!1,arrayLimit:20,decoder:s.decode,delimiter:"&",depth:5,parameterLimit:1e3,plainObjects:!1,strictNullHandling:!1},o=function(e,t,i){if(e){var s=i.allowDots?e.replace(/\.([^.[]+)/g,"[$1]"):e,a=/(\[[^[\]]*])/g,o=/(\[[^[\]]*])/.exec(s),n=o?s.slice(0,o.index):s,d=[];if(n){if(!i.plainObjects&&r.call(Object.prototype,n)&&!i.allowPrototypes)return;d.push(n)}for(var c=0;null!==(o=a.exec(s))&&c<i.depth;){if(c+=1,!i.plainObjects&&r.call(Object.prototype,o[1].slice(1,-1))&&!i.allowPrototypes)return;d.push(o[1])}return o&&d.push("["+s.slice(o.index)+"]"),function(e,t,i){for(var s=t,r=e.length-1;r>=0;--r){var a,o=e[r];if("[]"===o)a=(a=[]).concat(s);else{a=i.plainObjects?Object.create(null):{};var n="["===o.charAt(0)&&"]"===o.charAt(o.length-1)?o.slice(1,-1):o,d=parseInt(n,10);!isNaN(d)&&o!==n&&String(d)===n&&d>=0&&i.parseArrays&&d<=i.arrayLimit?(a=[])[d]=s:a[n]=s}s=a}return s}(d,t,i)}};e.exports=function(e,t){var i=t?s.assign({},t):{};if(null!==i.decoder&&void 0!==i.decoder&&"function"!==typeof i.decoder)throw new TypeError("Decoder has to be a function.");if(i.ignoreQueryPrefix=!0===i.ignoreQueryPrefix,i.delimiter="string"===typeof i.delimiter||s.isRegExp(i.delimiter)?i.delimiter:a.delimiter,i.depth="number"===typeof i.depth?i.depth:a.depth,i.arrayLimit="number"===typeof i.arrayLimit?i.arrayLimit:a.arrayLimit,i.parseArrays=!1!==i.parseArrays,i.decoder="function"===typeof i.decoder?i.decoder:a.decoder,i.allowDots="boolean"===typeof i.allowDots?i.allowDots:a.allowDots,i.plainObjects="boolean"===typeof i.plainObjects?i.plainObjects:a.plainObjects,i.allowPrototypes="boolean"===typeof i.allowPrototypes?i.allowPrototypes:a.allowPrototypes,i.parameterLimit="number"===typeof i.parameterLimit?i.parameterLimit:a.parameterLimit,i.strictNullHandling="boolean"===typeof i.strictNullHandling?i.strictNullHandling:a.strictNullHandling,""===e||null===e||"undefined"===typeof e)return i.plainObjects?Object.create(null):{};for(var n="string"===typeof e?function(e,t){for(var i={},s=t.ignoreQueryPrefix?e.replace(/^\?/,""):e,o=t.parameterLimit===1/0?void 0:t.parameterLimit,n=s.split(t.delimiter,o),d=0;d<n.length;++d){var c,h,l=n[d],u=l.indexOf("]="),p=-1===u?l.indexOf("="):u+1;-1===p?(c=t.decoder(l,a.decoder),h=t.strictNullHandling?null:""):(c=t.decoder(l.slice(0,p),a.decoder),h=t.decoder(l.slice(p+1),a.decoder)),r.call(i,c)?i[c]=[].concat(i[c]).concat(h):i[c]=h}return i}(e,i):e,d=i.plainObjects?Object.create(null):{},c=Object.keys(n),h=0;h<c.length;++h){var l=c[h],u=o(l,n[l],i);d=s.merge(d,u,i)}return s.compact(d)}},function(e,t,i){"use strict";const{sleep:s}=i(320),r=e=>{let t=Date.now(),i="undefined"!=typeof e.numTokens?e.numTokens:e.capacity,a=[],o=!1;return Object.assign(r=>{if(a.length>e.maxCapacity)throw new Error("Backlog is over max capacity of "+e.maxCapacity);return new Promise(async(n,d)=>{try{if(a.push({cost:r,resolve:n,reject:d}),!o){for(o=!0;a.length>0;){if((e.capacity?i>0:i>=0)&&a.length>0){let{cost:t,resolve:s,reject:r}=a[0];t=t||e.defaultCost,i>=Math.min(t,e.capacity)&&(i-=t,a.shift(),s())}let r=Date.now(),o=r-t;t=r,i=Math.min(e.capacity,i+o*e.refillRate),await s(e.delay)}o=!1}}catch(e){d(e)}})},e,{configure:t=>r(Object.assign({},e,t))})};e.exports=r},function(e,t,i){var s;!function(r){"use strict";function a(e){var t=e&&e.Promise||r.Promise,i=e&&e.XMLHttpRequest||r.XMLHttpRequest,s=r;return function(){var e=Object.create(s,{fetch:{value:void 0,writable:!0}});return function(e){function s(e){if("string"!==typeof e&&(e=String(e)),/[^a-z0-9\-#$%&'*+.\^_`|~]/i.test(e))throw new TypeError("Invalid character in header field name");return e.toLowerCase()}function r(e){return"string"!==typeof e&&(e=String(e)),e}function a(e){var t={next:function(){var t=e.shift();return{done:void 0===t,value:t}}};return f.iterable&&(t[Symbol.iterator]=function(){return t}),t}function o(e){this.map={},e instanceof o?e.forEach(function(e,t){this.append(t,e)},this):Array.isArray(e)?e.forEach(function(e){this.append(e[0],e[1])},this):e&&Object.getOwnPropertyNames(e).forEach(function(t){this.append(t,e[t])},this)}function n(e){if(e.bodyUsed)return t.reject(new TypeError("Already read"));e.bodyUsed=!0}function d(e){return new t(function(t,i){e.onload=function(){t(e.result)},e.onerror=function(){i(e.error)}})}function c(e){var t=new FileReader,i=d(t);return t.readAsArrayBuffer(e),i}function h(e){if(e.slice)return e.slice(0);var t=new Uint8Array(e.byteLength);return t.set(new Uint8Array(e)),t.buffer}function l(){return this.bodyUsed=!1,this._initBody=function(e){if(this._bodyInit=e,e)if("string"===typeof e)this._bodyText=e;else if(f.blob&&Blob.prototype.isPrototypeOf(e))this._bodyBlob=e;else if(f.formData&&FormData.prototype.isPrototypeOf(e))this._bodyFormData=e;else if(f.searchParams&&URLSearchParams.prototype.isPrototypeOf(e))this._bodyText=e.toString();else if(f.arrayBuffer&&f.blob&&b(e))this._bodyArrayBuffer=h(e.buffer),this._bodyInit=new Blob([this._bodyArrayBuffer]);else{if(!f.arrayBuffer||!ArrayBuffer.prototype.isPrototypeOf(e)&&!w(e))throw new Error("unsupported BodyInit type");this._bodyArrayBuffer=h(e)}else this._bodyText="";this.headers.get("content-type")||("string"===typeof e?this.headers.set("content-type","text/plain;charset=UTF-8"):this._bodyBlob&&this._bodyBlob.type?this.headers.set("content-type",this._bodyBlob.type):f.searchParams&&URLSearchParams.prototype.isPrototypeOf(e)&&this.headers.set("content-type","application/x-www-form-urlencoded;charset=UTF-8"))},f.blob&&(this.blob=function(){var e=n(this);if(e)return e;if(this._bodyBlob)return t.resolve(this._bodyBlob);if(this._bodyArrayBuffer)return t.resolve(new Blob([this._bodyArrayBuffer]));if(this._bodyFormData)throw new Error("could not read FormData body as blob");return t.resolve(new Blob([this._bodyText]))},this.arrayBuffer=function(){return this._bodyArrayBuffer?n(this)||t.resolve(this._bodyArrayBuffer):this.blob().then(c)}),this.text=function(){var e=n(this);if(e)return e;if(this._bodyBlob)return function(e){var t=new FileReader,i=d(t);return t.readAsText(e),i}(this._bodyBlob);if(this._bodyArrayBuffer)return t.resolve(function(e){for(var t=new Uint8Array(e),i=new Array(t.length),s=0;s<t.length;s++)i[s]=String.fromCharCode(t[s]);return i.join("")}(this._bodyArrayBuffer));if(this._bodyFormData)throw new Error("could not read FormData body as text");return t.resolve(this._bodyText)},f.formData&&(this.formData=function(){return this.text().then(p)}),this.json=function(){return this.text().then(JSON.parse)},this}function u(e,t){var i=(t=t||{}).body;if(e instanceof u){if(e.bodyUsed)throw new TypeError("Already read");this.url=e.url,this.credentials=e.credentials,t.headers||(this.headers=new o(e.headers)),this.method=e.method,this.mode=e.mode,i||null==e._bodyInit||(i=e._bodyInit,e.bodyUsed=!0)}else this.url=String(e);if(this.credentials=t.credentials||this.credentials||"omit",!t.headers&&this.headers||(this.headers=new o(t.headers)),this.method=function(e){var t=e.toUpperCase();return k.indexOf(t)>-1?t:e}(t.method||this.method||"GET"),this.mode=t.mode||this.mode||null,this.referrer=null,("GET"===this.method||"HEAD"===this.method)&&i)throw new TypeError("Body not allowed for GET or HEAD requests");this._initBody(i)}function p(e){var t=new FormData;return e.trim().split("&").forEach(function(e){if(e){var i=e.split("="),s=i.shift().replace(/\+/g," "),r=i.join("=").replace(/\+/g," ");t.append(decodeURIComponent(s),decodeURIComponent(r))}}),t}function m(e,t){t||(t={}),this.type="default",this.status="status"in t?t.status:200,this.ok=this.status>=200&&this.status<300,this.statusText="statusText"in t?t.statusText:"OK",this.headers=new o(t.headers),this.url=t.url||"",this._initBody(e)}if(!e.fetch){var f={searchParams:"URLSearchParams"in e,iterable:"Symbol"in e&&"iterator"in Symbol,blob:"FileReader"in e&&"Blob"in e&&function(){try{return new Blob,!0}catch(e){return!1}}(),formData:"FormData"in e,arrayBuffer:"ArrayBuffer"in e};if(f.arrayBuffer)var y=["[object Int8Array]","[object Uint8Array]","[object Uint8ClampedArray]","[object Int16Array]","[object Uint16Array]","[object Int32Array]","[object Uint32Array]","[object Float32Array]","[object Float64Array]"],b=function(e){return e&&DataView.prototype.isPrototypeOf(e)},w=ArrayBuffer.isView||function(e){return e&&y.indexOf(Object.prototype.toString.call(e))>-1};o.prototype.append=function(e,t){e=s(e),t=r(t);var i=this.map[e];this.map[e]=i?i+","+t:t},o.prototype.delete=function(e){delete this.map[s(e)]},o.prototype.get=function(e){return e=s(e),this.has(e)?this.map[e]:null},o.prototype.has=function(e){return this.map.hasOwnProperty(s(e))},o.prototype.set=function(e,t){this.map[s(e)]=r(t)},o.prototype.forEach=function(e,t){for(var i in this.map)this.map.hasOwnProperty(i)&&e.call(t,this.map[i],i,this)},o.prototype.keys=function(){var e=[];return this.forEach(function(t,i){e.push(i)}),a(e)},o.prototype.values=function(){var e=[];return this.forEach(function(t){e.push(t)}),a(e)},o.prototype.entries=function(){var e=[];return this.forEach(function(t,i){e.push([i,t])}),a(e)},f.iterable&&(o.prototype[Symbol.iterator]=o.prototype.entries);var k=["DELETE","GET","HEAD","OPTIONS","POST","PUT"];u.prototype.clone=function(){return new u(this,{body:this._bodyInit})},l.call(u.prototype),l.call(m.prototype),m.prototype.clone=function(){return new m(this._bodyInit,{status:this.status,statusText:this.statusText,headers:new o(this.headers),url:this.url})},m.error=function(){var e=new m(null,{status:0,statusText:""});return e.type="error",e};var g=[301,302,303,307,308];m.redirect=function(e,t){if(-1===g.indexOf(t))throw new RangeError("Invalid status code");return new m(null,{status:t,headers:{location:e}})},e.Headers=o,e.Request=u,e.Response=m,e.fetch=function(e,s){return new t(function(t,r){var a=new u(e,s),n=new i;n.onload=function(){var e={status:n.status,statusText:n.statusText,headers:function(e){var t=new o;return e.split(/\r?\n/).forEach(function(e){var i=e.split(":"),s=i.shift().trim();if(s){var r=i.join(":").trim();t.append(s,r)}}),t}(n.getAllResponseHeaders()||"")};e.url="responseURL"in n?n.responseURL:e.headers.get("X-Request-URL");var i="response"in n?n.response:n.responseText;t(new m(i,e))},n.onerror=function(){r(new TypeError("Network request failed"))},n.ontimeout=function(){r(new TypeError("Network request failed"))},n.open(a.method,a.url,!0),"include"===a.credentials&&(n.withCredentials=!0),"responseType"in n&&f.blob&&(n.responseType="blob"),a.headers.forEach(function(e,t){n.setRequestHeader(t,e)}),n.send("undefined"===typeof a._bodyInit?null:a._bodyInit)})},e.fetch.polyfill=!0}}("undefined"!==typeof e?e:this),{fetch:e.fetch,Headers:e.Headers,Request:e.Request,Response:e.Response}}()}void 0===(s=function(){return a}.call(t,i,t,e))||(e.exports=s)}("undefined"===typeof self?this:self)},function(e,t,i){"use strict";e.exports=class{constructor(e,t){this.exchange=e,this.symbol=t,this.market=e.markets[t]}amountToPrecision(e){return this.exchange.amountToPrecision(this.symbol,e)}createLimitBuyOrder(e,t){return this.exchange.createLimitBuyOrder(this.symbol,e,t)}createLimitSellOrder(e,t){return this.exchange.createLimitSellOrder(this.symbol,e,t)}}},function(e,t,i){"use strict";const s=i(310),{ExchangeError:r,AuthenticationError:a}=i(309);e.exports=class extends s{describe(){return this.deepExtend(super.describe(),{id:"_1broker",name:"1Broker",countries:"US",rateLimit:1500,version:"v2",hasPublicAPI:!1,hasCORS:!0,hasFetchTrades:!1,hasFetchOHLCV:!0,timeframes:{"1m":"60","15m":"900","1h":"3600","1d":"86400"},urls:{logo:"https://user-images.githubusercontent.com/1294454/27766021-420bd9fc-5ecb-11e7-8ed6-56d0081efed2.jpg",api:"https://1broker.com/api",www:"https://1broker.com",doc:"https://1broker.com/?c=en/content/api-documentation"},requiredCredentials:{apiKey:!0,secret:!1},api:{private:{get:["market/bars","market/categories","market/details","market/list","market/quotes","market/ticks","order/cancel","order/create","order/open","position/close","position/close_cancel","position/edit","position/history","position/open","position/shared/get","social/profile_statistics","social/profile_trades","user/bitcoin_deposit_address","user/details","user/overview","user/quota_status","user/transaction_log"]}}})}async fetchCategories(){let e=(await this.privateGetMarketCategories()).response,t=[];for(let i=0;i<e.length;i++)e[i]&&t.push(e[i]);return t}async fetchMarkets(){let e=await this.fetchCategories(),t=[];for(let i=0;i<e.length;i++){let s=e[i],r=await this.privateGetMarketList({category:s.toLowerCase()});for(let e=0;e<r.response.length;e++){let i=r.response[e],a=i.symbol,o=void 0,n=void 0,d=void 0;if("FOREX"==s||"CRYPTO"==s){let e=(o=i.name).split("/");n=e[0],d=e[1]}else o=(n=a)+"/"+(d="USD");n=this.commonCurrencyCode(n),d=this.commonCurrencyCode(d),t.push({id:a,symbol:o,base:n,quote:d,info:i})}}return t}async fetchBalance(e={}){await this.loadMarkets();let t=(await this.privateGetUserOverview()).response,i={info:t},s=Object.keys(this.currencies);for(let a=0;a<s.length;a++){i[s[a]]=this.account()}let r=parseFloat(t.balance);return i.BTC.free=r,i.BTC.total=r,this.parseBalance(i)}async fetchOrderBook(e,t={}){await this.loadMarkets();let i=(await this.privateGetMarketQuotes(this.extend({symbols:this.marketId(e)},t))).response[0],s=this.parse8601(i.updated),r=[parseFloat(i.bid),void 0],a=[parseFloat(i.ask),void 0];return{timestamp:s,datetime:this.iso8601(s),bids:[r],asks:[a]}}async fetchTrades(e){throw new r(this.id+" fetchTrades () method not implemented yet")}async fetchTicker(e,t={}){await this.loadMarkets();let i=await this.privateGetMarketBars(this.extend({symbol:this.marketId(e),resolution:60,limit:1},t)),s=await this.fetchOrderBook(e),r=i.response[0],a=this.parse8601(r.date);return{symbol:e,timestamp:a,datetime:this.iso8601(a),high:parseFloat(r.h),low:parseFloat(r.l),bid:s.bids[0][0],ask:s.asks[0][0],vwap:void 0,open:parseFloat(r.o),close:parseFloat(r.c),first:void 0,last:void 0,change:void 0,percentage:void 0,average:void 0,baseVolume:void 0,quoteVolume:void 0,info:r}}parseOHLCV(e,t,i="1m",s,r){return[this.parse8601(e.date),parseFloat(e.o),parseFloat(e.h),parseFloat(e.l),parseFloat(e.c),void 0]}async fetchOHLCV(e,t="1m",i,s,r={}){await this.loadMarkets();let a=this.market(e),o={symbol:a.id,resolution:this.timeframes[t]};i&&(o.date_start=this.iso8601(i)),s&&(o.limit=s);let n=await this.privateGetMarketBars(this.extend(o,r));return this.parseOHLCVs(n.response,a,t,i,s)}async createOrder(e,t,i,s,r,a={}){await this.loadMarkets();let o={symbol:this.marketId(e),margin:s,direction:"sell"==i?"short":"long",leverage:1,type:i};"limit"==t?o.price=r:o.type+="_market";let n=await this.privateGetOrderCreate(this.extend(o,a));return{info:n,id:n.response.order_id}}async cancelOrder(e,t,i={}){return await this.loadMarkets(),await this.privatePostOrderCancel({order_id:e})}sign(e,t="public",i="GET",s={},r,a){this.checkRequiredCredentials();let o=this.urls.api+"/"+this.version+"/"+e+".php",n=this.extend({token:this.apiKey},s);return o+="?"+this.urlencode(n),{url:o,method:i,body:a,headers:r}}async request(e,t="public",i="GET",s={},a,o){let n=await this.fetch2(e,t,i,s,a,o);if("warning"in n&&n.warning)throw new r(this.id+" "+this.json(n));if("error"in n&&n.error)throw new r(this.id+" "+this.json(n));return n}}},function(e,t,i){"use strict";const s=i(319);e.exports=class extends s{describe(){return this.deepExtend(super.describe(),{id:"allcoin",name:"Allcoin",countries:"CA",hasCORS:!1,extension:"",urls:{logo:"https://user-images.githubusercontent.com/1294454/31561809-c316b37c-b061-11e7-8d5a-b547b4d730eb.jpg",api:{web:"https://www.allcoin.com",public:"https://api.allcoin.com/api",private:"https://api.allcoin.com/api"},www:"https://www.allcoin.com",doc:"https://www.allcoin.com/About/APIReference"},api:{web:{get:["Home/MarketOverViewDetail/"]},public:{get:["depth","kline","ticker","trades"]},private:{post:["batch_trade","cancel_order","order_history","order_info","orders_info","repayment","trade","trade_history","userinfo"]}},markets:void 0})}async fetchMarkets(){let e=[],t=(await this.webGetHomeMarketOverViewDetail()).marketCoins;for(let i=0;i<t.length;i++){let s=t[i].Markets;for(let t=0;t<s.length;t++){let i=s[t].Market,r=i.Primary,a=i.Secondary,o=r.toLowerCase()+"_"+a.toLowerCase(),n=r+"/"+a;e.push({id:o,symbol:n,base:r,quote:a,type:"spot",spot:!0,future:!1,info:i})}}return e}parseOrderStatus(e){return-1==e?"canceled":0==e?"open":1==e?"open":2==e?"closed":10==e?"canceled":e}getCreateDateField(){return"create_data"}getOrdersField(){return"order"}}},function(e,t,i){"use strict";const s=i(310),{ExchangeError:r}=i(309);e.exports=class extends s{describe(){return this.deepExtend(super.describe(),{id:"anxpro",name:"ANXPro",countries:["JP","SG","HK","NZ"],version:"2",rateLimit:1500,hasCORS:!1,hasFetchTrades:!1,hasWithdraw:!0,urls:{logo:"https://user-images.githubusercontent.com/1294454/27765983-fd8595da-5ec9-11e7-82e3-adb3ab8c2612.jpg",api:"https://anxpro.com/api",www:"https://anxpro.com",doc:["http://docs.anxv2.apiary.io","https://anxpro.com/pages/api"]},api:{public:{get:["{currency_pair}/money/ticker","{currency_pair}/money/depth/full","{currency_pair}/money/trade/fetch"]},private:{post:["{currency_pair}/money/order/add","{currency_pair}/money/order/cancel","{currency_pair}/money/order/quote","{currency_pair}/money/order/result","{currency_pair}/money/orders","money/{currency}/address","money/{currency}/send_simple","money/info","money/trade/list","money/wallet/history"]}},markets:{"BTC/USD":{id:"BTCUSD",symbol:"BTC/USD",base:"BTC",quote:"USD",multiplier:1e5},"BTC/HKD":{id:"BTCHKD",symbol:"BTC/HKD",base:"BTC",quote:"HKD",multiplier:1e5},"BTC/EUR":{id:"BTCEUR",symbol:"BTC/EUR",base:"BTC",quote:"EUR",multiplier:1e5},"BTC/CAD":{id:"BTCCAD",symbol:"BTC/CAD",base:"BTC",quote:"CAD",multiplier:1e5},"BTC/AUD":{id:"BTCAUD",symbol:"BTC/AUD",base:"BTC",quote:"AUD",multiplier:1e5},"BTC/SGD":{id:"BTCSGD",symbol:"BTC/SGD",base:"BTC",quote:"SGD",multiplier:1e5},"BTC/JPY":{id:"BTCJPY",symbol:"BTC/JPY",base:"BTC",quote:"JPY",multiplier:1e5},"BTC/GBP":{id:"BTCGBP",symbol:"BTC/GBP",base:"BTC",quote:"GBP",multiplier:1e5},"BTC/NZD":{id:"BTCNZD",symbol:"BTC/NZD",base:"BTC",quote:"NZD",multiplier:1e5},"LTC/BTC":{id:"LTCBTC",symbol:"LTC/BTC",base:"LTC",quote:"BTC",multiplier:1e5},"STR/BTC":{id:"STRBTC",symbol:"STR/BTC",base:"STR",quote:"BTC",multiplier:1e8},"XRP/BTC":{id:"XRPBTC",symbol:"XRP/BTC",base:"XRP",quote:"BTC",multiplier:1e8},"DOGE/BTC":{id:"DOGEBTC",symbol:"DOGE/BTC",base:"DOGE",quote:"BTC",multiplier:1e8}},fees:{trading:{maker:.003,taker:.006}}})}async fetchBalance(e={}){let t=(await this.privatePostMoneyInfo()).data,i=Object.keys(t.Wallets),s={info:t};for(let r=0;r<i.length;r++){let e=i[r],a=this.account();if(e in t.Wallets){let i=t.Wallets[e];a.free=parseFloat(i.Available_Balance.value),a.total=parseFloat(i.Balance.value),a.used=a.total-a.free}s[e]=a}return this.parseBalance(s)}async fetchOrderBook(e,t={}){let i=(await this.publicGetCurrencyPairMoneyDepthFull(this.extend({currency_pair:this.marketId(e)},t))).data,s=parseInt(i.dataUpdateTime),r=parseInt(s/1e3);return this.parseOrderBook(i,r,"bids","asks","price","amount")}async fetchTicker(e,t={}){let i=(await this.publicGetCurrencyPairMoneyTicker(this.extend({currency_pair:this.marketId(e)},t))).data,s=parseInt(i.dataUpdateTime),r=parseInt(s/1e3),a=this.safeFloat(i.buy,"value"),o=this.safeFloat(i.sell,"value"),n=parseFloat(i.vwap.value),d=parseFloat(i.vol.value);return{symbol:e,timestamp:r,datetime:this.iso8601(r),high:parseFloat(i.high.value),low:parseFloat(i.low.value),bid:a,ask:o,vwap:n,open:void 0,close:void 0,first:void 0,last:parseFloat(i.last.value),change:void 0,percentage:void 0,average:parseFloat(i.avg.value),baseVolume:d,quoteVolume:d*n,info:i}}async fetchTrades(e,t,i,s={}){throw new r(this.id+" switched off the trades endpoint, see their docs at http://docs.anxv2.apiary.io/reference/market-data/currencypairmoneytradefetch-disabled")}async createOrder(e,t,i,s,r,a={}){let o=this.market(e),n={currency_pair:o.id,amount_int:parseInt(1e8*s)};"limit"==t&&(n.price_int=parseInt(r*o.multiplier)),n.type="buy"==i?"bid":"ask";let d=await this.privatePostCurrencyPairMoneyOrderAdd(this.extend(n,a));return{info:d,id:d.data}}async cancelOrder(e,t,i={}){return await this.privatePostCurrencyPairMoneyOrderCancel({oid:e})}getAmountMultiplier(e){return"BTC"==e?1e8:"LTC"==e?1e8:"STR"==e?1e8:"XRP"==e?1e8:"DOGE"==e?1e8:100}async withdraw(e,t,i,s={}){await this.loadMarkets();let r=this.getAmountMultiplier(e),a=await this.privatePostMoneyCurrencySendSimple(this.extend({currency:e,amount_int:parseInt(t*r),address:i},s));return{info:a,id:a.data.transactionId}}nonce(){return this.milliseconds()}sign(e,t="public",i="GET",s={},r,a){let o=this.implodeParams(e,s),n=this.omit(s,this.extractParams(e)),d=this.urls.api+"/"+this.version+"/"+o;if("public"==t)Object.keys(n).length&&(d+="?"+this.urlencode(n));else{this.checkRequiredCredentials();let e=this.nonce();a=this.urlencode(this.extend({nonce:e},n));let t=this.base64ToBinary(this.secret),i=o+"\0"+a,s=this.hmac(this.encode(i),t,"sha512","base64");r={"Content-Type":"application/x-www-form-urlencoded","Rest-Key":this.apiKey,"Rest-Sign":this.decode(s)}}return{url:d,method:i,body:a,headers:r}}async request(e,t="public",i="GET",s={},a,o){let n=await this.fetch2(e,t,i,s,a,o);if("result"in n&&"success"==n.result)return n;throw new r(this.id+" "+this.json(n))}}},function(e,t,i){"use strict";const s=i(310),{ExchangeError:r,InsufficientFunds:a,OrderNotFound:o,InvalidOrder:n,DDoSProtection:d}=i(309);e.exports=class extends s{describe(){return this.deepExtend(super.describe(),{id:"binance",name:"Binance",countries:"CN",rateLimit:500,hasCORS:!1,hasFetchTickers:!0,hasFetchOHLCV:!0,hasFetchMyTrades:!0,hasFetchOrder:!0,hasFetchOrders:!0,hasFetchOpenOrders:!0,hasWithdraw:!0,has:{fetchTickers:!0,fetchOHLCV:!0,fetchMyTrades:!0,fetchOrder:!0,fetchOrders:!0,fetchOpenOrders:!0,withdraw:!0},timeframes:{"1m":"1m","3m":"3m","5m":"5m","15m":"15m","30m":"30m","1h":"1h","2h":"2h","4h":"4h","6h":"6h","8h":"8h","12h":"12h","1d":"1d","3d":"3d","1w":"1w","1M":"1M"},urls:{logo:"https://user-images.githubusercontent.com/1294454/29604020-d5483cdc-87ee-11e7-94c7-d1a8d9169293.jpg",api:{web:"https://www.binance.com",wapi:"https://api.binance.com/wapi/v3",public:"https://api.binance.com/api/v1",private:"https://api.binance.com/api/v3"},www:"https://www.binance.com",doc:"https://github.com/binance-exchange/binance-official-api-docs/blob/master/rest-api.md",fees:["https://binance.zendesk.com/hc/en-us/articles/115000429332","https://support.binance.com/hc/en-us/articles/115000583311"]},api:{web:{get:["exchange/public/product"]},wapi:{post:["withdraw"],get:["depositHistory","withdrawHistory","depositAddress"]},public:{get:["exchangeInfo","ping","time","depth","aggTrades","klines","ticker/24hr","ticker/allPrices","ticker/allBookTickers"]},private:{get:["order","openOrders","allOrders","account","myTrades"],post:["order","order/test","userDataStream"],put:["userDataStream"],delete:["order","userDataStream"]}},fees:{trading:{tierBased:!1,percentage:!0,taker:.001,maker:.001},funding:{tierBased:!1,percentage:!1,withdraw:{BNB:1,BTC:5e-4,ETH:.005,LTC:.001,NEO:0,QTUM:.01,SNT:50,BNT:.6,EOS:2,BCH:5e-4,GAS:0,USDT:5,OAX:2,DNT:30,MCO:.15,ICN:.5,WTC:.2,OMG:.1,ZRX:5,STRAT:.1,SNGLS:8,BQX:2,KNC:1,FUN:50,SNM:10,LINK:5,XVG:.1,CTR:1,SALT:.3,IOTA:0,MDA:.5,MTL:.15,SUB:10,ETC:.01,MTH:10,ENG:2,AST:4,BTG:void 0,DASH:.002,EVX:1,REQ:30,LRC:7,VIB:7,HSR:1e-4,TRX:500,POWR:15,ARK:.1,YOYO:30,XRP:.15,MOD:1,ENJ:1,STORJ:2},deposit:{BNB:0,BTC:0,ETH:0,LTC:0,NEO:0,QTUM:0,SNT:0,BNT:0,EOS:0,BCH:0,GAS:0,USDT:0,OAX:0,DNT:0,MCO:0,ICN:0,WTC:0,OMG:0,ZRX:0,STRAT:0,SNGLS:0,BQX:0,KNC:0,FUN:0,SNM:0,LINK:0,XVG:0,CTR:0,SALT:0,IOTA:0,MDA:0,MTL:0,SUB:0,ETC:0,MTH:0,ENG:0,AST:0,BTG:0,DASH:0,EVX:0,REQ:0,LRC:0,VIB:0,HSR:0,TRX:0,POWR:0,ARK:0,YOYO:0,XRP:0,MOD:0,ENJ:0,STORJ:0}}}})}async fetchMarkets(){let e=(await this.publicGetExchangeInfo()).symbols,t=[];for(let i=0;i<e.length;i++){let s=e[i],r=s.symbol,a=this.commonCurrencyCode(s.baseAsset),o=this.commonCurrencyCode(s.quoteAsset),n=a+"/"+o,d=this.indexBy(s.filters,"filterType"),c={base:s.baseAssetPrecision,quote:s.quotePrecision,amount:s.baseAssetPrecision,price:s.quotePrecision},h="TRADING"==s.status,l=-1*Math.log10(c.amount),u=this.extend(this.fees.trading,{id:r,symbol:n,base:a,quote:o,info:s,lot:l,active:h,precision:c,limits:{amount:{min:l,max:void 0},price:{min:-1*Math.log10(c.price),max:void 0},cost:{min:l,max:void 0}}});if("PRICE_FILTER"in d){let e=d.PRICE_FILTER;u.precision.price=this.precisionFromString(e.tickSize),u.limits.price={min:parseFloat(e.minPrice),max:parseFloat(e.maxPrice)}}if("LOT_SIZE"in d){let e=d.LOT_SIZE;u.precision.amount=this.precisionFromString(e.stepSize),u.lot=parseFloat(e.stepSize),u.limits.amount={min:parseFloat(e.minQty),max:parseFloat(e.maxQty)}}"MIN_NOTIONAL"in d&&(u.limits.cost.min=parseFloat(d.MIN_NOTIONAL.minNotional)),t.push(u)}return t}calculateFee(e,t,i,s,r,a="taker",o={}){let n=this.markets[e],d="quote",c=n[a],h=parseFloat(this.costToPrecision(e,s*c));return"sell"==i?h*=r:d="base",{type:a,currency:n[d],rate:c,cost:parseFloat(this.feeToPrecision(e,h))}}async fetchBalance(e={}){await this.loadMarkets();let t=await this.privateGetAccount(e),i={info:t},s=t.balances;for(let r=0;r<s.length;r++){let e=s[r],t=e.asset,a=this.commonCurrencyCode(t),o={free:parseFloat(e.free),used:parseFloat(e.locked),total:0};o.total=this.sum(o.free,o.used),i[a]=o}return this.parseBalance(i)}async fetchOrderBook(e,t={}){await this.loadMarkets();let i=this.market(e),s=await this.publicGetDepth(this.extend({symbol:i.id,limit:100},t));return this.parseOrderBook(s)}parseTicker(e,t){let i=this.safeInteger(e,"closeTime");"undefined"==typeof i&&(i=this.milliseconds());let s=e.symbol;return t||s in this.markets_by_id&&(t=this.markets_by_id[s]),t&&(s=t.symbol),{symbol:s,timestamp:i,datetime:this.iso8601(i),high:this.safeFloat(e,"highPrice"),low:this.safeFloat(e,"lowPrice"),bid:this.safeFloat(e,"bidPrice"),ask:this.safeFloat(e,"askPrice"),vwap:this.safeFloat(e,"weightedAvgPrice"),open:this.safeFloat(e,"openPrice"),close:this.safeFloat(e,"prevClosePrice"),first:void 0,last:this.safeFloat(e,"lastPrice"),change:this.safeFloat(e,"priceChangePercent"),percentage:void 0,average:void 0,baseVolume:this.safeFloat(e,"volume"),quoteVolume:this.safeFloat(e,"quoteVolume"),info:e}}async fetchTicker(e,t={}){await this.loadMarkets();let i=this.market(e),s=await this.publicGetTicker24hr(this.extend({symbol:i.id},t));return this.parseTicker(s,i)}async fetchTickers(e,t={}){await this.loadMarkets();let i=await this.publicGetTicker24hr(t),s=[];for(let o=0;o<i.length;o++)s.push(this.parseTicker(i[o]));let r=this.indexBy(s,"symbol");if("undefined"==typeof e)return r;let a={};for(let o=0;o<e.length;o++){let t=e[o];t in r&&(a[t]=r[t])}return a}parseOHLCV(e,t,i="1m",s,r){return[e[0],parseFloat(e[1]),parseFloat(e[2]),parseFloat(e[3]),parseFloat(e[4]),parseFloat(e[5])]}async fetchOHLCV(e,t="1m",i,s,r={}){await this.loadMarkets();let a=this.market(e),o={symbol:a.id,interval:this.timeframes[t]};o.limit=s||500,i&&(o.startTime=i);let n=await this.publicGetKlines(this.extend(o,r));return this.parseOHLCVs(n,a,t,i,s)}parseTrade(e,t){let i=e["T"in e?"T":"time"],s="p"in e?"p":"price",r=parseFloat(e[s]),a="q"in e?"q":"qty",o=parseFloat(e[a]),n=e["a"in e?"a":"id"].toString(),d=void 0,c=void 0;"orderId"in e&&(c=e.orderId.toString()),d="m"in e?e.m?"sell":"buy":e.isBuyer?"buy":"sell";let h=void 0;return"commission"in e&&(h={cost:parseFloat(e.commission),currency:this.commonCurrencyCode(e.commissionAsset)}),{info:e,timestamp:i,datetime:this.iso8601(i),symbol:t.symbol,id:n,order:c,type:void 0,side:d,price:r,cost:r*o,amount:o,fee:h}}async fetchTrades(e,t,i,s={}){await this.loadMarkets();let r=this.market(e),a={symbol:r.id};t&&(a.startTime=t,a.endTime=t+36e5),i&&(a.limit=i);let o=await this.publicGetAggTrades(this.extend(a,s));return this.parseTrades(o,r,t,i)}parseOrderStatus(e){return"NEW"==e?"open":"PARTIALLY_FILLED"==e?"open":"FILLED"==e?"closed":"CANCELED"==e?"canceled":e.toLowerCase()}parseOrder(e,t){let i=this.parseOrderStatus(e.status),s=void 0;if(t)s=t.symbol;else{let i=e.symbol;i in this.markets_by_id&&(s=(t=this.markets_by_id[i]).symbol)}let r=e.time,a=parseFloat(e.price),o=parseFloat(e.origQty),n=this.safeFloat(e,"executedQty",0),d=Math.max(o-n,0);return{info:e,id:e.orderId.toString(),timestamp:r,datetime:this.iso8601(r),symbol:s,type:e.type.toLowerCase(),side:e.side.toLowerCase(),price:a,amount:o,cost:a*o,filled:n,remaining:d,status:i,fee:void 0}}async createOrder(e,t,i,s,r,a={}){await this.loadMarkets();let o={symbol:this.market(e).id,quantity:this.amountToPrecision(e,s),type:t.toUpperCase(),side:i.toUpperCase()};"limit"==t&&(o=this.extend(o,{price:this.priceToPrecision(e,r),timeInForce:"GTC"}));let n=await this.privatePostOrder(this.extend(o,a));return{info:n,id:n.orderId.toString()}}async fetchOrder(e,t,i={}){if(!t)throw new r(this.id+" fetchOrder requires a symbol param");await this.loadMarkets();let s=this.market(t),a=await this.privateGetOrder(this.extend({symbol:s.id,orderId:parseInt(e)},i));return this.parseOrder(a,s)}async fetchOrders(e,t,i,s={}){if(!e)throw new r(this.id+" fetchOrders requires a symbol param");await this.loadMarkets();let a=this.market(e),o={symbol:a.id};i&&(o.limit=i);let n=await this.privateGetAllOrders(this.extend(o,s));return this.parseOrders(n,a,t,i)}async fetchOpenOrders(e,t,i,s={}){if(!e)throw new r(this.id+" fetchOpenOrders requires a symbol param");await this.loadMarkets();let a=this.market(e),o=await this.privateGetOpenOrders(this.extend({symbol:a.id},s));return this.parseOrders(o,a,t,i)}async fetchClosedOrders(e,t,i,s={}){let r=await this.fetchOrders(e,t,i,s);return this.filterBy(r,"status","closed")}async cancelOrder(e,t,i={}){if(!t)throw new r(this.id+" cancelOrder requires a symbol argument");await this.loadMarkets();let s=this.market(t),a=void 0;try{a=await this.privateDeleteOrder(this.extend({symbol:s.id,orderId:parseInt(e)},i))}catch(e){if(this.last_http_response.indexOf("UNKNOWN_ORDER")>=0)throw new o(this.id+" cancelOrder() error: "+this.last_http_response);throw e}return a}nonce(){return this.milliseconds()}async fetchMyTrades(e,t,i,s={}){if(!e)throw new r(this.id+" fetchMyTrades requires a symbol argument");await this.loadMarkets();let a=this.market(e),o={symbol:a.id};i&&(o.limit=i);let n=await this.privateGetMyTrades(this.extend(o,s));return this.parseTrades(n,a,t,i)}commonCurrencyCode(e){return"BCC"==e?"BCH":e}currencyId(e){return"BCH"==e?"BCC":e}async fetchDepositAddress(e,t={}){let i=await this.wapiGetDepositAddress(this.extend({asset:this.currencyId(e),recvWindow:1e7},t));if("success"in i&&i.success){return{currency:e,address:this.safeString(i,"address"),status:"ok",info:i}}throw new r(this.id+" fetchDepositAddress failed: "+this.last_http_response)}async withdraw(e,t,i,s={}){return{info:await this.wapiPostWithdraw(this.extend({asset:this.currencyId(e),address:i,amount:parseFloat(t),recvWindow:1e7},s)),id:void 0}}sign(e,t="public",i="GET",s={},r,a){let o=this.urls.api[t];if(o+="/"+e,"wapi"==t&&(o+=".html"),"private"==t||"wapi"==t){this.checkRequiredCredentials();let e=this.milliseconds(),n=this.urlencode(this.extend({timestamp:e},s));n+="&signature="+this.hmac(this.encode(n),this.encode(this.secret)),r={"X-MBX-APIKEY":this.apiKey},"GET"==i||"wapi"==t?o+="?"+n:(a=n,r["Content-Type"]="application/x-www-form-urlencoded")}else Object.keys(s).length&&(o+="?"+this.urlencode(s));return{url:o,method:i,body:a,headers:r}}handleErrors(e,t,i,s,c,h){if(e>=400){if(418==e)throw new d(this.id+" "+e.toString()+" "+t+" "+h);if(h.indexOf("MIN_NOTIONAL")>=0)throw new n(this.id+" order cost = amount * price should be > (0.001 BTC or 0.01 ETH or 1 BNB or 1 USDT)"+h);if(h.indexOf("LOT_SIZE")>=0)throw new n(this.id+" order amount should be evenly divisible by lot size, use this.amountToLots (symbol, amount) "+h);if(h.indexOf("PRICE_FILTER")>=0)throw new n(this.id+" order price exceeds allowed price precision or invalid, use this.priceToPrecision (symbol, amount) "+h);if(h.indexOf("Order does not exist")>=0)throw new o(this.id+" "+h)}if("{"==h[0]){let e=JSON.parse(h),t=this.safeValue(e,"code");if("undefined"!=typeof t){if(-2010==t)throw new a(this.id+" "+this.json(e));if(-2011==t)throw new o(this.id+" "+this.json(e));if(t<0)throw new r(this.id+" "+this.json(e))}}}}},function(e,t,i){"use strict";const s=i(310);e.exports=class extends s{describe(){return this.deepExtend(super.describe(),{id:"bit2c",name:"Bit2C",countries:"IL",rateLimit:3e3,hasCORS:!1,urls:{logo:"https://user-images.githubusercontent.com/1294454/27766119-3593220e-5ece-11e7-8b3a-5a041f6bcc3f.jpg",api:"https://www.bit2c.co.il",www:"https://www.bit2c.co.il",doc:["https://www.bit2c.co.il/home/api","https://github.com/OferE/bit2c"]},api:{public:{get:["Exchanges/{pair}/Ticker","Exchanges/{pair}/orderbook","Exchanges/{pair}/trades"]},private:{post:["Account/Balance","Account/Balance/v2","Merchant/CreateCheckout","Order/AccountHistory","Order/AddCoinFundsRequest","Order/AddFund","Order/AddOrder","Order/AddOrderMarketPriceBuy","Order/AddOrderMarketPriceSell","Order/CancelOrder","Order/MyOrders","Payment/GetMyId","Payment/Send"]}},markets:{"BTC/NIS":{id:"BtcNis",symbol:"BTC/NIS",base:"BTC",quote:"NIS"},"BCH/NIS":{id:"BchNis",symbol:"BCH/NIS",base:"BCH",quote:"NIS"},"LTC/NIS":{id:"LtcNis",symbol:"LTC/NIS",base:"LTC",quote:"NIS"},"BTG/NIS":{id:"BtgNis",symbol:"BTG/NIS",base:"BTG",quote:"NIS"}},fees:{trading:{maker:.005,taker:.005}}})}async fetchBalance(e={}){let t=await this.privatePostAccountBalanceV2(),i={info:t},s=Object.keys(this.currencies);for(let r=0;r<s.length;r++){let e=s[r],a=this.account();if(e in t){let i="AVAILABLE_"+e;a.free=t[i],a.total=t[e],a.used=a.total-a.free}i[e]=a}return this.parseBalance(i)}async fetchOrderBook(e,t={}){let i=await this.publicGetExchangesPairOrderbook(this.extend({pair:this.marketId(e)},t));return this.parseOrderBook(i)}async fetchTicker(e,t={}){let i=await this.publicGetExchangesPairTicker(this.extend({pair:this.marketId(e)},t)),s=this.milliseconds(),r=parseFloat(i.av),a=parseFloat(i.a),o=a*r;return{symbol:e,timestamp:s,datetime:this.iso8601(s),high:void 0,low:void 0,bid:parseFloat(i.h),ask:parseFloat(i.l),vwap:void 0,open:void 0,close:void 0,first:void 0,last:parseFloat(i.ll),change:void 0,percentage:void 0,average:r,baseVolume:a,quoteVolume:o,info:i}}parseTrade(e,t){let i=1e3*parseInt(e.date),s=void 0;return t&&(s=t.symbol),{id:e.tid.toString(),info:e,timestamp:i,datetime:this.iso8601(i),symbol:s,order:void 0,type:void 0,side:void 0,price:e.price,amount:e.amount}}async fetchTrades(e,t,i,s={}){let r=this.market(e),a=await this.publicGetExchangesPairTrades(this.extend({pair:r.id},s));return this.parseTrades(a,r,t,i)}async createOrder(e,t,i,s,r,a={}){let o="privatePostOrderAddOrder",n={Amount:s,Pair:this.marketId(e)};"market"==t?o+="MarketPrice"+this.capitalize(i):(n.Price=r,n.Total=s*r,n.IsBid="buy"==i);let d=await this[o](this.extend(n,a));return{info:d,id:d.NewOrder.id}}async cancelOrder(e,t,i={}){return await this.privatePostOrderCancelOrder({id:e})}sign(e,t="public",i="GET",s={},r,a){let o=this.urls.api+"/"+this.implodeParams(e,s);if("public"==t)o+=".json";else{this.checkRequiredCredentials();let e=this.nonce(),t=this.extend({nonce:e},s);a=this.urlencode(t);let i=this.hmac(this.encode(a),this.encode(this.secret),"sha512","base64");r={"Content-Type":"application/x-www-form-urlencoded",key:this.apiKey,sign:this.decode(i)}}return{url:o,method:i,body:a,headers:r}}}},function(e,t,i){"use strict";const s=i(310),{ExchangeError:r}=i(309);e.exports=class extends s{describe(){return this.deepExtend(super.describe(),{id:"bitbay",name:"BitBay",countries:["PL","EU"],rateLimit:1e3,hasCORS:!0,hasWithdraw:!0,urls:{logo:"https://user-images.githubusercontent.com/1294454/27766132-978a7bd8-5ece-11e7-9540-bc96d1e9bbb8.jpg",www:"https://bitbay.net",api:{public:"https://bitbay.net/API/Public",private:"https://bitbay.net/API/Trading/tradingApi.php"},doc:["https://bitbay.net/public-api","https://bitbay.net/account/tab-api","https://github.com/BitBayNet/API"]},api:{public:{get:["{id}/all","{id}/market","{id}/orderbook","{id}/ticker","{id}/trades"]},private:{post:["info","trade","cancel","orderbook","orders","transfer","withdraw","history","transactions"]}},markets:{"BTC/USD":{id:"BTCUSD",symbol:"BTC/USD",base:"BTC",quote:"USD",baseId:"BTC",quoteId:"USD"},"BTC/EUR":{id:"BTCEUR",symbol:"BTC/EUR",base:"BTC",quote:"EUR",baseId:"BTC",quoteId:"EUR"},"BTC/PLN":{id:"BTCPLN",symbol:"BTC/PLN",base:"BTC",quote:"PLN",baseId:"BTC",quoteId:"PLN"},"LTC/USD":{id:"LTCUSD",symbol:"LTC/USD",base:"LTC",quote:"USD",baseId:"LTC",quoteId:"USD"},"LTC/EUR":{id:"LTCEUR",symbol:"LTC/EUR",base:"LTC",quote:"EUR",baseId:"LTC",quoteId:"EUR"},"LTC/PLN":{id:"LTCPLN",symbol:"LTC/PLN",base:"LTC",quote:"PLN",baseId:"LTC",quoteId:"PLN"},"LTC/BTC":{id:"LTCBTC",symbol:"LTC/BTC",base:"LTC",quote:"BTC",baseId:"LTC",quoteId:"BTC"},"ETH/USD":{id:"ETHUSD",symbol:"ETH/USD",base:"ETH",quote:"USD",baseId:"ETH",quoteId:"USD"},"ETH/EUR":{id:"ETHEUR",symbol:"ETH/EUR",base:"ETH",quote:"EUR",baseId:"ETH",quoteId:"EUR"},"ETH/PLN":{id:"ETHPLN",symbol:"ETH/PLN",base:"ETH",quote:"PLN",baseId:"ETH",quoteId:"PLN"},"ETH/BTC":{id:"ETHBTC",symbol:"ETH/BTC",base:"ETH",quote:"BTC",baseId:"ETH",quoteId:"BTC"},"LSK/USD":{id:"LSKUSD",symbol:"LSK/USD",base:"LSK",quote:"USD",baseId:"LSK",quoteId:"USD"},"LSK/EUR":{id:"LSKEUR",symbol:"LSK/EUR",base:"LSK",quote:"EUR",baseId:"LSK",quoteId:"EUR"},"LSK/PLN":{id:"LSKPLN",symbol:"LSK/PLN",base:"LSK",quote:"PLN",baseId:"LSK",quoteId:"PLN"},"LSK/BTC":{id:"LSKBTC",symbol:"LSK/BTC",base:"LSK",quote:"BTC",baseId:"LSK",quoteId:"BTC"},"BCH/USD":{id:"BCCUSD",symbol:"BCH/USD",base:"BCH",quote:"USD",baseId:"BCC",quoteId:"USD"},"BCH/EUR":{id:"BCCEUR",symbol:"BCH/EUR",base:"BCH",quote:"EUR",baseId:"BCC",quoteId:"EUR"},"BCH/PLN":{id:"BCCPLN",symbol:"BCH/PLN",base:"BCH",quote:"PLN",baseId:"BCC",quoteId:"PLN"},"BCH/BTC":{id:"BCCBTC",symbol:"BCH/BTC",base:"BCH",quote:"BTC",baseId:"BCC",quoteId:"BTC"},"BTG/USD":{id:"BTGUSD",symbol:"BTG/USD",base:"BTG",quote:"USD",baseId:"BTG",quoteId:"USD"},"BTG/EUR":{id:"BTGEUR",symbol:"BTG/EUR",base:"BTG",quote:"EUR",baseId:"BTG",quoteId:"EUR"},"BTG/PLN":{id:"BTGPLN",symbol:"BTG/PLN",base:"BTG",quote:"PLN",baseId:"BTG",quoteId:"PLN"},"BTG/BTC":{id:"BTGBTC",symbol:"BTG/BTC",base:"BTG",quote:"BTC",baseId:"BTG",quoteId:"BTC"},"DASH/USD":{id:"DASHUSD",symbol:"DASH/USD",base:"DASH",quote:"USD",baseId:"DASH",quoteId:"USD"},"DASH/EUR":{id:"DASHEUR",symbol:"DASH/EUR",base:"DASH",quote:"EUR",baseId:"DASH",quoteId:"EUR"},"DASH/PLN":{id:"DASHPLN",symbol:"DASH/PLN",base:"DASH",quote:"PLN",baseId:"DASH",quoteId:"PLN"},"DASH/BTC":{id:"DASHBTC",symbol:"DASH/BTC",base:"DASH",quote:"BTC",baseId:"DASH",quoteId:"BTC"},"GAME/USD":{id:"GAMEUSD",symbol:"GAME/USD",base:"GAME",quote:"USD",baseId:"GAME",quoteId:"USD"},"GAME/EUR":{id:"GAMEEUR",symbol:"GAME/EUR",base:"GAME",quote:"EUR",baseId:"GAME",quoteId:"EUR"},"GAME/PLN":{id:"GAMEPLN",symbol:"GAME/PLN",base:"GAME",quote:"PLN",baseId:"GAME",quoteId:"PLN"},"GAME/BTC":{id:"GAMEBTC",symbol:"GAME/BTC",base:"GAME",quote:"BTC",baseId:"GAME",quoteId:"BTC"}},fees:{trading:{maker:.003,taker:.0043}}})}async fetchBalance(e={}){let t=await this.privatePostInfo();if("balances"in t){let e=t.balances,i={info:e},s=Object.keys(this.currencies);for(let t=0;t<s.length;t++){let r=s[t],a=this.currencies[r].id,o=this.account();a in e&&(o.free=parseFloat(e[a].available),o.used=parseFloat(e[a].locked),o.total=this.sum(o.free,o.used)),i[r]=o}return this.parseBalance(i)}throw new r(this.id+" empty balance response "+this.json(t))}async fetchOrderBook(e,t={}){let i=await this.publicGetIdOrderbook(this.extend({id:this.marketId(e)},t));return this.parseOrderBook(i)}async fetchTicker(e,t={}){let i=await this.publicGetIdTicker(this.extend({id:this.marketId(e)},t)),s=this.milliseconds(),r=this.safeFloat(i,"volume"),a=this.safeFloat(i,"vwap"),o=r*a;return{symbol:e,timestamp:s,datetime:this.iso8601(s),high:this.safeFloat(i,"max"),low:this.safeFloat(i,"min"),bid:this.safeFloat(i,"bid"),ask:this.safeFloat(i,"ask"),vwap:a,open:void 0,close:void 0,first:void 0,last:this.safeFloat(i,"last"),change:void 0,percentage:void 0,average:this.safeFloat(i,"average"),baseVolume:r,quoteVolume:o,info:i}}parseTrade(e,t){let i=1e3*e.date;return{id:e.tid,info:e,timestamp:i,datetime:this.iso8601(i),symbol:t.symbol,type:void 0,side:e.type,price:e.price,amount:e.amount}}async fetchTrades(e,t,i,s={}){let r=this.market(e),a=await this.publicGetIdTrades(this.extend({id:r.id},s));return this.parseTrades(a,r,t,i)}async createOrder(e,t,i,s,r,a={}){let o=this.market(e);return this.privatePostTrade(this.extend({type:i,currency:o.baseId,amount:s,payment_currency:o.quoteId,rate:r},a))}async cancelOrder(e,t,i={}){return await this.privatePostCancel({id:e})}isFiat(e){return e in{USD:!0,EUR:!0,PLN:!0}}async withdraw(e,t,i,s={}){await this.loadMarkets();let r=void 0,a={currency:this.currency(e).id,quantity:t};this.isFiat(e)?r="privatePostWithdraw":(r="privatePostTransfer",a.address=i);return{info:await this[r](this.extend(a,s)),id:void 0}}sign(e,t="public",i="GET",s={},r,a){let o=this.urls.api[t];return"public"==t?o+="/"+this.implodeParams(e,s)+".json":(this.checkRequiredCredentials(),a=this.urlencode(this.extend({method:e,moment:this.nonce()},s)),r={"Content-Type":"application/x-www-form-urlencoded","API-Key":this.apiKey,"API-Hash":this.hmac(this.encode(a),this.encode(this.secret),"sha512")}),{url:o,method:i,body:a,headers:r}}}},function(e,t,i){"use strict";const s=i(310),{ExchangeError:r}=i(309);e.exports=class extends s{describe(){return this.deepExtend(super.describe(),{id:"bitcoincoid",name:"Bitcoin.co.id",countries:"ID",hasCORS:!1,version:"1.7",urls:{logo:"https://user-images.githubusercontent.com/1294454/27766138-043c7786-5ecf-11e7-882b-809c14f38b53.jpg",api:{public:"https://vip.bitcoin.co.id/api",private:"https://vip.bitcoin.co.id/tapi"},www:"https://www.bitcoin.co.id",doc:["https://vip.bitcoin.co.id/downloads/BITCOINCOID-API-DOCUMENTATION.pdf","https://vip.bitcoin.co.id/trade_api"]},api:{public:{get:["{pair}/ticker","{pair}/trades","{pair}/depth"]},private:{post:["getInfo","transHistory","trade","tradeHistory","openOrders","cancelOrder"]}},markets:{"BTC/IDR":{id:"btc_idr",symbol:"BTC/IDR",base:"BTC",quote:"IDR",baseId:"btc",quoteId:"idr"},"BCH/IDR":{id:"bch_idr",symbol:"BCH/IDR",base:"BCH",quote:"IDR",baseId:"bch",quoteId:"idr"},"BTG/IDR":{id:"btg_idr",symbol:"BTG/IDR",base:"BTG",quote:"IDR",baseId:"btg",quoteId:"idr"},"ETH/IDR":{id:"eth_idr",symbol:"ETH/IDR",base:"ETH",quote:"IDR",baseId:"eth",quoteId:"idr"},"ETC/IDR":{id:"etc_idr",symbol:"ETC/IDR",base:"ETC",quote:"IDR",baseId:"etc",quoteId:"idr"},"LTC/IDR":{id:"ltc_idr",symbol:"LTC/IDR",base:"LTC",quote:"IDR",baseId:"ltc",quoteId:"idr"},"NXT/IDR":{id:"nxt_idr",symbol:"NXT/IDR",base:"NXT",quote:"IDR",baseId:"nxt",quoteId:"idr"},"WAVES/IDR":{id:"waves_idr",symbol:"WAVES/IDR",base:"WAVES",quote:"IDR",baseId:"waves",quoteId:"idr"},"XRP/IDR":{id:"xrp_idr",symbol:"XRP/IDR",base:"XRP",quote:"IDR",baseId:"xrp",quoteId:"idr"},"XZC/IDR":{id:"xzc_idr",symbol:"XZC/IDR",base:"XZC",quote:"IDR",baseId:"xzc",quoteId:"idr"},"XLM/IDR":{id:"str_idr",symbol:"XLM/IDR",base:"XLM",quote:"IDR",baseId:"str",quoteId:"idr"},"BTS/BTC":{id:"bts_btc",symbol:"BTS/BTC",base:"BTS",quote:"BTC",baseId:"bts",quoteId:"btc"},"DASH/BTC":{id:"drk_btc",symbol:"DASH/BTC",base:"DASH",quote:"BTC",baseId:"drk",quoteId:"btc"},"DOGE/BTC":{id:"doge_btc",symbol:"DOGE/BTC",base:"DOGE",quote:"BTC",baseId:"doge",quoteId:"btc"},"ETH/BTC":{id:"eth_btc",symbol:"ETH/BTC",base:"ETH",quote:"BTC",baseId:"eth",quoteId:"btc"},"LTC/BTC":{id:"ltc_btc",symbol:"LTC/BTC",base:"LTC",quote:"BTC",baseId:"ltc",quoteId:"btc"},"NXT/BTC":{id:"nxt_btc",symbol:"NXT/BTC",base:"NXT",quote:"BTC",baseId:"nxt",quoteId:"btc"},"XLM/BTC":{id:"str_btc",symbol:"XLM/BTC",base:"XLM",quote:"BTC",baseId:"str",quoteId:"btc"},"XEM/BTC":{id:"nem_btc",symbol:"XEM/BTC",base:"XEM",quote:"BTC",baseId:"nem",quoteId:"btc"},"XRP/BTC":{id:"xrp_btc",symbol:"XRP/BTC",base:"XRP",quote:"BTC",baseId:"xrp",quoteId:"btc"}}})}async fetchBalance(e={}){let t=(await this.privatePostGetInfo()).return,i={info:t},s=Object.keys(this.currencies);for(let r=0;r<s.length;r++){let e=s[r],a=e.toLowerCase(),o=this.account();o.free=this.safeFloat(t.balance,a,0),o.used=this.safeFloat(t.balance_hold,a,0),o.total=this.sum(o.free,o.used),i[e]=o}return this.parseBalance(i)}async fetchOrderBook(e,t={}){let i=await this.publicGetPairDepth(this.extend({pair:this.marketId(e)},t));return this.parseOrderBook(i,void 0,"buy","sell")}async fetchTicker(e,t={}){let i=this.market(e),s=(await this.publicGetPairTicker(this.extend({pair:i.id},t))).ticker,r=1e3*parseFloat(s.server_time),a="vol_"+i.baseId.toLowerCase(),o="vol_"+i.quoteId.toLowerCase();return{symbol:e,timestamp:r,datetime:this.iso8601(r),high:parseFloat(s.high),low:parseFloat(s.low),bid:parseFloat(s.buy),ask:parseFloat(s.sell),vwap:void 0,open:void 0,close:void 0,first:void 0,last:parseFloat(s.last),change:void 0,percentage:void 0,average:void 0,baseVolume:parseFloat(s[a]),quoteVolume:parseFloat(s[o]),info:s}}parseTrade(e,t){let i=1e3*parseInt(e.date);return{id:e.tid,info:e,timestamp:i,datetime:this.iso8601(i),symbol:t.symbol,type:void 0,side:e.type,price:parseFloat(e.price),amount:parseFloat(e.amount)}}async fetchTrades(e,t,i,s={}){let r=this.market(e),a=await this.publicGetPairTrades(this.extend({pair:r.id},s));return this.parseTrades(a,r,t,i)}async createOrder(e,t,i,s,r,a={}){let o=this.market(e),n={pair:o.id,type:i,price:r};n[o.baseId]=s;let d=await this.privatePostTrade(this.extend(n,a));return{info:d,id:d.return.order_id.toString()}}async cancelOrder(e,t,i={}){return await this.privatePostCancelOrder(this.extend({order_id:e},i))}sign(e,t="public",i="GET",s={},r,a){let o=this.urls.api[t];return"public"==t?o+="/"+this.implodeParams(e,s):(this.checkRequiredCredentials(),a=this.urlencode(this.extend({method:e,nonce:this.nonce()},s)),r={"Content-Type":"application/x-www-form-urlencoded",Key:this.apiKey,Sign:this.hmac(this.encode(a),this.encode(this.secret),"sha512")}),{url:o,method:i,body:a,headers:r}}async request(e,t="public",i="GET",s={},a,o){let n=await this.fetch2(e,t,i,s,a,o);if("error"in n)throw new r(this.id+" "+n.error);return n}}},function(e,t,i){"use strict";const s=i(329),{ExchangeError:r,NotSupported:a,InsufficientFunds:o}=i(309);e.exports=class extends s{describe(){return this.deepExtend(super.describe(),{id:"bitfinex2",name:"Bitfinex v2",countries:"VG",version:"v2",hasCORS:!0,hasFetchOrder:!0,hasFetchTickers:!0,hasFetchOHLCV:!0,hasWithdraw:!0,hasDeposit:!1,hasFetchOpenOrders:!1,hasFetchClosedOrders:!1,has:{fetchOHLCV:!0,fetchTickers:!0,fetchOrder:!0,fetchOpenOrders:!1,fetchClosedOrders:!1,withdraw:!0,deposit:!1},timeframes:{"1m":"1m","5m":"5m","15m":"15m","30m":"30m","1h":"1h","3h":"3h","6h":"6h","12h":"12h","1d":"1D","1w":"7D","2w":"14D","1M":"1M"},rateLimit:1500,urls:{logo:"https://user-images.githubusercontent.com/1294454/27766244-e328a50c-5ed2-11e7-947b-041416579bb3.jpg",api:"https://api.bitfinex.com",www:"https://www.bitfinex.com",doc:["https://bitfinex.readme.io/v2/docs","https://github.com/bitfinexcom/bitfinex-api-node"],fees:"https://www.bitfinex.com/fees"},api:{public:{get:["platform/status","tickers","ticker/{symbol}","trades/{symbol}/hist","book/{symbol}/{precision}","book/{symbol}/P0","book/{symbol}/P1","book/{symbol}/P2","book/{symbol}/P3","book/{symbol}/R0","symbols_details","stats1/{key}:{size}:{symbol}/{side}/{section}","stats1/{key}:{size}:{symbol}/long/last","stats1/{key}:{size}:{symbol}/long/hist","stats1/{key}:{size}:{symbol}/short/last","stats1/{key}:{size}:{symbol}/short/hist","candles/trade:{timeframe}:{symbol}/{section}","candles/trade:{timeframe}:{symbol}/last","candles/trade:{timeframe}:{symbol}/hist"],post:["calc/trade/avg"]},private:{post:["auth/r/wallets","auth/r/orders/{symbol}","auth/r/orders/{symbol}/new","auth/r/orders/{symbol}/hist","auth/r/order/{symbol}:{id}/trades","auth/r/trades/{symbol}/hist","auth/r/positions","auth/r/funding/offers/{symbol}","auth/r/funding/offers/{symbol}/hist","auth/r/funding/loans/{symbol}","auth/r/funding/loans/{symbol}/hist","auth/r/funding/credits/{symbol}","auth/r/funding/credits/{symbol}/hist","auth/r/funding/trades/{symbol}/hist","auth/r/info/margin/{key}","auth/r/info/funding/{key}","auth/r/movements/{currency}/hist","auth/r/stats/perf:{timeframe}/hist","auth/r/alerts","auth/w/alert/set","auth/w/alert/{type}:{symbol}:{price}/del","auth/calc/order/avail"]}},markets:{"AVT/BTC":{id:"tAVTBTC",symbol:"AVT/BTC",base:"AVT",quote:"BTC"},"AVT/ETH":{id:"tAVTETH",symbol:"AVT/ETH",base:"AVT",quote:"ETH"},"AVT/USD":{id:"tAVTUSD",symbol:"AVT/USD",base:"AVT",quote:"USD"},"CST_BCC/BTC":{id:"tBCCBTC",symbol:"CST_BCC/BTC",base:"CST_BCC",quote:"BTC"},"CST_BCC/USD":{id:"tBCCUSD",symbol:"CST_BCC/USD",base:"CST_BCC",quote:"USD"},"BCH/BTC":{id:"tBCHBTC",symbol:"BCH/BTC",base:"BCH",quote:"BTC"},"BCH/ETH":{id:"tBCHETH",symbol:"BCH/ETH",base:"BCH",quote:"ETH"},"BCH/USD":{id:"tBCHUSD",symbol:"BCH/USD",base:"BCH",quote:"USD"},"CST_BCU/BTC":{id:"tBCUBTC",symbol:"CST_BCU/BTC",base:"CST_BCU",quote:"BTC"},"CST_BCU/USD":{id:"tBCUUSD",symbol:"CST_BCU/USD",base:"CST_BCU",quote:"USD"},"BT1/BTC":{id:"tBT1BTC",symbol:"BT1/BTC",base:"BT1",quote:"BTC"},"BT1/USD":{id:"tBT1USD",symbol:"BT1/USD",base:"BT1",quote:"USD"},"BT2/BTC":{id:"tBT2BTC",symbol:"BT2/BTC",base:"BT2",quote:"BTC"},"BT2/USD":{id:"tBT2USD",symbol:"BT2/USD",base:"BT2",quote:"USD"},"BTC/USD":{id:"tBTCUSD",symbol:"BTC/USD",base:"BTC",quote:"USD"},"BTC/EUR":{id:"tBTCEUR",symbol:"BTC/EUR",base:"BTC",quote:"EUR"},"BTG/BTC":{id:"tBTGBTC",symbol:"BTG/BTC",base:"BTG",quote:"BTC"},"BTG/USD":{id:"tBTGUSD",symbol:"BTG/USD",base:"BTG",quote:"USD"},"DASH/BTC":{id:"tDSHBTC",symbol:"DASH/BTC",base:"DASH",quote:"BTC"},"DASH/USD":{id:"tDSHUSD",symbol:"DASH/USD",base:"DASH",quote:"USD"},"DAT/BTC":{id:"tDATBTC",symbol:"DAT/BTC",base:"DAT",quote:"BTC"},"DAT/ETH":{id:"tDATETH",symbol:"DAT/ETH",base:"DAT",quote:"ETH"},"DAT/USD":{id:"tDATUSD",symbol:"DAT/USD",base:"DAT",quote:"USD"},"EDO/BTC":{id:"tEDOBTC",symbol:"EDO/BTC",base:"EDO",quote:"BTC"},"EDO/ETH":{id:"tEDOETH",symbol:"EDO/ETH",base:"EDO",quote:"ETH"},"EDO/USD":{id:"tEDOUSD",symbol:"EDO/USD",base:"EDO",quote:"USD"},"EOS/BTC":{id:"tEOSBTC",symbol:"EOS/BTC",base:"EOS",quote:"BTC"},"EOS/ETH":{id:"tEOSETH",symbol:"EOS/ETH",base:"EOS",quote:"ETH"},"EOS/USD":{id:"tEOSUSD",symbol:"EOS/USD",base:"EOS",quote:"USD"},"ETC/BTC":{id:"tETCBTC",symbol:"ETC/BTC",base:"ETC",quote:"BTC"},"ETC/USD":{id:"tETCUSD",symbol:"ETC/USD",base:"ETC",quote:"USD"},"ETH/BTC":{id:"tETHBTC",symbol:"ETH/BTC",base:"ETH",quote:"BTC"},"ETH/USD":{id:"tETHUSD",symbol:"ETH/USD",base:"ETH",quote:"USD"},"ETP/BTC":{id:"tETPBTC",symbol:"ETP/BTC",base:"ETP",quote:"BTC"},"ETP/ETH":{id:"tETPETH",symbol:"ETP/ETH",base:"ETP",quote:"ETH"},"ETP/USD":{id:"tETPUSD",symbol:"ETP/USD",base:"ETP",quote:"USD"},"IOTA/BTC":{id:"tIOTBTC",symbol:"IOTA/BTC",base:"IOTA",quote:"BTC"},"IOTA/ETH":{id:"tIOTETH",symbol:"IOTA/ETH",base:"IOTA",quote:"ETH"},"IOTA/USD":{id:"tIOTUSD",symbol:"IOTA/USD",base:"IOTA",quote:"USD"},"LTC/BTC":{id:"tLTCBTC",symbol:"LTC/BTC",base:"LTC",quote:"BTC"},"LTC/USD":{id:"tLTCUSD",symbol:"LTC/USD",base:"LTC",quote:"USD"},"NEO/BTC":{id:"tNEOBTC",symbol:"NEO/BTC",base:"NEO",quote:"BTC"},"NEO/ETH":{id:"tNEOETH",symbol:"NEO/ETH",base:"NEO",quote:"ETH"},"NEO/USD":{id:"tNEOUSD",symbol:"NEO/USD",base:"NEO",quote:"USD"},"OMG/BTC":{id:"tOMGBTC",symbol:"OMG/BTC",base:"OMG",quote:"BTC"},"OMG/ETH":{id:"tOMGETH",symbol:"OMG/ETH",base:"OMG",quote:"ETH"},"OMG/USD":{id:"tOMGUSD",symbol:"OMG/USD",base:"OMG",quote:"USD"},"QTUM/BTC":{id:"tQTMBTC",symbol:"QTUM/BTC",base:"QTUM",quote:"BTC"},"QTUM/ETH":{id:"tQTMETH",symbol:"QTUM/ETH",base:"QTUM",quote:"ETH"},"QTUM/USD":{id:"tQTMUSD",symbol:"QTUM/USD",base:"QTUM",quote:"USD"},"RRT/BTC":{id:"tRRTBTC",symbol:"RRT/BTC",base:"RRT",quote:"BTC"},"RRT/USD":{id:"tRRTUSD",symbol:"RRT/USD",base:"RRT",quote:"USD"},"SAN/BTC":{id:"tSANBTC",symbol:"SAN/BTC",base:"SAN",quote:"BTC"},"SAN/ETH":{id:"tSANETH",symbol:"SAN/ETH",base:"SAN",quote:"ETH"},"SAN/USD":{id:"tSANUSD",symbol:"SAN/USD",base:"SAN",quote:"USD"},"XMR/BTC":{id:"tXMRBTC",symbol:"XMR/BTC",base:"XMR",quote:"BTC"},"XMR/USD":{id:"tXMRUSD",symbol:"XMR/USD",base:"XMR",quote:"USD"},"XRP/BTC":{id:"tXRPBTC",symbol:"XRP/BTC",base:"XRP",quote:"BTC"},"XRP/USD":{id:"tXRPUSD",symbol:"XRP/USD",base:"XRP",quote:"USD"},"ZEC/BTC":{id:"tZECBTC",symbol:"ZEC/BTC",base:"ZEC",quote:"BTC"},"ZEC/USD":{id:"tZECUSD",symbol:"ZEC/USD",base:"ZEC",quote:"USD"}},fees:{trading:{maker:.001,taker:.002},funding:{withdraw:{BTC:5e-4,BCH:5e-4,ETH:.01,EOS:.1,LTC:.001,OMG:.1,IOT:0,NEO:0,ETC:.01,XRP:.02,ETP:.01,ZEC:.001,BTG:0,DASH:.01,XMR:.04,QTM:.01,EDO:.5,DAT:1,AVT:.5,SAN:.1,USDT:5}}}})}commonCurrencyCode(e){return"DSH"==e?"DASH":"QTM"==e?"QTUM":"IOT"==e?"IOTA":e}async fetchBalance(e={}){let t=await this.privatePostAuthRWallets(),i=this.safeString(e,"type","exchange"),s={info:t};for(let r=0;r<t.length;r++){let e=t[r],[a,o,n,d,c]=e;if(a==i){"t"==o[0]&&(o=o.slice(1));let e=o.toUpperCase();e=this.commonCurrencyCode(e);let t=this.account();t.free=c,t.total=n,t.free&&(t.used=t.total-t.free),s[e]=t}}return this.parseBalance(s)}async fetchOrderBook(e,t={}){let i=await this.publicGetBookSymbolPrecision(this.extend({symbol:this.marketId(e),precision:"R0"},t)),s=this.milliseconds(),r={bids:[],asks:[],timestamp:s,datetime:this.iso8601(s)};for(let a=0;a<i.length;a++){let e=i[a],t=e[1],s=e[2],o=s>0?"bids":"asks";s=Math.abs(s),r[o].push([t,s])}return r.bids=this.sortBy(r.bids,0,!0),r.asks=this.sortBy(r.asks,0),r}parseTicker(e,t){let i=this.milliseconds(),s=void 0;t&&(s=t.symbol);let r=e.length;return{symbol:s,timestamp:i,datetime:this.iso8601(i),high:e[r-2],low:e[r-1],bid:e[r-10],ask:e[r-8],vwap:void 0,open:void 0,close:void 0,first:void 0,last:e[r-4],change:e[r-6],percentage:e[r-5],average:void 0,baseVolume:e[r-3],quoteVolume:void 0,info:e}}async fetchTickers(e,t={}){let i=await this.publicGetTickers(this.extend({symbols:this.ids.join(",")},t)),s={};for(let r=0;r<i.length;r++){let e=i[r],t=e[0],a=this.markets_by_id[t];s[a.symbol]=this.parseTicker(e,a)}return s}async fetchTicker(e,t={}){let i=this.markets[e],s=await this.publicGetTickerSymbol(this.extend({symbol:i.id},t));return this.parseTicker(s,i)}parseTrade(e,t){let[i,s,r,a]=e,o=r<0?"sell":"buy";return r<0&&(r=-r),{id:i.toString(),info:e,timestamp:s,datetime:this.iso8601(s),symbol:t.symbol,type:void 0,side:o,price:a,amount:r}}async fetchTrades(e,t,i,s={}){let r=this.market(e),a={symbol:r.id};t&&(a.start=t),i&&(a.limit=i);let o=await this.publicGetTradesSymbolHist(this.extend(a,s));return this.parseTrades(o,r,t,i)}async fetchOHLCV(e,t="1m",i,s,r={}){let a=this.market(e),o={symbol:a.id,timeframe:this.timeframes[t]};s&&(o.limit=s),i&&(o.start=i),o=this.extend(o,r);let n=await this.publicGetCandlesTradeTimeframeSymbolHist(o);return this.parseOHLCVs(n,a,t,i,s)}async createOrder(e,t,i,s,r,o={}){throw new a(this.id+" createOrder not implemented yet")}cancelOrder(e,t,i={}){throw new a(this.id+" cancelOrder not implemented yet")}async fetchOrder(e,t,i={}){throw new a(this.id+" fetchOrder not implemented yet")}async withdraw(e,t,i,s={}){throw new a(this.id+" withdraw not implemented yet")}nonce(){return this.milliseconds()}sign(e,t="public",i="GET",s={},r,a){let o=this.version+"/"+this.implodeParams(e,s),n=this.omit(s,this.extractParams(e)),d=this.urls.api+"/"+o;if("public"==t)Object.keys(n).length&&(d+="?"+this.urlencode(n));else{this.checkRequiredCredentials();let e=this.nonce().toString(),t="/api/"+o+e+(a=this.json(n)),i=this.hmac(this.encode(t),this.encode(this.secret),"sha384");r={"bfx-nonce":e,"bfx-apikey":this.apiKey,"bfx-signature":i,"Content-Type":"application/json"}}return{url:d,method:i,body:a,headers:r}}async request(e,t="public",i="GET",s={},a,n){let d=await this.fetch2(e,t,i,s,a,n);if(d){if("message"in d){if(d.message.indexOf("not enough exchange balance")>=0)throw new o(this.id+" "+this.json(d));throw new r(this.id+" "+this.json(d))}return d}if(""==d)throw new r(this.id+" returned empty response");return d}}},function(e,t,i){"use strict";const s=i(310);e.exports=class extends s{describe(){return this.deepExtend(super.describe(),{id:"bitflyer",name:"bitFlyer",countries:"JP",version:"v1",rateLimit:500,hasCORS:!1,hasWithdraw:!0,urls:{logo:"https://user-images.githubusercontent.com/1294454/28051642-56154182-660e-11e7-9b0d-6042d1e6edd8.jpg",api:"https://api.bitflyer.jp",www:"https://bitflyer.jp",doc:"https://bitflyer.jp/API"},api:{public:{get:["getmarkets","getboard","getticker","getexecutions","gethealth","getchats"]},private:{get:["getpermissions","getbalance","getcollateral","getcollateralaccounts","getaddresses","getcoinins","getcoinouts","getbankaccounts","getdeposits","getwithdrawals","getchildorders","getparentorders","getparentorder","getexecutions","getpositions","gettradingcommission"],post:["sendcoin","withdraw","sendchildorder","cancelchildorder","sendparentorder","cancelparentorder","cancelallchildorders"]}},fees:{trading:{maker:.0025,taker:.0025}}})}async fetchMarkets(){let e=await this.publicGetMarkets(),t=[];for(let i=0;i<e.length;i++){let s=e[i],r=s.product_code,a=r.split("_"),o=void 0,n=void 0,d=r,c=a.length;1==c?(o=d.slice(0,3),n=d.slice(3,6)):2==c?d=(o=a[0])+"/"+(n=a[1]):(o=a[1],n=a[2]),t.push({id:r,symbol:d,base:o,quote:n,info:s})}return t}async fetchBalance(e={}){await this.loadMarkets();let t=await this.privateGetBalance(),i={};for(let a=0;a<t.length;a++){let e=t[a];i[e.currency_code]=e}let s={info:t},r=Object.keys(this.currencies);for(let a=0;a<r.length;a++){let e=r[a],t=this.account();e in i&&(t.total=i[e].amount,t.free=i[e].available,t.used=t.total-t.free),s[e]=t}return this.parseBalance(s)}async fetchOrderBook(e,t={}){await this.loadMarkets();let i=await this.publicGetBoard(this.extend({product_code:this.marketId(e)},t));return this.parseOrderBook(i,void 0,"bids","asks","price","size")}async fetchTicker(e,t={}){await this.loadMarkets();let i=await this.publicGetTicker(this.extend({product_code:this.marketId(e)},t)),s=this.parse8601(i.timestamp);return{symbol:e,timestamp:s,datetime:this.iso8601(s),high:void 0,low:void 0,bid:parseFloat(i.best_bid),ask:parseFloat(i.best_ask),vwap:void 0,open:void 0,close:void 0,first:void 0,last:parseFloat(i.ltp),change:void 0,percentage:void 0,average:void 0,baseVolume:parseFloat(i.volume_by_product),quoteVolume:void 0,info:i}}parseTrade(e,t){let i=void 0,s=void 0;if("side"in e&&e.side){let t=(i=e.side.toLowerCase())+"_child_order_acceptance_id";t in e&&(s=e[t])}let r=this.parse8601(e.exec_date);return{id:e.id.toString(),info:e,timestamp:r,datetime:this.iso8601(r),symbol:t.symbol,order:s,type:void 0,side:i,price:e.price,amount:e.size}}async fetchTrades(e,t,i,s={}){await this.loadMarkets();let r=this.market(e),a=await this.publicGetExecutions(this.extend({product_code:r.id},s));return this.parseTrades(a,r,t,i)}async createOrder(e,t,i,s,r,a={}){await this.loadMarkets();let o={product_code:this.marketId(e),child_order_type:t.toUpperCase(),side:i.toUpperCase(),price:r,size:s},n=await this.privatePostSendchildorder(this.extend(o,a));return{info:n,id:n.child_order_acceptance_id}}async cancelOrder(e,t,i={}){return await this.loadMarkets(),await this.privatePostCancelchildorder(this.extend({parent_order_id:e},i))}async withdraw(e,t,i,s={}){await this.loadMarkets();let r=await this.privatePostWithdraw(this.extend({currency_code:e,amount:t},s));return{info:r,id:r.message_id}}sign(e,t="public",i="GET",s={},r,a){let o="/"+this.version+"/";"private"==t&&(o+="me/"),o+=e,"GET"==i&&Object.keys(s).length&&(o+="?"+this.urlencode(s));let n=this.urls.api+o;if("private"==t){this.checkRequiredCredentials();let e=this.nonce().toString(),t=[e,i,o,a=this.json(s)].join("");r={"ACCESS-KEY":this.apiKey,"ACCESS-TIMESTAMP":e,"ACCESS-SIGN":this.hmac(this.encode(t),this.encode(this.secret)),"Content-Type":"application/json"}}return{url:n,method:i,body:a,headers:r}}}},function(e,t,i){"use strict";const s=i(310),{ExchangeError:r,NotSupported:a}=i(309);e.exports=class extends s{describe(){return this.deepExtend(super.describe(),{id:"bithumb",name:"Bithumb",countries:"KR",rateLimit:500,hasCORS:!0,hasFetchTickers:!0,urls:{logo:"https://user-images.githubusercontent.com/1294454/30597177-ea800172-9d5e-11e7-804c-b9d4fa9b56b0.jpg",api:{public:"https://api.bithumb.com/public",private:"https://api.bithumb.com"},www:"https://www.bithumb.com",doc:"https://www.bithumb.com/u1/US127"},api:{public:{get:["ticker/{currency}","ticker/all","orderbook/{currency}","orderbook/all","recent_transactions/{currency}","recent_transactions/all"]},private:{post:["info/account","info/balance","info/wallet_address","info/ticker","info/orders","info/user_transactions","trade/place","info/order_detail","trade/cancel","trade/btc_withdrawal","trade/krw_deposit","trade/krw_withdrawal","trade/market_buy","trade/market_sell"]}},fees:{trading:{maker:.0015,taker:.0015}}})}async fetchMarkets(){let e=await this.publicGetTickerAll(),t=Object.keys(e.data),i=[];for(let s=0;s<t.length;s++){let r=t[s];if("date"!=r){let t=e.data[r],s=r,a=r+"/KRW";i.push(this.extend(this.fees.trading,{id:r,symbol:a,base:s,quote:"KRW",info:t,lot:void 0,active:!0,precision:{amount:void 0,price:void 0},limits:{amount:{min:void 0,max:void 0},price:{min:void 0,max:void 0},cost:{min:void 0,max:void 0}}}))}}return i}async fetchBalance(e={}){await this.loadMarkets();let t=await this.privatePostInfoBalance(this.extend({currency:"ALL"},e)),i={info:t},s=t.data,r=Object.keys(this.currencies);for(let a=0;a<r.length;a++){let e=r[a],t=this.account(),o=e.toLowerCase();t.total=this.safeFloat(s,"total_"+o),t.used=this.safeFloat(s,"in_use_"+o),t.free=this.safeFloat(s,"available_"+o),i[e]=t}return this.parseBalance(i)}async fetchOrderBook(e,t={}){await this.loadMarkets();let i=this.market(e),s=(await this.publicGetOrderbookCurrency(this.extend({count:50,currency:i.base},t))).data,r=parseInt(s.timestamp);return this.parseOrderBook(s,r,"bids","asks","price","quantity")}parseTicker(e,t){let i=parseInt(e.date),s=void 0;return t&&(s=t.symbol),{symbol:s,timestamp:i,datetime:this.iso8601(i),high:this.safeFloat(e,"max_price"),low:this.safeFloat(e,"min_price"),bid:this.safeFloat(e,"buy_price"),ask:this.safeFloat(e,"sell_price"),vwap:void 0,open:this.safeFloat(e,"opening_price"),close:this.safeFloat(e,"closing_price"),first:void 0,last:this.safeFloat(e,"last_trade"),change:void 0,percentage:void 0,average:this.safeFloat(e,"average_price"),baseVolume:this.safeFloat(e,"volume_1day"),quoteVolume:void 0,info:e}}async fetchTickers(e,t={}){await this.loadMarkets();let i=await this.publicGetTickerAll(t),s={},r=i.data.date,a=this.omit(i.data,"date"),o=Object.keys(a);for(let n=0;n<o.length;n++){let e=o[n],t=e,i=void 0;e in this.markets_by_id&&(t=(i=this.markets_by_id[e]).symbol);let d=a[e];d.date=r,s[t]=this.parseTicker(d,i)}return s}async fetchTicker(e,t={}){await this.loadMarkets();let i=this.market(e),s=await this.publicGetTickerCurrency(this.extend({currency:i.base},t));return this.parseTicker(s.data,i)}parseTrade(e,t){let[i,s]=e.transaction_date.split(" ");s.length<8&&(s="0"+s);let r=this.parse8601(i+" "+s),a="ask"==e.type?"sell":"buy";return{id:void 0,info:e,timestamp:r,datetime:this.iso8601(r),symbol:t.symbol,order:void 0,type:void 0,side:a,price:parseFloat(e.price),amount:parseFloat(e.units_traded)}}async fetchTrades(e,t,i,s={}){await this.loadMarkets();let r=this.market(e),a=await this.publicGetRecentTransactionsCurrency(this.extend({currency:r.base,count:100},s));return this.parseTrades(a.data,r,t,i)}async createOrder(e,t,i,s,r,a={}){await this.loadMarkets();let o=this.market(e),n=void 0,d="privatePost";"limit"==t?(n={order_currency:o.id,Payment_currency:o.quote,units:s,price:r,type:"buy"==i?"bid":"ask"},d+="TradePlace"):"market"==t&&(n={currency:o.id,units:s},d+="Market"+this.capitalise(i));let c=await this[d](this.extend(n,a)),h=void 0;return"order_id"in c&&c.order_id&&(h=c.order_id.toString()),{info:c,id:h}}async cancelOrder(e,t,i={}){let s="side"in i;if(!s)throw new r(this.id+" cancelOrder requires a side parameter (sell or buy) and a currency parameter");s="buy"==s?"purchase":"sales";if(!("currency"in i))throw new r(this.id+" cancelOrder requires a currency parameter");return await this.privatePostTradeCancel({order_id:e,type:i.side,currency:i.currency})}nonce(){return this.milliseconds()}sign(e,t="public",i="GET",s={},r,a){let o="/"+this.implodeParams(e,s),n=this.urls.api[t]+o,d=this.omit(s,this.extractParams(e));if("public"==t)Object.keys(d).length&&(n+="?"+this.urlencode(d));else{this.checkRequiredCredentials(),a=this.urlencode(this.extend({endpoint:o},d));let e=this.nonce().toString(),t=o+"\0"+a+"\0"+e,i=this.hmac(this.encode(t),this.encode(this.secret),"sha512");r={"Api-Key":this.apiKey,"Api-Sign":this.decode(this.stringToBase64(this.encode(i))),"Api-Nonce":e}}return{url:n,method:i,body:a,headers:r}}async request(e,t="public",i="GET",s={},a,o){let n=await this.fetch2(e,t,i,s,a,o);if("status"in n){if("0000"==n.status)return n;throw new r(this.id+" "+this.json(n))}return n}}},function(e,t,i){"use strict";const s=i(310),{NotSupported:r}=i(309);e.exports=class extends s{describe(){return this.deepExtend(super.describe(),{id:"bitlish",name:"Bitlish",countries:["GB","EU","RU"],rateLimit:1500,version:"v1",hasCORS:!1,hasFetchTickers:!0,hasFetchOHLCV:!0,hasWithdraw:!0,urls:{logo:"https://user-images.githubusercontent.com/1294454/27766275-dcfc6c30-5ed3-11e7-839d-00a846385d0b.jpg",api:"https://bitlish.com/api",www:"https://bitlish.com",doc:"https://bitlish.com/api"},requiredCredentials:{apiKey:!0,secret:!1},fees:{trading:{tierBased:!1,percentage:!0,taker:.003,maker:0},funding:{tierBased:!1,percentage:!1,withdraw:{BTC:.001,LTC:.001,DOGE:.001,ETH:.001,XMR:0,ZEC:.001,DASH:1e-4,EUR:50},deposit:{BTC:0,LTC:0,DOGE:0,ETH:0,XMR:0,ZEC:0,DASH:0,EUR:0}}},api:{public:{get:["instruments","ohlcv","pairs","tickers","trades_depth","trades_history"],post:["instruments","ohlcv","pairs","tickers","trades_depth","trades_history"]},private:{post:["accounts_operations","balance","cancel_trade","cancel_trades_by_ids","cancel_all_trades","create_bcode","create_template_wallet","create_trade","deposit","list_accounts_operations_from_ts","list_active_trades","list_bcodes","list_my_matches_from_ts","list_my_trades","list_my_trads_from_ts","list_payment_methods","list_payments","redeem_code","resign","signin","signout","trade_details","trade_options","withdraw","withdraw_by_id"]}}})}commonCurrencyCode(e){return this.substituteCommonCurrencyCodes?"XBT"==e?"BTC":"BCC"==e?"BCH":"DRK"==e?"DASH":("DSH"==e&&(e="DASH"),"XDG"==e&&(e="DOGE"),e):e}async fetchMarkets(){let e=await this.publicGetPairs(),t=[],i=Object.keys(e);for(let s=0;s<i.length;s++){let r=e[i[s]],a=r.id,o=r.name,[n,d]=o.split("/");o=(n=this.commonCurrencyCode(n))+"/"+(d=this.commonCurrencyCode(d)),t.push({id:a,symbol:o,base:n,quote:d,info:r})}return t}parseTicker(e,t){let i=this.milliseconds(),s=void 0;return t&&(s=t.symbol),{timestamp:i,datetime:this.iso8601(i),symbol:s,high:this.safeFloat(e,"max"),low:this.safeFloat(e,"min"),bid:void 0,ask:void 0,vwap:void 0,open:void 0,close:void 0,first:this.safeFloat(e,"first"),last:this.safeFloat(e,"last"),change:void 0,percentage:this.safeFloat(e,"prc"),average:void 0,baseVolume:this.safeFloat(e,"sum"),quoteVolume:void 0,info:e}}async fetchTickers(e,t={}){await this.loadMarkets();let i=await this.publicGetTickers(t),s=Object.keys(i),r={};for(let a=0;a<s.length;a++){let e=s[a],t=this.markets_by_id[e],o=t.symbol,n=i[e];r[o]=this.parseTicker(n,t)}return r}async fetchTicker(e,t={}){await this.loadMarkets();let i=this.market(e),s=(await this.publicGetTickers(t))[i.id];return this.parseTicker(s,i)}async fetchOHLCV(e,t="1m",i,s,r={}){await this.loadMarkets();let a=[(this.seconds()-2592e3).toString(),void 0];return await this.publicPostOhlcv(this.extend({time_range:a},r))}async fetchOrderBook(e,t={}){await this.loadMarkets();let i=await this.publicGetTradesDepth(this.extend({pair_id:this.marketId(e)},t)),s=void 0,r=this.safeInteger(i,"last");return r&&(s=parseInt(r/1e3)),this.parseOrderBook(i,s,"bid","ask","price","volume")}parseTrade(e,t){let i="bid"==e.dir?"buy":"sell",s=void 0;t&&(s=t.symbol);let r=parseInt(e.created/1e3);return{id:void 0,info:e,timestamp:r,datetime:this.iso8601(r),symbol:s,order:void 0,type:void 0,side:i,price:e.price,amount:e.amount}}async fetchTrades(e,t,i,s={}){await this.loadMarkets();let r=this.market(e),a=await this.publicGetTradesHistory(this.extend({pair_id:r.id},s));return this.parseTrades(a.list,r,t,i)}async fetchBalance(e={}){await this.loadMarkets();let t=await this.privatePostBalance(),i={info:t},s=Object.keys(t),r={};for(let a=0;a<s.length;a++){let e=s[a],i=t[e];"DSH"==(e=e.toUpperCase())&&(e="DASH"),"XDG"==e&&(e="DOGE"),r[e]=i}s=Object.keys(this.currencies);for(let a=0;a<s.length;a++){let e=s[a],t=this.account();e in r&&(t.free=parseFloat(r[e].funds),t.used=parseFloat(r[e].holded),t.total=this.sum(t.free,t.used)),i[e]=t}return this.parseBalance(i)}signIn(){return this.privatePostSignin({login:this.login,passwd:this.password})}async createOrder(e,t,i,s,r,a={}){await this.loadMarkets();let o={pair_id:this.marketId(e),dir:"buy"==i?"bid":"ask",amount:s};"limit"==t&&(o.price=r);let n=await this.privatePostCreateTrade(this.extend(o,a));return{info:n,id:n.id}}async cancelOrder(e,t,i={}){return await this.loadMarkets(),await this.privatePostCancelTrade({id:e})}async withdraw(e,t,i,s={}){if(await this.loadMarkets(),"BTC"!=e)throw new r(this.id+" currently supports BTC withdrawals only, until they document other currencies...");let a=await this.privatePostWithdraw(this.extend({currency:e.toLowerCase(),amount:parseFloat(t),account:i,payment_method:"bitcoin"},s));return{info:a,id:a.message_id}}sign(e,t="public",i="GET",s={},r,a){let o=this.urls.api+"/"+this.version+"/"+e;return"public"==t?"GET"==i?Object.keys(s).length&&(o+="?"+this.urlencode(s)):(a=this.json(s),r={"Content-Type":"application/json"}):(this.checkRequiredCredentials(),a=this.json(this.extend({token:this.apiKey},s)),r={"Content-Type":"application/json"}),{url:o,method:i,body:a,headers:r}}}},function(e,t,i){"use strict";const s=i(310),{ExchangeError:r}=i(309);e.exports=class extends s{describe(){return this.deepExtend(super.describe(),{id:"bitmarket",name:"BitMarket",countries:["PL","EU"],rateLimit:1500,hasCORS:!1,hasFetchOHLCV:!0,hasWithdraw:!0,timeframes:{"90m":"90m","6h":"6h","1d":"1d","1w":"7d","1M":"1m","3M":"3m","6M":"6m","1y":"1y"},urls:{logo:"https://user-images.githubusercontent.com/1294454/27767256-a8555200-5ef9-11e7-96fd-469a65e2b0bd.jpg",api:{public:"https://www.bitmarket.net",private:"https://www.bitmarket.pl/api2/"},www:["https://www.bitmarket.pl","https://www.bitmarket.net"],doc:["https://www.bitmarket.net/docs.php?file=api_public.html","https://www.bitmarket.net/docs.php?file=api_private.html","https://github.com/bitmarket-net/api"]},api:{public:{get:["json/{market}/ticker","json/{market}/orderbook","json/{market}/trades","json/ctransfer","graphs/{market}/90m","graphs/{market}/6h","graphs/{market}/1d","graphs/{market}/7d","graphs/{market}/1m","graphs/{market}/3m","graphs/{market}/6m","graphs/{market}/1y"]},private:{post:["info","trade","cancel","orders","trades","history","withdrawals","tradingdesk","tradingdeskStatus","tradingdeskConfirm","cryptotradingdesk","cryptotradingdeskStatus","cryptotradingdeskConfirm","withdraw","withdrawFiat","withdrawPLNPP","withdrawFiatFast","deposit","transfer","transfers","marginList","marginOpen","marginClose","marginCancel","marginModify","marginBalanceAdd","marginBalanceRemove","swapList","swapOpen","swapClose"]}},markets:{"BCH/PLN":{id:"BCCPLN",symbol:"BCH/PLN",base:"BCH",quote:"PLN"},"BTG/PLN":{id:"BTGPLN",symbol:"BTG/PLN",base:"BTG",quote:"PLN"},"BTC/PLN":{id:"BTCPLN",symbol:"BTC/PLN",base:"BTC",quote:"PLN"},"BTC/EUR":{id:"BTCEUR",symbol:"BTC/EUR",base:"BTC",quote:"EUR"},"LTC/PLN":{id:"LTCPLN",symbol:"LTC/PLN",base:"LTC",quote:"PLN"},"LTC/BTC":{id:"LTCBTC",symbol:"LTC/BTC",base:"LTC",quote:"BTC"},"LiteMineX/BTC":{id:"LiteMineXBTC",symbol:"LiteMineX/BTC",base:"LiteMineX",quote:"BTC"}},fees:{trading:{tierBased:!0,percentage:!0,taker:.45/100,maker:.0015,tiers:{taker:[[0,.45/100],[99.99,.0044],[299.99,.0043],[499.99,.0042],[999.99,.41/100],[1999.99,.004],[2999.99,.39/100],[4999.99,.0038],[9999.99,.0037],[19999.99,.0036],[29999.99,.35/100],[49999.99,.34/100],[99999.99,.0033],[199999.99,.0032],[299999.99,.0031],[499999.99,0]],maker:[[0,.0015],[99.99,.14/100],[299.99,.0013],[499.99,.0012],[999.99,.0011],[1999.99,.001],[2999.99,.9/100],[4999.99,.008],[9999.99,.7/100],[19999.99,.006],[29999.99,.005],[49999.99,.004],[99999.99,.003],[199999.99,.002],[299999.99,.001],[499999.99,0]]}},funding:{tierBased:!1,percentage:!1,withdraw:{BTC:8e-4,LTC:.005,BCH:8e-4,BTG:8e-4,DOGE:1,EUR:2,PLN:2},deposit:{BTC:0,LTC:0,BCH:0,BTG:0,DOGE:25,EUR:2,PLN:0}}}})}async fetchBalance(e={}){await this.loadMarkets();let t=(await this.privatePostInfo()).data,i=t.balances,s={info:t},r=Object.keys(this.currencies);for(let a=0;a<r.length;a++){let e=r[a],t=this.account();e in i.available&&(t.free=i.available[e]),e in i.blocked&&(t.used=i.blocked[e]),t.total=this.sum(t.free,t.used),s[e]=t}return this.parseBalance(s)}async fetchOrderBook(e,t={}){let i=await this.publicGetJsonMarketOrderbook(this.extend({market:this.marketId(e)},t)),s=this.milliseconds();return{bids:i.bids,asks:i.asks,timestamp:s,datetime:this.iso8601(s)}}async fetchTicker(e,t={}){let i=await this.publicGetJsonMarketTicker(this.extend({market:this.marketId(e)},t)),s=this.milliseconds(),r=parseFloat(i.vwap),a=parseFloat(i.volume),o=a*r;return{symbol:e,timestamp:s,datetime:this.iso8601(s),high:parseFloat(i.high),low:parseFloat(i.low),bid:parseFloat(i.bid),ask:parseFloat(i.ask),vwap:r,open:void 0,close:void 0,first:void 0,last:parseFloat(i.last),change:void 0,percentage:void 0,average:void 0,baseVolume:a,quoteVolume:o,info:i}}parseTrade(e,t){let i="bid"==e.type?"buy":"sell",s=1e3*e.date;return{id:e.tid.toString(),info:e,timestamp:s,datetime:this.iso8601(s),symbol:t.symbol,order:void 0,type:void 0,side:i,price:e.price,amount:e.amount}}async fetchTrades(e,t,i,s={}){let r=this.market(e),a=await this.publicGetJsonMarketTrades(this.extend({market:r.id},s));return this.parseTrades(a,r,t,i)}parseOHLCV(e,t,i="90m",s,r){return[1e3*e.time,parseFloat(e.open),parseFloat(e.high),parseFloat(e.low),parseFloat(e.close),parseFloat(e.vol)]}async fetchOHLCV(e,t="90m",i,s,r={}){await this.loadMarkets();let a="publicGetGraphsMarket"+this.timeframes[t],o=this.market(e),n=await this[a](this.extend({market:o.id},r));return this.parseOHLCVs(n,o,t,i,s)}async createOrder(e,t,i,s,r,a={}){let o=await this.privatePostTrade(this.extend({market:this.marketId(e),type:i,amount:s,rate:r},a)),n={info:o};return"id"in o.order&&(n.id=o.id),n}async cancelOrder(e,t,i={}){return await this.privatePostCancel({id:e})}isFiat(e){return"EUR"==e||"PLN"==e}async withdraw(e,t,i,s={}){await this.loadMarkets();let a=void 0,o={currency:e,quantity:t};if(this.isFiat(e)){if(a="privatePostWithdrawFiat",!("account"in s))throw new r(this.id+" requires account parameter to withdraw fiat currency");if(o.account=s.account,"account2"in s)o.account2=s.account2;else if("EUR"==e)throw new r(this.id+" requires account2 parameter to withdraw EUR");if("withdrawal_note"in s)o.withdrawal_note=s.withdrawal_note;else if("PLN"==e)throw new r(this.id+" requires withdrawal_note parameter to withdraw PLN")}else a="privatePostWithdraw",o.address=i;let n=await this[a](this.extend(o,s));return{info:n,id:n}}sign(e,t="public",i="GET",s={},r,a){let o=this.urls.api[t];if("public"==t)o+="/"+this.implodeParams(e+".json",s);else{this.checkRequiredCredentials();let t=this.nonce(),i=this.extend({tonce:t,method:e},s);a=this.urlencode(i),r={"API-Key":this.apiKey,"API-Hash":this.hmac(this.encode(a),this.encode(this.secret),"sha512")}}return{url:o,method:i,body:a,headers:r}}}},function(e,t,i){"use strict";const s=i(310),{ExchangeError:r}=i(309);e.exports=class extends s{describe(){return this.deepExtend(super.describe(),{id:"bitmex",name:"BitMEX",countries:"SC",version:"v1",userAgent:void 0,rateLimit:1500,hasCORS:!1,hasFetchOHLCV:!0,hasWithdraw:!0,timeframes:{"1m":"1m","5m":"5m","1h":"1h","1d":"1d"},urls:{test:"https://testnet.bitmex.com",logo:"https://user-images.githubusercontent.com/1294454/27766319-f653c6e6-5ed4-11e7-933d-f0bc3699ae8f.jpg",api:"https://www.bitmex.com",www:"https://www.bitmex.com",doc:["https://www.bitmex.com/app/apiOverview","https://github.com/BitMEX/api-connectors/tree/master/official-http"]},api:{public:{get:["announcement","announcement/urgent","funding","instrument","instrument/active","instrument/activeAndIndices","instrument/activeIntervals","instrument/compositeIndex","instrument/indices","insurance","leaderboard","liquidation","orderBook","orderBook/L2","quote","quote/bucketed","schema","schema/websocketHelp","settlement","stats","stats/history","trade","trade/bucketed"]},private:{get:["apiKey","chat","chat/channels","chat/connected","execution","execution/tradeHistory","notification","order","position","user","user/affiliateStatus","user/checkReferralCode","user/commission","user/depositAddress","user/margin","user/minWithdrawalFee","user/wallet","user/walletHistory","user/walletSummary"],post:["apiKey","apiKey/disable","apiKey/enable","chat","order","order/bulk","order/cancelAllAfter","order/closePosition","position/isolate","position/leverage","position/riskLimit","position/transferMargin","user/cancelWithdrawal","user/confirmEmail","user/confirmEnableTFA","user/confirmWithdrawal","user/disableTFA","user/logout","user/logoutAll","user/preferences","user/requestEnableTFA","user/requestWithdrawal"],put:["order","order/bulk","user"],delete:["apiKey","order","order/all"]}}})}async fetchMarkets(){let e=await this.publicGetInstrumentActiveAndIndices(),t=[];for(let i=0;i<e.length;i++){let s=e[i],r="Unlisted"!=s.state,a=s.symbol,o=s.underlying,n=s.quoteCurrency,d=void 0,c=!1,h=!1,l=o+n;o=this.commonCurrencyCode(o),n=this.commonCurrencyCode(n);let u=a==l,p=a;u?(d="swap",p=o+"/"+n):a.indexOf("B_")>=0?(h=!0,d="prediction"):(c=!0,d="future");let m=s.makerFee,f=s.takerFee;t.push({id:a,symbol:p,base:o,quote:n,active:r,taker:f,maker:m,type:d,spot:!1,swap:u,future:c,prediction:h,info:s})}return t}async fetchBalance(e={}){await this.loadMarkets();let t=await this.privateGetUserMargin({currency:"all"}),i={info:t};for(let s=0;s<t.length;s++){let e=t[s],r=e.currency.toUpperCase();r=this.commonCurrencyCode(r);let a={free:e.availableMargin,used:0,total:e.amount};"BTC"==r&&(a.free=1e-8*a.free,a.total=1e-8*a.total),a.used=a.total-a.free,i[r]=a}return this.parseBalance(i)}async fetchOrderBook(e,t={}){await this.loadMarkets();let i=await this.publicGetOrderBookL2(this.extend({symbol:this.marketId(e)},t)),s=this.milliseconds(),r={bids:[],asks:[],timestamp:s,datetime:this.iso8601(s)};for(let a=0;a<i.length;a++){let e=i[a],t="Sell"==e.side?"asks":"bids",s=e.size,o=e.price;r[t].push([o,s])}return r.bids=this.sortBy(r.bids,0,!0),r.asks=this.sortBy(r.asks,0),r}async fetchTicker(e,t={}){await this.loadMarkets();let i=this.market(e);if(!i.active)throw new r(this.id+": symbol "+e+" is delisted");let s=this.extend({symbol:i.id,binSize:"1d",partial:!0,count:1,reverse:!0},t),a=await this.publicGetQuoteBucketed(s),o=a[a.length-1],n=(await this.publicGetTradeBucketed(s))[0],d=this.milliseconds();return{symbol:e,timestamp:d,datetime:this.iso8601(d),high:parseFloat(n.high),low:parseFloat(n.low),bid:parseFloat(o.bidPrice),ask:parseFloat(o.askPrice),vwap:parseFloat(n.vwap),open:void 0,close:parseFloat(n.close),first:void 0,last:void 0,change:void 0,percentage:void 0,average:void 0,baseVolume:parseFloat(n.homeNotional),quoteVolume:parseFloat(n.foreignNotional),info:n}}parseOHLCV(e,t,i="1m",s,r){return[this.parse8601(e.timestamp),e.open,e.high,e.low,e.close,e.volume]}async fetchOHLCV(e,t="1m",i,s,r={}){await this.loadMarkets();let a=this.market(e),o={symbol:a.id,binSize:this.timeframes[t],partial:!0};if(i){let e=this.YmdHMS(i).slice(0,16);o.startTime=e}s&&(o.count=s);let n=await this.publicGetTradeBucketed(this.extend(o,r));return this.parseOHLCVs(n,a,t,i,s)}parseTrade(e,t){let i=this.parse8601(e.timestamp),s=void 0;return t||"symbol"in e&&(t=this.markets_by_id[e.symbol]),t&&(s=t.symbol),{id:e.trdMatchID,info:e,timestamp:i,datetime:this.iso8601(i),symbol:s,order:void 0,type:void 0,side:e.side.toLowerCase(),price:e.price,amount:e.size}}async fetchTrades(e,t,i,s={}){await this.loadMarkets();let r=this.market(e),a=await this.publicGetTrade(this.extend({symbol:r.id},s));return this.parseTrades(a,r,t,i)}async createOrder(e,t,i,s,r,a={}){await this.loadMarkets();let o={symbol:this.marketId(e),side:this.capitalize(i),orderQty:s,ordType:this.capitalize(t)};"limit"==t&&(o.price=r);let n=await this.privatePostOrder(this.extend(o,a));return{info:n,id:n.orderID}}async cancelOrder(e,t,i={}){return await this.loadMarkets(),await this.privateDeleteOrder({orderID:e})}isFiat(e){return"EUR"==e||"PLN"==e}async withdraw(e,t,i,s={}){if(await this.loadMarkets(),"BTC"!=e)throw new r(this.id+" supoprts BTC withdrawals only, other currencies coming soon...");let a={currency:"XBt",amount:t,address:i},o=await this.privatePostUserRequestWithdrawal(this.extend(a,s));return{info:o,id:o.transactID}}handleErrors(e,t,i,s,a,o){if(e>=400){if(o){if("{"==o[0]){let e=JSON.parse(o);if("error"in e&&"message"in e.error)throw new r(this.id+" "+this.json(e))}throw new r(this.id+" "+o)}throw new r(this.id+" returned an empty response")}}nonce(){return this.milliseconds()}sign(e,t="public",i="GET",s={},r,a){let o="/api/"+this.version+"/"+e;Object.keys(s).length&&(o+="?"+this.urlencode(s));let n=this.urls.api+o;if("private"==t){this.checkRequiredCredentials();let e=this.nonce().toString(),t=i+o+e;"POST"==i&&Object.keys(s).length&&(t+=a=this.json(s)),r={"Content-Type":"application/json","api-nonce":e,"api-key":this.apiKey,"api-signature":this.hmac(this.encode(t),this.encode(this.secret))}}return{url:n,method:i,body:a,headers:r}}}},function(e,t,i){"use strict";const s=i(310),{ExchangeError:r}=i(309);e.exports=class extends s{describe(){return this.deepExtend(super.describe(),{id:"bitso",name:"Bitso",countries:"MX",rateLimit:2e3,version:"v3",hasCORS:!0,urls:{logo:"https://user-images.githubusercontent.com/1294454/27766335-715ce7aa-5ed5-11e7-88a8-173a27bb30fe.jpg",api:"https://api.bitso.com",www:"https://bitso.com",doc:"https://bitso.com/api_info"},api:{public:{get:["available_books","ticker","order_book","trades"]},private:{get:["account_status","balance","fees","fundings","fundings/{fid}","funding_destination","kyc_documents","ledger","ledger/trades","ledger/fees","ledger/fundings","ledger/withdrawals","mx_bank_codes","open_orders","order_trades/{oid}","orders/{oid}","user_trades","user_trades/{tid}","withdrawals/","withdrawals/{wid}"],post:["bitcoin_withdrawal","debit_card_withdrawal","ether_withdrawal","orders","phone_number","phone_verification","phone_withdrawal","spei_withdrawal"],delete:["orders/{oid}","orders/all"]}}})}async fetchMarkets(){let e=await this.publicGetAvailableBooks(),t=[];for(let i=0;i<e.payload.length;i++){let s=e.payload[i],r=s.book,a=r.toUpperCase().replace("_","/"),[o,n]=a.split("/"),d={amount:{min:parseFloat(s.minimum_amount),max:parseFloat(s.maximum_amount)},price:{min:parseFloat(s.minimum_price),max:parseFloat(s.maximum_price)},cost:{min:parseFloat(s.minimum_value),max:parseFloat(s.maximum_value)}},c={amount:this.precisionFromString(s.minimum_amount),price:this.precisionFromString(s.minimum_price)},h=d.amount.min;t.push({id:r,symbol:a,base:o,quote:n,info:s,lot:h,limits:d,precision:c})}return t}async fetchBalance(e={}){await this.loadMarkets();let t=await this.privateGetBalance(),i=t.payload.balances,s={info:t};for(let r=0;r<i.length;r++){let e=i[r],t=e.currency.toUpperCase(),a={free:parseFloat(e.available),used:parseFloat(e.locked),total:parseFloat(e.total)};s[t]=a}return this.parseBalance(s)}async fetchOrderBook(e,t={}){await this.loadMarkets();let i=(await this.publicGetOrderBook(this.extend({book:this.marketId(e)},t))).payload,s=this.parse8601(i.updated_at);return this.parseOrderBook(i,s,"bids","asks","price","amount")}async fetchTicker(e,t={}){await this.loadMarkets();let i=(await this.publicGetTicker(this.extend({book:this.marketId(e)},t))).payload,s=this.parse8601(i.created_at),r=parseFloat(i.vwap),a=parseFloat(i.volume),o=a*r;return{symbol:e,timestamp:s,datetime:this.iso8601(s),high:parseFloat(i.high),low:parseFloat(i.low),bid:parseFloat(i.bid),ask:parseFloat(i.ask),vwap:r,open:void 0,close:void 0,first:void 0,last:parseFloat(i.last),change:void 0,percentage:void 0,average:void 0,baseVolume:a,quoteVolume:o,info:i}}parseTrade(e,t){let i=this.parse8601(e.created_at),s=void 0;return t||"book"in e&&(t=this.markets_by_id[e.book]),t&&(s=t.symbol),{id:e.tid.toString(),info:e,timestamp:i,datetime:this.iso8601(i),symbol:s,order:void 0,type:void 0,side:e.maker_side,price:parseFloat(e.price),amount:parseFloat(e.amount)}}async fetchTrades(e,t,i,s={}){await this.loadMarkets();let r=this.market(e),a=await this.publicGetTrades(this.extend({book:r.id},s));return this.parseTrades(a.payload,r,t,i)}async createOrder(e,t,i,s,r,a={}){await this.loadMarkets();let o={book:this.marketId(e),side:i,type:t,major:this.amountToPrecision(e,s)};"limit"==t&&(o.price=this.priceToPrecision(e,r));let n=await this.privatePostOrders(this.extend(o,a));return{info:n,id:n.payload.oid}}async cancelOrder(e,t,i={}){return await this.loadMarkets(),await this.privateDeleteOrders({oid:e})}sign(e,t="public",i="GET",s={},r,a){let o="/"+this.version+"/"+this.implodeParams(e,s),n=this.urls.api+o;if("public"==t)Object.keys(s).length&&(n+="?"+this.urlencode(s));else{this.checkRequiredCredentials();let e=this.nonce().toString(),t=[e,i,o].join("");Object.keys(s).length&&(t+=a=this.json(s));let n=this.hmac(this.encode(t),this.encode(this.secret));r={Authorization:"Bitso "+(this.apiKey+":"+e+":"+n),"Content-Type":"application/json"}}return{url:n,method:i,body:a,headers:r}}async request(e,t="public",i="GET",s={},a,o){let n=await this.fetch2(e,t,i,s,a,o);if("success"in n&&n.success)return n;throw new r(this.id+" "+this.json(n))}}},function(e,t,i){"use strict";const s=i(310),{ExchangeError:r,AuthenticationError:a}=i(309);e.exports=class extends s{describe(){return this.deepExtend(super.describe(),{id:"bitstamp",name:"Bitstamp",countries:"GB",rateLimit:1e3,version:"v2",hasCORS:!1,hasFetchOrder:!0,hasWithdraw:!0,urls:{logo:"https://user-images.githubusercontent.com/1294454/27786377-8c8ab57e-5fe9-11e7-8ea4-2b05b6bcceec.jpg",api:"https://www.bitstamp.net/api",www:"https://www.bitstamp.net",doc:"https://www.bitstamp.net/api"},requiredCredentials:{apiKey:!0,secret:!0,uid:!0},api:{public:{get:["order_book/{pair}/","ticker_hour/{pair}/","ticker/{pair}/","transactions/{pair}/","trading-pairs-info/"]},private:{post:["balance/","balance/{pair}/","bch_withdrawal/","bch_address/","user_transactions/","user_transactions/{pair}/","open_orders/all/","open_orders/{pair}/","order_status/","cancel_order/","buy/{pair}/","buy/market/{pair}/","sell/{pair}/","sell/market/{pair}/","ltc_withdrawal/","ltc_address/","eth_withdrawal/","eth_address/","transfer-to-main/","transfer-from-main/","ripple_withdrawal/","ripple_address/","withdrawal/open/","withdrawal/status/","withdrawal/cancel/","liquidation_address/new/","liquidation_address/info/"]},v1:{post:["bitcoin_deposit_address/","unconfirmed_btc/","bitcoin_withdrawal/"]}},fees:{trading:{tierBased:!0,percentage:!0,taker:.0025,maker:.0025,tiers:{taker:[[0,.0025],[2e4,.0024],[1e5,.0022],[4e5,.002],[6e5,.0015],[1e6,.14/100],[2e6,.0013],[4e6,.0012],[2e7,.0011],[20000001,.001]],maker:[[0,.0025],[2e4,.0024],[1e5,.0022],[4e5,.002],[6e5,.0015],[1e6,.14/100],[2e6,.0013],[4e6,.0012],[2e7,.0011],[20000001,.001]]}},funding:{tierBased:!1,percentage:!1,withdraw:{BTC:0,LTC:0,ETH:0,XRP:0,USD:25,EUR:.9},deposit:{BTC:0,LTC:0,ETH:0,XRP:0,USD:25,EUR:0}}}})}async fetchMarkets(){let e=await this.publicGetTradingPairsInfo(),t=[];for(let i=0;i<e.length;i++){let s=e[i],r=s.name,[a,o]=r.split("/"),n=a.toLowerCase(),d=o.toLowerCase(),c=n+"_"+d,h=s.url_symbol,l={amount:s.base_decimals,price:s.counter_decimals},[u,p]=s.minimum_order.split(" "),m="Enabled"==s.trading,f=Math.pow(10,-l.amount);t.push({id:h,symbol:r,base:a,quote:o,baseId:n,quoteId:d,symbolId:c,info:s,lot:f,active:m,precision:l,limits:{amount:{min:f,max:void 0},price:{min:Math.pow(10,-l.price),max:void 0},cost:{min:parseFloat(u),max:void 0}}})}return t}async fetchOrderBook(e,t={}){await this.loadMarkets();let i=await this.publicGetOrderBookPair(this.extend({pair:this.marketId(e)},t)),s=1e3*parseInt(i.timestamp);return this.parseOrderBook(i,s)}async fetchTicker(e,t={}){await this.loadMarkets();let i=await this.publicGetTickerPair(this.extend({pair:this.marketId(e)},t)),s=1e3*parseInt(i.timestamp),r=parseFloat(i.vwap),a=parseFloat(i.volume),o=a*r;return{symbol:e,timestamp:s,datetime:this.iso8601(s),high:parseFloat(i.high),low:parseFloat(i.low),bid:parseFloat(i.bid),ask:parseFloat(i.ask),vwap:r,open:parseFloat(i.open),close:void 0,first:void 0,last:parseFloat(i.last),change:void 0,percentage:void 0,average:void 0,baseVolume:a,quoteVolume:o,info:i}}parseTrade(e,t){let i=void 0;"date"in e?i=1e3*parseInt(e.date):"datetime"in e&&(i=this.parse8601(e.datetime));let s=0==e.type?"buy":"sell",r=void 0;if("order_id"in e&&(r=e.order_id.toString()),"currency_pair"in e){let i=e.currency_pair;i in this.markets_by_id&&(t=this.markets_by_id[i])}let a=this.safeFloat(e,"price");a=this.safeFloat(e,t.symbolId,a);let o=this.safeFloat(e,"amount");o=this.safeFloat(e,t.baseId,o);let n=this.safeValue(e,"tid");return(n=this.safeValue(e,"id",n))&&(n=n.toString()),{id:n,info:e,timestamp:i,datetime:this.iso8601(i),symbol:t.symbol,order:r,type:void 0,side:s,price:parseFloat(a),amount:parseFloat(o)}}async fetchTrades(e,t,i,s={}){await this.loadMarkets();let r=this.market(e),a=await this.publicGetTransactionsPair(this.extend({pair:r.id,time:"minute"},s));return this.parseTrades(a,r,t,i)}async fetchBalance(e={}){await this.loadMarkets();let t=await this.privatePostBalance(),i={info:t},s=Object.keys(this.currencies);for(let r=0;r<s.length;r++){let e=s[r],a=e.toLowerCase(),o=a+"_balance",n=a+"_available",d=a+"_reserved",c=this.account();n in t&&(c.free=parseFloat(t[n])),d in t&&(c.used=parseFloat(t[d])),o in t&&(c.total=parseFloat(t[o])),i[e]=c}return this.parseBalance(i)}async createOrder(e,t,i,s,r,a={}){await this.loadMarkets();let o="privatePost"+this.capitalize(i),n={pair:this.marketId(e),amount:s};"market"==t?o+="Market":n.price=r,o+="Pair";let d=await this[o](this.extend(n,a));return{info:d,id:d.id}}async cancelOrder(e,t,i={}){return await this.loadMarkets(),await this.privatePostCancelOrder({id:e})}parseOrderStatus(e){return"Queue"==e.status||"Open"==e.status?"open":"Finished"==e.status?"closed":e.status}async fetchOrderStatus(e,t){await this.loadMarkets();let i=await this.privatePostOrderStatus({id:e});return this.parseOrderStatus(i)}async fetchMyTrades(e,t,i,s={}){await this.loadMarkets();let r=void 0;e&&(r=this.market(e));let a=r?r.id:"all",o=this.extend({pair:a},s),n=await this.privatePostUserTransactionsPair(o);return this.parseTrades(n,r,t,i)}async fetchOrder(e,t,i={}){return await this.loadMarkets(),await this.privatePostOrderStatus({id:e})}getCurrencyName(e){return"BTC"==e?"bitcoin":"XRP"==e?"ripple":e.toLowerCase()}isFiat(e){return"USD"==e||"EUR"==e}async withdraw(e,t,i,s={}){if(this.isFiat(e))throw new r(this.id+" fiat withdraw() for "+e+" is not implemented yet");let a=this.getCurrencyName(e),o={amount:t,address:i},n="BTC"==e?"v1":"private";n+="Post"+this.capitalize(a)+"Withdrawal";let d=s;if("XRP"==e){let t=this.safeString(s,"destination_tag");if(!t)throw new r(this.id+" withdraw() requires a destination_tag param for "+e);o.destination_tag=t,d=this.omit(s,"destination_tag")}let c=await this[n](this.extend(o,d));return{info:c,id:c.id}}sign(e,t="public",i="GET",s={},r,a){let o=this.urls.api+"/";"v1"!=t&&(o+=this.version+"/"),o+=this.implodeParams(e,s);let n=this.omit(s,this.extractParams(e));if("public"==t)Object.keys(n).length&&(o+="?"+this.urlencode(n));else{this.checkRequiredCredentials();let e=this.nonce().toString(),t=e+this.uid+this.apiKey,i=this.encode(this.hmac(this.encode(t),this.encode(this.secret)));n=this.extend({key:this.apiKey,signature:i.toUpperCase(),nonce:e},n),a=this.urlencode(n),r={"Content-Type":"application/x-www-form-urlencoded"}}return{url:o,method:i,body:a,headers:r}}async request(e,t="public",i="GET",s={},a,o){let n=await this.fetch2(e,t,i,s,a,o);if("status"in n&&"error"==n.status)throw new r(this.id+" "+this.json(n));return n}}},function(e,t,i){"use strict";const s=i(310),{ExchangeError:r,NotSupported:a,AuthenticationError:o}=i(309);e.exports=class extends s{describe(){return this.deepExtend(super.describe(),{id:"bitstamp1",name:"Bitstamp v1",countries:"GB",rateLimit:1e3,version:"v1",hasCORS:!0,urls:{logo:"https://user-images.githubusercontent.com/1294454/27786377-8c8ab57e-5fe9-11e7-8ea4-2b05b6bcceec.jpg",api:"https://www.bitstamp.net/api",www:"https://www.bitstamp.net",doc:"https://www.bitstamp.net/api"},requiredCredentials:{apiKey:!0,secret:!0,uid:!0},api:{public:{get:["ticker","ticker_hour","order_book","transactions","eur_usd"]},private:{post:["balance","user_transactions","open_orders","order_status","cancel_order","cancel_all_orders","buy","sell","bitcoin_deposit_address","unconfirmed_btc","ripple_withdrawal","ripple_address","withdrawal_requests","bitcoin_withdrawal"]}},markets:{"BTC/USD":{id:"btcusd",symbol:"BTC/USD",base:"BTC",quote:"USD",maker:.0025,taker:.0025},"BTC/EUR":{id:"btceur",symbol:"BTC/EUR",base:"BTC",quote:"EUR",maker:.0025,taker:.0025},"EUR/USD":{id:"eurusd",symbol:"EUR/USD",base:"EUR",quote:"USD",maker:.0025,taker:.0025},"XRP/USD":{id:"xrpusd",symbol:"XRP/USD",base:"XRP",quote:"USD",maker:.0025,taker:.0025},"XRP/EUR":{id:"xrpeur",symbol:"XRP/EUR",base:"XRP",quote:"EUR",maker:.0025,taker:.0025},"XRP/BTC":{id:"xrpbtc",symbol:"XRP/BTC",base:"XRP",quote:"BTC",maker:.0025,taker:.0025},"LTC/USD":{id:"ltcusd",symbol:"LTC/USD",base:"LTC",quote:"USD",maker:.0025,taker:.0025},"LTC/EUR":{id:"ltceur",symbol:"LTC/EUR",base:"LTC",quote:"EUR",maker:.0025,taker:.0025},"LTC/BTC":{id:"ltcbtc",symbol:"LTC/BTC",base:"LTC",quote:"BTC",maker:.0025,taker:.0025},"ETH/USD":{id:"ethusd",symbol:"ETH/USD",base:"ETH",quote:"USD",maker:.0025,taker:.0025},"ETH/EUR":{id:"etheur",symbol:"ETH/EUR",base:"ETH",quote:"EUR",maker:.0025,taker:.0025},"ETH/BTC":{id:"ethbtc",symbol:"ETH/BTC",base:"ETH",quote:"BTC",maker:.0025,taker:.0025}}})}async fetchOrderBook(e,t={}){if("BTC/USD"!=e)throw new r(this.id+" "+this.version+" fetchOrderBook doesn't support "+e+", use it for BTC/USD only");let i=await this.publicGetOrderBook(t),s=1e3*parseInt(i.timestamp);return this.parseOrderBook(i,s)}async fetchTicker(e,t={}){if("BTC/USD"!=e)throw new r(this.id+" "+this.version+" fetchTicker doesn't support "+e+", use it for BTC/USD only");let i=await this.publicGetTicker(t),s=1e3*parseInt(i.timestamp),a=parseFloat(i.vwap),o=parseFloat(i.volume),n=o*a;return{symbol:e,timestamp:s,datetime:this.iso8601(s),high:parseFloat(i.high),low:parseFloat(i.low),bid:parseFloat(i.bid),ask:parseFloat(i.ask),vwap:a,open:parseFloat(i.open),close:void 0,first:void 0,last:parseFloat(i.last),change:void 0,percentage:void 0,average:void 0,baseVolume:o,quoteVolume:n,info:i}}parseTrade(e,t){let i=void 0;"date"in e?i=1e3*parseInt(e.date):"datetime"in e&&(i=1e3*parseInt(e.datetime));let s=0==e.type?"buy":"sell",r=void 0;return"order_id"in e&&(r=e.order_id.toString()),"currency_pair"in e&&e.currency_pair in this.markets_by_id&&(t=this.markets_by_id[e.currency_pair]),{id:e.tid.toString(),info:e,timestamp:i,datetime:this.iso8601(i),symbol:t.symbol,order:r,type:void 0,side:s,price:parseFloat(e.price),amount:parseFloat(e.amount)}}async fetchTrades(e,t,i,s={}){if("BTC/USD"!=e)throw new r(this.id+" "+this.version+" fetchTrades doesn't support "+e+", use it for BTC/USD only");let a=this.market(e),o=await this.publicGetTransactions(this.extend({time:"minute"},s));return this.parseTrades(o,a,t,i)}async fetchBalance(e={}){let t=await this.privatePostBalance(),i={info:t},s=Object.keys(this.currencies);for(let r=0;r<s.length;r++){let e=s[r],a=e.toLowerCase(),o=a+"_balance",n=a+"_available",d=a+"_reserved",c=this.account();c.free=this.safeFloat(t,n,0),c.used=this.safeFloat(t,d,0),c.total=this.safeFloat(t,o,0),i[e]=c}return this.parseBalance(i)}async createOrder(e,t,i,s,a,o={}){if("limit"!=t)throw new r(this.id+" "+this.version+" accepts limit orders only");if("BTC/USD"!=e)throw new r(this.id+" v1 supports BTC/USD orders only");let n="privatePost"+this.capitalize(i),d={amount:s,price:a},c=await this[n](this.extend(d,o));return{info:c,id:c.id}}async cancelOrder(e,t,i={}){return await this.privatePostCancelOrder({id:e})}parseOrderStatus(e){return"Queue"==e.status||"Open"==e.status?"open":"Finished"==e.status?"closed":e.status}async fetchOrderStatus(e,t){await this.loadMarkets();let i=await this.privatePostOrderStatus({id:e});return this.parseOrderStatus(i)}async fetchMyTrades(e,t,i,s={}){await this.loadMarkets();let r=void 0;e&&(r=this.market(e));let a=r?r.id:"all",o=this.extend({id:a},s),n=await this.privatePostOpenOrdersId(o);return this.parseTrades(n,r,t,i)}async fetchOrder(e,t,i={}){throw new a(this.id+" fetchOrder is not implemented yet")}sign(e,t="public",i="GET",s={},r,a){let o=this.urls.api+"/"+this.implodeParams(e,s),n=this.omit(s,this.extractParams(e));if("public"==t)Object.keys(n).length&&(o+="?"+this.urlencode(n));else{this.checkRequiredCredentials();let e=this.nonce().toString(),t=e+this.uid+this.apiKey,i=this.encode(this.hmac(this.encode(t),this.encode(this.secret)));n=this.extend({key:this.apiKey,signature:i.toUpperCase(),nonce:e},n),a=this.urlencode(n),r={"Content-Type":"application/x-www-form-urlencoded"}}return{url:o,method:i,body:a,headers:r}}async request(e,t="public",i="GET",s={},a,o){let n=await this.fetch2(e,t,i,s,a,o);if("status"in n&&"error"==n.status)throw new r(this.id+" "+this.json(n));return n}}},function(e,t,i){"use strict";const s=i(310);e.exports=class extends s{describe(){return this.deepExtend(super.describe(),{id:"bl3p",name:"BL3P",countries:["NL","EU"],rateLimit:1e3,version:"1",comment:"An exchange market by BitonicNL",hasCORS:!1,urls:{logo:"https://user-images.githubusercontent.com/1294454/28501752-60c21b82-6feb-11e7-818b-055ee6d0e754.jpg",api:"https://api.bl3p.eu",www:["https://bl3p.eu","https://bitonic.nl"],doc:["https://github.com/BitonicNL/bl3p-api/tree/master/docs","https://bl3p.eu/api","https://bitonic.nl/en/api"]},api:{public:{get:["{market}/ticker","{market}/orderbook","{market}/trades"]},private:{post:["{market}/money/depth/full","{market}/money/order/add","{market}/money/order/cancel","{market}/money/order/result","{market}/money/orders","{market}/money/orders/history","{market}/money/trades/fetch","GENMKT/money/info","GENMKT/money/deposit_address","GENMKT/money/new_deposit_address","GENMKT/money/wallet/history","GENMKT/money/withdraw"]}},markets:{"BTC/EUR":{id:"BTCEUR",symbol:"BTC/EUR",base:"BTC",quote:"EUR",maker:.0025,taker:.0025}}})}async fetchBalance(e={}){let t=(await this.privatePostGENMKTMoneyInfo()).data,i=t.wallets,s={info:t},r=Object.keys(this.currencies);for(let a=0;a<r.length;a++){let e=r[a],t=this.account();e in i&&"available"in i[e]&&(t.free=parseFloat(i[e].available.value)),e in i&&"balance"in i[e]&&(t.total=parseFloat(i[e].balance.value)),t.total&&t.free&&(t.used=t.total-t.free),s[e]=t}return this.parseBalance(s)}parseBidAsk(e,t=0,i=0){return[e.price_int/1e5,e.amount_int/1e8]}async fetchOrderBook(e,t={}){let i=this.market(e),s=(await this.publicGetMarketOrderbook(this.extend({market:i.id},t))).data;return this.parseOrderBook(s)}async fetchTicker(e,t={}){let i=await this.publicGetMarketTicker(this.extend({market:this.marketId(e)},t)),s=1e3*i.timestamp;return{symbol:e,timestamp:s,datetime:this.iso8601(s),high:parseFloat(i.high),low:parseFloat(i.low),bid:parseFloat(i.bid),ask:parseFloat(i.ask),vwap:void 0,open:void 0,close:void 0,first:void 0,last:parseFloat(i.last),change:void 0,percentage:void 0,average:void 0,baseVolume:parseFloat(i.volume["24h"]),quoteVolume:void 0,info:i}}parseTrade(e,t){return{id:e.trade_id,info:e,timestamp:e.date,datetime:this.iso8601(e.date),symbol:t.symbol,type:void 0,side:void 0,price:e.price_int/1e5,amount:e.amount_int/1e8}}async fetchTrades(e,t,i,s={}){let r=this.market(e),a=await this.publicGetMarketTrades(this.extend({market:r.id},s));return this.parseTrades(a.data.trades,r,t,i)}async createOrder(e,t,i,s,r,a={}){let o=this.market(e),n={market:o.id,amount_int:s,fee_currency:o.quote,type:"buy"==i?"bid":"ask"};"limit"==t&&(n.price_int=r);let d=await this.privatePostMarketMoneyOrderAdd(this.extend(n,a));return{info:d,id:d.order_id.toString()}}async cancelOrder(e,t,i={}){return await this.privatePostMarketMoneyOrderCancel({order_id:e})}sign(e,t="public",i="GET",s={},r,a){let o=this.implodeParams(e,s),n=this.urls.api+"/"+this.version+"/"+o,d=this.omit(s,this.extractParams(e));if("public"==t)Object.keys(d).length&&(n+="?"+this.urlencode(d));else{this.checkRequiredCredentials();let e=this.nonce();a=this.urlencode(this.extend({nonce:e},d));let t=this.base64ToBinary(this.secret),i=o+"\0"+a,s=this.hmac(this.encode(i),t,"sha512","base64");r={"Content-Type":"application/x-www-form-urlencoded","Rest-Key":this.apiKey,"Rest-Sign":s}}return{url:n,method:i,body:a,headers:r}}}},function(e,t,i){"use strict";const s=i(330);e.exports=class extends s{describe(){return this.deepExtend(super.describe(),{id:"bleutrade",name:"Bleutrade",countries:"BR",rateLimit:1e3,version:"v2",hasCORS:!0,hasFetchTickers:!0,hasFetchOHLCV:!1,urls:{logo:"https://user-images.githubusercontent.com/1294454/30303000-b602dbe6-976d-11e7-956d-36c5049c01e7.jpg",api:{public:"https://bleutrade.com/api",account:"https://bleutrade.com/api",market:"https://bleutrade.com/api"},www:"https://bleutrade.com",doc:"https://bleutrade.com/help/API"}})}async fetchMarkets(){let e=await this.publicGetMarkets(),t=[];for(let i=0;i<e.result.length;i++){let s=e.result[i],r=s.MarketName,a=s.MarketCurrency,o=s.BaseCurrency,n=(a=this.commonCurrencyCode(a))+"/"+(o=this.commonCurrencyCode(o)),d={amount:8,price:8},c=s.IsActive;t.push(this.extend(this.fees.trading,{id:r,symbol:n,base:a,quote:o,active:c,info:s,lot:Math.pow(10,-d.amount),precision:d,limits:{amount:{min:s.MinTradeSize,max:void 0},price:{min:void 0,max:void 0},cost:{min:0,max:void 0}}}))}return t}async fetchOrderBook(e,t={}){await this.loadMarkets();let i=(await this.publicGetOrderbook(this.extend({market:this.marketId(e),type:"ALL",depth:50},t))).result;return this.parseOrderBook(i,void 0,"buy","sell","Rate","Quantity")}}},function(e,t,i){"use strict";const s=i(310),{AuthenticationError:r}=i(309);e.exports=class extends s{describe(){return this.deepExtend(super.describe(),{id:"btcchina",name:"BTCChina",countries:"CN",rateLimit:1500,version:"v1",hasCORS:!0,urls:{logo:"https://user-images.githubusercontent.com/1294454/27766368-465b3286-5ed6-11e7-9a11-0f6467e1d82b.jpg",api:{plus:"https://plus-api.btcchina.com/market",public:"https://data.btcchina.com/data",private:"https://api.btcchina.com/api_trade_v1.php"},www:"https://www.btcchina.com",doc:"https://www.btcchina.com/apidocs"},api:{plus:{get:["orderbook","ticker","trade"]},public:{get:["historydata","orderbook","ticker","trades"]},private:{post:["BuyIcebergOrder","BuyOrder","BuyOrder2","BuyStopOrder","CancelIcebergOrder","CancelOrder","CancelStopOrder","GetAccountInfo","getArchivedOrder","getArchivedOrders","GetDeposits","GetIcebergOrder","GetIcebergOrders","GetMarketDepth","GetMarketDepth2","GetOrder","GetOrders","GetStopOrder","GetStopOrders","GetTransactions","GetWithdrawal","GetWithdrawals","RequestWithdrawal","SellIcebergOrder","SellOrder","SellOrder2","SellStopOrder"]}},markets:{"BTC/CNY":{id:"btccny",symbol:"BTC/CNY",base:"BTC",quote:"CNY",api:"public",plus:!1},"LTC/CNY":{id:"ltccny",symbol:"LTC/CNY",base:"LTC",quote:"CNY",api:"public",plus:!1},"LTC/BTC":{id:"ltcbtc",symbol:"LTC/BTC",base:"LTC",quote:"BTC",api:"public",plus:!1},"BCH/CNY":{id:"bcccny",symbol:"BCH/CNY",base:"BCH",quote:"CNY",api:"plus",plus:!0},"ETH/CNY":{id:"ethcny",symbol:"ETH/CNY",base:"ETH",quote:"CNY",api:"plus",plus:!0}}})}async fetchMarkets(){let e=await this.publicGetTicker({market:"all"}),t=[],i=Object.keys(e);for(let s=0;s<i.length;s++){let r=i[s],a=e[r],o=r.split("_")[1],n=o.slice(0,3),d=o.slice(3,6),c=(n=n.toUpperCase())+"/"+(d=d.toUpperCase());t.push({id:o,symbol:c,base:n,quote:d,info:a})}return t}async fetchBalance(e={}){await this.loadMarkets();let t=(await this.privatePostGetAccountInfo()).result,i={info:t},s=Object.keys(this.currencies);for(let r=0;r<s.length;r++){let e=s[r],a=e.toLowerCase(),o=this.account();a in t.balance&&(o.total=parseFloat(t.balance[a].amount)),a in t.frozen&&(o.used=parseFloat(t.frozen[a].amount)),o.free=o.total-o.used,i[e]=o}return this.parseBalance(i)}createMarketRequest(e){let t={};return t[e.plus?"symbol":"market"]=e.id,t}async fetchOrderBook(e,t={}){await this.loadMarkets();let i=this.market(e),s=i.api+"GetOrderbook",r=this.createMarketRequest(i),a=await this[s](this.extend(r,t)),o=1e3*a.date,n=this.parseOrderBook(a,o);return n.asks=this.sortBy(n.asks,0),n}parseTicker(e,t){let i=1e3*e.date;return{timestamp:i,datetime:this.iso8601(i),high:parseFloat(e.high),low:parseFloat(e.low),bid:parseFloat(e.buy),ask:parseFloat(e.sell),vwap:parseFloat(e.vwap),open:parseFloat(e.open),close:parseFloat(e.prev_close),first:void 0,last:parseFloat(e.last),change:void 0,percentage:void 0,average:void 0,baseVolume:parseFloat(e.vol),quoteVolume:void 0,info:e}}parseTickerPlus(e,t){let i=e.Timestamp,s=void 0;return t&&(s=t.symbol),{symbol:s,timestamp:i,datetime:this.iso8601(i),high:parseFloat(e.High),low:parseFloat(e.Low),bid:parseFloat(e.BidPrice),ask:parseFloat(e.AskPrice),vwap:void 0,open:parseFloat(e.Open),close:parseFloat(e.PrevCls),first:void 0,last:parseFloat(e.Last),change:void 0,percentage:void 0,average:void 0,baseVolume:parseFloat(e.Volume24H),quoteVolume:void 0,info:e}}async fetchTicker(e,t={}){await this.loadMarkets();let i=this.market(e),s=i.api+"GetTicker",r=this.createMarketRequest(i),a=(await this[s](this.extend(r,t))).ticker;return i.plus?this.parseTickerPlus(a,i):this.parseTicker(a,i)}parseTrade(e,t){let i=1e3*parseInt(e.date);return{id:e.tid,info:e,timestamp:i,datetime:this.iso8601(i),symbol:t.symbol,type:void 0,side:void 0,price:e.price,amount:e.amount}}parseTradePlus(e,t){let i=this.parse8601(e.timestamp);return{id:void 0,info:e,timestamp:i,datetime:this.iso8601(i),symbol:t.symbol,type:void 0,side:e.side.toLowerCase(),price:e.price,amount:e.size}}parseTradesPlus(e,t){let i=[];for(let s=0;s<e.length;s++)i.push(this.parseTradePlus(e[s],t));return i}async fetchTrades(e,t,i,s={}){await this.loadMarkets();let r=this.market(e),a=r.api+"GetTrade",o=this.createMarketRequest(r);if(r.plus){let e=this.milliseconds();o.start_time=e-864e5,o.end_time=e}else a+="s";let n=await this[a](this.extend(o,s));return r.plus?this.parseTradesPlus(n.trades,r):this.parseTrades(n,r,t,i)}async createOrder(e,t,i,s,r,a={}){await this.loadMarkets();let o=this.market(e),n="privatePost"+this.capitalize(i)+"Order2",d={},c=o.id.toUpperCase();d.params="market"==t?[void 0,s,c]:[r,s,c];let h=await this[n](this.extend(d,a));return{info:h,id:h.id}}async cancelOrder(e,t,i={}){await this.loadMarkets();let s=i.market;return await this.privatePostCancelOrder(this.extend({params:[e,s]},i))}nonce(){return this.microseconds()}sign(e,t="public",i="GET",s={},r,a){let o=this.urls.api[t]+"/"+e;if("private"==t){this.checkRequiredCredentials();let t=[];"params"in s&&(t=s.params);let o=this.nonce(),n={method:e,id:o,params:t};t=t.join(","),a=this.json(n);let d="tonce="+o+"&accesskey="+this.apiKey+"&requestmethod="+i.toLowerCase()+"&id="+o+"&method="+e+"&params="+t,c=this.hmac(this.encode(d),this.encode(this.secret),"sha1"),h=this.encode(this.apiKey+":"+c);r={Authorization:"Basic "+this.stringToBase64(h),"Json-Rpc-Tonce":o}}else Object.keys(s).length&&(o+="?"+this.urlencode(s));return{url:o,method:i,body:a,headers:r}}}},function(e,t,i){"use strict";const s=i(332);e.exports=class extends s{describe(){return this.deepExtend(super.describe(),{id:"btcexchange",name:"BTCExchange",countries:"PH",rateLimit:1500,hasCORS:!1,urls:{logo:"https://user-images.githubusercontent.com/1294454/27993052-4c92911a-64aa-11e7-96d8-ec6ac3435757.jpg",api:"https://www.btcexchange.ph/api",www:"https://www.btcexchange.ph",doc:"https://github.com/BTCTrader/broker-api-docs"},markets:{"BTC/PHP":{id:"BTC/PHP",symbol:"BTC/PHP",base:"BTC",quote:"PHP"}}})}}},function(e,t,i){"use strict";const s=i(310),{ExchangeError:r}=i(309);e.exports=class extends s{describe(){return this.deepExtend(super.describe(),{id:"btcmarkets",name:"BTC Markets",countries:"AU",rateLimit:1e3,hasCORS:!1,urls:{logo:"https://user-images.githubusercontent.com/1294454/29142911-0e1acfc2-7d5c-11e7-98c4-07d9532b29d7.jpg",api:"https://api.btcmarkets.net",www:"https://btcmarkets.net/",doc:"https://github.com/BTCMarkets/API"},api:{public:{get:["market/{id}/tick","market/{id}/orderbook","market/{id}/trades"]},private:{get:["account/balance","account/{id}/tradingfee"],post:["fundtransfer/withdrawCrypto","fundtransfer/withdrawEFT","order/create","order/cancel","order/history","order/open","order/trade/history","order/createBatch","order/detail"]}},markets:{"BTC/AUD":{id:"BTC/AUD",symbol:"BTC/AUD",base:"BTC",quote:"AUD",maker:.0085,taker:.0085},"LTC/AUD":{id:"LTC/AUD",symbol:"LTC/AUD",base:"LTC",quote:"AUD",maker:.0085,taker:.0085},"ETH/AUD":{id:"ETH/AUD",symbol:"ETH/AUD",base:"ETH",quote:"AUD",maker:.0085,taker:.0085},"ETC/AUD":{id:"ETC/AUD",symbol:"ETC/AUD",base:"ETC",quote:"AUD",maker:.0085,taker:.0085},"XRP/AUD":{id:"XRP/AUD",symbol:"XRP/AUD",base:"XRP",quote:"AUD",maker:.0085,taker:.0085},"BCH/AUD":{id:"BCH/AUD",symbol:"BCH/AUD",base:"BCH",quote:"AUD",maker:.0085,taker:.0085},"LTC/BTC":{id:"LTC/BTC",symbol:"LTC/BTC",base:"LTC",quote:"BTC",maker:.0022,taker:.0022},"ETH/BTC":{id:"ETH/BTC",symbol:"ETH/BTC",base:"ETH",quote:"BTC",maker:.0022,taker:.0022},"ETC/BTC":{id:"ETC/BTC",symbol:"ETC/BTC",base:"ETC",quote:"BTC",maker:.0022,taker:.0022},"XRP/BTC":{id:"XRP/BTC",symbol:"XRP/BTC",base:"XRP",quote:"BTC",maker:.0022,taker:.0022},"BCH/BTC":{id:"BCH/BTC",symbol:"BCH/BTC",base:"BCH",quote:"BTC",maker:.0022,taker:.0022}}})}async fetchBalance(e={}){await this.loadMarkets();let t=await this.privateGetAccountBalance(),i={info:t};for(let s=0;s<t.length;s++){let e=t[s],r=e.currency,a=parseFloat(e.balance/1e8),o=parseFloat(e.pendingFunds/1e8),n={free:a-o,used:o,total:a};i[r]=n}return this.parseBalance(i)}async fetchOrderBook(e,t={}){await this.loadMarkets();let i=this.market(e),s=await this.publicGetMarketIdOrderbook(this.extend({id:i.id},t)),r=1e3*s.timestamp;return this.parseOrderBook(s,r)}parseTicker(e,t){let i=1e3*e.timestamp,s=void 0;return t&&(s=t.symbol),{symbol:s,timestamp:i,datetime:this.iso8601(i),high:void 0,low:void 0,bid:parseFloat(e.bestBid),ask:parseFloat(e.bestAsk),vwap:void 0,open:void 0,close:void 0,first:void 0,last:parseFloat(e.lastPrice),change:void 0,percentage:void 0,average:void 0,baseVolume:parseFloat(e.volume24h),quoteVolume:void 0,info:e}}async fetchTicker(e,t={}){await this.loadMarkets();let i=this.market(e),s=await this.publicGetMarketIdTick(this.extend({id:i.id},t));return this.parseTicker(s,i)}parseTrade(e,t){let i=1e3*e.date;return{info:e,id:e.tid.toString(),order:void 0,timestamp:i,datetime:this.iso8601(i),symbol:t.symbol,type:void 0,side:void 0,price:e.price,amount:e.amount}}async fetchTrades(e,t,i,s={}){await this.loadMarkets();let r=this.market(e),a=await this.publicGetMarketIdTrades(this.extend({id:r.id},s));return this.parseTrades(a,r,t,i)}async createOrder(e,t,i,s,r,a={}){await this.loadMarkets();let o=this.market(e),n="buy"==i?"Bid":"Ask",d=this.ordered({currency:o.quote,instrument:o.base,price:parseInt(1e8*r),volume:parseInt(1e8*s),orderSide:n,ordertype:this.capitalize(t),clientRequestId:this.nonce().toString()}),c=await this.privatePostOrderCreate(this.extend(d,a));return{info:c,id:c.id.toString()}}async cancelOrders(e){return await this.loadMarkets(),await this.privatePostOrderCancel({order_ids:e})}async cancelOrder(e,t,i={}){return await this.loadMarkets(),await this.cancelOrders([e])}nonce(){return this.milliseconds()}sign(e,t="public",i="GET",s={},r,a){let o="/"+this.implodeParams(e,s),n=this.urls.api+o,d=this.omit(s,this.extractParams(e));if("public"==t)Object.keys(s).length&&(n+="?"+this.urlencode(s));else{this.checkRequiredCredentials();let e=this.nonce().toString(),t=o+"\n"+e+"\n";r={"Content-Type":"application/json",apikey:this.apiKey,timestamp:e},"POST"==i&&(t+=a=this.urlencode(d));let s=this.base64ToBinary(this.secret),n=this.hmac(this.encode(t),s,"sha512","base64");r.signature=this.decode(n)}return{url:n,method:i,body:a,headers:r}}async request(e,t="public",i="GET",s={},a,o){let n=await this.fetch2(e,t,i,s,a,o);if("private"==t){if("success"in n&&!n.success)throw new r(this.id+" "+this.json(n));return n}return n}}},function(e,t,i){"use strict";const s=i(310),{ExchangeError:r}=i(309);e.exports=class extends s{describe(){return this.deepExtend(super.describe(),{id:"btctradeua",name:"BTC Trade UA",countries:"UA",rateLimit:3e3,hasCORS:!0,urls:{logo:"https://user-images.githubusercontent.com/1294454/27941483-79fc7350-62d9-11e7-9f61-ac47f28fcd96.jpg",api:"https://btc-trade.com.ua/api",www:"https://btc-trade.com.ua",doc:"https://docs.google.com/document/d/1ocYA0yMy_RXd561sfG3qEPZ80kyll36HUxvCRe5GbhE/edit"},api:{public:{get:["deals/{symbol}","trades/sell/{symbol}","trades/buy/{symbol}","japan_stat/high/{symbol}"]},private:{post:["auth","ask/{symbol}","balance","bid/{symbol}","buy/{symbol}","my_orders/{symbol}","order/status/{id}","remove/order/{id}","sell/{symbol}"]}},markets:{"BTC/UAH":{id:"btc_uah",symbol:"BTC/UAH",base:"BTC",quote:"UAH",precision:{price:1},limits:{amount:{min:1e-10}}},"ETH/UAH":{id:"eth_uah",symbol:"ETH/UAH",base:"ETH",quote:"UAH"},"LTC/UAH":{id:"ltc_uah",symbol:"LTC/UAH",base:"LTC",quote:"UAH"},"DOGE/UAH":{id:"doge_uah",symbol:"DOGE/UAH",base:"DOGE",quote:"UAH"},"DASH/UAH":{id:"dash_uah",symbol:"DASH/UAH",base:"DASH",quote:"UAH"},"SIB/UAH":{id:"sib_uah",symbol:"SIB/UAH",base:"SIB",quote:"UAH"},"KRB/UAH":{id:"krb_uah",symbol:"KRB/UAH",base:"KRB",quote:"UAH"},"NVC/UAH":{id:"nvc_uah",symbol:"NVC/UAH",base:"NVC",quote:"UAH"},"LTC/BTC":{id:"ltc_btc",symbol:"LTC/BTC",base:"LTC",quote:"BTC"},"NVC/BTC":{id:"nvc_btc",symbol:"NVC/BTC",base:"NVC",quote:"BTC"},"ITI/UAH":{id:"iti_uah",symbol:"ITI/UAH",base:"ITI",quote:"UAH"},"DOGE/BTC":{id:"doge_btc",symbol:"DOGE/BTC",base:"DOGE",quote:"BTC"},"DASH/BTC":{id:"dash_btc",symbol:"DASH/BTC",base:"DASH",quote:"BTC"}},fees:{trading:{maker:.001,taker:.001}}})}signIn(){return this.privatePostAuth()}async fetchBalance(e={}){let t=await this.privatePostBalance(),i={info:t};if("accounts"in t){let e=t.accounts;for(let t=0;t<e.length;t++){let s=e[t],r=s.currency,a=parseFloat(s.balance);i[r]={free:a,used:0,total:a}}}return this.parseBalance(i)}async fetchOrderBook(e,t={}){let i=this.market(e),s=await this.publicGetTradesBuySymbol(this.extend({symbol:i.id},t)),r=await this.publicGetTradesSellSymbol(this.extend({symbol:i.id},t)),a={bids:[],asks:[]};return s&&"list"in s&&(a.bids=s.list),r&&"list"in r&&(a.asks=r.list),this.parseOrderBook(a,void 0,"bids","asks","price","currency_trade")}async fetchTicker(e,t={}){let i=await this.publicGetJapanStatHighSymbol(this.extend({symbol:this.marketId(e)},t)),s=await this.fetchOrderBook(e),r=void 0;s.bids.length>0&&(r=s.bids[0][0]);let a=void 0;s.asks.length>0&&(a=s.asks[0][0]);let o=i.trades,n=this.milliseconds(),d={symbol:e,timestamp:n,datetime:this.iso8601(n),high:void 0,low:void 0,bid:r,ask:a,vwap:void 0,open:void 0,close:void 0,first:void 0,last:void 0,change:void 0,percentage:void 0,average:void 0,baseVolume:void 0,quoteVolume:void 0,info:o},c=o.length;if(c>0){for(let e=Math.max(c-48,0);e<o.length;e++){let t=o[e];"undefined"==typeof d.open&&(d.open=t[1]),("undefined"==typeof d.high||d.high<t[2])&&(d.high=t[2]),("undefined"==typeof d.low||d.low>t[3])&&(d.low=t[3]),"undefined"==typeof d.baseVolume?d.baseVolume=-t[5]:d.baseVolume-=t[5]}let e=c-1;d.close=o[e][4],d.baseVolume=-1*d.baseVolume}return d}convertCyrillicMonthNameToString(e){let t=["\u044f\u043d\u0432\u0430\u0440\u044f","\u0444\u0435\u0432\u0440\u0430\u043b\u044f","\u043c\u0430\u0440\u0442\u0430","\u0430\u043f\u0440\u0435\u043b\u044f","\u043c\u0430\u044f","\u0438\u044e\u043d\u044f","\u0438\u044e\u043b\u044f","\u0430\u0432\u0433\u0443\u0441\u0442\u0430","\u0441\u0435\u043d\u0442\u044f\u0431\u0440\u044f","\u043e\u043a\u0442\u044f\u0431\u0440\u044f","\u043d\u043e\u044f\u0431\u0440\u044f","\u0434\u0435\u043a\u0430\u0431\u0440\u044f"],i=void 0;for(let s=0;s<t.length;s++)e==t[s]&&(i=(i=s+1).toString(),s<9&&(i="0"+i));return i}parseCyrillicDatetime(e){let t=e.split(" "),i=t[0],s=this.convertCyrillicMonthNameToString(t[1]);if(!s)throw new r(this.id+" parseTrade() undefined month name: "+e);let a=t[2],o=t[4];7==o.length&&(o="0"+o);let n=[a,s,i].join("-")+"T"+o,d=this.parse8601(n);return d-=108e5}parseTrade(e,t){let i=this.parseCyrillicDatetime(e.pub_date);return{id:e.id.toString(),info:e,timestamp:i,datetime:this.iso8601(i),symbol:t.symbol,type:void 0,side:void 0,price:parseFloat(e.price),amount:parseFloat(e.amnt_trade)}}async fetchTrades(e,t,i,s={}){let r=this.market(e),a=await this.publicGetDealsSymbol(this.extend({symbol:r.id},s)),o=[];for(let n=0;n<a.length;n++)a[n].id%2&&o.push(a[n]);return this.parseTrades(o,r,t,i)}async createOrder(e,t,i,s,a,o={}){if("market"==t)throw new r(this.id+" allows limit orders only");let n=this.market(e),d="privatePost"+this.capitalize(i)+"Id",c={count:s,currency1:n.quote,currency:n.base,price:a};return this[d](this.extend(c,o))}async cancelOrder(e,t,i={}){return await this.privatePostRemoveOrderId({id:e})}parseOrder(e,t){let i=this.milliseconds;return{id:e.id,timestamp:i,datetime:this.iso8601(i),status:"open",symbol:t.symbol,type:void 0,side:e.type,price:e.price,amount:e.amnt_trade,filled:0,remaining:e.amnt_trade,trades:void 0,info:e}}async fetchOpenOrders(e,t,i,s={}){if(!e)throw new r(this.id+" fetchOpenOrders requires a symbol param");let a=this.market(e),o=(await this.privatePostMyOrdersSymbol(this.extend({symbol:a.id},s))).your_open_orders;return this.parseOrders(o,a,t,i)}nonce(){return this.milliseconds()}sign(e,t="public",i="GET",s={},r,a){let o=this.urls.api+"/"+this.implodeParams(e,s),n=this.omit(s,this.extractParams(e));if("public"==t)Object.keys(n).length&&(o+=this.implodeParams(e,n));else{this.checkRequiredCredentials();let e=this.nonce(),t=(a=this.urlencode(this.extend({out_order_id:e,nonce:e},n)))+this.secret;r={"public-key":this.apiKey,"api-sign":this.hash(this.encode(t),"sha256"),"Content-Type":"application/x-www-form-urlencoded"}}return{url:o,method:i,body:a,headers:r}}}},function(e,t,i){"use strict";const s=i(310),{ExchangeError:r}=i(309);e.exports=class extends s{describe(){return this.deepExtend(super.describe(),{id:"btcx",name:"BTCX",countries:["IS","US","EU"],rateLimit:1500,version:"v1",hasCORS:!1,urls:{logo:"https://user-images.githubusercontent.com/1294454/27766385-9fdcc98c-5ed6-11e7-8f14-66d5e5cd47e6.jpg",api:"https://btc-x.is/api",www:"https://btc-x.is",doc:"https://btc-x.is/custom/api-document.html"},api:{public:{get:["depth/{id}/{limit}","ticker/{id}","trade/{id}/{limit}"]},private:{post:["balance","cancel","history","order","redeem","trade","withdraw"]}},markets:{"BTC/USD":{id:"btc/usd",symbol:"BTC/USD",base:"BTC",quote:"USD"},"BTC/EUR":{id:"btc/eur",symbol:"BTC/EUR",base:"BTC",quote:"EUR"}}})}async fetchBalance(e={}){let t=await this.privatePostBalance(),i={info:t},s=Object.keys(t);for(let r=0;r<s.length;r++){let e=s[r],a=e.toUpperCase(),o={free:t[e],used:0,total:t[e]};i[a]=o}return this.parseBalance(i)}async fetchOrderBook(e,t={}){let i=await this.publicGetDepthIdLimit(this.extend({id:this.marketId(e),limit:1e3},t));return this.parseOrderBook(i,void 0,"bids","asks","price","amount")}async fetchTicker(e,t={}){let i=await this.publicGetTickerId(this.extend({id:this.marketId(e)},t)),s=1e3*i.time;return{symbol:e,timestamp:s,datetime:this.iso8601(s),high:parseFloat(i.high),low:parseFloat(i.low),bid:parseFloat(i.sell),ask:parseFloat(i.buy),vwap:void 0,open:void 0,close:void 0,first:void 0,last:parseFloat(i.last),change:void 0,percentage:void 0,average:void 0,baseVolume:void 0,quoteVolume:parseFloat(i.volume),info:i}}parseTrade(e,t){let i=1e3*parseInt(e.date),s="ask"==e.type?"sell":"buy";return{id:e.id,info:e,timestamp:i,datetime:this.iso8601(i),symbol:t.symbol,type:void 0,side:s,price:e.price,amount:e.amount}}async fetchTrades(e,t,i,s={}){let r=this.market(e),a=await this.publicGetTradeIdLimit(this.extend({id:r.id,limit:1e3},s));return this.parseTrades(a,r,t,i)}async createOrder(e,t,i,s,r,a={}){let o=await this.privatePostTrade(this.extend({type:i.toUpperCase(),market:this.marketId(e),amount:s,price:r},a));return{info:o,id:o.order.id}}async cancelOrder(e,t,i={}){return await this.privatePostCancel({order:e})}sign(e,t="public",i="GET",s={},r,a){let o=this.urls.api+"/"+this.version+"/";if("public"==t)o+=this.implodeParams(e,s);else{this.checkRequiredCredentials();let i=this.nonce();o+=t,a=this.urlencode(this.extend({Method:e.toUpperCase(),Nonce:i},s)),r={"Content-Type":"application/x-www-form-urlencoded",Key:this.apiKey,Signature:this.hmac(this.encode(a),this.encode(this.secret),"sha512")}}return{url:o,method:i,body:a,headers:r}}async request(e,t="public",i="GET",s={},a,o){let n=await this.fetch2(e,t,i,s,a,o);if("error"in n)throw new r(this.id+" "+this.json(n));return n}}},function(e,t,i){"use strict";const s=i(310),{ExchangeError:r}=i(309);e.exports=class extends s{describe(){return this.deepExtend(super.describe(),{id:"bxinth",name:"BX.in.th",countries:"TH",rateLimit:1500,hasCORS:!1,hasFetchTickers:!0,urls:{logo:"https://user-images.githubusercontent.com/1294454/27766412-567b1eb4-5ed7-11e7-94a8-ff6a3884f6c5.jpg",api:"https://bx.in.th/api",www:"https://bx.in.th",doc:"https://bx.in.th/info/api"},api:{public:{get:["","options","optionbook","orderbook","pairing","trade","tradehistory"]},private:{post:["balance","biller","billgroup","billpay","cancel","deposit","getorders","history","option-issue","option-bid","option-sell","option-myissue","option-mybid","option-myoptions","option-exercise","option-cancel","option-history","order","withdrawal","withdrawal-history"]}},fees:{trading:{taker:.0025,maker:.0025}}})}async fetchMarkets(){let e=await this.publicGetPairing(),t=Object.keys(e),i=[];for(let s=0;s<t.length;s++){let r=e[t[s]],a=r.pairing_id.toString(),o=r.secondary_currency,n=r.primary_currency,d=(o=this.commonCurrencyCode(o))+"/"+(n=this.commonCurrencyCode(n));i.push({id:a,symbol:d,base:o,quote:n,info:r})}return i}commonCurrencyCode(e){return"DAS"==e?"DASH":"DOG"==e?"DOGE":e}async fetchBalance(e={}){await this.loadMarkets();let t=(await this.privatePostBalance()).balance,i={info:t},s=Object.keys(t);for(let r=0;r<s.length;r++){let e=s[r],a=this.commonCurrencyCode(e),o={free:parseFloat(t[e].available),used:0,total:parseFloat(t[e].total)};o.used=o.total-o.free,i[a]=o}return this.parseBalance(i)}async fetchOrderBook(e,t={}){await this.loadMarkets();let i=await this.publicGetOrderbook(this.extend({pairing:this.marketId(e)},t));return this.parseOrderBook(i)}parseTicker(e,t){let i=this.milliseconds(),s=void 0;return t&&(s=t.symbol),{symbol:s,timestamp:i,datetime:this.iso8601(i),high:void 0,low:void 0,bid:parseFloat(e.orderbook.bids.highbid),ask:parseFloat(e.orderbook.asks.highbid),vwap:void 0,open:void 0,close:void 0,first:void 0,last:parseFloat(e.last_price),change:parseFloat(e.change),percentage:void 0,average:void 0,baseVolume:parseFloat(e.volume_24hours),quoteVolume:void 0,info:e}}async fetchTickers(e,t={}){await this.loadMarkets();let i=await this.publicGet(t),s={},r=Object.keys(i);for(let a=0;a<r.length;a++){let e=r[a],t=i[e],o=this.markets_by_id[e];s[o.symbol]=this.parseTicker(t,o)}return s}async fetchTicker(e,t={}){await this.loadMarkets();let i=this.market(e),s=(await this.publicGet(this.extend({pairing:i.id},t)))[i.id.toString()];return this.parseTicker(s,i)}parseTrade(e,t){let i=this.parse8601(e.trade_date);return{id:e.trade_id,info:e,order:e.order_id,timestamp:i,datetime:this.iso8601(i),symbol:t.symbol,type:void 0,side:e.trade_type,price:parseFloat(e.rate),amount:parseFloat(e.amount)}}async fetchTrades(e,t,i,s={}){await this.loadMarkets();let r=this.market(e),a=await this.publicGetTrade(this.extend({pairing:r.id},s));return this.parseTrades(a.trades,r,t,i)}async createOrder(e,t,i,s,r,a={}){await this.loadMarkets();let o=await this.privatePostOrder(this.extend({pairing:this.marketId(e),type:i,amount:s,rate:r},a));return{info:o,id:o.order_id.toString()}}async cancelOrder(e,t,i={}){await this.loadMarkets();return await this.privatePostCancel({order_id:e,pairing:void 0})}sign(e,t="public",i="GET",s={},r,a){let o=this.urls.api+"/";if(e&&(o+=e+"/"),Object.keys(s).length&&(o+="?"+this.urlencode(s)),"private"==t){this.checkRequiredCredentials();let e=this.nonce(),t=this.apiKey+e.toString()+this.secret,i=this.hash(this.encode(t),"sha256");a=this.urlencode(this.extend({key:this.apiKey,nonce:e,signature:i},s)),r={"Content-Type":"application/x-www-form-urlencoded"}}return{url:o,method:i,body:a,headers:r}}async request(e,t="public",i="GET",s={},a,o){let n=await this.fetch2(e,t,i,s,a,o);if("public"==t)return n;if("success"in n&&n.success)return n;throw new r(this.id+" "+this.json(n))}}},function(e,t,i){"use strict";const s=i(310),{ExchangeError:r}=i(309);e.exports=class extends s{describe(){return this.deepExtend(super.describe(),{id:"ccex",name:"C-CEX",countries:["DE","EU"],rateLimit:1500,hasCORS:!1,hasFetchTickers:!0,urls:{logo:"https://user-images.githubusercontent.com/1294454/27766433-16881f90-5ed8-11e7-92f8-3d92cc747a6c.jpg",api:{tickers:"https://c-cex.com/t",public:"https://c-cex.com/t/api_pub.html",private:"https://c-cex.com/t/api.html"},www:"https://c-cex.com",doc:"https://c-cex.com/?id=api"},api:{tickers:{get:["coinnames","{market}","pairs","prices","volume_{coin}"]},public:{get:["balancedistribution","markethistory","markets","marketsummaries","orderbook"]},private:{get:["buylimit","cancel","getbalance","getbalances","getopenorders","getorder","getorderhistory","mytrades","selllimit"]}},fees:{trading:{taker:.002,maker:.002}}})}commonCurrencyCode(e){return"IOT"==e?"IoTcoin":"BLC"==e?"Cryptobullcoin":"XID"==e?"InternationalDiamond":e}async fetchMarkets(){let e=await this.publicGetMarkets(),t=[];for(let i=0;i<e.result.length;i++){let s=e.result[i],r=s.MarketName,a=s.MarketCurrency,o=s.BaseCurrency,n=(a=this.commonCurrencyCode(a))+"/"+(o=this.commonCurrencyCode(o));t.push(this.extend(this.fees.trading,{id:r,symbol:n,base:a,quote:o,info:s}))}return t}async fetchBalance(e={}){await this.loadMarkets();let t=(await this.privateGetBalances()).result,i={info:t};for(let s=0;s<t.length;s++){let e=t[s],r=e.Currency,a=this.commonCurrencyCode(r),o={free:e.Available,used:e.Pending,total:e.Balance};i[a]=o}return this.parseBalance(i)}async fetchOrderBook(e,t={}){await this.loadMarkets();let i=(await this.publicGetOrderbook(this.extend({market:this.marketId(e),type:"both",depth:100},t))).result;return this.parseOrderBook(i,void 0,"buy","sell","Rate","Quantity")}parseTicker(e,t){let i=1e3*e.updated,s=void 0;return t&&(s=t.symbol),{symbol:s,timestamp:i,datetime:this.iso8601(i),high:parseFloat(e.high),low:parseFloat(e.low),bid:parseFloat(e.buy),ask:parseFloat(e.sell),vwap:void 0,open:void 0,close:void 0,first:void 0,last:parseFloat(e.lastprice),change:void 0,percentage:void 0,average:parseFloat(e.avg),baseVolume:void 0,quoteVolume:this.safeFloat(e,"buysupport"),info:e}}async fetchTickers(e,t={}){await this.loadMarkets();let i=await this.tickersGetPrices(t),s={info:i},r=Object.keys(i);for(let a=0;a<r.length;a++){let e=r[a],t=i[e],o=e.toUpperCase(),n=void 0,d=void 0;if(o in this.markets_by_id)d=(n=this.markets_by_id[o]).symbol;else{let[e,t]=o.split("-");d=(e=this.commonCurrencyCode(e))+"/"+(t=this.commonCurrencyCode(t))}s[d]=this.parseTicker(t,n)}return s}async fetchTicker(e,t={}){await this.loadMarkets();let i=this.market(e),s=(await this.tickersGetMarket(this.extend({market:i.id.toLowerCase()},t))).ticker;return this.parseTicker(s,i)}parseTrade(e,t){let i=this.parse8601(e.TimeStamp);return{id:e.Id,info:e,order:void 0,timestamp:i,datetime:this.iso8601(i),symbol:t.symbol,type:void 0,side:e.OrderType.toLowerCase(),price:e.Price,amount:e.Quantity}}async fetchTrades(e,t,i,s={}){await this.loadMarkets();let r=this.market(e),a=await this.publicGetMarkethistory(this.extend({market:r.id,type:"both",depth:100},s));return this.parseTrades(a.result,r,t,i)}async createOrder(e,t,i,s,r,a={}){await this.loadMarkets();let o="privateGet"+this.capitalize(i)+t,n=await this[o](this.extend({market:this.marketId(e),quantity:s,rate:r},a));return{info:n,id:n.result.uuid}}async cancelOrder(e,t,i={}){return await this.loadMarkets(),await this.privateGetCancel({uuid:e})}sign(e,t="public",i="GET",s={},r,a){let o=this.urls.api[t];if("private"==t){this.checkRequiredCredentials();let t=this.nonce().toString(),i=this.keysort(this.extend({a:e,apikey:this.apiKey,nonce:t},s));o+="?"+this.urlencode(i),r={apisign:this.hmac(this.encode(o),this.encode(this.secret),"sha512")}}else o+="public"==t?"?"+this.urlencode(this.extend({a:"get"+e},s)):"/"+this.implodeParams(e,s)+".json";return{url:o,method:i,body:a,headers:r}}async request(e,t="public",i="GET",s={},a,o){let n=await this.fetch2(e,t,i,s,a,o);if("tickers"==t)return n;if("success"in n&&n.success)return n;throw new r(this.id+" "+this.json(n))}}},function(e,t,i){"use strict";const s=i(310),{ExchangeError:r,AuthenticationError:a}=i(309);e.exports=class extends s{describe(){return this.deepExtend(super.describe(),{id:"cex",name:"CEX.IO",countries:["GB","EU","CY","RU"],rateLimit:1500,hasCORS:!0,hasFetchTickers:!0,hasFetchOHLCV:!0,hasFetchOpenOrders:!0,timeframes:{"1m":"1m"},urls:{logo:"https://user-images.githubusercontent.com/1294454/27766442-8ddc33b0-5ed8-11e7-8b98-f786aef0f3c9.jpg",api:"https://cex.io/api",www:"https://cex.io",doc:"https://cex.io/cex-api"},requiredCredentials:{apiKey:!0,secret:!0,uid:!0},api:{public:{get:["currency_limits/","last_price/{pair}/","last_prices/{currencies}/","ohlcv/hd/{yyyymmdd}/{pair}","order_book/{pair}/","ticker/{pair}/","tickers/{currencies}/","trade_history/{pair}/"],post:["convert/{pair}","price_stats/{pair}"]},private:{post:["active_orders_status/","archived_orders/{pair}/","balance/","cancel_order/","cancel_orders/{pair}/","cancel_replace_order/{pair}/","close_position/{pair}/","get_address/","get_myfee/","get_order/","get_order_tx/","open_orders/{pair}/","open_orders/","open_position/{pair}/","open_positions/{pair}/","place_order/{pair}/"]}},fees:{trading:{maker:0,taker:.002}}})}async fetchMarkets(){let e=await this.publicGetCurrencyLimits(),t=[];for(let i=0;i<e.data.pairs.length;i++){let s=e.data.pairs[i],r=s.symbol1+"/"+s.symbol2,a=r,[o,n]=a.split("/");t.push({id:r,info:s,symbol:a,base:o,quote:n,precision:{price:this.precisionFromString(s.minPrice),amount:-1*Math.log10(s.minLotSize)},limits:{amount:{min:s.minLotSize,max:s.maxLotSize},price:{min:parseFloat(s.minPrice),max:parseFloat(s.maxPrice)},cost:{min:s.minLotSizeS2,max:void 0}}})}return t}async fetchBalance(e={}){await this.loadMarkets();let t=await this.privatePostBalance(),i={info:t},s=this.omit(t,["username","timestamp"]),r=Object.keys(s);for(let a=0;a<r.length;a++){let e=r[a];if(e in s){let t={free:this.safeFloat(s[e],"available",0),used:this.safeFloat(s[e],"orders",0),total:0};t.total=this.sum(t.free,t.used),i[e]=t}}return this.parseBalance(i)}async fetchOrderBook(e,t={}){await this.loadMarkets();let i=await this.publicGetOrderBookPair(this.extend({pair:this.marketId(e)},t)),s=1e3*i.timestamp;return this.parseOrderBook(i,s)}parseOHLCV(e,t,i="1m",s,r){return[1e3*e[0],e[1],e[2],e[3],e[4],e[5]]}async fetchOHLCV(e,t="1m",i,s,r={}){await this.loadMarkets();let a=this.market(e);i||(i=this.milliseconds()-864e5);let o=this.Ymd(i);o=(o=o.split("-")).join("");let n={pair:a.id,yyyymmdd:o},d=await this.publicGetOhlcvHdYyyymmddPair(this.extend(n,r)),c="data"+this.timeframes[t],h=JSON.parse(d[c]);return this.parseOHLCVs(h,a,t,i,s)}parseTicker(e,t){let i=void 0,s=void 0;"timestamp"in e&&(i=1e3*parseInt(e.timestamp),s=this.iso8601(i));let r=this.safeFloat(e,"volume"),a=this.safeFloat(e,"high"),o=this.safeFloat(e,"low"),n=this.safeFloat(e,"bid"),d=this.safeFloat(e,"ask"),c=this.safeFloat(e,"last"),h=void 0;return t&&(h=t.symbol),{symbol:h,timestamp:i,datetime:s,high:a,low:o,bid:n,ask:d,vwap:void 0,open:void 0,close:void 0,first:void 0,last:c,change:void 0,percentage:void 0,average:void 0,baseVolume:r,quoteVolume:void 0,info:e}}async fetchTickers(e,t={}){await this.loadMarkets();let i=Object.keys(this.currencies),s=(await this.publicGetTickersCurrencies(this.extend({currencies:i.join("/")},t))).data,r={};for(let a=0;a<s.length;a++){let e=s[a],t=e.pair.replace(":","/"),i=this.markets[t];r[t]=this.parseTicker(e,i)}return r}async fetchTicker(e,t={}){await this.loadMarkets();let i=this.market(e),s=await this.publicGetTickerPair(this.extend({pair:i.id},t));return this.parseTicker(s,i)}parseTrade(e,t){let i=1e3*parseInt(e.date);return{info:e,id:e.tid,timestamp:i,datetime:this.iso8601(i),symbol:t.symbol,type:void 0,side:e.type,price:parseFloat(e.price),amount:parseFloat(e.amount)}}async fetchTrades(e,t,i,s={}){await this.loadMarkets();let r=this.market(e),a=await this.publicGetTradeHistoryPair(this.extend({pair:r.id},s));return this.parseTrades(a,r,t,i)}async createOrder(e,t,i,s,r,a={}){await this.loadMarkets();let o={pair:this.marketId(e),type:i,amount:s};if("limit"==t)o.price=r;else{if("buy"==i){if(!r)throw new InvalidOrder("For market buy orders "+this.id+" requires the amount of quote currency to spend, to calculate proper costs call createOrder (symbol, 'market', 'buy', amount, price)");o.amount=s*r}o.order_type=t}let n=await this.privatePostPlaceOrderPair(this.extend(o,a));return{info:n,id:n.id}}async cancelOrder(e,t,i={}){return await this.loadMarkets(),await this.privatePostCancelOrder({id:e})}parseOrder(e,t){let i=parseInt(e.time),s=void 0;if(!t){let i=e.symbol1+"/"+e.symbol2;i in this.markets&&(t=this.market(i))}let r=e.status;"a"==r?r="open":"cd"==r?r="canceled":"c"==r?r="canceled":"d"==r&&(r="closed");let a=this.safeFloat(e,"price"),o=this.safeFloat(e,"amount"),n=this.safeFloat(e,"pending");n||(n=this.safeFloat(e,"remains"));let d=o-n,c=void 0,h=void 0;if(t){s=t.symbol,h=this.safeFloat(e,"ta:"+t.quote);let i="fa:"+t.base,r="fa:"+t.quote,a=this.safeFloat(e,"tradingFeeMaker");a||(a=this.safeFloat(e,"tradingFeeTaker",a)),a&&(a/=100),i in e?c={currency:t.base,rate:a,cost:this.safeFloat(e,i)}:r in e&&(c={currency:t.quote,rate:a,cost:this.safeFloat(e,r)})}return h||(h=a*d),{id:e.id,datetime:this.iso8601(i),timestamp:i,status:r,symbol:s,type:void 0,side:e.type,price:a,cost:h,amount:o,filled:d,remaining:n,trades:void 0,fee:c,info:e}}async fetchOpenOrders(e,t,i,s={}){await this.loadMarkets();let r={},a="privatePostOpenOrders",o=void 0;e&&(o=this.market(e),r.pair=o.id,a+="Pair");let n=await this[a](this.extend(r,s));for(let d=0;d<n.length;d++)n[d]=this.extend(n[d],{status:"open"});return this.parseOrders(n,o,t,i)}async fetchOrder(e,t,i={}){await this.loadMarkets();let s=await this.privatePostGetOrder(this.extend({id:e.toString()},i));return this.parseOrder(s)}nonce(){return this.milliseconds()}sign(e,t="public",i="GET",s={},r,a){let o=this.urls.api+"/"+this.implodeParams(e,s),n=this.omit(s,this.extractParams(e));if("public"==t)Object.keys(n).length&&(o+="?"+this.urlencode(n));else{this.checkRequiredCredentials();let e=this.nonce().toString(),t=e+this.uid+this.apiKey,i=this.hmac(this.encode(t),this.encode(this.secret));a=this.urlencode(this.extend({key:this.apiKey,signature:i.toUpperCase(),nonce:e},n)),r={"Content-Type":"application/x-www-form-urlencoded"}}return{url:o,method:i,body:a,headers:r}}async request(e,t="public",i="GET",s={},a,o){let n=await this.fetch2(e,t,i,s,a,o);if(!n)throw new r(this.id+" returned "+this.json(n));if(1==n)return n;if("e"in n){if("ok"in n&&"ok"==n.ok)return n;throw new r(this.id+" "+this.json(n))}if("error"in n&&n.error)throw new r(this.id+" "+this.json(n));return n}}},function(e,t,i){"use strict";const s=i(334),{ExchangeError:r,ExchangeNotAvailable:a}=i(309);e.exports=class extends s{describe(){return this.deepExtend(super.describe(),{id:"chbtc",name:"CHBTC",countries:"CN",rateLimit:1e3,version:"v1",hasCORS:!1,hasFetchOrder:!0,urls:{logo:"https://user-images.githubusercontent.com/1294454/28555659-f0040dc2-7109-11e7-9d99-688a438bf9f4.jpg",api:{public:"http://api.chbtc.com/data",private:"https://trade.chbtc.com/api"},www:"https://trade.chbtc.com/api",doc:"https://www.chbtc.com/i/developer"}})}getMarketFieldName(){return"currency"}async fetchMarkets(){return{"BTC/CNY":{id:"btc_cny",symbol:"BTC/CNY",base:"BTC",quote:"CNY"},"LTC/CNY":{id:"ltc_cny",symbol:"LTC/CNY",base:"LTC",quote:"CNY"},"ETH/CNY":{id:"eth_cny",symbol:"ETH/CNY",base:"ETH",quote:"CNY"},"ETC/CNY":{id:"etc_cny",symbol:"ETC/CNY",base:"ETC",quote:"CNY"},"BTS/CNY":{id:"bts_cny",symbol:"BTS/CNY",base:"BTS",quote:"CNY"},"BCH/CNY":{id:"bcc_cny",symbol:"BCH/CNY",base:"BCH",quote:"CNY"},"HSR/CNY":{id:"hsr_cny",symbol:"HSR/CNY",base:"HSR",quote:"CNY"},"QTUM/CNY":{id:"qtum_cny",symbol:"QTUM/CNY",base:"QTUM",quote:"CNY"}}}async request(e,t="public",i="GET",s={},a,o){let n=await this.fetch2(e,t,i,s,a,o);if("private"==t&&"code"in n)throw new r(this.id+" "+this.json(n));if("result"in n&&!n.result)throw new r(this.id+" "+this.json(n));return n}}},function(e,t,i){"use strict";const s=i(316);e.exports=class extends s{describe(){return this.deepExtend(super.describe(),{id:"chilebit",name:"ChileBit",countries:"CL",hasCORS:!1,urls:{logo:"https://user-images.githubusercontent.com/1294454/27991414-1298f0d8-647f-11e7-9c40-d56409266336.jpg",api:{public:"https://api.blinktrade.com/api",private:"https://api.blinktrade.com/tapi"},www:"https://chilebit.net",doc:"https://blinktrade.com/docs"}})}}},function(e,t,i){"use strict";const s=i(310),{ExchangeError:r,NotSupported:a}=i(309);e.exports=class extends s{describe(){return this.deepExtend(super.describe(),{id:"coincheck",name:"coincheck",countries:["JP","ID"],rateLimit:1500,hasCORS:!1,urls:{logo:"https://user-images.githubusercontent.com/1294454/27766464-3b5c3c74-5ed9-11e7-840e-31b32968e1da.jpg",api:"https://coincheck.com/api",www:"https://coincheck.com",doc:"https://coincheck.com/documents/exchange/api"},api:{public:{get:["exchange/orders/rate","order_books","rate/{pair}","ticker","trades"]},private:{get:["accounts","accounts/balance","accounts/leverage_balance","bank_accounts","deposit_money","exchange/orders/opens","exchange/orders/transactions","exchange/orders/transactions_pagination","exchange/leverage/positions","lending/borrows/matches","send_money","withdraws"],post:["bank_accounts","deposit_money/{id}/fast","exchange/orders","exchange/transfers/to_leverage","exchange/transfers/from_leverage","lending/borrows","lending/borrows/{id}/repay","send_money","withdraws"],delete:["bank_accounts/{id}","exchange/orders/{id}","withdraws/{id}"]}},markets:{"BTC/JPY":{id:"btc_jpy",symbol:"BTC/JPY",base:"BTC",quote:"JPY"}}})}async fetchBalance(e={}){let t=await this.privateGetAccountsBalance(),i={info:t},s=Object.keys(this.currencies);for(let r=0;r<s.length;r++){let e=s[r],a=e.toLowerCase(),o=this.account();a in t&&(o.free=parseFloat(t[a]));let n=a+"_reserved";n in t&&(o.used=parseFloat(t[n])),o.total=this.sum(o.free,o.used),i[e]=o}return this.parseBalance(i)}async fetchOrderBook(e,t={}){if("BTC/JPY"!=e)throw new a(this.id+" fetchOrderBook () supports BTC/JPY only");let i=await this.publicGetOrderBooks(t);return this.parseOrderBook(i)}async fetchTicker(e,t={}){if("BTC/JPY"!=e)throw new a(this.id+" fetchTicker () supports BTC/JPY only");let i=await this.publicGetTicker(t),s=1e3*i.timestamp;return{symbol:e,timestamp:s,datetime:this.iso8601(s),high:parseFloat(i.high),low:parseFloat(i.low),bid:parseFloat(i.bid),ask:parseFloat(i.ask),vwap:void 0,open:void 0,close:void 0,first:void 0,last:parseFloat(i.last),change:void 0,percentage:void 0,average:void 0,baseVolume:parseFloat(i.volume),quoteVolume:void 0,info:i}}parseTrade(e,t){let i=this.parse8601(e.created_at);return{id:e.id.toString(),info:e,timestamp:i,datetime:this.iso8601(i),symbol:t.symbol,type:void 0,side:e.order_type,price:parseFloat(e.rate),amount:parseFloat(e.amount)}}async fetchTrades(e,t,i,s={}){if("BTC/JPY"!=e)throw new a(this.id+" fetchTrades () supports BTC/JPY only");let r=this.market(e),o=await this.publicGetTrades(s);return this.parseTrades(o,r,t,i)}async createOrder(e,t,i,s,r,a={}){let o={pair:this.marketId(e)};if("market"==t){let e=t+"_"+i;o.order_type=e;o[("buy"==i?e+"_":"")+"amount"]=s}else o.order_type=i,o.rate=r,o.amount=s;let n=await this.privatePostExchangeOrders(this.extend(o,a));return{info:n,id:n.id.toString()}}async cancelOrder(e,t,i={}){return await this.privateDeleteExchangeOrdersId({id:e})}sign(e,t="public",i="GET",s={},r,a){let o=this.urls.api+"/"+this.implodeParams(e,s),n=this.omit(s,this.extractParams(e));if("public"==t)Object.keys(n).length&&(o+="?"+this.urlencode(n));else{this.checkRequiredCredentials();let e=this.nonce().toString(),t="";"GET"==i?Object.keys(n).length&&(o+="?"+this.urlencode(this.keysort(n))):Object.keys(n).length&&(t=a=this.urlencode(this.keysort(n)));let s=e+o+t;r={"Content-Type":"application/x-www-form-urlencoded","ACCESS-KEY":this.apiKey,"ACCESS-NONCE":e,"ACCESS-SIGNATURE":this.hmac(this.encode(s),this.encode(this.secret))}}return{url:o,method:i,body:a,headers:r}}async request(e,t="public",i="GET",s={},a,o){let n=await this.fetch2(e,t,i,s,a,o);if("public"==t)return n;if("success"in n&&n.success)return n;throw new r(this.id+" "+this.json(n))}}},function(e,t,i){"use strict";const s=i(310),{ExchangeError:r}=i(309);e.exports=class extends s{describe(){return this.deepExtend(super.describe(),{id:"coinfloor",name:"coinfloor",rateLimit:1e3,countries:"UK",hasCORS:!1,urls:{logo:"https://user-images.githubusercontent.com/1294454/28246081-623fc164-6a1c-11e7-913f-bac0d5576c90.jpg",api:"https://webapi.coinfloor.co.uk:8090/bist",www:"https://www.coinfloor.co.uk",doc:["https://github.com/coinfloor/api","https://www.coinfloor.co.uk/api"]},requiredCredentials:{apiKey:!0,secret:!0,uid:!0},api:{public:{get:["{id}/ticker/","{id}/order_book/","{id}/transactions/"]},private:{post:["{id}/balance/","{id}/user_transactions/","{id}/open_orders/","{id}/cancel_order/","{id}/buy/","{id}/sell/","{id}/buy_market/","{id}/sell_market/","{id}/estimate_sell_market/","{id}/estimate_buy_market/"]}},markets:{"BTC/GBP":{id:"XBT/GBP",symbol:"BTC/GBP",base:"BTC",quote:"GBP"},"BTC/EUR":{id:"XBT/EUR",symbol:"BTC/EUR",base:"BTC",quote:"EUR"},"BTC/USD":{id:"XBT/USD",symbol:"BTC/USD",base:"BTC",quote:"USD"},"BTC/PLN":{id:"XBT/PLN",symbol:"BTC/PLN",base:"BTC",quote:"PLN"},"BCH/GBP":{id:"BCH/GBP",symbol:"BCH/GBP",base:"BCH",quote:"GBP"}}})}fetchBalance(e={}){let t=void 0;if("symbol"in e&&(t=e.symbol),"id"in e&&(t=e.id),!t)throw new r(this.id+" fetchBalance requires a symbol param");return this.privatePostIdBalance({id:this.marketId(t)})}async fetchOrderBook(e,t={}){let i=await this.publicGetIdOrderBook(this.extend({id:this.marketId(e)},t));return this.parseOrderBook(i)}parseTicker(e,t){let i=this.milliseconds(),s=void 0;t&&(s=t.symbol);let r=this.safeFloat(e,"vwap"),a=parseFloat(e.volume),o=void 0;return"undefined"!=typeof r&&(o=a*r),{symbol:s,timestamp:i,datetime:this.iso8601(i),high:parseFloat(e.high),low:parseFloat(e.low),bid:parseFloat(e.bid),ask:parseFloat(e.ask),vwap:r,open:void 0,close:void 0,first:void 0,last:parseFloat(e.last),change:void 0,percentage:void 0,average:void 0,baseVolume:a,quoteVolume:o,info:e}}async fetchTicker(e,t={}){let i=this.market(e),s=await this.publicGetIdTicker(this.extend({id:i.id},t));return this.parseTicker(s,i)}parseTrade(e,t){let i=1e3*e.date;return{info:e,id:e.tid.toString(),order:void 0,timestamp:i,datetime:this.iso8601(i),symbol:t.symbol,type:void 0,side:void 0,price:parseFloat(e.price),amount:parseFloat(e.amount)}}async fetchTrades(e,t,i,s={}){let r=this.market(e),a=await this.publicGetIdTransactions(this.extend({id:r.id},s));return this.parseTrades(a,r,t,i)}async createOrder(e,t,i,s,r,a={}){let o={id:this.marketId(e)},n="privatePostId"+this.capitalize(i);return"market"==t?(o.quantity=s,n+="Market"):(o.price=r,o.amount=s),this[n](this.extend(o,a))}async cancelOrder(e,t,i={}){return await this.privatePostIdCancelOrder({id:e})}sign(e,t="public",i="GET",s={},r,a){let o=this.urls.api+"/"+this.implodeParams(e,s),n=this.omit(s,this.extractParams(e));if("public"==t)Object.keys(n).length&&(o+="?"+this.urlencode(n));else{this.checkRequiredCredentials();let e=this.nonce();a=this.urlencode(this.extend({nonce:e},n));let t=this.uid+"/"+this.apiKey+":"+this.password;r={"Content-Type":"application/x-www-form-urlencoded",Authorization:"Basic "+this.stringToBase64(t)}}return{url:o,method:i,body:a,headers:r}}}},function(e,t,i){"use strict";const s=i(310),{ExchangeError:r}=i(309);e.exports=class extends s{describe(){return this.deepExtend(super.describe(),{id:"coingi",name:"Coingi",rateLimit:1e3,countries:["PA","BG","CN","US"],hasFetchTickers:!0,hasCORS:!1,urls:{logo:"https://user-images.githubusercontent.com/1294454/28619707-5c9232a8-7212-11e7-86d6-98fe5d15cc6e.jpg",api:{www:"https://coingi.com",current:"https://api.coingi.com",user:"https://api.coingi.com"},www:"https://coingi.com",doc:"http://docs.coingi.apiary.io/"},api:{www:{get:[""]},current:{get:["order-book/{pair}/{askCount}/{bidCount}/{depth}","transactions/{pair}/{maxCount}","24hour-rolling-aggregation"]},user:{post:["balance","add-order","cancel-order","orders","transactions","create-crypto-withdrawal"]}},fees:{trading:{tierBased:!1,percentage:!0,taker:.002,maker:.002},funding:{tierBased:!1,percentage:!1,withdraw:{BTC:.001,LTC:.01,DOGE:2,PPC:.02,VTC:.2,NMC:2,DASH:.002,USD:10,EUR:10},deposit:{BTC:0,LTC:0,DOGE:0,PPC:0,VTC:0,NMC:0,DASH:0,USD:5,EUR:1}}}})}async fetchMarkets(){this.parseJsonResponse=!1;let e=await this.wwwGet();this.parseJsonResponse=!0;let t=e.split('do=currencyPairSelector-selectCurrencyPair" class="active">')[1].split('<div class="currency-pair-label">'),i=[];for(let s=1;s<t.length;s++){let e=t[s].split("</div>")[0],r=e;e=(e=e.replace("/","-")).toLowerCase();let[a,o]=r.split("/"),n={amount:8,price:8},d=Math.pow(10,-n.amount);i.push({id:e,symbol:r,base:a,quote:o,info:e,lot:d,active:!0,precision:n,limits:{amount:{min:d,max:Math.pow(10,n.amount)},price:{min:Math.pow(10,-n.price),max:void 0},cost:{min:0,max:void 0}}})}return i}async fetchBalance(e={}){await this.loadMarkets();let t=[],i=Object.keys(this.currencies);for(let a=0;a<i.length;a++){let e=i[a];t.push(e.toLowerCase())}let s=await this.userPostBalance({currencies:t.join(",")}),r={info:s};for(let a=0;a<s.length;a++){let e=s[a],t=e.currency.name;t=t.toUpperCase();let i={free:e.available,used:e.blocked+e.inOrders+e.withdrawing,total:0};i.total=this.sum(i.free,i.used),r[t]=i}return this.parseBalance(r)}async fetchOrderBook(e,t={}){await this.loadMarkets();let i=this.market(e),s=await this.currentGetOrderBookPairAskCountBidCountDepth(this.extend({pair:i.id,askCount:512,bidCount:512,depth:32},t));return this.parseOrderBook(s,void 0,"bids","asks","price","baseAmount")}parseTicker(e,t){let i=this.milliseconds(),s=void 0;return t&&(s=t.symbol),{symbol:s,timestamp:i,datetime:this.iso8601(i),high:e.high,low:e.low,bid:e.highestBid,ask:e.lowestAsk,vwap:void 0,open:void 0,close:void 0,first:void 0,last:void 0,change:void 0,percentage:void 0,average:void 0,baseVolume:e.baseVolume,quoteVolume:e.counterVolume,info:e}}async fetchTickers(e,t={}){await this.loadMarkets();let i=await this.currentGet24hourRollingAggregation(t),s={};for(let r=0;r<i.length;r++){let e=i[r],t=e.currencyPair.base.toUpperCase()+"/"+e.currencyPair.counter.toUpperCase(),a=void 0;t in this.markets&&(a=this.markets[t]),s[t]=this.parseTicker(e,a)}return s}async fetchTicker(e,t={}){await this.loadMarkets();let i=await this.fetchTickers(void 0,t);if(e in i)return i[e];throw new r(this.id+" return did not contain "+e)}parseTrade(e,t){return t||(t=this.markets_by_id[e.currencyPair]),{id:e.id,info:e,timestamp:e.timestamp,datetime:this.iso8601(e.timestamp),symbol:t.symbol,type:void 0,side:void 0,price:e.price,amount:e.amount}}async fetchTrades(e,t,i,s={}){await this.loadMarkets();let r=this.market(e),a=await this.currentGetTransactionsPairMaxCount(this.extend({pair:r.id,maxCount:128},s));return this.parseTrades(a,r,t,i)}async createOrder(e,t,i,s,r,a={}){await this.loadMarkets();let o={currencyPair:this.marketId(e),volume:s,price:r,orderType:"buy"==i?0:1},n=await this.userPostAddOrder(this.extend(o,a));return{info:n,id:n.result}}async cancelOrder(e,t,i={}){return await this.loadMarkets(),await this.userPostCancelOrder({orderId:e})}sign(e,t="current",i="GET",s={},r,a){let o=this.urls.api[t];"www"!=t&&(o+="/"+t+"/"+this.implodeParams(e,s));let n=this.omit(s,this.extractParams(e));if("current"==t)Object.keys(n).length&&(o+="?"+this.urlencode(n));else if("user"==t){this.checkRequiredCredentials();let e=this.nonce(),t=this.extend({token:this.apiKey,nonce:e},n),i=e.toString()+"$"+this.apiKey;t.signature=this.hmac(this.encode(i),this.encode(this.secret)),a=this.json(t),r={"Content-Type":"application/json"}}return{url:o,method:i,body:a,headers:r}}async request(e,t="current",i="GET",s={},a,o){let n=await this.fetch2(e,t,i,s,a,o);if("string"!=typeof n&&"errors"in n)throw new r(this.id+" "+this.json(n));return n}}},function(e,t,i){"use strict";const s=i(310),{ExchangeError:r}=i(309);e.exports=class extends s{describe(){return this.deepExtend(super.describe(),{id:"coinmarketcap",name:"CoinMarketCap",rateLimit:1e4,version:"v1",countries:"US",hasCORS:!0,hasPrivateAPI:!1,hasCreateOrder:!1,hasCancelOrder:!1,hasFetchBalance:!1,hasFetchOrderBook:!1,hasFetchTrades:!1,hasFetchTickers:!0,hasFetchCurrencies:!0,has:{fetchCurrencies:!0},urls:{logo:"https://user-images.githubusercontent.com/1294454/28244244-9be6312a-69ed-11e7-99c1-7c1797275265.jpg",api:"https://api.coinmarketcap.com",www:"https://coinmarketcap.com",doc:"https://coinmarketcap.com/api"},requiredCredentials:{apiKey:!1,secret:!1},api:{public:{get:["ticker/","ticker/{id}/","global/"]}},currencyCodes:["AUD","BRL","CAD","CHF","CNY","EUR","GBP","HKD","IDR","INR","JPY","KRW","MXN","RUB","USD"]})}async fetchOrderBook(e,t={}){throw new r("Fetching order books is not supported by the API of "+this.id)}async fetchMarkets(){let e=await this.publicGetTicker({limit:0}),t=[];for(let i=0;i<e.length;i++){let s=e[i],r=this.currencyCodes;for(let e=0;e<r.length;e++){let i=r[e],a=i.toLowerCase(),o=s.symbol,n=s.id,d=o+"/"+i,c=n+"/"+i;t.push({id:c,symbol:d,base:o,quote:i,baseId:n,quoteId:a,info:s})}}return t}async fetchGlobal(e="USD"){await this.loadMarkets();let t={};return e&&(t.convert=e),await this.publicGetGlobal(t)}parseTicker(e,t){let i=this.milliseconds();"last_updated"in e&&e.last_updated&&(i=1e3*parseInt(e.last_updated));let s=void 0;"percent_change_24h"in e&&e.percent_change_24h&&(s=this.safeFloat(e,"percent_change_24h"));let r=void 0,a=void 0,o=void 0;if(t){let i="price_"+t.quoteId;i in e&&e[i]&&(r=this.safeFloat(e,i)),a=t.symbol;let s="24h_volume_"+t.quoteId;s in e&&e[s]&&(o=this.safeFloat(e,s))}return{symbol:a,timestamp:i,datetime:this.iso8601(i),high:void 0,low:void 0,bid:void 0,ask:void 0,vwap:void 0,open:void 0,close:void 0,first:void 0,last:r,change:s,percentage:void 0,average:void 0,baseVolume:void 0,quoteVolume:o,info:e}}async fetchTickers(e="USD",t={}){await this.loadMarkets();let i={limit:1e4};e&&(i.convert=e);let s=await this.publicGetTicker(this.extend(i,t)),r={};for(let a=0;a<s.length;a++){let t=s[a],i=t.id+"/"+e,o=i,n=void 0;i in this.markets_by_id&&(o=(n=this.markets_by_id[i]).symbol),r[o]=this.parseTicker(t,n)}return r}async fetchTicker(e,t={}){await this.loadMarkets();let i=this.market(e),s=this.extend({convert:i.quote,id:i.baseId},t),r=(await this.publicGetTickerId(s))[0];return this.parseTicker(r,i)}async fetchCurrencies(e={}){let t=await this.publicGetTicker(this.extend({limit:0},e)),i={};for(let s=0;s<t.length;s++){let e=t[s],r=e.symbol,a=this.commonCurrencyCode(r);i[a]={id:r,code:a,info:e,name:e.name,active:!0,status:"ok",fee:void 0,precision:8,limits:{amount:{min:Math.pow(10,-8),max:Math.pow(10,8)},price:{min:Math.pow(10,-8),max:Math.pow(10,8)},cost:{min:void 0,max:void 0},withdraw:{min:void 0,max:void 0}}}}return i}sign(e,t="public",i="GET",s={},r,a){let o=this.urls.api+"/"+this.version+"/"+this.implodeParams(e,s),n=this.omit(s,this.extractParams(e));return Object.keys(n).length&&(o+="?"+this.urlencode(n)),{url:o,method:i,body:a,headers:r}}async request(e,t="public",i="GET",s={},a,o){let n=await this.fetch2(e,t,i,s,a,o);if("error"in n&&n.error)throw new r(this.id+" "+this.json(n));return n}}},function(e,t,i){"use strict";const s=i(310),{ExchangeError:r,AuthenticationError:a}=i(309);e.exports=class extends s{describe(){return this.deepExtend(super.describe(),{id:"coinmate",name:"CoinMate",countries:["GB","CZ"],rateLimit:1e3,hasCORS:!0,urls:{logo:"https://user-images.githubusercontent.com/1294454/27811229-c1efb510-606c-11e7-9a36-84ba2ce412d8.jpg",api:"https://coinmate.io/api",www:"https://coinmate.io",doc:["http://docs.coinmate.apiary.io","https://coinmate.io/developers"]},requiredCredentials:{apiKey:!0,secret:!0,uid:!0},api:{public:{get:["orderBook","ticker","transactions"]},private:{post:["balances","bitcoinWithdrawal","bitcoinDepositAddresses","buyInstant","buyLimit","cancelOrder","cancelOrderWithInfo","createVoucher","openOrders","redeemVoucher","sellInstant","sellLimit","transactionHistory","unconfirmedBitcoinDeposits"]}},markets:{"BTC/EUR":{id:"BTC_EUR",symbol:"BTC/EUR",base:"BTC",quote:"EUR",precision:{amount:4,price:2}},"BTC/CZK":{id:"BTC_CZK",symbol:"BTC/CZK",base:"BTC",quote:"CZK",precision:{amount:4,price:2}},"LTC/BTC":{id:"LTC_BTC",symbol:"LTC/BTC",base:"LTC",quote:"BTC",precision:{amount:4,price:5}}},fees:{trading:{maker:5e-4,taker:.0035}}})}async fetchBalance(e={}){let t=(await this.privatePostBalances()).data,i={info:t},s=Object.keys(this.currencies);for(let r=0;r<s.length;r++){let e=s[r],a=this.account();e in t&&(a.free=t[e].available,a.used=t[e].reserved,a.total=t[e].balance),i[e]=a}return this.parseBalance(i)}async fetchOrderBook(e,t={}){let i=(await this.publicGetOrderBook(this.extend({currencyPair:this.marketId(e),groupByPriceLimit:"False"},t))).data,s=1e3*i.timestamp;return this.parseOrderBook(i,s,"bids","asks","price","amount")}async fetchTicker(e,t={}){let i=(await this.publicGetTicker(this.extend({currencyPair:this.marketId(e)},t))).data,s=1e3*i.timestamp;return{symbol:e,timestamp:s,datetime:this.iso8601(s),high:parseFloat(i.high),low:parseFloat(i.low),bid:parseFloat(i.bid),ask:parseFloat(i.ask),vwap:void 0,open:void 0,close:void 0,first:void 0,last:parseFloat(i.last),change:void 0,percentage:void 0,average:void 0,baseVolume:parseFloat(i.amount),quoteVolume:void 0,info:i}}parseTrade(e,t){return t||(t=this.markets_by_id[e.currencyPair]),{id:e.transactionId,info:e,timestamp:e.timestamp,datetime:this.iso8601(e.timestamp),symbol:t.symbol,type:void 0,side:void 0,price:e.price,amount:e.amount}}async fetchTrades(e,t,i,s={}){let r=this.market(e),a=await this.publicGetTransactions(this.extend({currencyPair:r.id,minutesIntoHistory:10},s));return this.parseTrades(a.data,r,t,i)}async createOrder(e,t,i,s,r,a={}){let o="privatePost"+this.capitalize(i),n={currencyPair:this.marketId(e)};"market"==t?("buy"==i?n.total=s:n.amount=s,o+="Instant"):(n.amount=s,n.price=r,o+=this.capitalize(t));let d=await this[o](self.extend(n,a));return{info:d,id:d.data.toString()}}async cancelOrder(e,t,i={}){return await this.privatePostCancelOrder({orderId:e})}sign(e,t="public",i="GET",s={},r,a){let o=this.urls.api+"/"+e;if("public"==t)Object.keys(s).length&&(o+="?"+this.urlencode(s));else{this.checkRequiredCredentials();let e=this.nonce().toString(),t=e+this.uid+this.apiKey,i=this.hmac(this.encode(t),this.encode(this.secret));a=this.urlencode(this.extend({clientId:this.uid,nonce:e,publicKey:this.apiKey,signature:i.toUpperCase()},s)),r={"Content-Type":"application/x-www-form-urlencoded"}}return{url:o,method:i,body:a,headers:r}}async request(e,t="public",i="GET",s={},a,o){let n=await this.fetch2(e,t,i,s,a,o);if("error"in n&&n.error)throw new r(this.id+" "+this.json(n));return n}}},function(e,t,i){"use strict";const s=i(310),{ExchangeError:r}=i(309);e.exports=class extends s{describe(){return this.deepExtend(super.describe(),{id:"coinsecure",name:"Coinsecure",countries:"IN",rateLimit:1e3,version:"v1",hasCORS:!0,urls:{logo:"https://user-images.githubusercontent.com/1294454/27766472-9cbd200a-5ed9-11e7-9551-2267ad7bac08.jpg",api:"https://api.coinsecure.in",www:"https://coinsecure.in",doc:["https://api.coinsecure.in","https://github.com/coinsecure/plugins"]},requiredCredentials:{apiKey:!0,secret:!1},api:{public:{get:["bitcoin/search/confirmation/{txid}","exchange/ask/low","exchange/ask/orders","exchange/bid/high","exchange/bid/orders","exchange/lastTrade","exchange/max24Hr","exchange/min24Hr","exchange/ticker","exchange/trades"]},private:{get:["mfa/authy/call","mfa/authy/sms","netki/search/{netkiName}","user/bank/otp/{number}","user/kyc/otp/{number}","user/profile/phone/otp/{number}","user/wallet/coin/address/{id}","user/wallet/coin/deposit/confirmed/all","user/wallet/coin/deposit/confirmed/{id}","user/wallet/coin/deposit/unconfirmed/all","user/wallet/coin/deposit/unconfirmed/{id}","user/wallet/coin/wallets","user/exchange/bank/fiat/accounts","user/exchange/bank/fiat/balance/available","user/exchange/bank/fiat/balance/pending","user/exchange/bank/fiat/balance/total","user/exchange/bank/fiat/deposit/cancelled","user/exchange/bank/fiat/deposit/unverified","user/exchange/bank/fiat/deposit/verified","user/exchange/bank/fiat/withdraw/cancelled","user/exchange/bank/fiat/withdraw/completed","user/exchange/bank/fiat/withdraw/unverified","user/exchange/bank/fiat/withdraw/verified","user/exchange/ask/cancelled","user/exchange/ask/completed","user/exchange/ask/pending","user/exchange/bid/cancelled","user/exchange/bid/completed","user/exchange/bid/pending","user/exchange/bank/coin/addresses","user/exchange/bank/coin/balance/available","user/exchange/bank/coin/balance/pending","user/exchange/bank/coin/balance/total","user/exchange/bank/coin/deposit/cancelled","user/exchange/bank/coin/deposit/unverified","user/exchange/bank/coin/deposit/verified","user/exchange/bank/coin/withdraw/cancelled","user/exchange/bank/coin/withdraw/completed","user/exchange/bank/coin/withdraw/unverified","user/exchange/bank/coin/withdraw/verified","user/exchange/bank/summary","user/exchange/coin/fee","user/exchange/fiat/fee","user/exchange/kycs","user/exchange/referral/coin/paid","user/exchange/referral/coin/successful","user/exchange/referral/fiat/paid","user/exchange/referrals","user/exchange/trade/summary","user/login/token/{token}","user/summary","user/wallet/summary","wallet/coin/withdraw/cancelled","wallet/coin/withdraw/completed","wallet/coin/withdraw/unverified","wallet/coin/withdraw/verified"],post:["login","login/initiate","login/password/forgot","mfa/authy/initiate","mfa/ga/initiate","signup","user/netki/update","user/profile/image/update","user/exchange/bank/coin/withdraw/initiate","user/exchange/bank/coin/withdraw/newVerifycode","user/exchange/bank/fiat/withdraw/initiate","user/exchange/bank/fiat/withdraw/newVerifycode","user/password/change","user/password/reset","user/wallet/coin/withdraw/initiate","wallet/coin/withdraw/newVerifycode"],put:["signup/verify/{token}","user/exchange/kyc","user/exchange/bank/fiat/deposit/new","user/exchange/ask/new","user/exchange/bid/new","user/exchange/instant/buy","user/exchange/instant/sell","user/exchange/bank/coin/withdraw/verify","user/exchange/bank/fiat/account/new","user/exchange/bank/fiat/withdraw/verify","user/mfa/authy/initiate/enable","user/mfa/ga/initiate/enable","user/netki/create","user/profile/phone/new","user/wallet/coin/address/new","user/wallet/coin/new","user/wallet/coin/withdraw/sendToExchange","user/wallet/coin/withdraw/verify"],delete:["user/gcm/{code}","user/logout","user/exchange/bank/coin/withdraw/unverified/cancel/{withdrawID}","user/exchange/bank/fiat/deposit/cancel/{depositID}","user/exchange/ask/cancel/{orderID}","user/exchange/bid/cancel/{orderID}","user/exchange/bank/fiat/withdraw/unverified/cancel/{withdrawID}","user/mfa/authy/disable/{code}","user/mfa/ga/disable/{code}","user/profile/phone/delete","user/profile/image/delete/{netkiName}","user/wallet/coin/withdraw/unverified/cancel/{withdrawID}"]}},markets:{"BTC/INR":{id:"BTC/INR",symbol:"BTC/INR",base:"BTC",quote:"INR"}},fees:{trading:{maker:.004,taker:.004}}})}async fetchBalance(e={}){let t=(await this.privateGetUserExchangeBankSummary()).message,i={info:t,BTC:{free:t.availableCoinBalance,used:t.pendingCoinBalance,total:t.totalCoinBalance},INR:{free:t.availableFiatBalance,used:t.pendingFiatBalance,total:t.totalFiatBalance}};return this.parseBalance(i)}async fetchOrderBook(e,t={}){let i=await this.publicGetExchangeBidOrders(t),s=await this.publicGetExchangeAskOrders(t),r={bids:i.message,asks:s.message};return this.parseOrderBook(r,void 0,"bids","asks","rate","vol")}async fetchTicker(e,t={}){let i=(await this.publicGetExchangeTicker(t)).message,s=i.timestamp,r=parseFloat(i.coinvolume);if("BTC/INR"==e){r*=1e-8}return{symbol:e,timestamp:s,datetime:this.iso8601(s),high:parseFloat(i.high),low:parseFloat(i.low),bid:parseFloat(i.bid),ask:parseFloat(i.ask),vwap:void 0,open:parseFloat(i.open),close:void 0,first:void 0,last:parseFloat(i.lastPrice),change:void 0,percentage:void 0,average:void 0,baseVolume:r,quoteVolume:parseFloat(i.fiatvolume),info:i}}fetchTrades(e,t,i,s={}){return this.publicGetExchangeTrades(s)}async createOrder(e,t,i,s,r,a={}){let o="privatePutUserExchange",n={};if("market"==t)o+="Instant"+this.capitalize(i),"buy"==i?n.maxFiat=s:n.maxVol=s;else{o+=("buy"==i?"Bid":"Ask")+"New",n.rate=r,n.vol=s}let d=await this[o](self.extend(n,a));return{info:d,id:d.message.orderID}}async cancelOrder(e,t,i={}){throw new r(this.id+" cancelOrder () is not fully implemented yet")}sign(e,t="public",i="GET",s={},r,a){let o=this.urls.api+"/"+this.version+"/"+this.implodeParams(e,s),n=this.omit(s,this.extractParams(e));return"private"==t&&(this.checkRequiredCredentials(),r={Authorization:this.apiKey},Object.keys(n).length&&(a=this.json(n),r["Content-Type"]="application/json")),{url:o,method:i,body:a,headers:r}}async request(e,t="public",i="GET",s={},a,o){let n=await this.fetch2(e,t,i,s,a,o);if("success"in n&&n.success)return n;throw new r(this.id+" "+this.json(n))}}},function(e,t,i){"use strict";const s=i(310),{ExchangeError:r,AuthenticationError:a}=i(309);e.exports=class extends s{describe(){return this.deepExtend(super.describe(),{id:"coinspot",name:"CoinSpot",countries:"AU",rateLimit:1e3,hasCORS:!1,urls:{logo:"https://user-images.githubusercontent.com/1294454/28208429-3cacdf9a-6896-11e7-854e-4c79a772a30f.jpg",api:{public:"https://www.coinspot.com.au/pubapi",private:"https://www.coinspot.com.au/api"},www:"https://www.coinspot.com.au",doc:"https://www.coinspot.com.au/api"},api:{public:{get:["latest"]},private:{post:["orders","orders/history","my/coin/deposit","my/coin/send","quote/buy","quote/sell","my/balances","my/orders","my/buy","my/sell","my/buy/cancel","my/sell/cancel"]}},markets:{"BTC/AUD":{id:"BTC",symbol:"BTC/AUD",base:"BTC",quote:"AUD"},"LTC/AUD":{id:"LTC",symbol:"LTC/AUD",base:"LTC",quote:"AUD"},"DOGE/AUD":{id:"DOGE",symbol:"DOGE/AUD",base:"DOGE",quote:"AUD"}}})}async fetchBalance(e={}){let t=await this.privatePostMyBalances(),i={info:t};if("balance"in t){let e=t.balance,s=Object.keys(e);for(let t=0;t<s.length;t++){let r=s[t],a=r.toUpperCase(),o={free:e[r],used:0,total:e[r]};"DRK"==a&&(a="DASH"),i[a]=o}}return this.parseBalance(i)}async fetchOrderBook(e,t={}){let i=this.market(e),s=await this.privatePostOrders(this.extend({cointype:i.id},t)),r=this.parseOrderBook(s,void 0,"buyorders","sellorders","rate","amount");return r.bids=this.sortBy(r.bids,0,!0),r.asks=this.sortBy(r.asks,0),r}async fetchTicker(e,t={}){let i=await this.publicGetLatest(t),s=this.marketId(e);s=s.toLowerCase();let r=i.prices[s],a=this.milliseconds();return{symbol:e,timestamp:a,datetime:this.iso8601(a),high:void 0,low:void 0,bid:parseFloat(r.bid),ask:parseFloat(r.ask),vwap:void 0,open:void 0,close:void 0,first:void 0,last:parseFloat(r.last),change:void 0,percentage:void 0,average:void 0,baseVolume:void 0,quoteVolume:void 0,info:r}}fetchTrades(e,t,i,s={}){return this.privatePostOrdersHistory(this.extend({cointype:this.marketId(e)},s))}createOrder(e,t,i,s,a,o={}){let n="privatePostMy"+this.capitalize(i);if("market"==t)throw new r(this.id+" allows limit orders only");let d={cointype:this.marketId(e),amount:s,rate:a};return this[n](this.extend(d,o))}async cancelOrder(e,t,i={}){throw new r(this.id+" cancelOrder () is not fully implemented yet")}sign(e,t="public",i="GET",s={},r,o){if(!this.apiKey)throw new a(this.id+" requires apiKey for all requests");let n=this.urls.api[t]+"/"+e;if("private"==t){this.checkRequiredCredentials();let e=this.nonce();o=this.json(this.extend({nonce:e},s)),r={"Content-Type":"application/json",key:this.apiKey,sign:this.hmac(this.encode(o),this.encode(this.secret),"sha512")}}return{url:n,method:i,body:o,headers:r}}}},function(e,t,i){"use strict";const s=i(310),{ExchangeError:r,InsufficientFunds:a,OrderNotFound:o,OrderNotCached:n}=i(309);e.exports=class extends s{describe(){return this.deepExtend(super.describe(),{id:"cryptopia",name:"Cryptopia",rateLimit:1500,countries:"NZ",hasCORS:!1,hasFetchTickers:!0,hasFetchOrder:!0,hasFetchOrders:!0,hasFetchOpenOrders:!0,hasFetchClosedOrders:!0,hasFetchMyTrades:!0,hasFetchCurrencies:!0,hasDeposit:!0,hasWithdraw:!0,has:{fetchTickers:!0,fetchOrder:"emulated",fetchOrders:"emulated",fetchOpenOrders:!0,fetchClosedOrders:"emulated",fetchMyTrades:!0,fetchCurrencies:!0,deposit:!0,withdraw:!0},urls:{logo:"https://user-images.githubusercontent.com/1294454/29484394-7b4ea6e2-84c6-11e7-83e5-1fccf4b2dc81.jpg",api:"https://www.cryptopia.co.nz/api",www:"https://www.cryptopia.co.nz",doc:["https://www.cryptopia.co.nz/Forum/Category/45","https://www.cryptopia.co.nz/Forum/Thread/255","https://www.cryptopia.co.nz/Forum/Thread/256"]},api:{public:{get:["GetCurrencies","GetTradePairs","GetMarkets","GetMarkets/{id}","GetMarkets/{hours}","GetMarkets/{id}/{hours}","GetMarket/{id}","GetMarket/{id}/{hours}","GetMarketHistory/{id}","GetMarketHistory/{id}/{hours}","GetMarketOrders/{id}","GetMarketOrders/{id}/{count}","GetMarketOrderGroups/{ids}/{count}"]},private:{post:["CancelTrade","GetBalance","GetDepositAddress","GetOpenOrders","GetTradeHistory","GetTransactions","SubmitTip","SubmitTrade","SubmitTransfer","SubmitWithdraw"]}}})}commonCurrencyCode(e){return"CC"==e?"CCX":"FCN"==e?"Facilecoin":"NET"==e?"NetCoin":"BTG"==e?"Bitgem":"FUEL"==e?"FC2":"WRC"==e?"WarCoin":e}currencyId(e){return"CCX"==e?"CC":"Facilecoin"==e?"FCN":"NetCoin"==e?"NET":"Bitgem"==e?"BTG":"FC2"==e?"FUEL":e}async fetchMarkets(){let e=[],t=(await this.publicGetTradePairs()).Data;for(let i=0;i<t.length;i++){let s=t[i],r=s.Id,a=s.Label,[o,n]=a.split("/");a=(o=this.commonCurrencyCode(o))+"/"+(n=this.commonCurrencyCode(n));let d={min:s.MinimumTrade,max:s.MaximumTrade},c={amount:d,price:{min:s.MinimumPrice,max:s.MaximumPrice}},h="OK"==s.Status;e.push({id:r,symbol:a,base:o,quote:n,info:s,maker:s.TradeFee/100,taker:s.TradeFee/100,lot:d.min,active:h,precision:{amount:8,price:8},limits:c})}return e}async fetchOrderBook(e,t={}){await this.loadMarkets();let i=(await this.publicGetMarketOrdersId(this.extend({id:this.marketId(e)},t))).Data;return this.parseOrderBook(i,void 0,"Buy","Sell","Price","Volume")}parseTicker(e,t){let i=this.milliseconds(),s=void 0;return t&&(s=t.symbol),{symbol:s,info:e,timestamp:i,datetime:this.iso8601(i),high:parseFloat(e.High),low:parseFloat(e.Low),bid:parseFloat(e.BidPrice),ask:parseFloat(e.AskPrice),vwap:void 0,open:parseFloat(e.Open),close:parseFloat(e.Close),first:void 0,last:parseFloat(e.LastPrice),change:parseFloat(e.Change),percentage:void 0,average:void 0,baseVolume:parseFloat(e.Volume),quoteVolume:parseFloat(e.BaseVolume)}}async fetchTicker(e,t={}){await this.loadMarkets();let i=this.market(e),s=(await this.publicGetMarketId(this.extend({id:i.id},t))).Data;return this.parseTicker(s,i)}async fetchTickers(e,t={}){await this.loadMarkets();let i={},s=(await this.publicGetMarkets(t)).Data;for(let a=0;a<s.length;a++){let e=s[a],t=e.TradePairId;if(!(t in this.markets_by_id))throw new r(this.id+" fetchTickers() returned unrecognized pair id "+t);let o=this.markets_by_id[t];i[o.symbol]=this.parseTicker(e,o)}return i}parseTrade(e,t){let i=void 0;"Timestamp"in e?i=1e3*e.Timestamp:"TimeStamp"in e&&(i=this.parse8601(e.TimeStamp));let s=this.safeFloat(e,"Price");s||(s=this.safeFloat(e,"Rate"));let r=this.safeFloat(e,"Total"),a=this.safeString(e,"TradeId");t||"TradePairId"in e&&e.TradePairId in this.markets_by_id&&(t=this.markets_by_id[e.TradePairId]);let o=void 0,n=void 0;return t&&(o=t.symbol,"Fee"in e&&(n={currency:t.quote,cost:e.Fee})),{id:a,info:e,order:void 0,timestamp:i,datetime:this.iso8601(i),symbol:o,type:"limit",side:e.Type.toLowerCase(),price:s,cost:r,amount:e.Amount,fee:n}}async fetchTrades(e,t,i,s={}){await this.loadMarkets();let r=this.market(e),a=(await this.publicGetMarketHistoryIdHours(this.extend({id:r.id,hours:24},s))).Data;return this.parseTrades(a,r,t,i)}async fetchMyTrades(e,t,i,s={}){await this.loadMarkets();let r={},a=void 0;e&&(a=this.market(e),r.TradePairId=a.id);let o=await this.privatePostGetTradeHistory(this.extend(r,s));return this.parseTrades(o.Data,a,t,i)}async fetchCurrencies(e={}){let t=(await this.publicGetCurrencies(e)).Data,i={};for(let s=0;s<t.length;s++){let e=t[s],r=e.Symbol,a=this.commonCurrencyCode(r),o="Active"==e.ListingStatus,n=e.Status.toLowerCase();"ok"!=n&&(o=!1),i[a]={id:r,code:a,info:e,name:e.Name,active:o,status:n,fee:e.WithdrawFee,precision:8,limits:{amount:{min:e.MinBaseTrade,max:Math.pow(10,8)},price:{min:Math.pow(10,-8),max:Math.pow(10,8)},cost:{min:void 0,max:void 0},withdraw:{min:e.MinWithdraw,max:e.MaxWithdraw}}}}return i}async fetchBalance(e={}){await this.loadMarkets();let t=await this.privatePostGetBalance(),i=t.Data,s={info:t};for(let r=0;r<i.length;r++){let e=i[r],t=e.Symbol,a=this.commonCurrencyCode(t),o={free:e.Available,used:0,total:e.Total};o.used=o.total-o.free,s[a]=o}return this.parseBalance(s)}async createOrder(e,t,i,s,a,o={}){if("market"==t)throw new r(this.id+" allows limit orders only");await this.loadMarkets();let n=this.market(e);a=parseFloat(a),s=parseFloat(s);let d={TradePairId:n.id,Type:this.capitalize(i),Rate:this.priceToPrecision(e,a),Amount:this.amountToPrecision(e,s)},c=await this.privatePostSubmitTrade(this.extend(d,o));if(!c)throw new r(this.id+" createOrder returned unknown error: "+this.json(c));let h=void 0,l=0;if("Data"in c&&("OrderId"in c.Data&&c.Data.OrderId&&(h=c.Data.OrderId.toString()),"FilledOrders"in c.Data)){c.Data.FilledOrders.length&&(l=void 0)}let u=this.milliseconds(),p={id:h,timestamp:u,datetime:this.iso8601(u),status:"open",symbol:e,type:t,side:i,price:a,cost:a*s,amount:s,remaining:s,filled:l,fee:void 0};return h&&(this.orders[h]=p),this.extend({info:c},p)}async cancelOrder(e,t,i={}){await this.loadMarkets();let s=void 0;try{s=await this.privatePostCancelTrade(this.extend({Type:"Trade",OrderId:e},i)),e in this.orders&&(this.orders[e].status="canceled")}catch(e){if(this.last_json_response){let e=this.safeString(this.last_json_response,"Error");if(e&&e.indexOf("does not exist")>=0)throw new o(this.id+" cancelOrder() error: "+this.last_http_response)}throw e}return s}parseOrder(e,t){let i=void 0;if(t)i=t.symbol;else if("Market"in e){let s=e.Market;s in this.markets_by_id&&(i=(t=this.markets_by_id[s]).symbol)}let s=this.parse8601(e.TimeStamp),r=this.safeFloat(e,"Amount"),a=this.safeFloat(e,"Remaining"),o=r-a;return{id:e.OrderId.toString(),info:this.omit(e,"status"),timestamp:s,datetime:this.iso8601(s),status:e.status,symbol:i,type:"limit",side:e.Type.toLowerCase(),price:this.safeFloat(e,"Rate"),cost:this.safeFloat(e,"Total"),amount:r,filled:o,remaining:a,fee:void 0}}async fetchOrders(e,t,i,s={}){if(!e)throw new r(this.id+" fetchOrders requires a symbol param");await this.loadMarkets();let a=this.market(e),o=await this.privatePostGetOpenOrders({TradePairId:a.id},s),n=[];for(let r=0;r<o.Data.length;r++)n.push(this.extend(o.Data[r],{status:"open"}));let d=this.parseOrders(n,a);for(let r=0;r<d.length;r++)this.orders[d[r].id]=d[r];let c=this.indexBy(d,"id"),h=Object.keys(this.orders),l=[];for(let r=0;r<h.length;r++){let t=h[r];if(t in c)this.orders[t]=this.extend(this.orders[t],c[t]);else{let e=this.orders[t];"open"==e.status&&(this.orders[t]=this.extend(e,{status:"closed",cost:e.amount*e.price,filled:e.amount,remaining:0}))}let i=this.orders[t];i.symbol==e&&l.push(i)}return this.filterBySinceLimit(l,t,i)}async fetchOrder(e,t,i={}){e=e.toString();let s=await this.fetchOrders(t,i);for(let r=0;r<s.length;r++)if(s[r].id==e)return s[r];throw new n(this.id+" order "+e+" not found in cached .orders, fetchOrder requires .orders (de)serialization implemented for this method to work properly")}async fetchOpenOrders(e,t,i,s={}){let r=await this.fetchOrders(e,s),a=[];for(let o=0;o<r.length;o++)"open"==r[o].status&&a.push(r[o]);return a}async fetchClosedOrders(e,t,i,s={}){let r=await this.fetchOrders(e,s),a=[];for(let o=0;o<r.length;o++)"closed"==r[o].status&&a.push(r[o]);return a}async fetchDepositAddress(e,t={}){let i=this.currencyId(e),s=await this.privatePostGetDepositAddress(this.extend({Currency:i},t)),r=this.safeString(s.Data,"BaseAddress");return r||(r=this.safeString(s.Data,"Address")),{currency:e,address:r,status:"ok",info:s}}async withdraw(e,t,i,s={}){let r=this.currencyId(e),a=await this.privatePostSubmitWithdraw(this.extend({Currency:r,Amount:t,Address:i},s));return{info:a,id:a.Data}}sign(e,t="public",i="GET",s={},r,a){let o=this.urls.api+"/"+this.implodeParams(e,s),n=this.omit(s,this.extractParams(e));if("public"==t)Object.keys(n).length&&(o+="?"+this.urlencode(n));else{this.checkRequiredCredentials();let e=this.nonce().toString();a=this.json(n);let t=this.hash(this.encode(a),"md5","base64"),s=this.base64ToBinary(this.secret),d=this.encodeURIComponent(o).toLowerCase(),c=this.apiKey+i+d+e+this.binaryToString(t),h=this.hmac(this.encode(c),s,"sha256","base64");r={"Content-Type":"application/json",Authorization:"amx "+this.apiKey+":"+this.binaryToString(h)+":"+e}}return{url:o,method:i,body:a,headers:r}}async request(e,t="public",i="GET",s={},o,n){let d=await this.fetch2(e,t,i,s,o,n);if(d&&"Success"in d){if(d.Success)return d;if("Error"in d&&"Insufficient Funds."==d.Error)throw new a(this.id+" "+this.json(d))}throw new r(this.id+" "+this.json(d))}}},function(e,t,i){"use strict";const s=i(317);e.exports=class extends s{describe(){return this.deepExtend(super.describe(),{id:"dsx",name:"DSX",countries:"UK",rateLimit:1500,hasCORS:!1,hasFetchOrder:!0,hasFetchOrders:!0,hasFetchOpenOrders:!0,hasFetchClosedOrders:!0,hasFetchTickers:!0,hasFetchMyTrades:!0,urls:{logo:"https://user-images.githubusercontent.com/1294454/27990275-1413158a-645a-11e7-931c-94717f7510e3.jpg",api:{public:"https://dsx.uk/mapi",private:"https://dsx.uk/tapi",dwapi:"https://dsx.uk/dwapi"},www:"https://dsx.uk",doc:["https://api.dsx.uk","https://dsx.uk/api_docs/public","https://dsx.uk/api_docs/private",""]},api:{public:{get:["barsFromMoment/{id}/{period}/{start}","depth/{pair}","info","lastBars/{id}/{period}/{amount}","periodBars/{id}/{period}/{start}/{end}","ticker/{pair}","trades/{pair}"]},private:{post:["getInfo","TransHistory","TradeHistory","OrderHistory","ActiveOrders","Trade","CancelOrder"]},dwapi:{post:["getCryptoDepositAddress","cryptoWithdraw","fiatWithdraw","getTransactionStatus","getTransactions"]}}})}getBaseQuoteFromMarketId(e){let t=e.toUpperCase(),i=t.slice(0,3),s=t.slice(3,6);return i=this.commonCurrencyCode(i),s=this.commonCurrencyCode(s),[i,s]}async fetchBalance(e={}){await this.loadMarkets();let t=(await this.privatePostGetInfo()).return,i={info:t},s=t.funds,r=Object.keys(s);for(let a=0;a<r.length;a++){let e=r[a],o=e.toUpperCase();o=this.commonCurrencyCode(o);let n={free:s[e],used:0,total:t.total[e]};n.used=n.total-n.free,i[o]=n}return this.parseBalance(i)}parseTicker(e,t){let i=1e3*e.updated,s=void 0;return t&&(s=t.symbol),{symbol:s,timestamp:i,datetime:this.iso8601(i),high:this.safeFloat(e,"high"),low:this.safeFloat(e,"low"),bid:this.safeFloat(e,"buy"),ask:this.safeFloat(e,"sell"),vwap:void 0,open:void 0,close:void 0,first:void 0,last:this.safeFloat(e,"last"),change:void 0,percentage:void 0,average:1/this.safeFloat(e,"avg"),baseVolume:this.safeFloat(e,"vol"),quoteVolume:this.safeFloat(e,"vol_cur"),info:e}}getOrderIdKey(){return"orderId"}signBodyWithSecret(e){return this.decode(this.hmac(this.encode(e),this.encode(this.secret),"sha512","base64"))}getVersionString(){return""}}},function(e,t,i){"use strict";const s=i(310),{ExchangeError:r}=i(309);e.exports=class extends s{describe(){return this.deepExtend(super.describe(),{id:"exmo",name:"EXMO",countries:["ES","RU"],rateLimit:1e3,version:"v1",hasCORS:!1,hasFetchTickers:!0,hasWithdraw:!0,urls:{logo:"https://user-images.githubusercontent.com/1294454/27766491-1b0ea956-5eda-11e7-9225-40d67b481b8d.jpg",api:"https://api.exmo.com",www:"https://exmo.me",doc:["https://exmo.me/en/api_doc","https://github.com/exmo-dev/exmo_api_lib/tree/master/nodejs"]},api:{public:{get:["currency","order_book","pair_settings","ticker","trades"]},private:{post:["user_info","order_create","order_cancel","user_open_orders","user_trades","user_cancelled_orders","order_trades","required_amount","deposit_address","withdraw_crypt","withdraw_get_txid","excode_create","excode_load","wallet_history"]}},fees:{trading:{maker:.002,taker:.002}}})}async fetchMarkets(){let e=await this.publicGetPairSettings(),t=Object.keys(e),i=[];for(let s=0;s<t.length;s++){let r=t[s],a=e[r],o=r.replace("_","/"),[n,d]=o.split("/");i.push({id:r,symbol:o,base:n,quote:d,limits:{amount:{min:a.min_quantity,max:a.max_quantity},price:{min:a.min_price,max:a.max_price},cost:{min:a.min_amount,max:a.max_amount}},precision:{amount:8,price:8},info:a})}return i}async fetchBalance(e={}){await this.loadMarkets();let t=await this.privatePostUserInfo(),i={info:t},s=Object.keys(this.currencies);for(let r=0;r<s.length;r++){let e=s[r],a=this.account();e in t.balances&&(a.free=parseFloat(t.balances[e])),e in t.reserved&&(a.used=parseFloat(t.reserved[e])),a.total=this.sum(a.free,a.used),i[e]=a}return this.parseBalance(i)}async fetchOrderBook(e,t={}){await this.loadMarkets();let i=this.market(e),s=(await this.publicGetOrderBook(this.extend({pair:i.id},t)))[i.id];return this.parseOrderBook(s,void 0,"bid","ask")}parseTicker(e,t){let i=1e3*e.updated,s=void 0;return t&&(s=t.symbol),{symbol:s,timestamp:i,datetime:this.iso8601(i),high:parseFloat(e.high),low:parseFloat(e.low),bid:parseFloat(e.buy_price),ask:parseFloat(e.sell_price),vwap:void 0,open:void 0,close:void 0,first:void 0,last:parseFloat(e.last_trade),change:void 0,percentage:void 0,average:parseFloat(e.avg),baseVolume:parseFloat(e.vol),quoteVolume:parseFloat(e.vol_curr),info:e}}async fetchTickers(e,t={}){await this.loadMarkets();let i=await this.publicGetTicker(t),s={},r=Object.keys(i);for(let a=0;a<r.length;a++){let e=r[a],t=this.markets_by_id[e],o=t.symbol,n=i[e];s[o]=this.parseTicker(n,t)}return s}async fetchTicker(e,t={}){await this.loadMarkets();let i=await this.publicGetTicker(t),s=this.market(e);return this.parseTicker(i[s.id],s)}parseTrade(e,t){let i=1e3*e.date;return{id:e.trade_id.toString(),info:e,timestamp:i,datetime:this.iso8601(i),symbol:t.symbol,order:void 0,type:void 0,side:e.type,price:parseFloat(e.price),amount:parseFloat(e.quantity)}}async fetchTrades(e,t,i,s={}){await this.loadMarkets();let r=this.market(e),a=await this.publicGetTrades(this.extend({pair:r.id},s));return this.parseTrades(a[r.id],r,t,i)}async createOrder(e,t,i,s,r,a={}){await this.loadMarkets();let o="";"market"==t&&(o="market_"),"undefined"==typeof r&&(r=0);let n={pair:this.marketId(e),quantity:s,price:r,type:o+i},d=await this.privatePostOrderCreate(this.extend(n,a));return{info:d,id:d.order_id.toString()}}async cancelOrder(e,t,i={}){return await this.loadMarkets(),await this.privatePostOrderCancel({order_id:e})}async withdraw(e,t,i,s={}){await this.loadMarkets();let r=await this.privatePostWithdrawCrypt(this.extend({amount:t,currency:e,address:i},s));return{info:r,id:r.task_id}}sign(e,t="public",i="GET",s={},r,a){let o=this.urls.api+"/"+this.version+"/"+e;if("public"==t)Object.keys(s).length&&(o+="?"+this.urlencode(s));else{this.checkRequiredCredentials();let e=this.nonce();a=this.urlencode(this.extend({nonce:e},s)),r={"Content-Type":"application/x-www-form-urlencoded",Key:this.apiKey,Sign:this.hmac(this.encode(a),this.encode(this.secret),"sha512")}}return{url:o,method:i,body:a,headers:r}}async request(e,t="public",i="GET",s={},a,o){let n=await this.fetch2(e,t,i,s,a,o);if("result"in n){if(n.result)return n;throw new r(this.id+" "+this.json(n))}return n}}},function(e,t,i){"use strict";const s=i(310),{ExchangeError:r,AuthenticationError:a}=i(309);e.exports=class extends s{describe(){return this.deepExtend(super.describe(),{id:"flowbtc",name:"flowBTC",countries:"BR",version:"v1",rateLimit:1e3,hasCORS:!0,urls:{logo:"https://user-images.githubusercontent.com/1294454/28162465-cd815d4c-67cf-11e7-8e57-438bea0523a2.jpg",api:"https://api.flowbtc.com:8400/ajax",www:"https://trader.flowbtc.com",doc:"http://www.flowbtc.com.br/api/"},requiredCredentials:{apiKey:!0,secret:!0,uid:!0},api:{public:{post:["GetTicker","GetTrades","GetTradesByDate","GetOrderBook","GetProductPairs","GetProducts"]},private:{post:["CreateAccount","GetUserInfo","SetUserInfo","GetAccountInfo","GetAccountTrades","GetDepositAddresses","Withdraw","CreateOrder","ModifyOrder","CancelOrder","CancelAllOrders","GetAccountOpenOrders","GetOrderFee"]}}})}async fetchMarkets(){let e=(await this.publicPostGetProductPairs()).productPairs,t=[];for(let i=0;i<e.length;i++){let s=e[i],r=s.name,a=s.product1Label,o=s.product2Label,n=a+"/"+o;t.push({id:r,symbol:n,base:a,quote:o,info:s})}return t}async fetchBalance(e={}){await this.loadMarkets();let t=await this.privatePostGetAccountInfo(),i=t.currencies,s={info:t};for(let r=0;r<i.length;r++){let e=i[r],t=e.name,a={free:e.balance,used:e.hold,total:0};a.total=this.sum(a.free,a.used),s[t]=a}return this.parseBalance(s)}async fetchOrderBook(e,t={}){await this.loadMarkets();let i=this.market(e),s=await this.publicPostGetOrderBook(this.extend({productPair:i.id},t));return this.parseOrderBook(s,void 0,"bids","asks","px","qty")}async fetchTicker(e,t={}){await this.loadMarkets();let i=this.market(e),s=await this.publicPostGetTicker(this.extend({productPair:i.id},t)),r=this.milliseconds();return{symbol:e,timestamp:r,datetime:this.iso8601(r),high:parseFloat(s.high),low:parseFloat(s.low),bid:parseFloat(s.bid),ask:parseFloat(s.ask),vwap:void 0,open:void 0,close:void 0,first:void 0,last:parseFloat(s.last),change:void 0,percentage:void 0,average:void 0,baseVolume:parseFloat(s.volume24hr),quoteVolume:parseFloat(s.volume24hrProduct2),info:s}}parseTrade(e,t){let i=1e3*e.unixtime,s=0==e.incomingOrderSide?"buy":"sell";return{info:e,timestamp:i,datetime:this.iso8601(i),symbol:t.symbol,id:e.tid.toString(),order:void 0,type:void 0,side:s,price:e.px,amount:e.qty}}async fetchTrades(e,t,i,s={}){await this.loadMarkets();let r=this.market(e),a=await this.publicPostGetTrades(this.extend({ins:r.id,startIndex:-1},s));return this.parseTrades(a.trades,r,t,i)}async createOrder(e,t,i,s,r,a={}){await this.loadMarkets();let o="market"==t?1:0,n={ins:this.marketId(e),side:i,orderType:o,qty:s,px:r},d=await this.privatePostCreateOrder(this.extend(n,a));return{info:d,id:d.serverOrderId}}async cancelOrder(e,t,i={}){if(await this.loadMarkets(),"ins"in i)return await this.privatePostCancelOrder(this.extend({serverOrderId:e},i));throw new r(this.id+" requires `ins` symbol parameter for cancelling an order")}sign(e,t="public",i="GET",s={},r,a){let o=this.urls.api+"/"+this.version+"/"+e;if("public"==t)Object.keys(s).length&&(a=this.json(s));else{this.checkRequiredCredentials();let e=this.nonce(),t=e.toString()+this.uid+this.apiKey,i=this.hmac(this.encode(t),this.encode(this.secret));a=this.json(this.extend({apiKey:this.apiKey,apiNonce:e,apiSig:i.toUpperCase()},s)),r={"Content-Type":"application/json"}}return{url:o,method:i,body:a,headers:r}}async request(e,t="public",i="GET",s={},a,o){let n=await this.fetch2(e,t,i,s,a,o);if("isAccepted"in n&&n.isAccepted)return n;throw new r(this.id+" "+this.json(n))}}},function(e,t,i){"use strict";const s=i(335);e.exports=class extends s{describe(){return this.deepExtend(super.describe(),{id:"fybsg",name:"FYB-SG",countries:"SG",hasCORS:!1,urls:{logo:"https://user-images.githubusercontent.com/1294454/27766513-3364d56a-5edb-11e7-9e6b-d5898bb89c81.jpg",api:"https://www.fybsg.com/api/SGD",www:"https://www.fybsg.com",doc:"http://docs.fyb.apiary.io"},markets:{"BTC/SGD":{id:"SGD",symbol:"BTC/SGD",base:"BTC",quote:"SGD"}}})}}},function(e,t,i){"use strict";const s=i(310),{ExchangeError:r,AuthenticationError:a}=i(309);e.exports=class extends s{describe(){return this.deepExtend(super.describe(),{id:"gatecoin",name:"Gatecoin",rateLimit:2e3,countries:"HK",comment:"a regulated/licensed exchange",hasCORS:!1,hasFetchTickers:!0,hasFetchOHLCV:!0,timeframes:{"1m":"1m","15m":"15m","1h":"1h","6h":"6h","1d":"24h"},urls:{logo:"https://user-images.githubusercontent.com/1294454/28646817-508457f2-726c-11e7-9eeb-3528d2413a58.jpg",api:"https://api.gatecoin.com",www:"https://gatecoin.com",doc:["https://gatecoin.com/api","https://github.com/Gatecoin/RESTful-API-Implementation","https://api.gatecoin.com/swagger-ui/index.html"]},api:{public:{get:["Public/ExchangeRate","Public/LiveTicker","Public/LiveTicker/{CurrencyPair}","Public/LiveTickers","Public/MarketDepth/{CurrencyPair}","Public/NetworkStatistics/{DigiCurrency}","Public/StatisticHistory/{DigiCurrency}/{Typeofdata}","Public/TickerHistory/{CurrencyPair}/{Timeframe}","Public/Transactions/{CurrencyPair}","Public/TransactionsHistory/{CurrencyPair}","Reference/BusinessNatureList","Reference/Countries","Reference/Currencies","Reference/CurrencyPairs","Reference/CurrentStatusList","Reference/IdentydocumentTypes","Reference/IncomeRangeList","Reference/IncomeSourceList","Reference/VerificationLevelList","Stream/PublicChannel"],post:["Export/Transactions","Ping","Public/Unsubscribe/{EmailCode}","RegisterUser"]},private:{get:["Account/CorporateData","Account/DocumentAddress","Account/DocumentCorporation","Account/DocumentID","Account/DocumentInformation","Account/Email","Account/FeeRate","Account/Level","Account/PersonalInformation","Account/Phone","Account/Profile","Account/Questionnaire","Account/Referral","Account/ReferralCode","Account/ReferralNames","Account/ReferralReward","Account/ReferredCode","Account/ResidentInformation","Account/SecuritySettings","Account/User","APIKey/APIKey","Auth/ConnectionHistory","Balance/Balances","Balance/Balances/{Currency}","Balance/Deposits","Balance/Withdrawals","Bank/Accounts/{Currency}/{Location}","Bank/Transactions","Bank/UserAccounts","Bank/UserAccounts/{Currency}","ElectronicWallet/DepositWallets","ElectronicWallet/DepositWallets/{DigiCurrency}","ElectronicWallet/Transactions","ElectronicWallet/Transactions/{DigiCurrency}","ElectronicWallet/UserWallets","ElectronicWallet/UserWallets/{DigiCurrency}","Info/ReferenceCurrency","Info/ReferenceLanguage","Notification/Messages","Trade/Orders","Trade/Orders/{OrderID}","Trade/StopOrders","Trade/StopOrdersHistory","Trade/Trades","Trade/UserTrades"],post:["Account/DocumentAddress","Account/DocumentCorporation","Account/DocumentID","Account/Email/RequestVerify","Account/Email/Verify","Account/GoogleAuth","Account/Level","Account/Questionnaire","Account/Referral","APIKey/APIKey","Auth/ChangePassword","Auth/ForgotPassword","Auth/ForgotUserID","Auth/Login","Auth/Logout","Auth/LogoutOtherSessions","Auth/ResetPassword","Bank/Transactions","Bank/UserAccounts","ElectronicWallet/DepositWallets/{DigiCurrency}","ElectronicWallet/Transactions/Deposits/{DigiCurrency}","ElectronicWallet/Transactions/Withdrawals/{DigiCurrency}","ElectronicWallet/UserWallets/{DigiCurrency}","ElectronicWallet/Withdrawals/{DigiCurrency}","Notification/Messages","Notification/Messages/{ID}","Trade/Orders","Trade/StopOrders"],put:["Account/CorporateData","Account/DocumentID","Account/DocumentInformation","Account/Email","Account/PersonalInformation","Account/Phone","Account/Questionnaire","Account/ReferredCode","Account/ResidentInformation","Account/SecuritySettings","Account/User","Bank/UserAccounts","ElectronicWallet/DepositWallets/{DigiCurrency}/{AddressName}","ElectronicWallet/UserWallets/{DigiCurrency}","Info/ReferenceCurrency","Info/ReferenceLanguage"],delete:["APIKey/APIKey/{PublicKey}","Bank/Transactions/{RequestID}","Bank/UserAccounts/{Currency}/{Label}","ElectronicWallet/DepositWallets/{DigiCurrency}/{AddressName}","ElectronicWallet/UserWallets/{DigiCurrency}/{AddressName}","Trade/Orders","Trade/Orders/{OrderID}","Trade/StopOrders","Trade/StopOrders/{ID}"]}},fees:{trading:{maker:.0025,taker:.0035}}})}async fetchMarkets(){let e=(await this.publicGetPublicLiveTickers()).tickers,t=[];for(let i=0;i<e.length;i++){let s=e[i],r=s.currencyPair,a=r.slice(0,3),o=r.slice(3,6),n=a+"/"+o;t.push({id:r,symbol:n,base:a,quote:o,info:s})}return t}async fetchBalance(e={}){await this.loadMarkets();let t=(await this.privateGetBalanceBalances()).balances,i={info:t};for(let s=0;s<t.length;s++){let e=t[s],r=e.currency,a={free:e.availableBalance,used:this.sum(e.pendingIncoming,e.pendingOutgoing,e.openOrder),total:e.balance};i[r]=a}return this.parseBalance(i)}async fetchOrderBook(e,t={}){await this.loadMarkets();let i=this.market(e),s=await this.publicGetPublicMarketDepthCurrencyPair(this.extend({CurrencyPair:i.id},t));return this.parseOrderBook(s,void 0,"bids","asks","price","volume")}parseTicker(e,t){let i=1e3*parseInt(e.createDateTime),s=void 0;t&&(s=t.symbol);let r=parseFloat(e.volume),a=parseFloat(e.vwap),o=r*a;return{symbol:s,timestamp:i,datetime:this.iso8601(i),high:parseFloat(e.high),low:parseFloat(e.low),bid:parseFloat(e.bid),ask:parseFloat(e.ask),vwap:a,open:parseFloat(e.open),close:void 0,first:void 0,last:parseFloat(e.last),change:void 0,percentage:void 0,average:void 0,baseVolume:r,quoteVolume:o,info:e}}async fetchTickers(e,t={}){await this.loadMarkets();let i=(await this.publicGetPublicLiveTickers(t)).tickers,s={};for(let r=0;r<i.length;r++){let e=i[r],t=e.currencyPair,a=this.markets_by_id[t];s[a.symbol]=this.parseTicker(e,a)}return s}async fetchTicker(e,t={}){await this.loadMarkets();let i=this.market(e),s=(await this.publicGetPublicLiveTickerCurrencyPair(this.extend({CurrencyPair:i.id},t))).ticker;return this.parseTicker(s,i)}parseTrade(e,t){let i=void 0,s=void 0;if("way"in e){i="bid"==e.way?"buy":"sell";s=e[e.way+"OrderId"]}let r=1e3*parseInt(e.transactionTime);return t||(t=this.markets_by_id[e.currencyPair]),{info:e,id:e.transactionId.toString(),order:s,timestamp:r,datetime:this.iso8601(r),symbol:t.symbol,type:void 0,side:i,price:e.price,amount:e.quantity}}async fetchTrades(e,t,i,s={}){await this.loadMarkets();let r=this.market(e),a=await this.publicGetPublicTransactionsCurrencyPair(this.extend({CurrencyPair:r.id},s));return this.parseTrades(a.transactions,r,t,i)}parseOHLCV(e,t,i="1m",s,r){return[1e3*parseInt(e.createDateTime),e.open,e.high,e.low,void 0,e.volume]}async fetchOHLCV(e,t="1m",i,s,r={}){await this.loadMarkets();let a=this.market(e),o={CurrencyPair:a.id,Timeframe:this.timeframes[t]};s&&(o.Count=s),o=this.extend(o,r);let n=await this.publicGetPublicTickerHistoryCurrencyPairTimeframe(o);return this.parseOHLCVs(n.tickers,a,t,i,s)}async createOrder(e,t,i,s,r,o={}){await this.loadMarkets();let n={Code:this.marketId(e),Way:"buy"==i?"Bid":"Ask",Amount:s};if("limit"==t&&(n.Price=r),this.twofa){if(!("ValidationCode"in o))throw new a(this.id+" two-factor authentication requires a missing ValidationCode parameter");n.ValidationCode=o.ValidationCode}let d=await this.privatePostTradeOrders(this.extend(n,o));return{info:d,id:d.clOrderId}}async cancelOrder(e,t,i={}){return await this.loadMarkets(),await this.privateDeleteTradeOrdersOrderID({OrderID:e})}sign(e,t="public",i="GET",s={},r,a){let o=this.urls.api+"/"+this.implodeParams(e,s),n=this.omit(s,this.extractParams(e));if("public"==t)Object.keys(n).length&&(o+="?"+this.urlencode(n));else{this.checkRequiredCredentials();let e=this.nonce(),t="GET"==i?"":"application/json",n=i+o+t+e.toString();n=n.toLowerCase();let d=this.hmac(this.encode(n),this.encode(this.secret),"sha256","base64");r={API_PUBLIC_KEY:this.apiKey,API_REQUEST_SIGNATURE:d,API_REQUEST_DATE:e},"GET"!=i&&(r["Content-Type"]=t,a=this.json(this.extend({nonce:e},s)))}return{url:o,method:i,body:a,headers:r}}async request(e,t="public",i="GET",s={},a,o){let n=await this.fetch2(e,t,i,s,a,o);if("responseStatus"in n&&"message"in n.responseStatus&&"OK"==n.responseStatus.message)return n;throw new r(this.id+" "+this.json(n))}}},function(e,t,i){"use strict";const s=i(333);e.exports=class extends s{describe(){return this.deepExtend(super.describe(),{id:"gateio",name:"Gate.io",countries:"CN",rateLimit:1e3,hasCORS:!1,urls:{logo:"https://user-images.githubusercontent.com/1294454/31784029-0313c702-b509-11e7-9ccc-bc0da6a0e435.jpg",api:{public:"https://data.gate.io/api",private:"https://data.gate.io/api"},www:"https://gate.io/",doc:"https://gate.io/api2"}})}}},function(e,t,i){"use strict";const s=i(310),{ExchangeError:r,InvalidOrder:a,AuthenticationError:o,NotSupported:n}=i(309);e.exports=class extends s{describe(){return this.deepExtend(super.describe(),{id:"gdax",name:"GDAX",countries:"US",rateLimit:1e3,userAgent:this.userAgents.chrome,hasCORS:!0,hasFetchOHLCV:!0,hasDeposit:!0,hasWithdraw:!0,hasFetchOrder:!0,hasFetchOrders:!0,hasFetchOpenOrders:!0,hasFetchClosedOrders:!0,timeframes:{"1m":60,"5m":300,"15m":900,"30m":1800,"1h":3600,"2h":7200,"4h":14400,"12h":43200,"1d":86400,"1w":604800,"1M":2592e3,"1y":31536e3},urls:{test:"https://api-public.sandbox.gdax.com",logo:"https://user-images.githubusercontent.com/1294454/27766527-b1be41c6-5edb-11e7-95f6-5b496c469e2c.jpg",api:"https://api.gdax.com",www:"https://www.gdax.com",doc:"https://docs.gdax.com"},requiredCredentials:{apiKey:!0,secret:!0,password:!0},api:{public:{get:["currencies","products","products/{id}/book","products/{id}/candles","products/{id}/stats","products/{id}/ticker","products/{id}/trades","time"]},private:{get:["accounts","accounts/{id}","accounts/{id}/holds","accounts/{id}/ledger","coinbase-accounts","fills","funding","orders","orders/{id}","payment-methods","position","reports/{id}","users/self/trailing-volume"],post:["deposits/coinbase-account","deposits/payment-method","funding/repay","orders","position/close","profiles/margin-transfer","reports","withdrawals/coinbase","withdrawals/crypto","withdrawals/payment-method"],delete:["orders","orders/{id}"]}},fees:{trading:{tierBased:!0,percentage:!0,maker:0,taker:.003},funding:{tierBased:!1,percentage:!1,withdraw:{BCH:0,BTC:0,LTC:0,ETH:0,EUR:.15,USD:25},deposit:{BCH:0,BTC:0,LTC:0,ETH:0,EUR:.15,USD:10}}}})}async fetchMarkets(){let e=await this.publicGetProducts(),t=[];for(let i=0;i<e.length;i++){let s=e[i],r=s.id,a=s.base_currency,o=s.quote_currency,n=a+"/"+o,d={min:s.base_min_size,max:s.base_max_size},c={min:s.quote_increment,max:void 0},h={amount:d,price:c,cost:{min:c.min,max:void 0}},l={amount:-Math.log10(parseFloat(d.min)),price:-Math.log10(parseFloat(c.min))},u=this.fees.trading.taker;"ETH"!=a&&"LTC"!=a||(u=.003),t.push(this.extend(this.fees.trading,{id:r,symbol:n,base:a,quote:o,info:s,precision:l,limits:h,taker:u}))}return t}async fetchBalance(e={}){await this.loadMarkets();let t=await this.privateGetAccounts(),i={info:t};for(let s=0;s<t.length;s++){let e=t[s],r=e.currency,a={free:parseFloat(e.available),used:parseFloat(e.hold),total:parseFloat(e.balance)};i[r]=a}return this.parseBalance(i)}async fetchOrderBook(e,t={}){await this.loadMarkets();let i=await this.publicGetProductsIdBook(this.extend({id:this.marketId(e),level:2},t));return this.parseOrderBook(i)}async fetchTicker(e,t={}){await this.loadMarkets();let i=this.market(e),s=this.extend({id:i.id},t),r=await this.publicGetProductsIdTicker(s),a=this.parse8601(r.time),o=void 0,n=void 0;return"bid"in r&&(o=parseFloat(r.bid)),"ask"in r&&(n=parseFloat(r.ask)),{symbol:e,timestamp:a,datetime:this.iso8601(a),high:void 0,low:void 0,bid:o,ask:n,vwap:void 0,open:void 0,close:void 0,first:void 0,last:this.safeFloat(r,"price"),change:void 0,percentage:void 0,average:void 0,baseVolume:parseFloat(r.volume),quoteVolume:void 0,info:r}}parseTrade(e,t){let i=this.parse8601(e.time),s="buy"==e.side?"sell":"buy",r=void 0;t&&(r=t.symbol);let a=void 0;return"fill_fees"in e&&(a={cost:parseFloat(e.fill_fees),currency:t.quote}),{id:e.trade_id.toString(),info:e,timestamp:i,datetime:this.iso8601(i),symbol:r,type:void 0,side:s,price:parseFloat(e.price),amount:parseFloat(e.size),fee:a}}async fetchTrades(e,t,i,s={}){await this.loadMarkets();let r=this.market(e),a=await this.publicGetProductsIdTrades(this.extend({id:r.id},s));return this.parseTrades(a,r,t,i)}parseOHLCV(e,t,i="1m",s,r){return[1e3*e[0],e[3],e[2],e[1],e[4],e[5]]}async fetchOHLCV(e,t="1m",i,s,r={}){await this.loadMarkets();let a=this.market(e),o=this.timeframes[t],n={id:a.id,granularity:o};i&&(n.start=this.iso8601(i),s||(s=200),n.end=this.iso8601(s*o*1e3+i));let d=await this.publicGetProductsIdCandles(this.extend(n,r));return this.parseOHLCVs(d,a,t,i,s)}async fetchTime(){let e=this.publicGetTime();return this.parse8601(e.iso)}parseOrderStatus(e){return this.safeString({pending:"open",active:"open",open:"open",done:"closed",canceled:"canceled"},e,e)}parseOrder(e,t){let i=this.parse8601(e.created_at),s=void 0;t||e.product_id in this.markets_by_id&&(t=this.markets_by_id[e.product_id]);let r=this.parseOrderStatus(e.status),a=this.safeFloat(e,"price"),o=this.safeFloat(e,"size"),n=this.safeFloat(e,"filled_size"),d=o-n,c=this.safeFloat(e,"executed_value");return t&&(s=t.symbol),{id:e.id,info:e,timestamp:i,datetime:this.iso8601(i),status:r,symbol:s,type:e.type,side:e.side,price:a,cost:c,amount:o,filled:n,remaining:d,fee:void 0}}async fetchOrder(e,t,i={}){await this.loadMarkets();let s=await this.privateGetOrdersId(this.extend({id:e},i));return this.parseOrder(s)}async fetchOrders(e,t,i,s={}){await this.loadMarkets();let r={status:"all"},a=void 0;e&&(a=this.market(e),r.product_id=a.id);let o=await this.privateGetOrders(this.extend(r,s));return this.parseOrders(o,a,t,i)}async fetchOpenOrders(e,t,i,s={}){await this.loadMarkets();let r={},a=void 0;e&&(a=this.market(e),r.product_id=a.id);let o=await this.privateGetOrders(this.extend(r,s));return this.parseOrders(o,a,t,i)}async fetchClosedOrders(e,t,i,s={}){await this.loadMarkets();let r={status:"done"},a=void 0;e&&(a=this.market(e),r.product_id=a.id);let o=await this.privateGetOrders(this.extend(r,s));return this.parseOrders(o,a,t,i)}async createOrder(e,t,i,s,r,a={}){await this.loadMarkets();let o={product_id:this.marketId(e),side:i,size:s,type:t};"limit"==t&&(o.price=r);let n=await this.privatePostOrders(this.extend(o,a));return{info:n,id:n.id}}async cancelOrder(e,t,i={}){return await this.loadMarkets(),await this.privateDeleteOrdersId({id:e})}async getPaymentMethods(){return await this.privateGetPaymentMethods()}async deposit(e,t,i,s={}){await this.loadMarkets();let a={currency:e,amount:t},o="privatePostDeposits";if("payment_method_id"in s)o+="PaymentMethod";else{if(!("coinbase_account_id"in s))throw new n(this.id+" deposit() requires one of `coinbase_account_id` or `payment_method_id` extra params");o+="CoinbaseAccount"}let d=await this[o](this.extend(a,s));if(!d)throw new r(this.id+" deposit() error: "+this.json(d));return{info:d,id:d.id}}async withdraw(e,t,i,s={}){await this.loadMarkets();let a={currency:e,amount:t},o="privatePostWithdrawals";"payment_method_id"in s?o+="PaymentMethod":"coinbase_account_id"in s?o+="CoinbaseAccount":(o+="Crypto",a.crypto_address=i);let n=await this[o](this.extend(a,s));if(!n)throw new r(this.id+" withdraw() error: "+this.json(n));return{info:n,id:n.id}}sign(e,t="public",i="GET",s={},r,a){let o="/"+this.implodeParams(e,s),n=this.omit(s,this.extractParams(e));"GET"==i&&Object.keys(n).length&&(o+="?"+this.urlencode(n));let d=this.urls.api+o;if("private"==t){this.checkRequiredCredentials();let e=this.nonce().toString(),t="";"GET"!=i&&Object.keys(n).length&&(t=a=this.json(n));let s=e+i+o+t,d=this.base64ToBinary(this.secret),c=this.hmac(this.encode(s),d,"sha256","base64");r={"CB-ACCESS-KEY":this.apiKey,"CB-ACCESS-SIGN":this.decode(c),"CB-ACCESS-TIMESTAMP":e,"CB-ACCESS-PASSPHRASE":this.password,"Content-Type":"application/json"}}return{url:d,method:i,body:a,headers:r}}handleErrors(e,t,i,s,n,d){if(400==e){if("{"==d[0]){let e=JSON.parse(d),t=e.message;if(t.indexOf("price too small")>=0)throw new a(this.id+" "+t);if(t.indexOf("price too precise")>=0)throw new a(this.id+" "+t);if("Invalid API Key"==t)throw new o(this.id+" "+t);throw new r(this.id+" "+this.json(e))}throw new r(this.id+" "+d)}}async request(e,t="public",i="GET",s={},a,o){let n=await this.fetch2(e,t,i,s,a,o);if("message"in n)throw new r(this.id+" "+this.json(n));return n}}},function(e,t,i){"use strict";const s=i(310),{ExchangeError:r}=i(309);e.exports=class extends s{describe(){return this.deepExtend(super.describe(),{id:"gemini",name:"Gemini",countries:"US",rateLimit:1500,version:"v1",hasCORS:!1,urls:{logo:"https://user-images.githubusercontent.com/1294454/27816857-ce7be644-6096-11e7-82d6-3c257263229c.jpg",api:"https://api.gemini.com",www:"https://gemini.com",doc:"https://docs.gemini.com/rest-api"},api:{public:{get:["symbols","pubticker/{symbol}","book/{symbol}","trades/{symbol}","auction/{symbol}","auction/{symbol}/history"]},private:{post:["order/new","order/cancel","order/cancel/session","order/cancel/all","order/status","orders","mytrades","tradevolume","balances","deposit/{currency}/newAddress","withdraw/{currency}","heartbeat"]}}})}async fetchMarkets(){let e=await this.publicGetSymbols(),t=[];for(let i=0;i<e.length;i++){let s=e[i],r=s,a=r.toUpperCase(),o=a.slice(0,3),n=a.slice(3,6),d=o+"/"+n;t.push({id:s,symbol:d,base:o,quote:n,info:r,taker:.0025})}return t}async fetchOrderBook(e,t={}){await this.loadMarkets();let i=await this.publicGetBookSymbol(this.extend({symbol:this.marketId(e)},t));return this.parseOrderBook(i,void 0,"bids","asks","price","amount")}async fetchTicker(e,t={}){await this.loadMarkets();let i=this.market(e),s=await this.publicGetPubtickerSymbol(this.extend({symbol:i.id},t)),r=s.volume.timestamp,a=i.base,o=i.quote;return{symbol:e,timestamp:r,datetime:this.iso8601(r),high:void 0,low:void 0,bid:parseFloat(s.bid),ask:parseFloat(s.ask),vwap:void 0,open:void 0,close:void 0,first:void 0,last:parseFloat(s.last),change:void 0,percentage:void 0,average:void 0,baseVolume:parseFloat(s.volume[a]),quoteVolume:parseFloat(s.volume[o]),info:s}}parseTrade(e,t){let i=e.timestampms;return{id:e.tid.toString(),info:e,timestamp:i,datetime:this.iso8601(i),symbol:t.symbol,type:void 0,side:e.type,price:parseFloat(e.price),amount:parseFloat(e.amount)}}async fetchTrades(e,t,i,s={}){await this.loadMarkets();let r=this.market(e),a=await this.publicGetTradesSymbol(this.extend({symbol:r.id},s));return this.parseTrades(a,r,t,i)}async fetchBalance(e={}){await this.loadMarkets();let t=await this.privatePostBalances(),i={info:t};for(let s=0;s<t.length;s++){let e=t[s],r=e.currency,a={free:parseFloat(e.available),used:0,total:parseFloat(e.amount)};a.used=a.total-a.free,i[r]=a}return this.parseBalance(i)}async createOrder(e,t,i,s,a,o={}){if(await this.loadMarkets(),"market"==t)throw new r(this.id+" allows limit orders only");let n={client_order_id:this.nonce().toString(),symbol:this.marketId(e),amount:s.toString(),price:a.toString(),side:i,type:"exchange limit"},d=await this.privatePostOrderNew(this.extend(n,o));return{info:d,id:d.order_id}}async cancelOrder(e,t,i={}){return await this.loadMarkets(),await this.privatePostCancelOrder({order_id:e})}sign(e,t="public",i="GET",s={},r,a){let o="/"+this.version+"/"+this.implodeParams(e,s),n=this.omit(s,this.extractParams(e));if("public"==t)Object.keys(n).length&&(o+="?"+this.urlencode(n));else{this.checkRequiredCredentials();let e=this.nonce(),t=this.extend({request:o,nonce:e},n),i=this.json(t);i=this.stringToBase64(this.encode(i));let s=this.hmac(i,this.encode(this.secret),"sha384");r={"Content-Type":"text/plain","X-GEMINI-APIKEY":this.apiKey,"X-GEMINI-PAYLOAD":this.decode(i),"X-GEMINI-SIGNATURE":s}}return o=this.urls.api+o,{url:o,method:i,body:a,headers:r}}async request(e,t="public",i="GET",s={},a,o){let n=await this.fetch2(e,t,i,s,a,o);if("result"in n&&"error"==n.result)throw new r(this.id+" "+this.json(n));return n}}},function(e,t,i){"use strict";const s=i(328);e.exports=class extends s{describe(){return this.deepExtend(super.describe(),{id:"getbtc",name:"GetBTC",countries:["VC","RU"],rateLimit:1e3,urls:{logo:"https://user-images.githubusercontent.com/1294454/33801902-03c43462-dd7b-11e7-992e-077e4cd015b9.jpg",api:"https://getbtc.org/api",www:"https://getbtc.org",doc:"https://getbtc.org/api-docs.php"},markets:{"BTC/EUR":{id:"EUR",symbol:"BTC/EUR",base:"BTC",quote:"EUR",precision:{amount:8,price:8},lot:1e-8,limits:{amount:{min:1e-8,max:void 0},price:{min:1e-8,max:void 0}}},"BTC/RUB":{id:"RUB",symbol:"BTC/RUB",base:"BTC",quote:"RUB",precision:{amount:8,price:8},lot:1e-8,limits:{amount:{min:1e-8,max:void 0},price:{min:1e-8,max:void 0}}},"BTC/USD":{id:"USD",symbol:"BTC/USD",base:"BTC",quote:"USD",precision:{amount:8,price:8},lot:1e-8,limits:{amount:{min:1e-8,max:void 0},price:{min:1e-8,max:void 0}}}},fees:{trading:{taker:.002,maker:.002}}})}}},function(e,t,i){"use strict";const s=i(336),{ExchangeError:r,OrderNotFound:a,InsufficientFunds:o}=i(309);e.exports=class extends s{describe(){return this.deepExtend(super.describe(),{id:"hitbtc2",name:"HitBTC v2",countries:"HK",rateLimit:1500,version:"2",hasCORS:!0,hasFetchOHLCV:!0,hasFetchTickers:!0,hasFetchOrder:!0,hasFetchOrders:!1,hasFetchOpenOrders:!0,hasFetchClosedOrders:!0,hasFetchMyTrades:!0,hasWithdraw:!0,hasFetchCurrencies:!0,has:{fetchCurrencies:!0,fetchOHLCV:!0,fetchTickers:!0,fetchOrder:!0,fetchOrders:!1,fetchOpenOrders:!0,fetchClosedOrders:!0,fetchMyTrades:!0,withdraw:!0},timeframes:{"1m":"M1","3m":"M3","5m":"M5","15m":"M15","30m":"M30","1h":"H1","4h":"H4","1d":"D1","1w":"D7","1M":"1M"},urls:{logo:"https://user-images.githubusercontent.com/1294454/27766555-8eaec20e-5edc-11e7-9c5b-6dc69fc42f5e.jpg",api:"https://api.hitbtc.com",www:"https://hitbtc.com",doc:"https://api.hitbtc.com"},api:{public:{get:["symbol","symbol/{symbol}","currency","currency/{currency}","ticker","ticker/{symbol}","trades/{symbol}","orderbook/{symbol}","candles/{symbol}"]},private:{get:["order","order/{clientOrderId}","trading/balance","trading/fee/{symbol}","history/trades","history/order","history/order/{id}/trades","account/balance","account/transactions","account/transactions/{id}","account/crypto/address/{currency}"],post:["order","account/crypto/withdraw","account/crypto/address/{currency}","account/transfer"],put:["order/{clientOrderId}","account/crypto/withdraw/{id}"],delete:["order","order/{clientOrderId}","account/crypto/withdraw/{id}"],patch:["order/{clientOrderId}"]}},fees:{trading:{tierBased:!1,percentage:!0,maker:-1e-4,taker:.001},funding:{tierBased:!1,percentage:!1,withdraw:{BTC:9e-4,ETH:.00958,BCH:.0018,USDT:5,BTG:5e-4,LTC:.003,ZEC:1e-4,XMR:.09,"1ST":.84,ADX:5.7,AE:6.7,AEON:.01006,AIR:565,AMP:9,ANT:6.7,ARDR:2,ARN:18.5,ART:26,ATB:4e-4,ATL:27,ATM:504,ATS:860,AVT:1.9,BAS:113,BCN:.1,BET:124,BKB:46,BMC:32,BMT:100,BNT:2.57,BQX:4.7,BTM:40,BTX:.04,BUS:.004,CCT:115,CDT:100,CDX:30,CFI:61,CLD:.88,CND:574,CNX:.04,COSS:65,CSNO:16,CTR:15,CTX:146,CVC:8.46,DBIX:.0168,DCN:12e4,DCT:.02,DDF:342,DENT:6240,DGB:.4,DGD:.01,DICE:.32,DLT:.26,DNT:.21,DOGE:2,DOV:34,DRPU:24,DRT:240,DSH:.017,EBET:84,EBTC:20,EBTCOLD:6.6,ECAT:14,EDG:2,EDO:2.9,ELE:.00172,ELM:.004,EMC:.03,EMGO:14,ENJ:163,EOS:1.5,ERO:34,ETBS:15,ETC:.002,ETP:.004,EVX:5.4,EXN:456,FRD:65,FUEL:123.00105,FUN:202.9598309,FYN:1.849,FYP:66.13,GNO:.0034,GUP:4,GVT:1.2,HAC:144,HDG:7,HGT:1082,HPC:.4,HVN:120,ICN:.55,ICO:34,ICOS:.35,IND:76,INDI:5913,ITS:15.0012,IXT:11,KBR:143,KICK:112,LA:41,LAT:1.44,LIFE:13e3,LRC:27,LSK:.3,LUN:.34,MAID:5,MANA:143,MCAP:5.44,MIPS:43,MNE:1.33,MSP:121,MTH:92,MYB:3.9,NDC:165,NEBL:.04,NET:3.96,NTO:998,NXC:13.39,NXT:3,OAX:15,ODN:.004,OMG:2,OPT:335,ORME:2.8,OTN:.57,PAY:3.1,PIX:96,PLBT:.33,PLR:114,PLU:.87,POE:784,POLL:3.5,PPT:2,PRE:32,PRG:39,PRO:41,PRS:60,PTOY:.5,QAU:63,QCN:.03,QTUM:.04,QVT:64,REP:.02,RKC:15,RVT:14,SAN:2.24,SBD:.03,SCL:2.6,SISA:1640,SKIN:407,SMART:.4,SMS:.0375,SNC:36,SNGLS:4,SNM:48,SNT:233,STEEM:.01,STRAT:.01,STU:14,STX:11,SUB:17,SUR:3,SWT:.51,TAAS:.91,TBT:2.37,TFL:15,TIME:.03,TIX:7.1,TKN:1,TKR:84,TNT:90,TRST:1.6,TRX:1395,UET:480,UGT:15,VEN:14,VERI:.037,VIB:50,VIBE:145,VOISE:618,WEALTH:.0168,WINGS:2.4,WTC:.75,XAUR:3.23,XDN:.01,XEM:15,XUC:.9,YOYOW:140,ZAP:24,ZRX:23,ZSC:191},deposit:{BTC:3e-4,ETH:0,BCH:0,USDT:0,BTG:0,LTC:0,ZEC:0,XMR:0,"1ST":0,ADX:0,AE:0,AEON:0,AIR:0,AMP:0,ANT:0,ARDR:0,ARN:0,ART:0,ATB:0,ATL:0,ATM:0,ATS:0,AVT:0,BAS:0,BCN:0,BET:0,BKB:0,BMC:0,BMT:0,BNT:0,BQX:0,BTM:0,BTX:0,BUS:0,CCT:0,CDT:0,CDX:0,CFI:0,CLD:0,CND:0,CNX:0,COSS:0,CSNO:0,CTR:0,CTX:0,CVC:0,DBIX:0,DCN:0,DCT:0,DDF:0,DENT:0,DGB:0,DGD:0,DICE:0,DLT:0,DNT:0,DOGE:0,DOV:0,DRPU:0,DRT:0,DSH:0,EBET:0,EBTC:0,EBTCOLD:0,ECAT:0,EDG:0,EDO:0,ELE:0,ELM:0,EMC:0,EMGO:0,ENJ:0,EOS:0,ERO:0,ETBS:0,ETC:0,ETP:0,EVX:0,EXN:0,FRD:0,FUEL:0,FUN:0,FYN:0,FYP:0,GNO:0,GUP:0,GVT:0,HAC:0,HDG:0,HGT:0,HPC:0,HVN:0,ICN:0,ICO:0,ICOS:0,IND:0,INDI:0,ITS:0,IXT:0,KBR:0,KICK:0,LA:0,LAT:0,LIFE:0,LRC:0,LSK:0,LUN:0,MAID:0,MANA:0,MCAP:0,MIPS:0,MNE:0,MSP:0,MTH:0,MYB:0,NDC:0,NEBL:0,NET:0,NTO:0,NXC:0,NXT:0,OAX:0,ODN:0,OMG:0,OPT:0,ORME:0,OTN:0,PAY:0,PIX:0,PLBT:0,PLR:0,PLU:0,POE:0,POLL:0,PPT:0,PRE:0,PRG:0,PRO:0,PRS:0,PTOY:0,QAU:0,QCN:0,QTUM:0,QVT:0,REP:0,RKC:0,RVT:0,SAN:0,SBD:0,SCL:0,SISA:0,SKIN:0,SMART:0,SMS:0,SNC:0,SNGLS:0,SNM:0,SNT:0,STEEM:0,STRAT:0,STU:0,STX:0,SUB:0,SUR:0,SWT:0,TAAS:0,TBT:0,TFL:0,TIME:0,TIX:0,TKN:0,TKR:0,TNT:0,TRST:0,TRX:0,UET:0,UGT:0,VEN:0,VERI:0,VIB:0,VIBE:0,VOISE:0,WEALTH:0,WINGS:0,WTC:0,XAUR:0,XDN:0,XEM:0,XUC:0,YOYOW:0,ZAP:0,ZRX:0,ZSC:0}}}})}currencyId(e){return"BitClave"==e?"CAT":e}feeToPrecision(e,t){return this.truncate(t,8)}async fetchMarkets(){let e=await this.publicGetSymbol(),t=[];for(let i=0;i<e.length;i++){let s=e[i],r=s.id,a=s.baseCurrency,o=s.quoteCurrency,n=this.commonCurrencyCode(a),d=this.commonCurrencyCode(o),c=n+"/"+d,h=parseFloat(s.quantityIncrement),l=parseFloat(s.tickSize),u={price:this.precisionFromString(s.tickSize),amount:this.precisionFromString(s.quantityIncrement)},p=parseFloat(s.takeLiquidityRate),m=parseFloat(s.provideLiquidityRate);t.push(this.extend(this.fees.trading,{info:s,id:r,symbol:c,base:n,quote:d,baseId:a,quoteId:o,active:!0,lot:h,step:l,taker:p,maker:m,precision:u,limits:{amount:{min:h,max:void 0},price:{min:l,max:void 0},cost:{min:h*l,max:void 0}}}))}return t}async fetchCurrencies(e={}){let t=await this.publicGetCurrency(e),i={};for(let s=0;s<t.length;s++){let e=t[s],r=e.id,a=this.commonCurrencyCode(r),o=e.payinEnabled,n=e.payoutEnabled,d=e.transferEnabled,c=o&&n&&d,h="ok";"disabled"in e&&e.disabled&&(h="disabled");let l=e.crypto?"crypto":"fiat";i[a]={id:r,code:a,type:l,payin:o,payout:n,transfer:d,info:e,name:e.fullName,active:c,status:h,fee:void 0,precision:8,limits:{amount:{min:Math.pow(10,-8),max:Math.pow(10,8)},price:{min:Math.pow(10,-8),max:Math.pow(10,8)},cost:{min:void 0,max:void 0},withdraw:{min:void 0,max:Math.pow(10,8)}}}}return i}async fetchBalance(e={}){await this.loadMarkets();let t=this.safeString(e,"type","trading"),i="privateGet"+this.capitalize(t)+"Balance",s=await this[i](),r={info:s};for(let a=0;a<s.length;a++){let e=s[a],t=e.currency,i=this.commonCurrencyCode(t),o={free:parseFloat(e.available),used:parseFloat(e.reserved),total:0};o.total=this.sum(o.free,o.used),r[i]=o}return this.parseBalance(r)}parseOHLCV(e,t,i="1d",s,r){return[this.parse8601(e.timestamp),parseFloat(e.open),parseFloat(e.max),parseFloat(e.min),parseFloat(e.close),parseFloat(e.volumeQuote)]}async fetchOHLCV(e,t="1m",i,s,r={}){await this.loadMarkets();let a=this.market(e),o={symbol:a.id,period:this.timeframes[t]};s&&(o.limit=s);let n=await this.publicGetCandlesSymbol(this.extend(o,r));return this.parseOHLCVs(n,a,t,i,s)}async fetchOrderBook(e,t={}){await this.loadMarkets();let i=await this.publicGetOrderbookSymbol(this.extend({symbol:this.marketId(e)},t));return this.parseOrderBook(i,void 0,"bid","ask","price","size")}parseTicker(e,t){let i=this.parse8601(e.timestamp),s=void 0;return t&&(s=t.symbol),{symbol:s,timestamp:i,datetime:this.iso8601(i),high:this.safeFloat(e,"high"),low:this.safeFloat(e,"low"),bid:this.safeFloat(e,"bid"),ask:this.safeFloat(e,"ask"),vwap:void 0,open:this.safeFloat(e,"open"),close:this.safeFloat(e,"close"),first:void 0,last:this.safeFloat(e,"last"),change:void 0,percentage:void 0,average:void 0,baseVolume:this.safeFloat(e,"volume"),quoteVolume:this.safeFloat(e,"volumeQuote"),info:e}}async fetchTickers(e,t={}){await this.loadMarkets();let i=await this.publicGetTicker(t),s={};for(let r=0;r<i.length;r++){let e=i[r],t=e.symbol,a=this.markets_by_id[t];s[a.symbol]=this.parseTicker(e,a)}return s}async fetchTicker(e,t={}){await this.loadMarkets();let i=this.market(e),s=await this.publicGetTickerSymbol(this.extend({symbol:i.id},t));if("message"in s)throw new r(this.id+" "+s.message);return this.parseTicker(s,i)}parseTrade(e,t){let i=this.parse8601(e.timestamp),s=void 0;if(t)s=t.symbol;else{let i=e.symbol;s=i in this.markets_by_id?(t=this.markets_by_id[i]).symbol:i}let r=void 0;if("fee"in e){let i=t?t.quote:void 0;r={cost:parseFloat(e.fee),currency:i}}let a=void 0;"clientOrderId"in e&&(a=e.clientOrderId);let o=parseFloat(e.price),n=parseFloat(e.quantity),d=o*n;return{info:e,id:e.id.toString(),order:a,timestamp:i,datetime:this.iso8601(i),symbol:s,type:void 0,side:e.side,price:o,amount:n,cost:d,fee:r}}async fetchTrades(e,t,i,s={}){await this.loadMarkets();let r=this.market(e),a=await this.publicGetTradesSymbol(this.extend({symbol:r.id},s));return this.parseTrades(a,r,t,i)}async createOrder(e,t,i,s,r,a={}){await this.loadMarkets();let o=this.market(e),n=this.uuid().split("-").join("");n=n.slice(0,32),s=parseFloat(s);let d={clientOrderId:n,symbol:o.id,side:i,quantity:this.amountToPrecision(e,s),type:t};"limit"==t?d.price=this.priceToPrecision(e,r):d.timeInForce="FOK";let c=await this.privatePostOrder(this.extend(d,a)),h=this.parseOrder(c),l=h.id;return this.orders[l]=h,h}async cancelOrder(e,t,i={}){return await this.loadMarkets(),await this.privateDeleteOrderClientOrderId(this.extend({clientOrderId:e},i))}parseOrder(e,t){let i=void 0;"createdAt"in e&&(i=this.parse8601(e.createdAt));let s=void 0;"updatedAt"in e&&(s=this.parse8601(e.updatedAt)),t||(t=this.markets_by_id[e.symbol]);let r=t.symbol,a=this.safeFloat(e,"quantity"),o=this.safeFloat(e,"cumQuantity"),n=e.status;"new"==n?n="open":"suspended"==n?n="open":"partiallyFilled"==n?n="open":"filled"==n&&(n="closed");let d=e.clientOrderId.toString(),c=this.safeFloat(e,"price");"undefined"==typeof c&&d in this.orders&&(c=this.orders[d].price);let h=void 0,l=void 0;return"undefined"!=typeof a&&"undefined"!=typeof o&&(h=a-o,"undefined"!=typeof c&&(l=o*c)),{id:d,timestamp:i,datetime:this.iso8601(i),created:i,updated:s,status:n,symbol:r,type:e.type,side:e.side,price:c,amount:a,cost:l,filled:o,remaining:h,fee:void 0,info:e}}async fetchOrder(e,t,i={}){await this.loadMarkets();let s=await this.privateGetHistoryOrder(this.extend({clientOrderId:e},i));if(s.length>0)return this.parseOrder(s[0]);throw new a(this.id+" order "+e+" not found")}async fetchActiveOrder(e,t,i={}){await this.loadMarkets();let s=await this.privateGetOrderClientOrderId(this.extend({clientOrderId:e},i));return this.parseOrder(s)}async fetchOpenOrders(e,t,i,s={}){await this.loadMarkets();let r=void 0,a={};e&&(r=this.market(e),a.symbol=r.id);let o=await this.privateGetOrder(this.extend(a,s));return this.parseOrders(o,r,t,i)}async fetchClosedOrders(e,t,i,s={}){await this.loadMarkets();let r=void 0,a={};e&&(r=this.market(e),a.symbol=r.id),i&&(a.limit=i),t&&(a.from=this.iso8601(t));let o=await this.privateGetHistoryOrder(this.extend(a,s));return this.parseOrders(o,r,t,i)}async fetchMyTrades(e,t,i,s={}){await this.loadMarkets();let r={},a=void 0;e&&(a=this.market(e),r.symbol=a.id),t&&(r.from=this.iso8601(t)),i&&(r.limit=i);let o=await this.privateGetHistoryTrades(this.extend(r,s));return this.parseTrades(o,a,t,i)}async createDepositAddress(e,t={}){let i=this.currencyId(e),s=await this.privatePostAccountCryptoAddressCurrency({currency:i});return{currency:e,address:s.address,status:"ok",info:s}}async fetchDepositAddress(e,t={}){let i=this.currencyId(e),s=await this.privateGetAccountCryptoAddressCurrency({currency:i});return{currency:e,address:s.address,status:"ok",info:s}}async withdraw(e,t,i,s={}){let r=this.currency(e),a=await this.privatePostAccountCryptoWithdraw(this.extend({currency:r.id,amount:parseFloat(t),address:i},s));return{info:a,id:a.id}}sign(e,t="public",i="GET",s={},r,a){let o="/api/"+this.version+"/",n=this.omit(s,this.extractParams(e));if("public"==t)o+=t+"/"+this.implodeParams(e,s),Object.keys(n).length&&(o+="?"+this.urlencode(n));else{this.checkRequiredCredentials(),o+=this.implodeParams(e,s),"GET"==i?Object.keys(n).length&&(o+="?"+this.urlencode(n)):Object.keys(n).length&&(a=this.json(n));let t=this.encode(this.apiKey+":"+this.secret),d=this.stringToBase64(t);r={Authorization:"Basic "+this.decode(d),"Content-Type":"application/json"}}return o=this.urls.api+o,{url:o,method:i,body:a,headers:r}}handleErrors(e,t,i,s,n,d){if(400==e){if("{"==d[0]){let e=JSON.parse(d);if("error"in e&&"message"in e.error){let t=e.error.message;if("Order not found"==t)throw new a(this.id+" order not found in active orders");if("Insufficient funds"==t)throw new o(this.id+" "+t)}}throw new r(this.id+" "+d)}}async request(e,t="public",i="GET",s={},a,o){let n=await this.fetch2(e,t,i,s,a,o);if("error"in n)throw new r(this.id+" "+this.json(n));return n}}},function(e,t,i){"use strict";const s=i(310),{ExchangeError:r}=i(309);e.exports=class extends s{describe(){return this.deepExtend(super.describe(),{id:"huobi",name:"Huobi",countries:"CN",rateLimit:2e3,version:"v3",hasCORS:!1,hasFetchOHLCV:!0,timeframes:{"1m":"001","5m":"005","15m":"015","30m":"030","1h":"060","1d":"100","1w":"200","1M":"300","1y":"400"},urls:{logo:"https://user-images.githubusercontent.com/1294454/27766569-15aa7b9a-5edd-11e7-9e7f-44791f4ee49c.jpg",api:"http://api.huobi.com",www:"https://www.huobi.com",doc:"https://github.com/huobiapi/API_Docs_en/wiki"},api:{staticmarket:{get:["{id}_kline_{period}","ticker_{id}","depth_{id}","depth_{id}_{length}","detail_{id}"]},usdmarket:{get:["{id}_kline_{period}","ticker_{id}","depth_{id}","depth_{id}_{length}","detail_{id}"]},trade:{post:["get_account_info","get_orders","order_info","buy","sell","buy_market","sell_market","cancel_order","get_new_deal_orders","get_order_id_by_trade_id","withdraw_coin","cancel_withdraw_coin","get_withdraw_coin_result","transfer","loan","repayment","get_loan_available","get_loans"]}},markets:{"BTC/CNY":{id:"btc",symbol:"BTC/CNY",base:"BTC",quote:"CNY",type:"staticmarket",coinType:1},"LTC/CNY":{id:"ltc",symbol:"LTC/CNY",base:"LTC",quote:"CNY",type:"staticmarket",coinType:2}}})}async fetchBalance(e={}){let t=await this.tradePostGetAccountInfo(),i={info:t},s=Object.keys(this.currencies);for(let r=0;r<s.length;r++){let e=s[r],a=e.toLowerCase(),o=this.account(),n="available_"+a+"_display",d="frozen_"+a+"_display",c="loan_"+a+"_display";n in t&&(o.free=parseFloat(t[n])),d in t&&(o.used=parseFloat(t[d])),c in t&&(o.used=this.sum(o.used,parseFloat(t[c]))),o.total=this.sum(o.free,o.used),i[e]=o}return this.parseBalance(i)}async fetchOrderBook(e,t={}){let i=this.market(e),s=i.type+"GetDepthId",r=await this[s](this.extend({id:i.id},t));return this.parseOrderBook(r)}async fetchTicker(e,t={}){let i=this.market(e),s=i.type+"GetTickerId",r=await this[s](this.extend({id:i.id},t)),a=r.ticker,o=1e3*parseInt(r.time);return{symbol:e,timestamp:o,datetime:this.iso8601(o),high:this.safeFloat(a,"high"),low:this.safeFloat(a,"low"),bid:this.safeFloat(a,"buy"),ask:this.safeFloat(a,"sell"),vwap:void 0,open:this.safeFloat(a,"open"),close:void 0,first:void 0,last:this.safeFloat(a,"last"),change:void 0,percentage:void 0,average:void 0,baseVolume:void 0,quoteVolume:this.safeFloat(a,"vol"),info:a}}parseTrade(e,t){let i=e.ts;return{info:e,id:e.id.toString(),order:void 0,timestamp:i,datetime:this.iso8601(i),symbol:t.symbol,type:void 0,side:e.direction,price:e.price,amount:e.amount}}async fetchTrades(e,t,i,s={}){let r=this.market(e),a=r.type+"GetDetailId",o=await this[a](this.extend({id:r.id},s));return this.parseTrades(o.trades,r,t,i)}parseOHLCV(e,t,i="1m",s,r){return[e[0],e[1],e[2],e[3],e[4],e[6]]}async fetchOHLCV(e,t="1m",i,s,r={}){let a=this.market(e),o=a.type+"GetIdKlinePeriod";return await this[o](this.extend({id:a.id,period:this.timeframes[t]},r))}async createOrder(e,t,i,s,r,a={}){let o=this.market(e),n="tradePost"+this.capitalize(i),d={coin_type:o.coinType,amount:s,market:o.quote.toLowerCase()};"limit"==t?d.price=r:n+=this.capitalize(t);let c=this[n](this.extend(d,a));return{info:c,id:c.id}}async cancelOrder(e,t,i={}){return await this.tradePostCancelOrder({id:e})}sign(e,t="public",i="GET",s={},r,a){let o=this.urls.api;if("trade"==t){this.checkRequiredCredentials(),o+="/api"+this.version;let t=this.keysort(this.extend({method:e,access_key:this.apiKey,created:this.nonce()},s)),i=this.urlencode(this.omit(t,"market"));i+="&secret_key="+this.secret,t.sign=this.hash(this.encode(i)),a=this.urlencode(t),r={"Content-Type":"application/x-www-form-urlencoded"}}else{o+="/"+t+"/"+this.implodeParams(e,s)+"_json.js";let i=this.omit(s,this.extractParams(e));Object.keys(i).length&&(o+="?"+this.urlencode(i))}return{url:o,method:i,body:a,headers:r}}async request(e,t="trade",i="GET",s={},a,o){let n=await this.fetch2(e,t,i,s,a,o);if("status"in n&&"error"==n.status)throw new r(this.id+" "+this.json(n));if("code"in n)throw new r(this.id+" "+this.json(n));return n}}},function(e,t,i){"use strict";const s=i(337);e.exports=class extends s{describe(){return this.deepExtend(super.describe(),{id:"huobicny",name:"Huobi CNY",hostname:"be.huobi.com",hasCORS:!1,urls:{logo:"https://user-images.githubusercontent.com/1294454/27766569-15aa7b9a-5edd-11e7-9e7f-44791f4ee49c.jpg",api:"https://be.huobi.com",www:"https://www.huobi.com",doc:"https://github.com/huobiapi/API_Docs/wiki/REST_api_reference"}})}}},function(e,t,i){"use strict";const s=i(310);e.exports=class extends s{describe(){return this.deepExtend(super.describe(),{id:"independentreserve",name:"Independent Reserve",countries:["AU","NZ"],rateLimit:1e3,hasCORS:!1,urls:{logo:"https://user-images.githubusercontent.com/1294454/30521662-cf3f477c-9bcb-11e7-89bc-d1ac85012eda.jpg",api:{public:"https://api.independentreserve.com/Public",private:"https://api.independentreserve.com/Private"},www:"https://www.independentreserve.com",doc:"https://www.independentreserve.com/API"},api:{public:{get:["GetValidPrimaryCurrencyCodes","GetValidSecondaryCurrencyCodes","GetValidLimitOrderTypes","GetValidMarketOrderTypes","GetValidOrderTypes","GetValidTransactionTypes","GetMarketSummary","GetOrderBook","GetTradeHistorySummary","GetRecentTrades","GetFxRates"]},private:{post:["PlaceLimitOrder","PlaceMarketOrder","CancelOrder","GetOpenOrders","GetClosedOrders","GetClosedFilledOrders","GetOrderDetails","GetAccounts","GetTransactions","GetDigitalCurrencyDepositAddress","GetDigitalCurrencyDepositAddresses","SynchDigitalCurrencyDepositAddressWithBlockchain","WithdrawDigitalCurrency","RequestFiatWithdrawal","GetTrades"]}}})}async fetchMarkets(){let e=await this.publicGetValidPrimaryCurrencyCodes(),t=await this.publicGetValidSecondaryCurrencyCodes(),i=[];for(let s=0;s<e.length;s++){let r=e[s],a=r.toUpperCase(),o=this.commonCurrencyCode(a);for(let e=0;e<t.length;e++){let s=t[e],a=s.toUpperCase(),n=this.commonCurrencyCode(a),d=r+"/"+s,c=o+"/"+n;i.push({id:d,symbol:c,base:o,quote:n,baseId:r,quoteId:s,taker:.005,maker:.005,info:d})}}return i}async fetchBalance(e={}){await this.loadMarkets();let t=await this.privatePostGetAccounts(),i={info:t};for(let s=0;s<t.length;s++){let e=t[s],r=e.CurrencyCode.toUpperCase(),a=this.commonCurrencyCode(r),o=this.account();o.free=e.AvailableBalance,o.total=e.TotalBalance,o.used=o.total-o.free,i[a]=o}return this.parseBalance(i)}async fetchOrderBook(e,t={}){await this.loadMarkets();let i=this.market(e),s=await this.publicGetOrderBook(this.extend({primaryCurrencyCode:i.baseId,secondaryCurrencyCode:i.quoteId},t)),r=this.parse8601(s.CreatedTimestampUtc);return this.parseOrderBook(s,r,"BuyOrders","SellOrders","Price","Volume")}parseTicker(e,t){let i=this.parse8601(e.CreatedTimestampUtc),s=void 0;return t&&(s=t.symbol),{symbol:s,timestamp:i,datetime:this.iso8601(i),high:e.DayHighestPrice,low:e.DayLowestPrice,bid:e.CurrentHighestBidPrice,ask:e.CurrentLowestOfferPrice,vwap:void 0,open:void 0,close:void 0,first:void 0,last:e.LastPrice,change:void 0,percentage:void 0,average:e.DayAvgPrice,baseVolume:e.DayVolumeXbtInSecondaryCurrrency,quoteVolume:void 0,info:e}}async fetchTicker(e,t={}){await this.loadMarkets();let i=this.market(e),s=await this.publicGetMarketSummary(this.extend({primaryCurrencyCode:i.baseId,secondaryCurrencyCode:i.quoteId},t));return this.parseTicker(s,i)}parseTrade(e,t){let i=this.parse8601(e.TradeTimestampUtc);return{id:void 0,info:e,timestamp:i,datetime:this.iso8601(i),symbol:t.symbol,order:void 0,type:void 0,side:void 0,price:e.SecondaryCurrencyTradePrice,amount:e.PrimaryCurrencyAmount}}async fetchTrades(e,t,i,s={}){await this.loadMarkets();let r=this.market(e),a=await this.publicGetRecentTrades(this.extend({primaryCurrencyCode:r.baseId,secondaryCurrencyCode:r.quoteId,numberOfRecentTradesToRetrieve:50},s));return this.parseTrades(a.Trades,r,t,i)}async createOrder(e,t,i,s,r,a={}){await this.loadMarkets();let o=this.market(e),n=this.capitalize(t),d="Place"+n+"Order",c=n;c+="sell"==i?"Offer":"Bid";let h=this.ordered({primaryCurrencyCode:o.baseId,secondaryCurrencyCode:o.quoteId,orderType:c});"limit"==t&&(h.price=r),h.volume=s;let l=await this[d](this.extend(h,a));return{info:l,id:l.OrderGuid}}async cancelOrder(e,t,i={}){return await this.loadMarkets(),await this.privatePostCancelOrder({orderGuid:e})}sign(e,t="public",i="GET",s={},r,a){let o=this.urls.api[t]+"/"+e;if("public"==t)Object.keys(s).length&&(o+="?"+this.urlencode(s));else{this.checkRequiredCredentials();let e=this.nonce(),t=[o,"apiKey="+this.apiKey,"nonce="+e.toString()],i=this.keysort(s),n=Object.keys(i);for(let r=0;r<n.length;r++){let e=n[r];t.push(e+"="+s[e])}let d=t.join(","),c=this.hmac(this.encode(d),this.encode(this.secret)),h=this.keysort(this.extend({apiKey:this.apiKey,nonce:e,signature:c},s));a=this.json(h),r={"Content-Type":"application/json"}}return{url:o,method:i,body:a,headers:r}}async request(e,t="public",i="GET",s={},r,a){return await this.fetch2(e,t,i,s,r,a)}}},function(e,t,i){"use strict";const s=i(310),{ExchangeError:r}=i(309);e.exports=class extends s{describe(){return this.deepExtend(super.describe(),{id:"itbit",name:"itBit",countries:"US",rateLimit:2e3,version:"v1",hasCORS:!0,urls:{logo:"https://user-images.githubusercontent.com/1294454/27822159-66153620-60ad-11e7-89e7-005f6d7f3de0.jpg",api:"https://api.itbit.com",www:"https://www.itbit.com",doc:["https://api.itbit.com/docs","https://www.itbit.com/api"]},api:{public:{get:["markets/{symbol}/ticker","markets/{symbol}/order_book","markets/{symbol}/trades"]},private:{get:["wallets","wallets/{walletId}","wallets/{walletId}/balances/{currencyCode}","wallets/{walletId}/funding_history","wallets/{walletId}/trades","wallets/{walletId}/orders/{id}"],post:["wallet_transfers","wallets","wallets/{walletId}/cryptocurrency_deposits","wallets/{walletId}/cryptocurrency_withdrawals","wallets/{walletId}/orders","wire_withdrawal"],delete:["wallets/{walletId}/orders/{id}"]}},markets:{"BTC/USD":{id:"XBTUSD",symbol:"BTC/USD",base:"BTC",quote:"USD"},"BTC/SGD":{id:"XBTSGD",symbol:"BTC/SGD",base:"BTC",quote:"SGD"},"BTC/EUR":{id:"XBTEUR",symbol:"BTC/EUR",base:"BTC",quote:"EUR"}},fees:{trading:{maker:0,taker:.002}}})}async fetchOrderBook(e,t={}){let i=await this.publicGetMarketsSymbolOrderBook(this.extend({symbol:this.marketId(e)},t));return this.parseOrderBook(i)}async fetchTicker(e,t={}){let i=await this.publicGetMarketsSymbolTicker(this.extend({symbol:this.marketId(e)},t));if(!("serverTimeUTC"in i))throw new r(this.id+" fetchTicker returned a bad response: "+this.json(i));let s=this.parse8601(i.serverTimeUTC),a=parseFloat(i.vwap24h),o=parseFloat(i.volume24h),n=o*a;return{symbol:e,timestamp:s,datetime:this.iso8601(s),high:parseFloat(i.high24h),low:parseFloat(i.low24h),bid:this.safeFloat(i,"bid"),ask:this.safeFloat(i,"ask"),vwap:a,open:parseFloat(i.openToday),close:void 0,first:void 0,last:parseFloat(i.lastPrice),change:void 0,percentage:void 0,average:void 0,baseVolume:o,quoteVolume:n,info:i}}parseTrade(e,t){let i=this.parse8601(e.timestamp),s=e.matchNumber.toString();return{info:e,timestamp:i,datetime:this.iso8601(i),symbol:t.symbol,id:s,order:s,type:void 0,side:void 0,price:parseFloat(e.price),amount:parseFloat(e.amount)}}async fetchTrades(e,t,i,s={}){let r=this.market(e),a=await this.publicGetMarketsSymbolTrades(this.extend({symbol:r.id},s));return this.parseTrades(a.recentTrades,r,t,i)}async fetchBalance(e={}){let t=await this.privateGetBalances(),i=t.balances,s={info:t};for(let r=0;r<i.length;r++){let e=i[r],t=e.currency,a={free:parseFloat(e.availableBalance),used:0,total:parseFloat(e.totalBalance)};a.used=a.total-a.free,s[t]=a}return this.parseBalance(s)}fetchWallets(){return this.privateGetWallets()}nonce(){return this.milliseconds()}async createOrder(e,t,i,s,a,o={}){if("market"==t)throw new r(this.id+" allows limit orders only");if(!("walletId"in o))throw new r(this.id+" createOrder requires a walletId parameter");s=s.toString(),a=a.toString();let n=this.market(e),d={side:i,type:t,currency:n.base,amount:s,display:s,price:a,instrument:n.id},c=await this.privatePostTradeAdd(this.extend(d,o));return{info:c,id:c.id}}async cancelOrder(e,t,i={}){if(!("walletId"in i))throw new r(this.id+" cancelOrder requires a walletId parameter");return await this.privateDeleteWalletsWalletIdOrdersId(this.extend({id:e},i))}sign(e,t="public",i="GET",s={},r,a){let o=this.urls.api+"/"+this.version+"/"+this.implodeParams(e,s),n=this.omit(s,this.extractParams(e));if("public"==t)Object.keys(n).length&&(o+="?"+this.urlencode(n));else{this.checkRequiredCredentials(),a=Object.keys(n).length?this.json(n):"";let e=this.nonce().toString(),t=e,s=[i,o,a,e,t],d=e+this.json(s),c=this.hash(this.encode(d),"sha256","binary"),h=this.binaryConcat(o,c),l=this.hmac(h,this.encode(this.secret),"sha512","base64");r={Authorization:self.apiKey+":"+l,"Content-Type":"application/json","X-Auth-Timestamp":t,"X-Auth-Nonce":e}}return{url:o,method:i,body:a,headers:r}}async request(e,t="public",i="GET",s={},a,o){let n=await this.fetch2(e,t,i,s,a,o);if("code"in n)throw new r(this.id+" "+this.json(n));return n}}},function(e,t,i){"use strict";const s=i(331);e.exports=class extends s{describe(){return this.deepExtend(super.describe(),{id:"jubi",name:"jubi.com",countries:"CN",rateLimit:1500,version:"v1",hasCORS:!1,hasFetchTickers:!0,urls:{logo:"https://user-images.githubusercontent.com/1294454/27766581-9d397d9a-5edd-11e7-8fb9-5d8236c0e692.jpg",api:"https://www.jubi.com/api",www:"https://www.jubi.com",doc:"https://www.jubi.com/help/api.html"}})}async fetchMarkets(){let e=await this.publicGetAllticker(),t=Object.keys(e),i=[];for(let s=0;s<t.length;s++){let e=t[s],r=e.toUpperCase(),a="CNY",o=r+"/"+a;r=this.commonCurrencyCode(r),a=this.commonCurrencyCode(a),i.push({id:e,symbol:o,base:r,quote:a,info:e})}return i}}},function(e,t,i){"use strict";const s=i(310),{ExchangeNotAvailable:r,ExchangeError:a,OrderNotFound:o,DDoSProtection:n,InvalidNonce:d,InsufficientFunds:c,CancelPending:h,InvalidOrder:l}=i(309);e.exports=class extends s{describe(){return this.deepExtend(super.describe(),{id:"kraken",name:"Kraken",countries:"US",version:"0",rateLimit:3e3,hasCORS:!1,hasFetchTickers:!0,hasFetchOHLCV:!0,hasFetchOrder:!0,hasFetchOpenOrders:!0,hasFetchClosedOrders:!0,hasFetchMyTrades:!0,hasWithdraw:!0,hasFetchCurrencies:!0,has:{fetchCurrencies:!0,fetchTickers:!0,fetchOHLCV:!0,fetchOrder:!0,fetchOpenOrders:!0,fetchClosedOrders:!0,fetchMyTrades:!0,withdraw:!0},marketsByAltname:{},timeframes:{"1m":"1","5m":"5","15m":"15","30m":"30","1h":"60","4h":"240","1d":"1440","1w":"10080","2w":"21600"},urls:{logo:"https://user-images.githubusercontent.com/1294454/27766599-22709304-5ede-11e7-9de1-9f33732e1509.jpg",api:"https://api.kraken.com",www:"https://www.kraken.com",doc:["https://www.kraken.com/en-us/help/api","https://github.com/nothingisdead/npm-kraken-api"],fees:["https://www.kraken.com/en-us/help/fees","https://support.kraken.com/hc/en-us/articles/201396777-What-are-the-deposit-fees-","https://support.kraken.com/hc/en-us/articles/201893608-What-are-the-withdrawal-fees-"]},fees:{trading:{tierBased:!0,percentage:!0,taker:.0026,maker:.0016,tiers:{taker:[[0,.0026],[5e4,.0024],[1e5,.0022],[25e4,.002],[5e5,.0018],[1e6,.0016],[25e5,.14/100],[5e6,.0012],[1e7,.001]],maker:[[0,.0016],[5e4,.14/100],[1e5,.0012],[25e4,.001],[5e5,.008],[1e6,.006],[25e5,.004],[5e6,.002],[1e7,0]]}},funding:{tierBased:!1,percentage:!1,withdraw:{BTC:.001,ETH:.005,XRP:.02,XLM:2e-5,LTC:.02,DOGE:2,ZEC:1e-4,ICN:.02,REP:.01,ETC:.005,MLN:.003,XMR:.05,DASH:.005,GNO:.01,EOS:.5,BCH:.001,USD:5,EUR:5,CAD:10,JPY:300},deposit:{BTC:0,ETH:0,XRP:0,XLM:0,LTC:0,DOGE:0,ZEC:0,ICN:0,REP:0,ETC:0,MLN:0,XMR:0,DASH:0,GNO:0,EOS:0,BCH:0,USD:5,EUR:0,CAD:5,JPY:0}}},api:{public:{get:["Assets","AssetPairs","Depth","OHLC","Spread","Ticker","Time","Trades"]},private:{post:["AddOrder","Balance","CancelOrder","ClosedOrders","DepositAddresses","DepositMethods","DepositStatus","Ledgers","OpenOrders","OpenPositions","QueryLedgers","QueryOrders","QueryTrades","TradeBalance","TradesHistory","TradeVolume","Withdraw","WithdrawCancel","WithdrawInfo","WithdrawStatus"]}}})}costToPrecision(e,t){return this.truncate(parseFloat(t),this.markets[e].precision.price)}feeToPrecision(e,t){return this.truncate(parseFloat(t),this.markets[e].precision.amount)}handleErrors(e,t,i,s,r,a){if(a.indexOf("Invalid nonce")>=0)throw new d(this.id+" "+a);if(a.indexOf("Insufficient funds")>=0)throw new c(this.id+" "+a);if(a.indexOf("Cancel pending")>=0)throw new h(this.id+" "+a);if(a.indexOf("Invalid arguments:volume")>=0)throw new l(this.id+" "+a)}async fetchMarkets(){let e=await this.publicGetAssetPairs(),t=Object.keys(e.result),i=[];for(let s=0;s<t.length;s++){let r=t[s],a=e.result[r],o=a.base,n=a.quote;"X"!=o[0]&&"Z"!=o[0]||(o=o.slice(1)),"X"!=n[0]&&"Z"!=n[0]||(n=n.slice(1)),o=this.commonCurrencyCode(o),n=this.commonCurrencyCode(n);let d=r.indexOf(".d")>=0,c=d?a.altname:o+"/"+n,h=void 0;"fees_maker"in a&&(h=parseFloat(a.fees_maker[0][1])/100);let l={amount:a.lot_decimals,price:a.pair_decimals},u=Math.pow(10,-l.amount);i.push({id:r,symbol:c,base:o,quote:n,darkpool:d,info:a,altname:a.altname,maker:h,taker:parseFloat(a.fees[0][1])/100,lot:u,active:!0,precision:l,limits:{amount:{min:u,max:Math.pow(10,l.amount)},price:{min:Math.pow(10,-l.price),max:void 0},cost:{min:0,max:void 0}}})}return i=this.appendInactiveMarkets(i),this.marketsByAltname=this.indexBy(i,"altname"),i}appendInactiveMarkets(e=[]){let t={amount:8,price:8},i={min:0,max:void 0},s={min:Math.pow(10,-t.price),max:void 0},r={min:Math.pow(10,-t.amount),max:Math.pow(10,t.amount)},a={darkpool:!1,info:void 0,maker:void 0,taker:void 0,lot:r.min,active:!1,precision:t,limits:{amount:r,price:s,cost:i}},o=[{id:"XXLMZEUR",symbol:"XLM/EUR",base:"XLM",quote:"EUR",altname:"XLMEUR"}];for(let n=0;n<o.length;n++)e.push(this.extend(a,o[n]));return e}async fetchCurrencies(e={}){let t=(await this.publicGetAssets(e)).result,i=Object.keys(t),s={};for(let r=0;r<i.length;r++){let e=i[r],a=t[e],o=this.commonCurrencyCode(a.altname),n=a.decimals;s[o]={id:e,code:o,info:a,name:o,active:!0,status:"ok",fee:void 0,precision:n,limits:{amount:{min:Math.pow(10,-n),max:Math.pow(10,n)},price:{min:Math.pow(10,-n),max:Math.pow(10,n)},cost:{min:void 0,max:void 0},withdraw:{min:void 0,max:Math.pow(10,n)}}}}return s}async fetchOrderBook(e,t={}){await this.loadMarkets();if(e.indexOf(".d")>=0)throw new a(this.id+" does not provide an order book for darkpool symbol "+e);let i=this.market(e),s=(await this.publicGetDepth(this.extend({pair:i.id},t))).result[i.id];return this.parseOrderBook(s)}parseTicker(e,t){let i=this.milliseconds(),s=void 0;t&&(s=t.symbol);let r=parseFloat(e.v[1]),a=parseFloat(e.p[1]),o=r*a;return{symbol:s,timestamp:i,datetime:this.iso8601(i),high:parseFloat(e.h[1]),low:parseFloat(e.l[1]),bid:parseFloat(e.b[0]),ask:parseFloat(e.a[0]),vwap:a,open:parseFloat(e.o),close:void 0,first:void 0,last:parseFloat(e.c[0]),change:void 0,percentage:void 0,average:void 0,baseVolume:r,quoteVolume:o,info:e}}async fetchTickers(e,t={}){await this.loadMarkets();let i=[];for(let n=0;n<this.symbols.length;n++){let e=this.symbols[n],t=this.markets[e];t.active&&(t.darkpool||i.push(t.id))}let s=i.join(","),r=(await this.publicGetTicker(this.extend({pair:s},t))).result,a=Object.keys(r),o={};for(let n=0;n<a.length;n++){let e=a[n],t=this.markets_by_id[e],i=t.symbol,s=r[e];o[i]=this.parseTicker(s,t)}return o}async fetchTicker(e,t={}){await this.loadMarkets();if(e.indexOf(".d")>=0)throw new a(this.id+" does not provide a ticker for darkpool symbol "+e);let i=this.market(e),s=(await this.publicGetTicker(this.extend({pair:i.id},t))).result[i.id];return this.parseTicker(s,i)}parseOHLCV(e,t,i="1m",s,r){return[1e3*e[0],parseFloat(e[1]),parseFloat(e[2]),parseFloat(e[3]),parseFloat(e[4]),parseFloat(e[6])]}async fetchOHLCV(e,t="1m",i,s,r={}){await this.loadMarkets();let a=this.market(e),o={pair:a.id,interval:this.timeframes[t]};i&&(o.since=parseInt(i/1e3));let n=(await this.publicGetOHLC(this.extend(o,r))).result[a.id];return this.parseOHLCVs(n,a,t,i,s)}parseTrade(e,t){let i=void 0,s=void 0,r=void 0,a=void 0,o=void 0,n=void 0,d=void 0,c=void 0;if(t||(t=this.findMarketByAltnameOrId(e.pair)),"ordertxid"in e){if(d=e.ordertxid,n=e.id,i=parseInt(1e3*e.time),s=e.type,r=e.ordertype,a=parseFloat(e.price),o=parseFloat(e.vol),"fee"in e){let i=void 0;t&&(i=t.quote),c={cost:parseFloat(e.fee),currency:i}}}else i=parseInt(1e3*e[2]),s="s"==e[3]?"sell":"buy",r="l"==e[4]?"limit":"market",a=parseFloat(e[0]),o=parseFloat(e[1]);let h=t?t.symbol:void 0;return{id:n,order:d,info:e,timestamp:i,datetime:this.iso8601(i),symbol:h,type:r,side:s,price:a,amount:o,fee:c}}async fetchTrades(e,t,i,s={}){await this.loadMarkets();let r=this.market(e),a=r.id,o=(await this.publicGetTrades(this.extend({pair:a},s))).result[a];return this.parseTrades(o,r,t,i)}async fetchBalance(e={}){await this.loadMarkets();let t=(await this.privatePostBalance()).result,i={info:t},s=Object.keys(t);for(let r=0;r<s.length;r++){let e=s[r],a=e;"X"==a[0]?a=a.slice(1):"Z"==a[0]&&(a=a.slice(1)),a=this.commonCurrencyCode(a);let o=parseFloat(t[e]),n={free:o,used:0,total:o};i[a]=n}return this.parseBalance(i)}async createOrder(e,t,i,s,r,a={}){await this.loadMarkets();let o={pair:this.market(e).id,type:i,ordertype:t,volume:this.amountToPrecision(e,s)};"limit"==t&&(o.price=this.priceToPrecision(e,r));let n=await this.privatePostAddOrder(this.extend(o,a));return{info:n,id:n.result.txid.length>1?n.result.txid:n.result.txid[0]}}findMarketByAltnameOrId(e){let t=void 0;return e in this.marketsByAltname?t=this.marketsByAltname[e]:e in this.markets_by_id&&(t=this.markets_by_id[e]),t}parseOrder(e,t){let i=e.descr,s=i.type,r=i.ordertype,a=void 0;t||(t=this.findMarketByAltnameOrId(i.pair));let o=parseInt(1e3*e.opentm),n=parseFloat(e.vol),d=parseFloat(e.vol_exec),c=n-d,h=void 0,l=this.safeFloat(e,"cost"),u=this.safeFloat(i,"price");if(u||(u=this.safeFloat(e,"price")),t&&(a=t.symbol,"fee"in e)){let i=e.oflags;h={cost:this.safeFloat(e,"fee"),rate:void 0},i.indexOf("fciq")>=0?h.currency=t.quote:i.indexOf("fcib")>=0&&(h.currency=t.base)}return{id:e.id,info:e,timestamp:o,datetime:this.iso8601(o),status:e.status,symbol:a,type:r,side:s,price:u,cost:l,amount:n,filled:d,remaining:c,fee:h}}parseOrders(e,t,i,s){let r=[],a=Object.keys(e);for(let o=0;o<a.length;o++){let i=a[o],s=this.extend({id:i},e[i]);r.push(this.parseOrder(s,t))}return this.filterBySinceLimit(r,i,s)}async fetchOrder(e,t,i={}){await this.loadMarkets();let s=await this.privatePostQueryOrders(this.extend({trades:!0,txid:e},i)),r=s.result,a=this.parseOrder(this.extend({id:e},r[e]));return this.extend({info:s},a)}async fetchMyTrades(e,t,i,s={}){await this.loadMarkets();let r={};t&&(r.start=parseInt(t/1e3));let a=(await this.privatePostTradesHistory(this.extend(r,s))).result.trades,o=Object.keys(a);for(let n=0;n<o.length;n++)a[o[n]].id=o[n];return this.parseTrades(a,void 0,t,i)}async cancelOrder(e,t,i={}){await this.loadMarkets();let s=void 0;try{s=await this.privatePostCancelOrder(this.extend({txid:e},i))}catch(e){if(this.last_http_response&&this.last_http_response.indexOf("EOrder:Unknown order")>=0)throw new o(this.id+" cancelOrder() error "+this.last_http_response);throw e}return s}async fetchOpenOrders(e,t,i,s={}){await this.loadMarkets();let r={};t&&(r.start=parseInt(t/1e3));let a=await this.privatePostOpenOrders(this.extend(r,s)),o=this.parseOrders(a.result.open,void 0,t,i);return this.filterOrdersBySymbol(o,e)}async fetchClosedOrders(e,t,i,s={}){await this.loadMarkets();let r={};t&&(r.start=parseInt(t/1e3));let a=await this.privatePostClosedOrders(this.extend(r,s)),o=this.parseOrders(a.result.closed,void 0,t,i);return this.filterOrdersBySymbol(o,e)}async fetchDepositMethods(e,t={}){await this.loadMarkets();let i={};if(e){let t=this.currency(e);i.asset=t.id}return(await this.privatePostDepositMethods(this.extend(i,t))).result}async createDepositAddress(e,t={}){let i=await this.fetchDepositAddress(e,this.extend({new:"true"},t));return{currency:e,address:i.address,status:"ok",info:i}}async fetchDepositAddress(e,t={}){let i=this.safeValue(t,"method");if(!i)throw new a(this.id+" fetchDepositAddress() requires an extra `method` parameter");await this.loadMarkets();let s={asset:this.currency(e).id,method:i,new:"false"},r=await this.privatePostDepositAddresses(this.extend(s,t)),o=r.result;if(o.length<1)throw new a(this.id+" privatePostDepositAddresses() returned no addresses");return{currency:e,address:this.safeString(o[0],"address"),status:"ok",info:r}}async withdraw(e,t,i,s={}){if("key"in s){await this.loadMarkets();let i=await this.privatePostWithdraw(this.extend({asset:e,amount:t},s));return{info:i,id:i.result}}throw new a(this.id+" withdraw requires a 'key' parameter (withdrawal key name, as set up on your account)")}sign(e,t="public",i="GET",s={},r,a){let o="/"+this.version+"/"+t+"/"+e;if("public"==t)Object.keys(s).length&&(o+="?"+this.urlencode(s));else{this.checkRequiredCredentials();let e=this.nonce().toString();a=this.urlencode(this.extend({nonce:e},s));let t=this.encode(e+a),i=this.hash(t,"sha256","binary"),n=this.stringToBinary(this.encode(o)),d=this.binaryConcat(n,i),c=this.base64ToBinary(this.secret),h=this.hmac(d,c,"sha512","base64");r={"API-Key":this.apiKey,"API-Sign":this.decode(h),"Content-Type":"application/x-www-form-urlencoded"}}return o=this.urls.api+o,{url:o,method:i,body:a,headers:r}}nonce(){return this.milliseconds()}async request(e,t="public",i="GET",s={},o,d){let c=await this.fetch2(e,t,i,s,o,d);if("error"in c){if(c.error.length){for(let e=0;e<c.error.length;e++){if("EService:Unavailable"==c.error[e])throw new r(this.id+" "+this.json(c));if("EService:Busy"==c.error[e])throw new n(this.id+" "+this.json(c))}throw new a(this.id+" "+this.json(c))}}return c}}},function(e,t,i){"use strict";const s=i(310),{ExchangeError:r,InvalidNonce:a,AuthenticationError:o}=i(309);e.exports=class extends s{describe(){return this.deepExtend(super.describe(),{id:"kucoin",name:"Kucoin",countries:"HK",version:"v1",rateLimit:2e3,hasCORS:!1,userAgent:this.userAgents.chrome,hasFetchTickers:!0,hasFetchOHLCV:!1,hasFetchOrder:!0,hasFetchOrders:!0,hasFetchClosedOrders:!0,hasFetchOpenOrders:!0,hasFetchMyTrades:!1,hasFetchCurrencies:!0,hasWithdraw:!0,has:{fetchTickers:!0,fetchOHLCV:!0,fetchOrder:!0,fetchOrders:!0,fetchClosedOrders:!0,fetchOpenOrders:!0,fetchMyTrades:!1,fetchCurrencies:!0,withdraw:!0},timeframes:{"1m":"1","5m":"5","15m":"15","30m":"30","1h":"60","8h":"480","1d":"D","1w":"W"},urls:{logo:"https://user-images.githubusercontent.com/1294454/33795655-b3c46e48-dcf6-11e7-8abe-dc4588ba7901.jpg",api:"https://api.kucoin.com",www:"https://kucoin.com",doc:"https://kucoinapidocs.docs.apiary.io",fees:"https://news.kucoin.com/en/fee"},api:{public:{get:["open/chart/config","open/chart/history","open/chart/symbol","open/currencies","open/deal-orders","open/kline","open/lang-list","open/orders","open/orders-buy","open/orders-sell","open/tick","market/open/coin-info","market/open/coins","market/open/coins-trending","market/open/symbols"]},private:{get:["account/balance","account/{coin}/wallet/address","account/{coin}/wallet/records","account/{coin}/balance","account/promotion/info","account/promotion/sum","deal-orders","order/active","order/active-map","order/dealt","referrer/descendant/count","user/info"],post:["account/{coin}/withdraw/apply","account/{coin}/withdraw/cancel","cancel-order","order","user/change-lang"]}},fees:{trading:{maker:.001,taker:.001}}})}async fetchMarkets(){let e=(await this.publicGetMarketOpenSymbols()).data,t=[];for(let i=0;i<e.length;i++){let s=e[i],r=s.symbol,a=s.coinType,o=s.coinTypePair,n=(a=this.commonCurrencyCode(a))+"/"+(o=this.commonCurrencyCode(o)),d={amount:8,price:8},c=s.trading;t.push(this.extend(this.fees.trading,{id:r,symbol:n,base:a,quote:o,active:c,info:s,lot:Math.pow(10,-d.amount),precision:d,limits:{amount:{min:Math.pow(10,-d.amount),max:void 0},price:{min:void 0,max:void 0}}}))}return t}async fetchCurrencies(e={}){let t=(await this.publicGetMarketOpenCoins(e)).data,i={};for(let s=0;s<t.length;s++){let e=t[s],r=e.coin,a=this.commonCurrencyCode(r),o=e.tradePrecision,n=e.enableDeposit,d=e.enableWithdraw,c=n&&d;i[a]={id:r,code:a,info:e,name:e.name,active:c,status:"ok",fee:e.withdrawFeeRate,precision:o,limits:{amount:{min:Math.pow(10,-o),max:Math.pow(10,o)},price:{min:Math.pow(10,-o),max:Math.pow(10,o)},cost:{min:void 0,max:void 0},withdraw:{min:e.withdrawMinAmount,max:Math.pow(10,o)}}}}return i}async fetchBalance(e={}){await this.loadMarkets();let t=(await this.privateGetAccountBalance(this.extend({limit:20,page:1},e))).data,i={info:t},s=this.indexBy(t,"coinType"),r=Object.keys(s);for(let a=0;a<r.length;a++){let e=r[a],t=this.commonCurrencyCode(e),o=this.account(),n=s[e],d=parseFloat(n.balance),c=parseFloat(n.freezeBalance),h=d-c;o.free=h,o.used=c,o.total=d,i[t]=o}return this.parseBalance(i)}async fetchOrderBook(e,t={}){await this.loadMarkets();let i=this.market(e),s=(await this.publicGetOpenOrders(this.extend({symbol:i.id},t))).data;return this.parseOrderBook(s,void 0,"BUY","SELL")}parseOrder(e,t){let i=void 0;i=t?t.symbol:e.coinType+"/"+e.coinTypePair;let s=e.createdAt,r=this.safeFloat(e,"price"),a=this.safeFloat(e,"amount"),o=this.safeFloat(e,"dealAmount"),n=this.safeFloat(e,"pendingAmount"),d=e.type.toLowerCase();return{info:e,id:this.safeString(e,"oid"),timestamp:s,datetime:this.iso8601(s),symbol:i,type:"limit",side:d,price:r,amount:a,cost:r*o,filled:o,remaining:n,status:void 0,fee:this.safeFloat(e,"fee")}}async fetchOpenOrders(e,t,i,s={}){if(!e)throw new r(this.id+" fetchOpenOrders requires a symbol param");await this.loadMarkets();let a=this.market(e),o={symbol:a.id},n=await this.privateGetOrderActiveMap(this.extend(o,s)),d=this.arrayConcat(n.data.SELL,n.data.BUY);return this.parseOrders(d,a,t,i)}async fetchClosedOrders(e,t,i,s={}){let r={};await this.loadMarkets();let a=this.market(e);e&&(r.symbol=a.id),t&&(r.since=t),i&&(r.limit=i);let o=await this.privateGetOrderDealt(this.extend(r,s));return this.parseOrders(o.data.datas,a,t,i)}async createOrder(e,t,i,s,a,o={}){if("limit"!=t)throw new r(this.id+" allows limit orders only");await this.loadMarkets();let n={symbol:this.market(e).id,type:i.toUpperCase(),price:this.priceToPrecision(e,a),amount:this.amountToPrecision(e,s)},d=await this.privatePostOrder(this.extend(n,o));return{info:d,id:this.safeString(d.data,"orderOid")}}async cancelOrder(e,t,i={}){if(!t)throw new r(this.id+" cancelOrder requires symbol argument");await this.loadMarkets();let s={symbol:this.market(t).id,orderOid:e};if(!("type"in i))throw new r(this.id+" cancelOrder requires type (BUY or SELL) param");s.type=i.type.toUpperCase();return await this.privatePostCancelOrder(this.extend(s,i))}parseTicker(e,t){let i=e.datetime,s=void 0;return s=t?t.symbol:e.coinType+"/"+e.coinTypePair,{symbol:s,timestamp:i,datetime:this.iso8601(i),high:this.safeFloat(e,"high"),low:this.safeFloat(e,"low"),bid:this.safeFloat(e,"buy"),ask:this.safeFloat(e,"sell"),vwap:void 0,open:void 0,close:void 0,first:void 0,last:this.safeFloat(e,"lastDealPrice"),change:void 0,percentage:void 0,average:void 0,baseVolume:this.safeFloat(e,"vol"),quoteVolume:this.safeFloat(e,"volValue"),info:e}}async fetchTickers(e,t={}){let i=(await this.publicGetMarketOpenSymbols(t)).data,s={};for(let r=0;r<i.length;r++){let e=this.parseTicker(i[r]);s[e.symbol]=e}return s}async fetchTicker(e,t={}){await this.loadMarkets();let i=this.market(e),s=(await this.publicGetOpenTick(this.extend({symbol:i.id},t))).data;return this.parseTicker(s,i)}parseTrade(e,t){let i=e[0],s=void 0;return"BUY"==e[1]?s="buy":"SELL"==e[1]&&(s="sell"),{id:void 0,info:e,timestamp:i,datetime:this.iso8601(i),symbol:t.symbol,type:"limit",side:s,price:e[2],amount:e[3]}}async fetchTrades(e,t,i,s={}){await this.loadMarkets();let r=this.market(e),a=await this.publicGetOpenDealOrders(this.extend({symbol:r.id},s));return this.parseTrades(a.data,r,t,i)}parseOHLCV(e,t,i="1d",s,r){return[this.parse8601(e.T),e.O,e.H,e.L,e.C,e.V]}async fetchOHLCV(e,t="1m",i,s,r={}){await this.loadMarkets();let a=this.market(e),o=this.seconds(),n={symbol:a.id,type:this.timeframes[t],from:o-86400,to:o};i&&(n.from=parseInt(i/1e3)),s&&(n.limit=s);let d=await this.publicGetOpenChartHistory(this.extend(n,r));return this.parseOHLCVs(d.data,a,t,i,s)}sign(e,t="public",i="GET",s={},r,a){let o="/"+this.version+"/"+this.implodeParams(e,s),n=this.urls.api+o,d=this.omit(s,this.extractParams(e));if("public"==t)Object.keys(d).length&&(n+="?"+this.urlencode(d));else{this.checkRequiredCredentials();let e=this.milliseconds(),t="";e=e.toString(),Object.keys(d).length&&(t=this.rawencode(this.keysort(d)),"GET"==i?n+="?"+t:a=t);let s=o+"/"+e+"/"+t,c=this.stringToBase64(this.encode(s)),h=this.hmac(c,this.encode(this.secret),"sha256");r={"KC-API-KEY":this.apiKey,"KC-API-NONCE":e,"KC-API-SIGNATURE":h}}return{url:n,method:i,body:a,headers:r}}handleErrors(e,t,i,s,n,d){if(e>=400){if(!d||"{"!=d[0])throw new r(this.id+" "+e.toString()+" "+t);{let e=JSON.parse(d);if("success"in e&&!e.success){if("code"in e&&"UNAUTH"==e.code){let t=this.safeString(e,"msg");if("Invalid nonce"==t)throw new a(this.id+" "+t);throw new o(this.id+" "+this.json(e))}throw new r(this.id+" "+this.json(e))}}}}async request(e,t="public",i="GET",s={},r,a){return await this.fetch2(e,t,i,s,r,a)}}},function(e,t,i){"use strict";const s=i(323),{ExchangeError:r,InsufficientFunds:a,OrderNotFound:o}=i(309);e.exports=class extends s{describe(){return this.deepExtend(super.describe(),{id:"kuna",name:"Kuna",countries:"UA",rateLimit:1e3,version:"v2",hasCORS:!1,hasFetchTickers:!1,hasFetchOHLCV:!1,urls:{logo:"https://user-images.githubusercontent.com/1294454/31697638-912824fa-b3c1-11e7-8c36-cf9606eb94ac.jpg",api:"https://kuna.io",www:"https://kuna.io",doc:"https://kuna.io/documents/api"},api:{public:{get:["tickers/{market}","order_book","order_book/{market}","trades","trades/{market}","timestamp"]},private:{get:["members/me","orders","trades/my"],post:["orders","order/delete"]}},markets:{"BTC/UAH":{id:"btcuah",symbol:"BTC/UAH",base:"BTC",quote:"UAH",precision:{amount:6,price:0},lot:1e-6,limits:{amount:{min:1e-6,max:void 0},price:{min:1,max:void 0}}},"ETH/UAH":{id:"ethuah",symbol:"ETH/UAH",base:"ETH",quote:"UAH",precision:{amount:6,price:0},lot:1e-6,limits:{amount:{min:1e-6,max:void 0},price:{min:1,max:void 0}}},"GBG/UAH":{id:"gbguah",symbol:"GBG/UAH",base:"GBG",quote:"UAH",precision:{amount:3,price:2},lot:.001,limits:{amount:{min:1e-6,max:void 0},price:{min:.01,max:void 0}}},"KUN/BTC":{id:"kunbtc",symbol:"KUN/BTC",base:"KUN",quote:"BTC",precision:{amount:6,price:6},lot:1e-6,limits:{amount:{min:1e-6,max:void 0},price:{min:1e-6,max:void 0}}},"BCH/BTC":{id:"bchbtc",symbol:"BCH/BTC",base:"BCH",quote:"BTC",precision:{amount:6,price:6},lot:1e-6,limits:{amount:{min:1e-6,max:void 0},price:{min:1e-6,max:void 0}}},"WAVES/UAH":{id:"wavesuah",symbol:"WAVES/UAH",base:"WAVES",quote:"UAH",precision:{amount:6,price:0},lot:1e-6,limits:{amount:{min:1e-6,max:void 0},price:{min:1,max:void 0}}}},fees:{trading:{taker:.0025,maker:.0025}}})}handleErrors(e,t,i,s,r,n){if(400==e){let r=JSON.parse(n).error.code;if(2002==r)throw new a([this.id,s,i,e,t,n].join(" "));if(2003==r)throw new o([this.id,s,i,e,t,n].join(" "))}}async fetchOrderBook(e,t={}){let i=this.market(e),s=await this.publicGetOrderBook(this.extend({market:i.id},t));return this.parseOrderBook(s,void 0,"bids","asks","price","remaining_volume")}async fetchL3OrderBook(e,t){return this.fetchOrderBook(e,t)}async fetchOpenOrders(e,t,i,s={}){if(!e)throw new r(this.id+" fetchOpenOrders requires a symbol argument");let a=this.market(e),o=await this.privateGetOrders(this.extend({market:a.id},s));return this.parseOrders(o,a,t,i)}parseTrade(e,t){let i=this.parse8601(e.created_at),s=void 0;return t&&(s=t.symbol),{id:e.id,timestamp:i,datetime:this.iso8601(i),symbol:s,type:void 0,side:void 0,price:parseFloat(e.price),amount:parseFloat(e.volume),info:e}}async fetchTrades(e,t,i,s={}){let r=this.market(e),a=await this.publicGetTrades(this.extend({market:r.id},s));return this.parseTrades(a,r,t,i)}parseMyTrade(e,t){let i=this.parse8601(e.created_at),s=void 0;return t&&(s=t.symbol),{id:e.id,timestamp:i,datetime:this.iso8601(i),price:e.price,amount:e.volume,cost:e.funds,symbol:s,side:e.side,order:e.order_id}}parseMyTrades(e,t){let i=[];for(let s=0;s<e.length;s++){let r=e[s],a=this.parseMyTrade(r,t);i.push(a)}return i}async fetchMyTrades(e,t,i,s={}){if(!e)throw new r(this.id+" fetchOpenOrders requires a symbol argument");let a=this.market(e),o=await this.privateGetTradesMy({market:a.id});return this.parseMyTrades(o,a)}}},function(e,t,i){"use strict";const s=i(310),{ExchangeError:r}=i(309);e.exports=class extends s{describe(){return this.deepExtend(super.describe(),{id:"lakebtc",name:"LakeBTC",countries:"US",version:"api_v2",hasCORS:!0,urls:{logo:"https://user-images.githubusercontent.com/1294454/28074120-72b7c38a-6660-11e7-92d9-d9027502281d.jpg",api:"https://api.lakebtc.com",www:"https://www.lakebtc.com",doc:["https://www.lakebtc.com/s/api_v2","https://www.lakebtc.com/s/api"]},api:{public:{get:["bcorderbook","bctrades","ticker"]},private:{post:["buyOrder","cancelOrders","getAccountInfo","getExternalAccounts","getOrders","getTrades","openOrders","sellOrder"]}},fees:{trading:{maker:.0015,taker:.002}}})}async fetchMarkets(){let e=await this.publicGetTicker(),t=[],i=Object.keys(e);for(let s=0;s<i.length;s++){let r=i[s],a=e[r],o=r.slice(0,3),n=r.slice(3,6),d=(o=o.toUpperCase())+"/"+(n=n.toUpperCase());t.push({id:r,symbol:d,base:o,quote:n,info:a})}return t}async fetchBalance(e={}){await this.loadMarkets();let t=await this.privatePostGetAccountInfo(),i=t.balance,s={info:t},r=Object.keys(i);for(let a=0;a<r.length;a++){let e=r[a],t=parseFloat(i[e]),o={free:t,used:0,total:t};s[e]=o}return this.parseBalance(s)}async fetchOrderBook(e,t={}){await this.loadMarkets();let i=await this.publicGetBcorderbook(this.extend({symbol:this.marketId(e)},t));return this.parseOrderBook(i)}async fetchTicker(e,t={}){await this.loadMarkets();let i=this.market(e),s=(await this.publicGetTicker(this.extend({symbol:i.id},t)))[i.id],r=this.milliseconds();return{symbol:e,timestamp:r,datetime:this.iso8601(r),high:this.safeFloat(s,"high"),low:this.safeFloat(s,"low"),bid:this.safeFloat(s,"bid"),ask:this.safeFloat(s,"ask"),vwap:void 0,open:void 0,close:void 0,first:void 0,last:this.safeFloat(s,"last"),change:void 0,percentage:void 0,average:void 0,baseVolume:this.safeFloat(s,"volume"),quoteVolume:void 0,info:s}}parseTrade(e,t){let i=1e3*e.date;return{info:e,timestamp:i,datetime:this.iso8601(i),symbol:t.symbol,id:e.tid.toString(),order:void 0,type:void 0,side:void 0,price:parseFloat(e.price),amount:parseFloat(e.amount)}}async fetchTrades(e,t,i,s={}){await this.loadMarkets();let r=this.market(e),a=await this.publicGetBctrades(this.extend({symbol:r.id},s));return this.parseTrades(a,r,t,i)}async createOrder(e,t,i,s,a,o={}){if(await this.loadMarkets(),"market"==t)throw new r(this.id+" allows limit orders only");let n="privatePost"+this.capitalize(i)+"Order",d={params:[a,s,this.marketId(e)]},c=await this[n](this.extend(d,o));return{info:c,id:c.id.toString()}}async cancelOrder(e,t,i={}){return await this.loadMarkets(),await this.privatePostCancelOrder({params:e})}nonce(){return this.microseconds()}sign(e,t="public",i="GET",s={},r,a){let o=this.urls.api+"/"+this.version;if("public"==t)o+="/"+e,Object.keys(s).length&&(o+="?"+this.urlencode(s));else{this.checkRequiredCredentials();let t=this.nonce();s=Object.keys(s).length?s.join(","):"";let o=this.urlencode({tonce:t,accesskey:this.apiKey,requestmethod:i.toLowerCase(),id:t,method:e,params:s});a=this.json({method:e,params:s,id:t});let n=this.hmac(this.encode(o),this.encode(this.secret),"sha1"),d=this.encode(this.apiKey+":"+n);r={"Json-Rpc-Tonce":t,Authorization:"Basic "+this.decode(this.stringToBase64(d)),"Content-Type":"application/json"}}return{url:o,method:i,body:a,headers:r}}async request(e,t="public",i="GET",s={},a,o){let n=await this.fetch2(e,t,i,s,a,o);if("error"in n)throw new r(this.id+" "+this.json(n));return n}}},function(e,t,i){"use strict";const s=i(310),{ExchangeError:r,AuthenticationError:a,NotSupported:o,InvalidOrder:n,OrderNotFound:d}=i(309);e.exports=class extends s{describe(){return this.deepExtend(super.describe(),{id:"livecoin",name:"LiveCoin",countries:["US","UK","RU"],rateLimit:1e3,hasCORS:!1,hasFetchTickers:!0,hasFetchCurrencies:!0,has:{fetchTickers:!0,fetchCurrencies:!0},urls:{logo:"https://user-images.githubusercontent.com/1294454/27980768-f22fc424-638a-11e7-89c9-6010a54ff9be.jpg",api:"https://api.livecoin.net",www:"https://www.livecoin.net",doc:"https://www.livecoin.net/api?lang=en"},api:{public:{get:["exchange/all/order_book","exchange/last_trades","exchange/maxbid_minask","exchange/order_book","exchange/restrictions","exchange/ticker","info/coinInfo"]},private:{get:["exchange/client_orders","exchange/order","exchange/trades","exchange/commission","exchange/commissionCommonInfo","payment/balances","payment/balance","payment/get/address","payment/history/size","payment/history/transactions"],post:["exchange/buylimit","exchange/buymarket","exchange/cancellimit","exchange/selllimit","exchange/sellmarket","payment/out/capitalist","payment/out/card","payment/out/coin","payment/out/okpay","payment/out/payeer","payment/out/perfectmoney","payment/voucher/amount","payment/voucher/make","payment/voucher/redeem"]}},fees:{trading:{tierBased:!1,percentage:!0,maker:.0018,taker:.0018}}})}async fetchMarkets(){let e=await this.publicGetExchangeTicker(),t=await this.publicGetExchangeRestrictions(),i=this.indexBy(t.restrictions,"currencyPair"),s=[];for(let r=0;r<e.length;r++){let t=e[r],a=t.symbol,o=a,[n,d]=o.split("/"),c=this.safeValue(i,o),h={price:5,amount:8,cost:8},l={amount:{min:Math.pow(10,-h.amount),max:Math.pow(10,h.amount)}};c&&(h.price=this.safeInteger(c,"priceScale",5),l.amount.min=this.safeFloat(c,"minLimitQuantity",l.amount.min)),l.price={min:Math.pow(10,-h.price),max:Math.pow(10,h.price)},s.push(this.extend(this.fees.trading,{id:a,symbol:o,base:n,quote:d,precision:h,limits:l,info:t}))}return s}async fetchCurrencies(e={}){let t=(await this.publicGetInfoCoinInfo(e)).info,i={};for(let s=0;s<t.length;s++){let e=t[s],r=e.symbol,a=this.commonCurrencyCode(r),o="normal"==e.walletStatus;i[a]={id:r,code:a,info:e,name:e.name,active:o,status:"ok",fee:e.withdrawFee,precision:8,limits:{amount:{min:e.minOrderAmount,max:Math.pow(10,8)},price:{min:Math.pow(10,-8),max:Math.pow(10,8)},cost:{min:e.minOrderAmount,max:void 0},withdraw:{min:e.minWithdrawAmount,max:Math.pow(10,8)},deposit:{min:e.minDepositAmount,max:void 0}}}}return i}async fetchBalance(e={}){await this.loadMarkets();let t=await this.privateGetPaymentBalances(),i={info:t};for(let s=0;s<t.length;s++){let e=t[s],r=e.currency,a=void 0;a=r in i?i[r]:this.account(),"total"==e.type&&(a.total=parseFloat(e.value)),"available"==e.type&&(a.free=parseFloat(e.value)),"trade"==e.type&&(a.used=parseFloat(e.value)),i[r]=a}return this.parseBalance(i)}async fetchFees(e={}){await this.loadMarkets();let t=await this.privateGetExchangeCommissionCommonInfo(),i=this.safeFloat(t,"commission");return{info:t,maker:i,taker:i,withdraw:0}}async fetchOrderBook(e,t={}){await this.loadMarkets();let i=await this.publicGetExchangeOrderBook(this.extend({currencyPair:this.marketId(e),groupByPrice:"false",depth:100},t)),s=i.timestamp;return this.parseOrderBook(i,s)}parseTicker(e,t){let i=this.milliseconds(),s=void 0;t&&(s=t.symbol);let r=parseFloat(e.vwap),a=parseFloat(e.volume),o=a*r;return{symbol:s,timestamp:i,datetime:this.iso8601(i),high:parseFloat(e.high),low:parseFloat(e.low),bid:parseFloat(e.best_bid),ask:parseFloat(e.best_ask),vwap:parseFloat(e.vwap),open:void 0,close:void 0,first:void 0,last:parseFloat(e.last),change:void 0,percentage:void 0,average:void 0,baseVolume:a,quoteVolume:o,info:e}}async fetchTickers(e,t={}){await this.loadMarkets();let i=await this.publicGetExchangeTicker(t),s=this.indexBy(i,"symbol"),r=Object.keys(s),a={};for(let o=0;o<r.length;o++){let e=r[o],t=this.markets_by_id[e],i=t.symbol,n=s[e];a[i]=this.parseTicker(n,t)}return a}async fetchTicker(e,t={}){await this.loadMarkets();let i=this.market(e),s=await this.publicGetExchangeTicker(this.extend({currencyPair:i.id},t));return this.parseTicker(s,i)}parseTrade(e,t){let i=1e3*e.time;return{info:e,timestamp:i,datetime:this.iso8601(i),symbol:t.symbol,id:e.id.toString(),order:void 0,type:void 0,side:e.type.toLowerCase(),price:e.price,amount:e.quantity}}async fetchTrades(e,t,i,s={}){await this.loadMarkets();let r=this.market(e),a=await this.publicGetExchangeLastTrades(this.extend({currencyPair:r.id},s));return this.parseTrades(a,r,t,i)}parseOrder(e,t){let i=this.safeInteger(e,"lastModificationTime");i||(i=this.parse8601(e.lastModificationTime));let s=void 0;"trades"in e&&(s=void 0);let r=void 0;r="OPEN"==e.orderStatus||"PARTIALLY_FILLED"==e.orderStatus?"open":"EXECUTED"==e.orderStatus||"PARTIALLY_FILLED_AND_CANCELLED"==e.orderStatus?"closed":"canceled";let a=e.currencyPair,[o,n]=a.split("/"),d=void 0,c=void 0;d=e.type.indexOf("MARKET")>=0?"market":"limit",c=e.type.indexOf("SELL")>=0?"sell":"buy";let h=this.safeFloat(e,"price",0),l=this.safeFloat(e,"commissionByTrade",0),u=this.safeFloat(e,"remainingQuantity",0),p=this.safeFloat(e,"quantity",u),m=p-u;return{info:e,id:e.id,timestamp:i,datetime:this.iso8601(i),status:r,symbol:a,type:d,side:c,price:h,cost:l,amount:p,filled:m,remaining:u,trades:s,fee:{cost:l,currency:n}}}async fetchOrders(e,t,i,s={}){await this.loadMarkets();let r=void 0;e&&(r=this.market(e));let a=r?r.id:void 0,o={};a&&(o.currencyPair=a),t&&(o.issuedFrom=parseInt(t)),i&&(o.endRow=i-1);let n=await this.privateGetExchangeClientOrders(this.extend(o,s)),d=[],c=[];n.data&&(c=n.data);for(let h=0;h<c.length;h++){let e=c[h];d.push(this.parseOrder(e,r))}return d}async fetchOpenOrders(e,t,i,s={}){return await this.fetchOrders(e,t,i,this.extend({openClosed:"OPEN"},s))}async fetchClosedOrders(e,t,i,s={}){return await this.fetchOrders(e,t,i,this.extend({openClosed:"CLOSED"},s))}async createOrder(e,t,i,s,r,a={}){await this.loadMarkets();let o="privatePostExchange"+this.capitalize(i)+t,n=this.market(e),d={quantity:this.amountToPrecision(e,s),currencyPair:n.id};"limit"==t&&(d.price=this.priceToPrecision(e,r));let c=await this[o](this.extend(d,a));return{info:c,id:c.orderId.toString()}}async cancelOrder(e,t,i={}){if(!t)throw new r(this.id+" cancelOrder requires a symbol argument");await this.loadMarkets();let s=this.market(t).id,a=await this.privatePostExchangeCancellimit(this.extend({orderId:e,currencyPair:s},i)),o=this.safeString(a,"message",this.json(a));if("success"in a){if(!a.success)throw new n(o);if("cancelled"in a){if(a.cancelled)return a;throw new d(o)}}throw new r(this.id+" cancelOrder() failed: "+this.json(a))}async fetchDepositAddress(e,t={}){let i={currency:e},s=await this.privateGetPaymentGetAddress(this.extend(i,t));return{currency:e,address:this.safeString(s,"wallet"),status:"ok",info:s}}sign(e,t="public",i="GET",s={},r,a){let o=this.urls.api+"/"+e,n=this.urlencode(this.keysort(s));if("GET"==i&&Object.keys(s).length&&(o+="?"+n),"private"==t){this.checkRequiredCredentials(),"POST"==i&&(a=n);let e=this.hmac(this.encode(n),this.encode(this.secret),"sha256");r={"Api-Key":this.apiKey,Sign:e.toUpperCase(),"Content-Type":"application/x-www-form-urlencoded"}}return{url:o,method:i,body:a,headers:r}}handleErrors(e,t,i,s,d,c){if(e>=300){if("{"==c[0]){let e=JSON.parse(c);if("errorCode"in e){let t=e.errorCode;if(1==t)throw new r(this.id+" "+this.json(e));if(2!=t)throw 10==t||11==t||12==t||20==t||30==t||101==t||102==t?new a(this.id+" "+this.json(e)):31==t?new o(this.id+" "+this.json(e)):32==t?new r(this.id+" "+this.json(e)):100==t?new r(this.id+": Invalid parameters "+this.json(e)):103==t?new n(this.id+": Invalid currency "+this.json(e)):104==t?new n(this.id+": Invalid amount "+this.json(e)):105==t?new n(this.id+": Unable to block funds "+this.json(e)):new r(this.id+" "+this.json(e));if(!("errorMessage"in e))throw new r(this.id+" "+this.json(e));if("User not found"==e.errorMessage)throw new a(this.id+" "+e.errorMessage)}}throw new r(this.id+" "+c)}}async request(e,t="public",i="GET",s={},a,o){let n=await this.fetch2(e,t,i,s,a,o);if("success"in n&&!n.success)throw new r(this.id+" error: "+this.json(n));return n}}},function(e,t,i){"use strict";const s=i(310),{ExchangeError:r}=i(309);e.exports=class extends s{describe(){return this.deepExtend(super.describe(),{id:"luno",name:"luno",countries:["GB","SG","ZA"],rateLimit:1e4,version:"1",hasCORS:!1,hasFetchTickers:!0,hasFetchOrder:!0,has:{fetchTickers:!0,fetchOrder:!0},urls:{logo:"https://user-images.githubusercontent.com/1294454/27766607-8c1a69d8-5ede-11e7-930c-540b5eb9be24.jpg",api:"https://api.mybitx.com/api",www:"https://www.luno.com",doc:["https://www.luno.com/en/api","https://npmjs.org/package/bitx","https://github.com/bausmeier/node-bitx"]},api:{public:{get:["orderbook","ticker","tickers","trades"]},private:{get:["accounts/{id}/pending","accounts/{id}/transactions","balance","fee_info","funding_address","listorders","listtrades","orders/{id}","quotes/{id}","withdrawals","withdrawals/{id}"],post:["accounts","postorder","marketorder","stoporder","funding_address","withdrawals","send","quotes","oauth2/grant"],put:["quotes/{id}"],delete:["quotes/{id}","withdrawals/{id}"]}}})}async fetchMarkets(){let e=await this.publicGetTickers(),t=[];for(let i=0;i<e.tickers.length;i++){let s=e.tickers[i],r=s.pair,a=r.slice(0,3),o=r.slice(3,6),n=(a=this.commonCurrencyCode(a))+"/"+(o=this.commonCurrencyCode(o));t.push({id:r,symbol:n,base:a,quote:o,info:s})}return t}async fetchBalance(e={}){await this.loadMarkets();let t=await this.privateGetBalance(),i=t.balance,s={info:t};for(let r=0;r<i.length;r++){let e=i[r],t=this.commonCurrencyCode(e.asset),a=parseFloat(e.reserved),o=parseFloat(e.unconfirmed),n={free:0,used:this.sum(a,o),total:parseFloat(e.balance)};n.free=n.total-n.used,s[t]=n}return this.parseBalance(s)}async fetchOrderBook(e,t={}){await this.loadMarkets();let i=await this.publicGetOrderbook(this.extend({pair:this.marketId(e)},t)),s=i.timestamp;return this.parseOrderBook(i,s,"bids","asks","price","volume")}parseOrder(e,t){let i=e.creation_timestamp,s="PENDING"==e.state?"open":"closed",r="ASK"==e.type?"sell":"buy",a=void 0;t&&(a=t.symbol);let o=this.safeFloat(e,"limit_price"),n=this.safeFloat(e,"limit_volume"),d=this.safeFloat(e,"fee_counter"),c=this.safeFloat(e,"fee_base"),h={currency:void 0};return d?(h.side="quote",h.cost=d):(h.side="base",h.cost=c),{id:e.order_id,datetime:this.iso8601(i),timestamp:i,status:s,symbol:a,type:void 0,side:r,price:o,amount:n,filled:void 0,remaining:void 0,trades:void 0,fee:h,info:e}}async fetchOrder(e,t,i={}){await this.loadMarkets();let s=await this.privateGetOrdersId(this.extend({id:e},i));return this.parseOrder(s)}parseTicker(e,t){let i=e.timestamp,s=void 0;return t&&(s=t.symbol),{symbol:s,timestamp:i,datetime:this.iso8601(i),high:void 0,low:void 0,bid:parseFloat(e.bid),ask:parseFloat(e.ask),vwap:void 0,open:void 0,close:void 0,first:void 0,last:parseFloat(e.last_trade),change:void 0,percentage:void 0,average:void 0,baseVolume:parseFloat(e.rolling_24_hour_volume),quoteVolume:void 0,info:e}}async fetchTickers(e,t={}){await this.loadMarkets();let i=await this.publicGetTickers(t),s=this.indexBy(i.tickers,"pair"),r=Object.keys(s),a={};for(let o=0;o<r.length;o++){let e=r[o],t=this.markets_by_id[e],i=t.symbol,n=s[e];a[i]=this.parseTicker(n,t)}return a}async fetchTicker(e,t={}){await this.loadMarkets();let i=this.market(e),s=await this.publicGetTicker(this.extend({pair:i.id},t));return this.parseTicker(s,i)}parseTrade(e,t){let i=e.is_buy?"buy":"sell";return{info:e,id:void 0,order:void 0,timestamp:e.timestamp,datetime:this.iso8601(e.timestamp),symbol:t.symbol,type:void 0,side:i,price:parseFloat(e.price),amount:parseFloat(e.volume)}}async fetchTrades(e,t,i,s={}){await this.loadMarkets();let r=this.market(e),a=await this.publicGetTrades(this.extend({pair:r.id},s));return this.parseTrades(a.trades,r,t,i)}async createOrder(e,t,i,s,r,a={}){await this.loadMarkets();let o="privatePost",n={pair:this.marketId(e)};"market"==t?(o+="Marketorder",n.type=i.toUpperCase(),"buy"==i?n.counter_volume=s:n.base_volume=s):(o+="Order",n.volume=s,n.price=r,n.type="buy"==i?"BID":"ASK");let d=await this[o](this.extend(n,a));return{info:d,id:d.order_id}}async cancelOrder(e,t,i={}){return await this.loadMarkets(),await this.privatePostStoporder({order_id:e})}sign(e,t="public",i="GET",s={},r,a){let o=this.urls.api+"/"+this.version+"/"+this.implodeParams(e,s),n=this.omit(s,this.extractParams(e));if(Object.keys(n).length&&(o+="?"+this.urlencode(n)),"private"==t){this.checkRequiredCredentials();let e=this.encode(this.apiKey+":"+this.secret);e=this.stringToBase64(e),r={Authorization:"Basic "+this.decode(e)}}return{url:o,method:i,body:a,headers:r}}async request(e,t="public",i="GET",s={},a,o){let n=await this.fetch2(e,t,i,s,a,o);if("error"in n)throw new r(this.id+" "+this.json(n));return n}}},function(e,t,i){"use strict";const s=i(310),{ExchangeError:r}=i(309);e.exports=class extends s{describe(){return this.deepExtend(super.describe(),{id:"mercado",name:"Mercado Bitcoin",countries:"BR",rateLimit:1e3,version:"v3",hasCORS:!0,hasWithdraw:!0,urls:{logo:"https://user-images.githubusercontent.com/1294454/27837060-e7c58714-60ea-11e7-9192-f05e86adb83f.jpg",api:{public:"https://www.mercadobitcoin.net/api",private:"https://www.mercadobitcoin.net/tapi"},www:"https://www.mercadobitcoin.com.br",doc:["https://www.mercadobitcoin.com.br/api-doc","https://www.mercadobitcoin.com.br/trade-api"]},api:{public:{get:["{coin}/orderbook/","{coin}/ticker/","{coin}/trades/","{coin}/trades/{from}/","{coin}/trades/{from}/{to}","{coin}/day-summary/{year}/{month}/{day}/"]},private:{post:["cancel_order","get_account_info","get_order","get_withdrawal","list_system_messages","list_orders","list_orderbook","place_buy_order","place_sell_order","withdraw_coin"]}},markets:{"BTC/BRL":{id:"BRLBTC",symbol:"BTC/BRL",base:"BTC",quote:"BRL",suffix:"Bitcoin"},"LTC/BRL":{id:"BRLLTC",symbol:"LTC/BRL",base:"LTC",quote:"BRL",suffix:"Litecoin"},"BCH/BRL":{id:"BRLBCH",symbol:"BCH/BRL",base:"BCH",quote:"BRL",suffix:"BCash"}},fees:{trading:{maker:.003,taker:.7/100}}})}async fetchOrderBook(e,t={}){let i=this.market(e),s=await this.publicGetCoinOrderbook(this.extend({coin:i.base},t));return this.parseOrderBook(s)}async fetchTicker(e,t={}){let i=this.market(e),s=(await this.publicGetCoinTicker(this.extend({coin:i.base},t))).ticker,r=1e3*parseInt(s.date);return{symbol:e,timestamp:r,datetime:this.iso8601(r),high:parseFloat(s.high),low:parseFloat(s.low),bid:parseFloat(s.buy),ask:parseFloat(s.sell),vwap:void 0,open:void 0,close:void 0,first:void 0,last:parseFloat(s.last),change:void 0,percentage:void 0,average:void 0,baseVolume:parseFloat(s.vol),quoteVolume:void 0,info:s}}parseTrade(e,t){let i=1e3*e.date;return{info:e,timestamp:i,datetime:this.iso8601(i),symbol:t.symbol,id:e.tid.toString(),order:void 0,type:void 0,side:e.type,price:e.price,amount:e.amount}}async fetchTrades(e,t,i,s={}){let r=this.market(e),a=await this.publicGetCoinTrades(this.extend({coin:r.base},s));return this.parseTrades(a,r,t,i)}async fetchBalance(e={}){let t=await this.privatePostGetAccountInfo(),i=t.response_data.balance,s={info:t},r=Object.keys(this.currencies);for(let a=0;a<r.length;a++){let e=r[a],t=e.toLowerCase(),o=this.account();t in i&&(o.free=parseFloat(i[t].available),o.total=parseFloat(i[t].total),o.used=o.total-o.free),s[e]=o}return this.parseBalance(s)}async createOrder(e,t,i,s,a,o={}){if("market"==t)throw new r(this.id+" allows limit orders only");let n="privatePostPlace"+this.capitalize(i)+"Order",d={coin_pair:this.marketId(e),quantity:s,limit_price:a},c=await this[n](this.extend(d,o));return{info:c,id:c.response_data.order.order_id.toString()}}async cancelOrder(e,t,i={}){if(!t)throw new r(this.id+" cancelOrder() requires a symbol argument");await this.loadMarkets();let s=this.market(t);return await this.privatePostCancelOrder(this.extend({coin_pair:s.id,order_id:e},i))}parseOrder(e,t){let i=void 0;"order_type"in e&&(i=1==e.order_type?"buy":"sell");let s=e.status,r=void 0;t||"coin_pair"in e&&e.coin_pair in this.markets_by_id&&(t=this.markets_by_id[e.coin_pair]),t&&(r=t.symbol);let a=void 0;"created_timestamp"in e&&(a=1e3*parseInt(e.created_timestamp)),"updated_timestamp"in e&&(a=1e3*parseInt(e.updated_timestamp));let o={cost:parseFloat(e.fee),currency:t.quote},n=this.safeFloat(e,"limit_price"),d=this.safeFloat(e,"executed_price_avg"),c=this.safeFloat(e,"quantity"),h=this.safeFloat(e,"executed_quantity"),l=c-h,u=c*d;return{info:e,id:e.order_id.toString(),timestamp:a,datetime:this.iso8601(a),symbol:r,type:"limit",side:i,price:n,cost:u,average:d,amount:c,filled:h,remaining:l,status:s,fee:o}}async fetchOrder(e,t,i={}){if(!t)throw new r(this.id+" cancelOrder() requires a symbol argument");await this.loadMarkets();let s=this.market(t),a=void 0;return a=await this.privatePostGetOrder(this.extend({coin_pair:s.id,order_id:parseInt(e)},i)),this.parseOrder(a.response_data.order)}async withdraw(e,t,i,s={}){await this.loadMarkets();let a={coin:e,quantity:t.toFixed(10),address:i};if("BRL"==e){if(!("account_ref"in s))throw new r(this.id+" requires account_ref parameter to withdraw "+e)}else if("LTC"!=e){if(!("tx_fee"in s))throw new r(this.id+" requires tx_fee parameter to withdraw "+e)}let o=await this.privatePostWithdrawCoin(this.extend(a,s));return{info:o,id:o.response_data.withdrawal.id}}sign(e,t="public",i="GET",s={},r,a){let o=this.urls.api[t]+"/";if("public"==t)o+=this.implodeParams(e,s);else{this.checkRequiredCredentials(),o+=this.version+"/";let t=this.nonce();a=this.urlencode(this.extend({tapi_method:e,tapi_nonce:t},s));let i="/tapi/"+this.version+"/?"+a;r={"Content-Type":"application/x-www-form-urlencoded","TAPI-ID":this.apiKey,"TAPI-MAC":this.hmac(this.encode(i),this.encode(this.secret),"sha512")}}return{url:o,method:i,body:a,headers:r}}async request(e,t="public",i="GET",s={},a,o){let n=await this.fetch2(e,t,i,s,a,o);if("error_message"in n)throw new r(this.id+" "+this.json(n));return n}}},function(e,t,i){"use strict";const s=i(310),{ExchangeError:r}=i(309);e.exports=class extends s{describe(){return this.deepExtend(super.describe(),{id:"mixcoins",name:"MixCoins",countries:["GB","HK"],rateLimit:1500,version:"v1",hasCORS:!1,urls:{logo:"https://user-images.githubusercontent.com/1294454/30237212-ed29303c-9535-11e7-8af8-fcd381cfa20c.jpg",api:"https://mixcoins.com/api",www:"https://mixcoins.com",doc:"https://mixcoins.com/help/api/"},api:{public:{get:["ticker","trades","depth"]},private:{post:["cancel","info","orders","order","transactions","trade"]}},markets:{"BTC/USD":{id:"btc_usd",symbol:"BTC/USD",base:"BTC",quote:"USD",maker:.0015,taker:.0025},"ETH/BTC":{id:"eth_btc",symbol:"ETH/BTC",base:"ETH",quote:"BTC",maker:.001,taker:.0015},"BCH/BTC":{id:"bcc_btc",symbol:"BCH/BTC",base:"BCH",quote:"BTC",maker:.001,taker:.0015},"LSK/BTC":{id:"lsk_btc",symbol:"LSK/BTC",base:"LSK",quote:"BTC",maker:.0015,taker:.0025},"BCH/USD":{id:"bcc_usd",symbol:"BCH/USD",base:"BCH",quote:"USD",maker:.001,taker:.0015},"ETH/USD":{id:"eth_usd",symbol:"ETH/USD",base:"ETH",quote:"USD",maker:.001,taker:.0015}}})}async fetchBalance(e={}){let t=(await this.privatePostInfo()).result.wallet,i={info:t},s=Object.keys(this.currencies);for(let r=0;r<s.length;r++){let e=s[r],a=e.toLowerCase(),o=this.account();a in t&&(o.free=parseFloat(t[a].avail),o.used=parseFloat(t[a].lock),o.total=this.sum(o.free,o.used)),i[e]=o}return this.parseBalance(i)}async fetchOrderBook(e,t={}){let i=await this.publicGetDepth(this.extend({market:this.marketId(e)},t));return this.parseOrderBook(i.result)}async fetchTicker(e,t={}){let i=(await this.publicGetTicker(this.extend({market:this.marketId(e)},t))).result,s=this.milliseconds();return{symbol:e,timestamp:s,datetime:this.iso8601(s),high:parseFloat(i.high),low:parseFloat(i.low),bid:parseFloat(i.buy),ask:parseFloat(i.sell),vwap:void 0,open:void 0,close:void 0,first:void 0,last:parseFloat(i.last),change:void 0,percentage:void 0,average:void 0,baseVolume:parseFloat(i.vol),quoteVolume:void 0,info:i}}parseTrade(e,t){let i=1e3*parseInt(e.date);return{id:e.id.toString(),info:e,timestamp:i,datetime:this.iso8601(i),symbol:t.symbol,type:void 0,side:void 0,price:parseFloat(e.price),amount:parseFloat(e.amount)}}async fetchTrades(e,t,i,s={}){let r=this.market(e),a=await this.publicGetTrades(this.extend({market:r.id},s));return this.parseTrades(a.result,r,t,i)}async createOrder(e,t,i,s,r,a={}){let o={market:this.marketId(e),op:i,amount:s};"market"==t?(o.order_type=1,o.price=r):o.order_type=0;let n=await this.privatePostTrade(this.extend(o,a));return{info:n,id:n.result.id.toString()}}async cancelOrder(e,t,i={}){return await this.privatePostCancel({id:e})}sign(e,t="public",i="GET",s={},r,a){let o=this.urls.api+"/"+this.version+"/"+e;if("public"==t)Object.keys(s).length&&(o+="?"+this.urlencode(s));else{this.checkRequiredCredentials();let e=this.nonce();a=this.urlencode(this.extend({nonce:e},s)),r={"Content-Type":"application/x-www-form-urlencoded",Key:this.apiKey,Sign:this.hmac(this.encode(a),this.secret,"sha512")}}return{url:o,method:i,body:a,headers:r}}async request(e,t="public",i="GET",s={},a,o){let n=await this.fetch2(e,t,i,s,a,o);if("status"in n&&200==n.status)return n;throw new r(this.id+" "+this.json(n))}}},function(e,t,i){"use strict";const s=i(310),{ExchangeError:r}=i(309);e.exports=class extends s{describe(){return this.deepExtend(super.describe(),{id:"nova",name:"Novaexchange",countries:"TZ",rateLimit:2e3,version:"v2",hasCORS:!1,urls:{logo:"https://user-images.githubusercontent.com/1294454/30518571-78ca0bca-9b8a-11e7-8840-64b83a4a94b2.jpg",api:"https://novaexchange.com/remote",www:"https://novaexchange.com",doc:"https://novaexchange.com/remote/faq"},api:{public:{get:["markets/","markets/{basecurrency}/","market/info/{pair}/","market/orderhistory/{pair}/","market/openorders/{pair}/buy/","market/openorders/{pair}/sell/","market/openorders/{pair}/both/","market/openorders/{pair}/{ordertype}/"]},private:{post:["getbalances/","getbalance/{currency}/","getdeposits/","getwithdrawals/","getnewdepositaddress/{currency}/","getdepositaddress/{currency}/","myopenorders/","myopenorders_market/{pair}/","cancelorder/{orderid}/","withdraw/{currency}/","trade/{pair}/","tradehistory/","getdeposithistory/","getwithdrawalhistory/","walletstatus/","walletstatus/{currency}/"]}}})}async fetchMarkets(){let e=(await this.publicGetMarkets()).markets,t=[];for(let i=0;i<e.length;i++){let s=e[i];if(!s.disabled){let e=s.marketname,[i,r]=e.split("_"),a=r+"/"+i;t.push({id:e,symbol:a,base:r,quote:i,info:s})}}return t}async fetchOrderBook(e,t={}){await this.loadMarkets();let i=await this.publicGetMarketOpenordersPairBoth(this.extend({pair:this.marketId(e)},t));return this.parseOrderBook(i,void 0,"buyorders","sellorders","price","amount")}async fetchTicker(e,t={}){await this.loadMarkets();let i=(await this.publicGetMarketInfoPair(this.extend({pair:this.marketId(e)},t))).markets[0],s=this.milliseconds();return{symbol:e,timestamp:s,datetime:this.iso8601(s),high:parseFloat(i.high24h),low:parseFloat(i.low24h),bid:this.safeFloat(i,"bid"),ask:this.safeFloat(i,"ask"),vwap:void 0,open:void 0,close:void 0,first:void 0,last:parseFloat(i.last_price),change:parseFloat(i.change24h),percentage:void 0,average:void 0,baseVolume:void 0,quoteVolume:parseFloat(i.volume24h),info:i}}parseTrade(e,t){let i=1e3*e.unix_t_datestamp;return{info:e,timestamp:i,datetime:this.iso8601(i),symbol:t.symbol,id:void 0,order:void 0,type:void 0,side:e.tradetype.toLowerCase(),price:parseFloat(e.price),amount:parseFloat(e.amount)}}async fetchTrades(e,t,i,s={}){await this.loadMarkets();let r=this.market(e),a=await this.publicGetMarketOrderhistoryPair(this.extend({pair:r.id},s));return this.parseTrades(a.items,r,t,i)}async fetchBalance(e={}){await this.loadMarkets();let t=await this.privatePostGetbalances(),i=t.balances,s={info:t};for(let r=0;r<i.length;r++){let e=i[r],t=e.currency,a=parseFloat(e.amount_lockbox),o=parseFloat(e.amount_trades),n={free:parseFloat(e.amount),used:this.sum(a,o),total:parseFloat(e.amount_total)};s[t]=n}return this.parseBalance(s)}async createOrder(e,t,i,s,a,o={}){if("market"==t)throw new r(this.id+" allows limit orders only");await this.loadMarkets(),s=s.toString(),a=a.toString();let n=this.market(e),d={tradetype:i.toUpperCase(),tradeamount:s,tradeprice:a,tradebase:1,pair:n.id};return{info:await this.privatePostTradePair(this.extend(d,o)),id:void 0}}async cancelOrder(e,t,i={}){return await this.privatePostCancelorder(this.extend({orderid:e},i))}sign(e,t="public",i="GET",s={},r,a){let o=this.urls.api+"/"+this.version+"/";"private"==t&&(o+=t+"/"),o+=this.implodeParams(e,s);let n=this.omit(s,this.extractParams(e));if("public"==t)Object.keys(n).length&&(o+="?"+this.urlencode(n));else{this.checkRequiredCredentials();let e=this.nonce().toString();o+="?"+this.urlencode({nonce:e});let t=this.hmac(this.encode(o),this.encode(this.secret),"sha512","base64");a=this.urlencode(this.extend({apikey:this.apiKey,signature:t},n)),r={"Content-Type":"application/x-www-form-urlencoded"}}return{url:o,method:i,body:a,headers:r}}async request(e,t="public",i="GET",s={},a,o){let n=await this.fetch2(e,t,i,s,a,o);if("status"in n&&"success"!=n.status)throw new r(this.id+" "+this.json(n));return n}}},function(e,t,i){"use strict";const s=i(319);e.exports=class extends s{describe(){return this.deepExtend(super.describe(),{id:"okcoincny",name:"OKCoin CNY",countries:"CN",hasCORS:!1,urls:{logo:"https://user-images.githubusercontent.com/1294454/27766792-8be9157a-5ee5-11e7-926c-6d69b8d3378d.jpg",api:{web:"https://www.okcoin.cn",public:"https://www.okcoin.cn/pai",private:"https://www.okcoin.cn/api"},www:"https://www.okcoin.cn",doc:"https://www.okcoin.cn/rest_getStarted.html"},markets:{"BTC/CNY":{id:"btc_cny",symbol:"BTC/CNY",base:"BTC",quote:"CNY",type:"spot",spot:!0,future:!1},"LTC/CNY":{id:"ltc_cny",symbol:"LTC/CNY",base:"LTC",quote:"CNY",type:"spot",spot:!0,future:!1},"ETH/CNY":{id:"eth_cny",symbol:"ETH/CNY",base:"ETH",quote:"CNY",type:"spot",spot:!0,future:!1},"ETC/CNY":{id:"etc_cny",symbol:"ETC/CNY",base:"ETC",quote:"CNY",type:"spot",spot:!0,future:!1},"BCH/CNY":{id:"bcc_cny",symbol:"BCH/CNY",base:"BCH",quote:"CNY",type:"spot",spot:!0,future:!1}}})}}},function(e,t,i){"use strict";const s=i(319);e.exports=class extends s{describe(){return this.deepExtend(super.describe(),{id:"okex",name:"OKEX",countries:["CN","US"],hasCORS:!1,hasFutureMarkets:!0,urls:{logo:"https://user-images.githubusercontent.com/1294454/32552768-0d6dd3c6-c4a6-11e7-90f8-c043b64756a7.jpg",api:{web:"https://www.okex.com/v2",public:"https://www.okex.com/api",private:"https://www.okex.com/api"},www:"https://www.okex.com",doc:"https://www.okex.com/rest_getStarted.html"}})}}},function(e,t,i){"use strict";const s=i(310),{ExchangeError:r}=i(309);e.exports=class extends s{describe(){return this.deepExtend(super.describe(),{id:"paymium",name:"Paymium",countries:["FR","EU"],rateLimit:2e3,version:"v1",hasCORS:!0,urls:{logo:"https://user-images.githubusercontent.com/1294454/27790564-a945a9d4-5ff9-11e7-9d2d-b635763f2f24.jpg",api:"https://paymium.com/api",www:"https://www.paymium.com",doc:["https://github.com/Paymium/api-documentation","https://www.paymium.com/page/developers"]},api:{public:{get:["countries","data/{id}/ticker","data/{id}/trades","data/{id}/depth","bitcoin_charts/{id}/trades","bitcoin_charts/{id}/depth"]},private:{get:["merchant/get_payment/{UUID}","user","user/addresses","user/addresses/{btc_address}","user/orders","user/orders/{UUID}","user/price_alerts"],post:["user/orders","user/addresses","user/payment_requests","user/price_alerts","merchant/create_payment"],delete:["user/orders/{UUID}/cancel","user/price_alerts/{id}"]}},markets:{"BTC/EUR":{id:"eur",symbol:"BTC/EUR",base:"BTC",quote:"EUR"}},fees:{trading:{maker:.0059,taker:.0059}}})}async fetchBalance(e={}){let t=await this.privateGetUser(),i={info:t},s=Object.keys(this.currencies);for(let r=0;r<s.length;r++){let e=s[r],a=e.toLowerCase(),o=this.account(),n="balance_"+a,d="locked_"+a;n in t&&(o.free=t[n]),d in t&&(o.used=t[d]),o.total=this.sum(o.free,o.used),i[e]=o}return this.parseBalance(i)}async fetchOrderBook(e,t={}){let i=await this.publicGetDataIdDepth(this.extend({id:this.marketId(e)},t)),s=this.parseOrderBook(i,void 0,"bids","asks","price","amount");return s.bids=this.sortBy(s.bids,0,!0),s}async fetchTicker(e,t={}){let i=await this.publicGetDataIdTicker(this.extend({id:this.marketId(e)},t)),s=1e3*i.at,r=parseFloat(i.vwap),a=parseFloat(i.volume),o=a*r;return{symbol:e,timestamp:s,datetime:this.iso8601(s),high:this.safeFloat(i,"high"),low:this.safeFloat(i,"low"),bid:this.safeFloat(i,"bid"),ask:this.safeFloat(i,"ask"),vwap:r,open:this.safeFloat(i,"open"),close:void 0,first:void 0,last:this.safeFloat(i,"price"),change:void 0,percentage:this.safeFloat(i,"variation"),average:void 0,baseVolume:a,quoteVolume:o,info:i}}parseTrade(e,t){let i=1e3*parseInt(e.created_at_int),s="traded_"+t.base.toLowerCase();return{info:e,id:e.uuid,order:void 0,timestamp:i,datetime:this.iso8601(i),symbol:t.symbol,type:void 0,side:e.side,price:e.price,amount:e[s]}}async fetchTrades(e,t,i,s={}){let r=this.market(e),a=await this.publicGetDataIdTrades(this.extend({id:r.id},s));return this.parseTrades(a,r,t,i)}async createOrder(e,t,i,s,r,a={}){let o={type:this.capitalize(t)+"Order",currency:this.marketId(e),direction:i,amount:s};"market"==t&&(o.price=r);let n=await this.privatePostUserOrders(this.extend(o,a));return{info:n,id:n.uuid}}async cancelOrder(e,t,i={}){return await this.privatePostCancelOrder(this.extend({orderNumber:e},i))}sign(e,t="public",i="GET",s={},r,a){let o=this.urls.api+"/"+this.version+"/"+this.implodeParams(e,s),n=this.omit(s,this.extractParams(e));if("public"==t)Object.keys(n).length&&(o+="?"+this.urlencode(n));else{this.checkRequiredCredentials(),a=this.json(s);let e=this.nonce().toString(),t=e+o+a;r={"Api-Key":this.apiKey,"Api-Signature":this.hmac(this.encode(t),this.secret),"Api-Nonce":e,"Content-Type":"application/json"}}return{url:o,method:i,body:a,headers:r}}async request(e,t="public",i="GET",s={},a,o){let n=await this.fetch2(e,t,i,s,a,o);if("errors"in n)throw new r(this.id+" "+this.json(n));return n}}},function(e,t,i){"use strict";const s=i(310),{ExchangeError:r,InsufficientFunds:a,OrderNotFound:o,OrderNotCached:n}=i(309);e.exports=class extends s{describe(){return this.deepExtend(super.describe(),{id:"poloniex",name:"Poloniex",countries:"US",rateLimit:1e3,hasCORS:!0,hasFetchMyTrades:!0,hasFetchOrder:!0,hasFetchOrders:!0,hasFetchOpenOrders:!0,hasFetchClosedOrders:!0,hasFetchTickers:!0,hasFetchCurrencies:!0,hasWithdraw:!0,hasFetchOHLCV:!0,has:{fetchOHLCV:!0,fetchMyTrades:!0,fetchOrder:"emulated",fetchOrders:"emulated",fetchOpenOrders:!0,fetchClosedOrders:"emulated",fetchTickers:!0,fetchCurrencies:!0,withdraw:!0},timeframes:{"5m":300,"15m":900,"30m":1800,"2h":7200,"4h":14400,"1d":86400},urls:{logo:"https://user-images.githubusercontent.com/1294454/27766817-e9456312-5ee6-11e7-9b3c-b628ca5626a5.jpg",api:{public:"https://poloniex.com/public",private:"https://poloniex.com/tradingApi"},www:"https://poloniex.com",doc:["https://poloniex.com/support/api/","http://pastebin.com/dMX7mZE0"],fees:"https://poloniex.com/fees"},api:{public:{get:["return24hVolume","returnChartData","returnCurrencies","returnLoanOrders","returnOrderBook","returnTicker","returnTradeHistory"]},private:{post:["buy","cancelLoanOffer","cancelOrder","closeMarginPosition","createLoanOffer","generateNewAddress","getMarginPosition","marginBuy","marginSell","moveOrder","returnActiveLoans","returnAvailableAccountBalances","returnBalances","returnCompleteBalances","returnDepositAddresses","returnDepositsWithdrawals","returnFeeInfo","returnLendingHistory","returnMarginAccountSummary","returnOpenLoanOffers","returnOpenOrders","returnOrderTrades","returnTradableBalances","returnTradeHistory","sell","toggleAutoRenew","transferBalance","withdraw"]}},fees:{trading:{maker:.0015,taker:.0025},funding:0},limits:{amount:{min:1e-8,max:1e9},price:{min:1e-8,max:1e9},cost:{min:0,max:1e9}},precision:{amount:8,price:8}})}calculateFee(e,t,i,s,r,a="taker",o={}){let n=this.markets[e],d="quote",c=n[a],h=parseFloat(this.costToPrecision(e,s*c));return"sell"==i?h*=r:d="base",{type:a,currency:n[d],rate:c,cost:parseFloat(this.feeToPrecision(e,h))}}commonCurrencyCode(e){return"BTM"==e?"Bitmark":"STR"==e?"XLM":e}currencyId(e){return"Bitmark"==e?"BTM":"XLM"==e?"STR":e}parseOHLCV(e,t,i="5m",s,r){return[1e3*e.date,e.open,e.high,e.low,e.close,e.volume]}async fetchOHLCV(e,t="5m",i,s,r={}){await this.loadMarkets();let a=this.market(e);i||(i=0);let o={currencyPair:a.id,period:this.timeframes[t],start:parseInt(i/1e3)};s&&(o.end=this.sum(o.start,s*this.timeframes[t]));let n=await this.publicGetReturnChartData(this.extend(o,r));return this.parseOHLCVs(n,a,t,i,s)}async fetchMarkets(){let e=await this.publicGetReturnTicker(),t=Object.keys(e),i=[];for(let s=0;s<t.length;s++){let r=t[s],a=e[r],[o,n]=r.split("_"),d=(n=this.commonCurrencyCode(n))+"/"+(o=this.commonCurrencyCode(o));i.push(this.extend(this.fees.trading,{id:r,symbol:d,base:n,quote:o,active:!0,lot:this.limits.amount.min,info:a}))}return i}async fetchBalance(e={}){await this.loadMarkets();let t=await this.privatePostReturnCompleteBalances(this.extend({account:"all"},e)),i={info:t},s=Object.keys(t);for(let r=0;r<s.length;r++){let e=s[r],a=t[e],o=this.commonCurrencyCode(e),n={free:parseFloat(a.available),used:parseFloat(a.onOrders),total:0};n.total=this.sum(n.free,n.used),i[o]=n}return this.parseBalance(i)}async fetchFees(e={}){await this.loadMarkets();let t=await this.privatePostReturnFeeInfo();return{info:t,maker:parseFloat(t.makerFee),taker:parseFloat(t.takerFee),withdraw:0}}async fetchOrderBook(e,t={}){await this.loadMarkets();let i=await this.publicGetReturnOrderBook(this.extend({currencyPair:this.marketId(e)},t));return this.parseOrderBook(i)}parseTicker(e,t){let i=this.milliseconds(),s=void 0;return t&&(s=t.symbol),{symbol:s,timestamp:i,datetime:this.iso8601(i),high:parseFloat(e.high24hr),low:parseFloat(e.low24hr),bid:parseFloat(e.highestBid),ask:parseFloat(e.lowestAsk),vwap:void 0,open:void 0,close:void 0,first:void 0,last:parseFloat(e.last),change:parseFloat(e.percentChange),percentage:void 0,average:void 0,baseVolume:parseFloat(e.quoteVolume),quoteVolume:parseFloat(e.baseVolume),info:e}}async fetchTickers(e,t={}){await this.loadMarkets();let i=await this.publicGetReturnTicker(t),s=Object.keys(i),r={};for(let a=0;a<s.length;a++){let e=s[a],t=this.markets_by_id[e],o=t.symbol,n=i[e];r[o]=this.parseTicker(n,t)}return r}async fetchCurrencies(e={}){let t=await this.publicGetReturnCurrencies(e),i=Object.keys(t),s={};for(let r=0;r<i.length;r++){let e=i[r],a=t[e],o=this.commonCurrencyCode(e),n=0==a.delisted,d=a.disabled?"disabled":"ok";"ok"!=d&&(n=!1),s[o]={id:e,code:o,info:a,name:a.name,active:n,status:d,fee:a.txFee,precision:8,limits:{amount:{min:Math.pow(10,-8),max:Math.pow(10,8)},price:{min:Math.pow(10,-8),max:Math.pow(10,8)},cost:{min:void 0,max:void 0},withdraw:{min:a.txFee,max:Math.pow(10,8)}}}}return s}async fetchTicker(e,t={}){await this.loadMarkets();let i=this.market(e),s=(await this.publicGetReturnTicker(t))[i.id];return this.parseTicker(s,i)}parseTrade(e,t){let i=this.parse8601(e.date),s=void 0;!t&&"currencyPair"in e&&(t=this.markets_by_id[e.currencyPair]),t&&(s=t.symbol);let r=e.type,a=void 0,o=this.safeFloat(e,"total"),n=parseFloat(e.amount);if("fee"in e){let i=parseFloat(e.fee),s=void 0,d=void 0;"buy"==r?(d=t.base,s=n*i):(d=t.quote,"undefined"!=typeof o&&(s=o*i)),a={type:void 0,rate:i,cost:s,currency:d}}return{info:e,timestamp:i,datetime:this.iso8601(i),symbol:s,id:this.safeString(e,"tradeID"),order:this.safeString(e,"orderNumber"),type:"limit",side:r,price:parseFloat(e.rate),amount:n,cost:o,fee:a}}async fetchTrades(e,t,i,s={}){await this.loadMarkets();let r=this.market(e),a={currencyPair:r.id};t&&(a.start=parseInt(t/1e3),a.end=this.seconds());let o=await this.publicGetReturnTradeHistory(this.extend(a,s));return this.parseTrades(o,r,t,i)}async fetchMyTrades(e,t,i,s={}){await this.loadMarkets();let r=void 0;e&&(r=this.market(e));let a={currencyPair:r?r.id:"all"};t&&(a.start=parseInt(t/1e3),a.end=this.seconds());let o=await this.privatePostReturnTradeHistory(this.extend(a,s)),n=[];if(r)n=this.parseTrades(o,r);else if(o){let e=Object.keys(o);for(let t=0;t<e.length;t++){let i=e[t],s=this.markets_by_id[i],r=(s.symbol,this.parseTrades(o[i],s));for(let e=0;e<r.length;e++)n.push(r[e])}}return this.filterBySinceLimit(n,t,i)}parseOrder(e,t){let i=this.safeInteger(e,"timestamp");i||(i=this.parse8601(e.date));let s=void 0;"resultingTrades"in e&&(s=this.parseTrades(e.resultingTrades,t));let r=void 0;t&&(r=t.symbol);let a=parseFloat(e.price),o=this.safeFloat(e,"total",0),n=this.safeFloat(e,"amount"),d=this.safeFloat(e,"startingAmount",n),c=d-n;return{info:e,id:e.orderNumber,timestamp:i,datetime:this.iso8601(i),status:e.status,symbol:r,type:e.type,side:e.side,price:a,cost:o,amount:d,filled:c,remaining:n,trades:s,fee:void 0}}parseOpenOrders(e,t,i=[]){for(let s=0;s<e.length;s++){let r=e[s],a=this.extend(r,{status:"open",type:"limit",side:r.type,price:r.rate});i.push(this.parseOrder(a,t))}return i}async fetchOrders(e,t,i,s={}){await this.loadMarkets();let r=void 0;e&&(r=this.market(e));let a=r?r.id:"all",o=await this.privatePostReturnOpenOrders(this.extend({currencyPair:a})),n=[];if(r)n=this.parseOpenOrders(o,r,n);else{let e=Object.keys(o);for(let t=0;t<e.length;t++){let i=e[t],s=o[i],r=this.markets_by_id[i];n=this.parseOpenOrders(s,r,n)}}for(let l=0;l<n.length;l++)this.orders[n[l].id]=n[l];let d=this.indexBy(n,"id"),c=Object.keys(this.orders),h=[];for(let l=0;l<c.length;l++){let t=c[l];if(t in d)this.orders[t]=this.extend(this.orders[t],d[t]);else{let e=this.orders[t];"open"==e.status&&(this.orders[t]=this.extend(e,{status:"closed",cost:e.amount*e.price,filled:e.amount,remaining:0}))}let i=this.orders[t];r?i.symbol==e&&h.push(i):h.push(i)}return this.filterBySinceLimit(h,t,i)}async fetchOrder(e,t,i={}){let s=this.safeValue(i,"since"),r=this.safeValue(i,"limit"),a=this.omit(i,["since","limit"]),o=await this.fetchOrders(t,s,r,a);for(let n=0;n<o.length;n++)if(o[n].id==e)return o[n];throw new n(this.id+" order id "+e.toString()+" not found in cache")}filterOrdersByStatus(e,t){let i=[];for(let s=0;s<e.length;s++)e[s].status==t&&i.push(e[s]);return i}async fetchOpenOrders(e,t,i,s={}){let r=await this.fetchOrders(e,t,i,s);return this.filterOrdersByStatus(r,"open")}async fetchClosedOrders(e,t,i,s={}){let r=await this.fetchOrders(e,t,i,s);return this.filterOrdersByStatus(r,"closed")}async createOrder(e,t,i,s,a,o={}){if("market"==t)throw new r(this.id+" allows limit orders only");await this.loadMarkets();let n="privatePost"+this.capitalize(i),d=this.market(e);a=parseFloat(a),s=parseFloat(s);let c=await this[n](this.extend({currencyPair:d.id,rate:this.priceToPrecision(e,a),amount:this.amountToPrecision(e,s)},o)),h=this.milliseconds(),l=this.parseOrder(this.extend({timestamp:h,status:"open",type:t,side:i,price:a,amount:s},c),d),u=l.id;return this.orders[u]=l,this.extend({info:c},l)}async editOrder(e,t,i,s,r,a,o={}){await this.loadMarkets(),a=parseFloat(a),r=parseFloat(r);let n={orderNumber:e,rate:this.priceToPrecision(t,a),amount:this.amountToPrecision(t,r)},d=await this.privatePostMoveOrder(this.extend(n,o)),c=void 0;if(e in this.orders){this.orders[e].status="canceled";let t=d.orderNumber;this.orders[t]=this.extend(this.orders[e],{id:t,price:a,amount:r,status:"open"}),c=this.extend(this.orders[t],{info:d})}else c={info:d,id:d.orderNumber};return c}async cancelOrder(e,t,i={}){await this.loadMarkets();let s=void 0;try{s=await this.privatePostCancelOrder(this.extend({orderNumber:e},i)),e in this.orders&&(this.orders[e].status="canceled")}catch(e){if(this.last_http_response&&this.last_http_response.indexOf("Invalid order")>=0)throw new o(this.id+" cancelOrder() error: "+this.last_http_response);throw e}return s}async fetchOrderStatus(e,t){await this.loadMarkets();let i=await this.fetchOpenOrders(t);return e in this.indexBy(i,"id")?"open":"closed"}async fetchOrderTrades(e,t,i={}){await this.loadMarkets();let s=await this.privatePostReturnOrderTrades(this.extend({orderNumber:e},i));return this.parseTrades(s)}async createDepositAddress(e,t={}){let i=this.currencyId(e),s=await this.privatePostGenerateNewAddress({currency:i}),a=void 0;if(1==s.success&&(a=this.safeString(s,"response")),!a)throw new r(this.id+" createDepositAddress failed: "+this.last_http_response);return{currency:e,address:a,status:"ok",info:s}}async fetchDepositAddress(e,t={}){let i=await this.privatePostReturnDepositAddresses(),s=this.currencyId(e),r=this.safeString(i,s);return{currency:e,address:r,status:r?"ok":"none",info:i}}async withdraw(e,t,i,s={}){await this.loadMarkets();let r=this.currencyId(e),a=await this.privatePostWithdraw(this.extend({currency:r,amount:t,address:i},s));return{info:a,id:a.response}}nonce(){return this.milliseconds()}sign(e,t="public",i="GET",s={},r,a){let o=this.urls.api[t],n=this.extend({command:e},s);return"public"==t?o+="?"+this.urlencode(n):(this.checkRequiredCredentials(),n.nonce=this.nonce(),a=this.urlencode(n),r={"Content-Type":"application/x-www-form-urlencoded",Key:this.apiKey,Sign:this.hmac(this.encode(a),this.encode(this.secret),"sha512")}),{url:o,method:i,body:a,headers:r}}async request(e,t="public",i="GET",s={},o,n){let d=await this.fetch2(e,t,i,s,o,n);if("error"in d){let e=this.id+" "+this.json(d);if(d.error.indexOf("Not enough")>=0)throw new a(e);throw new r(e)}return d}}},function(e,t,i){"use strict";const s=i(310),{ExchangeError:r,AuthenticationError:a}=i(309);e.exports=class extends s{describe(){return this.deepExtend(super.describe(),{id:"quadrigacx",name:"QuadrigaCX",countries:"CA",rateLimit:1e3,version:"v2",hasCORS:!0,hasWithdraw:!0,has:{withdraw:!0},urls:{logo:"https://user-images.githubusercontent.com/1294454/27766825-98a6d0de-5ee7-11e7-9fa4-38e11a2c6f52.jpg",api:"https://api.quadrigacx.com",www:"https://www.quadrigacx.com",doc:"https://www.quadrigacx.com/api_info"},requiredCredentials:{apiKey:!0,secret:!0,uid:!0},api:{public:{get:["order_book","ticker","transactions"]},private:{post:["balance","bitcoin_deposit_address","bitcoin_withdrawal","buy","cancel_order","ether_deposit_address","ether_withdrawal","lookup_order","open_orders","sell","user_transactions"]}},markets:{"BTC/CAD":{id:"btc_cad",symbol:"BTC/CAD",base:"BTC",quote:"CAD",maker:.005,taker:.005},"BTC/USD":{id:"btc_usd",symbol:"BTC/USD",base:"BTC",quote:"USD",maker:.005,taker:.005},"ETH/BTC":{id:"eth_btc",symbol:"ETH/BTC",base:"ETH",quote:"BTC",maker:.002,taker:.002},"ETH/CAD":{id:"eth_cad",symbol:"ETH/CAD",base:"ETH",quote:"CAD",maker:.005,taker:.005},"LTC/CAD":{id:"ltc_cad",symbol:"LTC/CAD",base:"LTC",quote:"CAD",maker:.005,taker:.005},"BCH/CAD":{id:"btc_cad",symbol:"BCH/CAD",base:"BCH",quote:"CAD",maker:.005,taker:.005},"BTG/CAD":{id:"btg_cad",symbol:"BTG/CAD",base:"BTG",quote:"CAD",maker:.005,taker:.005}}})}async fetchBalance(e={}){let t=await this.privatePostBalance(),i={info:t},s=Object.keys(this.currencies);for(let r=0;r<s.length;r++){let e=s[r],a=e.toLowerCase(),o={free:parseFloat(t[a+"_available"]),used:parseFloat(t[a+"_reserved"]),total:parseFloat(t[a+"_balance"])};i[e]=o}return this.parseBalance(i)}async fetchOrderBook(e,t={}){let i=await this.publicGetOrderBook(this.extend({book:this.marketId(e)},t)),s=1e3*parseInt(i.timestamp);return this.parseOrderBook(i,s)}async fetchTicker(e,t={}){let i=await this.publicGetTicker(this.extend({book:this.marketId(e)},t)),s=1e3*parseInt(i.timestamp),r=parseFloat(i.vwap),a=parseFloat(i.volume),o=a*r;return{symbol:e,timestamp:s,datetime:this.iso8601(s),high:parseFloat(i.high),low:parseFloat(i.low),bid:parseFloat(i.bid),ask:parseFloat(i.ask),vwap:r,open:void 0,close:void 0,first:void 0,last:parseFloat(i.last),change:void 0,percentage:void 0,average:void 0,baseVolume:a,quoteVolume:o,info:i}}parseTrade(e,t){let i=1e3*parseInt(e.date);return{info:e,timestamp:i,datetime:this.iso8601(i),symbol:t.symbol,id:e.tid.toString(),order:void 0,type:void 0,side:e.side,price:parseFloat(e.price),amount:parseFloat(e.amount)}}async fetchTrades(e,t,i,s={}){let r=this.market(e),a=await this.publicGetTransactions(this.extend({book:r.id},s));return this.parseTrades(a,r,t,i)}async createOrder(e,t,i,s,r,a={}){let o="privatePost"+this.capitalize(i),n={amount:s,book:this.marketId(e)};"limit"==t&&(n.price=r);let d=await this[o](this.extend(n,a));return{info:d,id:d.id.toString()}}async cancelOrder(e,t,i={}){return await this.privatePostCancelOrder(this.extend({id:e},i))}async fetchDepositAddress(e,t={}){let i="privatePost"+this.getCurrencyName(e)+"DepositAddress",s=await this[i](t),r=void 0,a=void 0;return s.indexOf("rror")>=0?a="error":(r=s,a="ok"),{currency:e,address:r,status:a,info:this.last_http_response}}getCurrencyName(e){return"ETH"==e?"Ether":"BTC"==e?"Bitcoin":void 0}async withdraw(e,t,i,s={}){await this.loadMarkets();let r={amount:t,address:i},a="privatePost"+this.getCurrencyName(e)+"Withdrawal";return{info:await this[a](this.extend(r,s)),id:void 0}}sign(e,t="public",i="GET",s={},r,a){let o=this.urls.api+"/"+this.version+"/"+e;if("public"==t)o+="?"+this.urlencode(s);else{this.checkRequiredCredentials();let e=this.nonce(),t=[e.toString(),this.uid,this.apiKey].join(""),i=this.hmac(this.encode(t),this.encode(this.secret)),o=this.extend({key:this.apiKey,nonce:e,signature:i},s);a=this.json(o),r={"Content-Type":"application/json"}}return{url:o,method:i,body:a,headers:r}}async request(e,t="public",i="GET",s={},a,o){let n=await this.fetch2(e,t,i,s,a,o);if("string"==typeof n)return n;if("error"in n)throw new r(this.id+" "+this.json(n));return n}}},function(e,t,i){"use strict";const s=i(338);e.exports=class extends s{describe(){return this.deepExtend(super.describe(),{id:"quoine",name:"QUOINE",countries:["JP","SG","VN"],version:"2",rateLimit:1e3,hasFetchTickers:!0,hasCORS:!1,urls:{logo:"https://user-images.githubusercontent.com/1294454/27766844-9615a4e8-5ee8-11e7-8814-fcd004db8cdd.jpg",api:"https://api.quoine.com",www:"https://www.quoine.com",doc:"https://developers.quoine.com"}})}}},function(e,t,i){"use strict";const s=i(310);e.exports=class extends s{describe(){return this.deepExtend(super.describe(),{id:"southxchange",name:"SouthXchange",countries:"AR",rateLimit:1e3,hasFetchTickers:!0,hasCORS:!1,hasWithdraw:!0,urls:{logo:"https://user-images.githubusercontent.com/1294454/27838912-4f94ec8a-60f6-11e7-9e5d-bbf9bd50a559.jpg",api:"https://www.southxchange.com/api",www:"https://www.southxchange.com",doc:"https://www.southxchange.com/Home/Api"},api:{public:{get:["markets","price/{symbol}","prices","book/{symbol}","trades/{symbol}"]},private:{post:["cancelMarketOrders","cancelOrder","generatenewaddress","listOrders","listBalances","placeOrder","withdraw"]}},fees:{trading:{tierBased:!1,percentage:!0,maker:.002,taker:.002}}})}async fetchMarkets(){let e=await this.publicGetMarkets(),t=[];for(let i=0;i<e.length;i++){let s=e[i],r=s[0],a=s[1],o=r+"/"+a,n=o;t.push({id:n,symbol:o,base:r,quote:a,info:s})}return t}async fetchBalance(e={}){await this.loadMarkets();let t=await this.privatePostListBalances();if(!t)throw new ExchangeError(this.id+" fetchBalance got an unrecognized response");let i={info:t};for(let s=0;s<t.length;s++){let e=t[s],r=e.Currency.toUpperCase(),a=parseFloat(e.Available),o=parseFloat(e.Unconfirmed),n={free:a,used:o,total:this.sum(a,o)};i[r]=n}return this.parseBalance(i)}async fetchOrderBook(e,t={}){await this.loadMarkets();let i=await this.publicGetBookSymbol(this.extend({symbol:this.marketId(e)},t));return this.parseOrderBook(i,void 0,"BuyOrders","SellOrders","Price","Amount")}parseTicker(e,t){let i=this.milliseconds(),s=void 0;return t&&(s=t.symbol),{symbol:s,timestamp:i,datetime:this.iso8601(i),high:void 0,low:void 0,bid:this.safeFloat(e,"Bid"),ask:this.safeFloat(e,"Ask"),vwap:void 0,open:void 0,close:void 0,first:void 0,last:this.safeFloat(e,"Last"),change:this.safeFloat(e,"Variation24Hr"),percentage:void 0,average:void 0,baseVolume:this.safeFloat(e,"Volume24Hr"),quoteVolume:void 0,info:e}}async fetchTickers(e,t={}){await this.loadMarkets();let i=await this.publicGetPrices(t),s=this.indexBy(i,"Market"),r=Object.keys(s),a={};for(let o=0;o<r.length;o++){let e=r[o],t=e,i=void 0;e in this.markets_by_id&&(t=(i=this.markets_by_id[e]).symbol);let n=s[e];a[t]=this.parseTicker(n,i)}return a}async fetchTicker(e,t={}){await this.loadMarkets();let i=this.market(e),s=await this.publicGetPriceSymbol(this.extend({symbol:i.id},t));return this.parseTicker(s,i)}parseTrade(e,t){let i=1e3*e.At;return{info:e,timestamp:i,datetime:this.iso8601(i),symbol:t.symbol,id:void 0,order:void 0,type:void 0,side:e.Type,price:e.Price,amount:e.Amount}}async fetchTrades(e,t,i,s={}){await this.loadMarkets();let r=this.market(e),a=await this.publicGetTradesSymbol(this.extend({symbol:r.id},s));return this.parseTrades(a,r,t,i)}async createOrder(e,t,i,s,r,a={}){await this.loadMarkets();let o=this.market(e),n={listingCurrency:o.base,referenceCurrency:o.quote,type:i,amount:s};"limit"==t&&(n.limitPrice=r);let d=await this.privatePostPlaceOrder(this.extend(n,a));return{info:d,id:d.toString()}}async cancelOrder(e,t,i={}){return await this.loadMarkets(),await this.privatePostCancelOrder(this.extend({orderCode:e},i))}async withdraw(e,t,i,s={}){return{info:await this.privatePostWithdraw(this.extend({currency:e,address:i,amount:t},s)),id:void 0}}sign(e,t="public",i="GET",s={},r,a){let o=this.urls.api+"/"+this.implodeParams(e,s),n=this.omit(s,this.extractParams(e));if("private"==t){this.checkRequiredCredentials();let e=this.nonce();n=this.extend({key:this.apiKey,nonce:e},n),a=this.json(n),r={"Content-Type":"application/json",Hash:this.hmac(this.encode(a),this.encode(this.secret),"sha512")}}return{url:o,method:i,body:a,headers:r}}async request(e,t="public",i="GET",s={},r,a){return await this.fetch2(e,t,i,s,r,a)}}},function(e,t,i){"use strict";const s=i(316);e.exports=class extends s{describe(){return this.deepExtend(super.describe(),{id:"surbitcoin",name:"SurBitcoin",countries:"VE",hasCORS:!1,urls:{logo:"https://user-images.githubusercontent.com/1294454/27991511-f0a50194-6481-11e7-99b5-8f02932424cc.jpg",api:{public:"https://api.blinktrade.com/api",private:"https://api.blinktrade.com/tapi"},www:"https://surbitcoin.com",doc:"https://blinktrade.com/docs"}})}}},function(e,t,i){"use strict";const s=i(310),{ExchangeError:r}=i(309);e.exports=class extends s{describe(){return this.deepExtend(super.describe(),{id:"therock",name:"TheRockTrading",countries:"MT",rateLimit:1e3,version:"v1",hasCORS:!1,hasFetchTickers:!0,urls:{logo:"https://user-images.githubusercontent.com/1294454/27766869-75057fa2-5ee9-11e7-9a6f-13e641fa4707.jpg",api:"https://api.therocktrading.com",www:"https://therocktrading.com",doc:["https://api.therocktrading.com/doc/v1/index.html","https://api.therocktrading.com/doc/"]},api:{public:{get:["funds/{id}/orderbook","funds/{id}/ticker","funds/{id}/trades","funds/tickers"]},private:{get:["balances","balances/{id}","discounts","discounts/{id}","funds","funds/{id}","funds/{id}/trades","funds/{fund_id}/orders","funds/{fund_id}/orders/{id}","funds/{fund_id}/position_balances","funds/{fund_id}/positions","funds/{fund_id}/positions/{id}","transactions","transactions/{id}","withdraw_limits/{id}","withdraw_limits"],post:["atms/withdraw","funds/{fund_id}/orders"],delete:["funds/{fund_id}/orders/{id}","funds/{fund_id}/orders/remove_all"]}},fees:{trading:{maker:2e-4,taker:.002}}})}async fetchMarkets(){let e=await this.publicGetFundsTickers(),t=[];for(let i=0;i<e.tickers.length;i++){let s=e.tickers[i],r=s.fund_id,a=r.slice(0,3),o=r.slice(3,6),n=a+"/"+o;t.push({id:r,symbol:n,base:a,quote:o,info:s})}return t}async fetchBalance(e={}){await this.loadMarkets();let t=await this.privateGetBalances(),i=t.balances,s={info:t};for(let r=0;r<i.length;r++){let e=i[r],t=e.currency,a=e.trading_balance,o=e.balance,n={free:a,used:o-a,total:o};s[t]=n}return this.parseBalance(s)}async fetchOrderBook(e,t={}){await this.loadMarkets();let i=await this.publicGetFundsIdOrderbook(this.extend({id:this.marketId(e)},t)),s=this.parse8601(i.date);return this.parseOrderBook(i,s,"bids","asks","price","amount")}parseTicker(e,t){let i=this.parse8601(e.date),s=void 0;return t&&(s=t.symbol),{symbol:s,timestamp:i,datetime:this.iso8601(i),high:parseFloat(e.high),low:parseFloat(e.low),bid:parseFloat(e.bid),ask:parseFloat(e.ask),vwap:void 0,open:parseFloat(e.open),close:parseFloat(e.close),first:void 0,last:parseFloat(e.last),change:void 0,percentage:void 0,average:void 0,baseVolume:parseFloat(e.volume_traded),quoteVolume:parseFloat(e.volume),info:e}}async fetchTickers(e,t={}){await this.loadMarkets();let i=await this.publicGetFundsTickers(t),s=this.indexBy(i.tickers,"fund_id"),r=Object.keys(s),a={};for(let o=0;o<r.length;o++){let e=r[o],t=this.markets_by_id[e],i=t.symbol,n=s[e];a[i]=this.parseTicker(n,t)}return a}async fetchTicker(e,t={}){await this.loadMarkets();let i=this.market(e),s=await this.publicGetFundsIdTicker(this.extend({id:i.id},t));return this.parseTicker(s,i)}parseTrade(e,t){t||(t=this.markets_by_id[e.fund_id]);let i=this.parse8601(e.date);return{info:e,id:e.id.toString(),order:void 0,timestamp:i,datetime:this.iso8601(i),symbol:t.symbol,type:void 0,side:e.side,price:e.price,amount:e.amount}}async fetchTrades(e,t,i,s={}){await this.loadMarkets();let r=this.market(e),a=await this.publicGetFundsIdTrades(this.extend({id:r.id},s));return this.parseTrades(a.trades,r,t,i)}async createOrder(e,t,i,s,r,a={}){await this.loadMarkets(),"market"==t&&(r=0);let o=await this.privatePostFundsFundIdOrders(this.extend({fund_id:this.marketId(e),side:i,amount:s,price:r},a));return{info:o,id:o.id.toString()}}async cancelOrder(e,t,i={}){return await this.loadMarkets(),await this.privateDeleteFundsFundIdOrdersId(this.extend({id:e},i))}sign(e,t="public",i="GET",s={},r,a){let o=this.urls.api+"/"+this.version+"/"+this.implodeParams(e,s),n=this.omit(s,this.extractParams(e));if("private"==t){this.checkRequiredCredentials();let e=this.nonce().toString(),t=e+o;r={"X-TRT-KEY":this.apiKey,"X-TRT-NONCE":e,"X-TRT-SIGN":this.hmac(this.encode(t),this.encode(this.secret),"sha512")},Object.keys(n).length&&(a=this.json(n),r["Content-Type"]="application/json")}return{url:o,method:i,body:a,headers:r}}async request(e,t="public",i="GET",s={},a,o){let n=await this.fetch2(e,t,i,s,a,o);if("errors"in n)throw new r(this.id+" "+this.json(n));return n}}},function(e,t,i){"use strict";const s=i(317);e.exports=class extends s{describe(){return this.deepExtend(super.describe(),{id:"tidex",name:"Tidex",countries:"UK",rateLimit:2e3,version:"3",urls:{logo:"https://user-images.githubusercontent.com/1294454/30781780-03149dc4-a12e-11e7-82bb-313b269d24d4.jpg",api:{public:"https://api.tidex.com/api",private:"https://api.tidex.com/tapi"},www:"https://tidex.com",doc:"https://tidex.com/public-api",fees:"https://tidex.com/pairs-spec"},fees:{trading:{tierBased:!1,percentage:!0,taker:.001,maker:.001},funding:{tierBased:!1,percentage:!1,withdraw:{BTC:.0012,ETH:.01,LTC:.001,DOGE:.01,ICN:2,DASH:.002,GNO:2,EOS:2,BCH:2,USDT:0},deposit:{BTC:0,ETH:0,LTC:0,DOGE:0,ICN:0,DASH:0,GNO:0,EOS:0,BCH:0,USDT:0}}}})}}},function(e,t,i){"use strict";const s=i(316);e.exports=class extends s{describe(){return this.deepExtend(super.describe(),{id:"urdubit",name:"UrduBit",countries:"PK",hasCORS:!1,urls:{logo:"https://user-images.githubusercontent.com/1294454/27991453-156bf3ae-6480-11e7-82eb-7295fe1b5bb4.jpg",api:{public:"https://api.blinktrade.com/api",private:"https://api.blinktrade.com/tapi"},www:"https://urdubit.com",doc:"https://blinktrade.com/docs"}})}}},function(e,t,i){"use strict";const s=i(310);e.exports=class extends s{describe(){return this.deepExtend(super.describe(),{id:"vaultoro",name:"Vaultoro",countries:"CH",rateLimit:1e3,version:"1",hasCORS:!0,urls:{logo:"https://user-images.githubusercontent.com/1294454/27766880-f205e870-5ee9-11e7-8fe2-0d5b15880752.jpg",api:"https://api.vaultoro.com",www:"https://www.vaultoro.com",doc:"https://api.vaultoro.com"},api:{public:{get:["bidandask","buyorders","latest","latesttrades","markets","orderbook","sellorders","transactions/day","transactions/hour","transactions/month"]},private:{get:["balance","mytrades","orders"],post:["buy/{symbol}/{type}","cancel/{id}","sell/{symbol}/{type}","withdraw"]}}})}async fetchMarkets(){let e=[],t=(await this.publicGetMarkets()).data,i=t.BaseCurrency,s=t.MarketCurrency,r=i+"/"+s,a=i,o=s,n=t.MarketName;return e.push({id:n,symbol:r,base:i,quote:s,baseId:a,quoteId:o,info:t}),e}async fetchBalance(e={}){await this.loadMarkets();let t=(await this.privateGetBalance()).data,i={info:t};for(let s=0;s<t.length;s++){let e=t[s],r=e.currency_code.toUpperCase(),a=e.cash,o=e.reserved,n={free:a,used:o,total:this.sum(a,o)};i[r]=n}return this.parseBalance(i)}async fetchOrderBook(e,t={}){await this.loadMarkets();let i=await this.publicGetOrderbook(t),s={bids:i.data[0].b,asks:i.data[1].s},r=this.parseOrderBook(s,void 0,"bids","asks","Gold_Price","Gold_Amount");return r.bids=this.sortBy(r.bids,0,!0),r}async fetchTicker(e,t={}){await this.loadMarkets();let i=await this.publicGetBidandask(t),s=i.bids.length,r=i.bids[s-1],a=i.asks[0],o=(await this.publicGetMarkets(t)).data,n=this.milliseconds();return{symbol:e,timestamp:n,datetime:this.iso8601(n),high:parseFloat(o["24hHigh"]),low:parseFloat(o["24hLow"]),bid:r[0],ask:a[0],vwap:void 0,open:void 0,close:void 0,first:void 0,last:parseFloat(o.LastPrice),change:void 0,percentage:void 0,average:void 0,baseVolume:void 0,quoteVolume:parseFloat(o["24hVolume"]),info:o}}parseTrade(e,t){let i=this.parse8601(e.Time);return{id:void 0,info:e,timestamp:i,datetime:this.iso8601(i),symbol:t.symbol,order:void 0,type:void 0,side:void 0,price:e.Gold_Price,amount:e.Gold_Amount}}async fetchTrades(e,t,i,s={}){await this.loadMarkets();let r=this.market(e),a=await this.publicGetTransactionsDay(s);return this.parseTrades(a,r,t,i)}async createOrder(e,t,i,s,r,a={}){await this.loadMarkets();let o=this.market(e),n="privatePost"+this.capitalize(i)+"SymbolType",d=await this[n](this.extend({symbol:o.quoteId.toLowerCase(),type:t,gld:s,price:r||1},a));return{info:d,id:d.data.Order_ID}}async cancelOrder(e,t,i={}){return await this.loadMarkets(),await this.privatePostCancelId(this.extend({id:e},i))}sign(e,t="public",i="GET",s={},r,a){let o=this.urls.api+"/";if("public"==t)o+=e;else{this.checkRequiredCredentials();let t=this.nonce();o+=this.version+"/"+this.implodeParams(e,s);let i=this.extend({nonce:t,apikey:this.apiKey},this.omit(s,this.extractParams(e)));o+="?"+this.urlencode(i),r={"Content-Type":"application/json","X-Signature":this.hmac(this.encode(o),this.encode(this.secret))}}return{url:o,method:i,body:a,headers:r}}}},function(e,t,i){"use strict";const s=i(316);e.exports=class extends s{describe(){return this.deepExtend(super.describe(),{id:"vbtc",name:"VBTC",countries:"VN",hasCORS:!1,urls:{logo:"https://user-images.githubusercontent.com/1294454/27991481-1f53d1d8-6481-11e7-884e-21d17e7939db.jpg",api:{public:"https://api.blinktrade.com/api",private:"https://api.blinktrade.com/tapi"},www:"https://vbtc.exchange",doc:"https://blinktrade.com/docs"}})}}},function(e,t,i){"use strict";const s=i(310),{ExchangeError:r}=i(309);e.exports=class extends s{describe(){return this.deepExtend(super.describe(),{id:"virwox",name:"VirWoX",countries:["AT","EU"],rateLimit:1e3,hasCORS:!0,urls:{logo:"https://user-images.githubusercontent.com/1294454/27766894-6da9d360-5eea-11e7-90aa-41f2711b7405.jpg",api:{public:"http://api.virwox.com/api/json.php",private:"https://www.virwox.com/api/trading.php"},www:"https://www.virwox.com",doc:"https://www.virwox.com/developers.php"},requiredCredentials:{apiKey:!0,secret:!1,login:!0,password:!0},api:{public:{get:["getInstruments","getBestPrices","getMarketDepth","estimateMarketOrder","getTradedPriceVolume","getRawTradeData","getStatistics","getTerminalList","getGridList","getGridStatistics"],post:["getInstruments","getBestPrices","getMarketDepth","estimateMarketOrder","getTradedPriceVolume","getRawTradeData","getStatistics","getTerminalList","getGridList","getGridStatistics"]},private:{get:["cancelOrder","getBalances","getCommissionDiscount","getOrders","getTransactions","placeOrder"],post:["cancelOrder","getBalances","getCommissionDiscount","getOrders","getTransactions","placeOrder"]}}})}async fetchMarkets(){let e=await this.publicGetInstruments(),t=Object.keys(e.result),i=[];for(let s=0;s<t.length;s++){let r=e.result[t[s]],a=r.instrumentID,o=r.symbol,n=r.longCurrency,d=r.shortCurrency;i.push({id:a,symbol:o,base:n,quote:d,info:r})}return i}async fetchBalance(e={}){await this.loadMarkets();let t=(await this.privatePostGetBalances()).result.accountList,i={info:t};for(let s=0;s<t.length;s++){let e=t[s],r=e.currency,a=e.balance,o={free:a,used:0,total:a};i[r]=o}return this.parseBalance(i)}async fetchMarketPrice(e,t={}){await this.loadMarkets();let i=(await this.publicPostGetBestPrices(this.extend({symbols:[e]},t))).result;return{bid:this.safeFloat(i[0],"bestBuyPrice"),ask:this.safeFloat(i[0],"bestSellPrice")}}async fetchOrderBook(e,t={}){await this.loadMarkets();let i=(await this.publicPostGetMarketDepth(this.extend({symbols:[e],buyDepth:100,sellDepth:100},t))).result[0];return this.parseOrderBook(i,void 0,"buy","sell","price","volume")}async fetchTicker(e,t={}){await this.loadMarkets();let i=this.milliseconds(),s=i-864e5,r=await this.publicGetTradedPriceVolume(this.extend({instrument:e,endDate:this.YmdHMS(i),startDate:this.YmdHMS(s),HLOC:1},t)),a=await this.fetchMarketPrice(e,t),o=r.result.priceVolumeList,n=Object.keys(o),d=o[n[n.length-1]],c=this.milliseconds();return{symbol:e,timestamp:c,datetime:this.iso8601(c),high:parseFloat(d.high),low:parseFloat(d.low),bid:a.bid,ask:a.ask,vwap:void 0,open:parseFloat(d.open),close:parseFloat(d.close),first:void 0,last:void 0,change:void 0,percentage:void 0,average:void 0,baseVolume:parseFloat(d.longVolume),quoteVolume:parseFloat(d.shortVolume),info:d}}async fetchTrades(e,t,i,s={}){await this.loadMarkets();let r=this.market(e);return await this.publicGetRawTradeData(this.extend({instrument:r.id,timespan:3600},s))}async createOrder(e,t,i,s,r,a={}){await this.loadMarkets();let o={instrument:this.symbol(e),orderType:i.toUpperCase(),amount:s};"limit"==t&&(o.price=r);let n=await this.privatePostPlaceOrder(this.extend(o,a));return{info:n,id:n.orderID.toString()}}async cancelOrder(e,t,i={}){return await this.privatePostCancelOrder(this.extend({orderID:e},i))}sign(e,t="public",i="GET",s={},r,a){let o=this.urls.api[t],n={};"private"==t&&(this.checkRequiredCredentials(),n.key=this.apiKey,n.user=this.login,n.pass=this.password);let d=this.nonce();return"GET"==i?o+="?"+this.urlencode(this.extend({method:e,id:d},n,s)):(r={"Content-Type":"application/json"},a=this.json({method:e,params:this.extend(n,s),id:d})),{url:o,method:i,body:a,headers:r}}async request(e,t="public",i="GET",s={},a,o){let n=await this.fetch2(e,t,i,s,a,o);if("error"in n&&n.error)throw new r(this.id+" "+this.json(n));return n}}},function(e,t,i){"use strict";const s=i(317),{ExchangeError:r,InsufficientFunds:a,OrderNotFound:o,DDoSProtection:n}=i(309);e.exports=class extends s{describe(){return this.deepExtend(super.describe(),{id:"wex",name:"WEX",countries:"NZ",version:"3",hasFetchTickers:!0,hasCORS:!1,urls:{logo:"https://user-images.githubusercontent.com/1294454/30652751-d74ec8f8-9e31-11e7-98c5-71469fcef03e.jpg",api:{public:"https://wex.nz/api",private:"https://wex.nz/tapi"},www:"https://wex.nz",doc:["https://wex.nz/api/3/docs","https://wex.nz/tapi/docs"]},api:{public:{get:["info","ticker/{pair}","depth/{pair}","trades/{pair}"]},private:{post:["getInfo","Trade","ActiveOrders","OrderInfo","CancelOrder","TradeHistory","TransHistory","CoinDepositAddress","WithdrawCoin","CreateCoupon","RedeemCoupon"]}},fees:{trading:{maker:.002,taker:.002}}})}parseTicker(e,t){let i=1e3*e.updated,s=void 0;return t&&(s=t.symbol),{symbol:s,timestamp:i,datetime:this.iso8601(i),high:this.safeFloat(e,"high"),low:this.safeFloat(e,"low"),bid:this.safeFloat(e,"sell"),ask:this.safeFloat(e,"buy"),vwap:void 0,open:void 0,close:void 0,first:void 0,last:this.safeFloat(e,"last"),change:void 0,percentage:void 0,average:this.safeFloat(e,"avg"),baseVolume:this.safeFloat(e,"vol_cur"),quoteVolume:this.safeFloat(e,"vol"),info:e}}handleErrors(e,t,i,s,d,c){if(200==e){if("{"!=c[0])throw new r(this.id+" returned a non-JSON reply: "+c);let e=JSON.parse(c);if("success"in e&&!e.success){let t=this.safeValue(e,"error");if(!t)throw new r(this.id+" returned a malformed error: "+c);if("bad status"==t)throw new o(this.id+" "+t);if(t.indexOf("It is not enough")>=0)throw new a(this.id+" "+t);if("Requests too often"==t)throw new n(this.id+" "+t);if("not available"==t)throw new n(this.id+" "+t);if("external service unavailable"==t)throw new n(this.id+" "+t);if("no orders"!=t)throw new r(this.id+" "+t)}}}request(e,t="public",i="GET",s={},r,a){return this.fetch2(e,t,i,s,r,a)}}},function(e,t,i){"use strict";const s=i(310),{ExchangeError:r,NotSupported:a,AuthenticationError:o}=i(309);e.exports=class extends s{describe(){return this.deepExtend(super.describe(),{id:"xbtce",name:"xBTCe",countries:"RU",rateLimit:2e3,version:"v1",hasPublicAPI:!1,hasCORS:!1,hasFetchTickers:!0,hasFetchOHLCV:!1,urls:{logo:"https://user-images.githubusercontent.com/1294454/28059414-e235970c-662c-11e7-8c3a-08e31f78684b.jpg",api:"https://cryptottlivewebapi.xbtce.net:8443/api",www:"https://www.xbtce.com",doc:["https://www.xbtce.com/tradeapi","https://support.xbtce.info/Knowledgebase/Article/View/52/25/xbtce-exchange-api"]},requiredCredentials:{apiKey:!0,secret:!0,uid:!0},api:{public:{get:["currency","currency/{filter}","level2","level2/{filter}","quotehistory/{symbol}/{periodicity}/bars/ask","quotehistory/{symbol}/{periodicity}/bars/bid","quotehistory/{symbol}/level2","quotehistory/{symbol}/ticks","symbol","symbol/{filter}","tick","tick/{filter}","ticker","ticker/{filter}","tradesession"]},private:{get:["tradeserverinfo","tradesession","currency","currency/{filter}","level2","level2/{filter}","symbol","symbol/{filter}","tick","tick/{filter}","account","asset","asset/{id}","position","position/{id}","trade","trade/{id}","quotehistory/{symbol}/{periodicity}/bars/ask","quotehistory/{symbol}/{periodicity}/bars/ask/info","quotehistory/{symbol}/{periodicity}/bars/bid","quotehistory/{symbol}/{periodicity}/bars/bid/info","quotehistory/{symbol}/level2","quotehistory/{symbol}/level2/info","quotehistory/{symbol}/periodicities","quotehistory/{symbol}/ticks","quotehistory/{symbol}/ticks/info","quotehistory/cache/{symbol}/{periodicity}/bars/ask","quotehistory/cache/{symbol}/{periodicity}/bars/bid","quotehistory/cache/{symbol}/level2","quotehistory/cache/{symbol}/ticks","quotehistory/symbols","quotehistory/version"],post:["trade","tradehistory"],put:["trade"],delete:["trade"]}}})}async fetchMarkets(){let e=await this.privateGetSymbol(),t=[];for(let i=0;i<e.length;i++){let s=e[i],r=s.Symbol,a=s.MarginCurrency,o=s.ProfitCurrency;"DSH"==a&&(a="DASH");let n=a+"/"+o;n=s.IsTradeAllowed?n:r,t.push({id:r,symbol:n,base:a,quote:o,info:s})}return t}async fetchBalance(e={}){await this.loadMarkets();let t=await this.privateGetAsset(),i={info:t};for(let s=0;s<t.length;s++){let e=t[s],r=e.Currency.toUpperCase();"DSH"==r&&(r="DASH");let a={free:e.FreeAmount,used:e.LockedAmount,total:e.Amount};i[r]=a}return this.parseBalance(i)}async fetchOrderBook(e,t={}){await this.loadMarkets();let i=this.market(e),s=await this.privateGetLevel2Filter(this.extend({filter:i.id},t)),r=(s=s[0]).Timestamp;return this.parseOrderBook(s,r,"Bids","Asks","Price","Volume")}parseTicker(e,t){let i=0,s=void 0;"LastBuyTimestamp"in e&&i<e.LastBuyTimestamp&&(i=e.LastBuyTimestamp,s=e.LastBuyPrice),"LastSellTimestamp"in e&&i<e.LastSellTimestamp&&(i=e.LastSellTimestamp,s=e.LastSellPrice),i||(i=this.milliseconds());let r=void 0;return t&&(r=t.symbol),{symbol:r,timestamp:i,datetime:this.iso8601(i),high:e.DailyBestBuyPrice,low:e.DailyBestSellPrice,bid:e.BestBid,ask:e.BestAsk,vwap:void 0,open:void 0,close:void 0,first:void 0,last:s,change:void 0,percentage:void 0,average:void 0,baseVolume:e.DailyTradedTotalVolume,quoteVolume:void 0,info:e}}async fetchTickers(e,t={}){await this.loadMarkets();let i=await this.publicGetTicker(t);i=this.indexBy(i,"Symbol");let s=Object.keys(i),r={};for(let a=0;a<s.length;a++){let e=s[a],t=void 0,o=void 0;if(e in this.markets_by_id)o=(t=this.markets_by_id[e]).symbol;else{let t=e.slice(0,3),i=e.slice(3,6);"DSH"==t&&(t="DASH"),"DSH"==i&&(i="DASH"),o=t+"/"+i}let n=i[e];r[o]=this.parseTicker(n,t)}return r}async fetchTicker(e,t={}){await this.loadMarkets();let i=this.market(e),s=await this.publicGetTickerFilter(this.extend({filter:i.id},t));if(s.length<1)throw new r(this.id+" fetchTicker returned empty response, xBTCe public API error");let a=(s=this.indexBy(s,"Symbol"))[i.id];return this.parseTicker(a,i)}async fetchTrades(e,t,i,s={}){return await this.loadMarkets(),await this.privateGetTrade(s)}parseOHLCV(e,t,i="1m",s,r){return[e.Timestamp,e.Open,e.High,e.Low,e.Close,e.Volume]}async fetchOHLCV(e,t="1m",i,s,r={}){throw new a(this.id+" fetchOHLCV is disabled by the exchange")}async createOrder(e,t,i,s,a,o={}){if(await this.loadMarkets(),"market"==t)throw new r(this.id+" allows limit orders only");let n=await this.tapiPostTrade(this.extend({pair:this.marketId(e),type:i,amount:s,rate:a},o));return{info:n,id:n.Id.toString()}}async cancelOrder(e,t,i={}){return await this.privateDeleteTrade(this.extend({Type:"Cancel",Id:e},i))}nonce(){return this.milliseconds()}sign(e,t="public",i="GET",s={},r,a){if(!this.apiKey)throw new o(this.id+" requires apiKey for all requests, their public API is always busy");if(!this.uid)throw new o(this.id+" requires uid property for authentication and trading, their public API is always busy");let n=this.urls.api+"/"+this.version;"public"==t&&(n+="/"+t),n+="/"+this.implodeParams(e,s);let d=this.omit(s,this.extractParams(e));if("public"==t)Object.keys(d).length&&(n+="?"+this.urlencode(d));else{this.checkRequiredCredentials(),r={"Accept-Encoding":"gzip, deflate"};let e=this.nonce().toString();"POST"==i&&(Object.keys(d).length?(r["Content-Type"]="application/json",a=this.json(d)):n+="?"+this.urlencode(d));let t=e+this.uid+this.apiKey+i+n;a&&(t+=a);let s=this.hmac(this.encode(t),this.encode(this.secret),"sha256","base64"),o=this.uid+":"+this.apiKey+":"+e+":"+this.binaryToString(s);r.Authorization="HMAC "+o}return{url:n,method:i,body:a,headers:r}}}},function(e,t,i){"use strict";const s=i(317),{ExchangeError:r,InsufficientFunds:a,DDoSProtection:o}=i(309);e.exports=class extends s{describe(){return this.deepExtend(super.describe(),{id:"yobit",name:"YoBit",countries:"RU",rateLimit:3e3,version:"3",hasCORS:!1,hasWithdraw:!0,hasFetchTickers:!1,urls:{logo:"https://user-images.githubusercontent.com/1294454/27766910-cdcbfdae-5eea-11e7-9859-03fea873272d.jpg",api:{public:"https://yobit.net/api",private:"https://yobit.net/tapi"},www:"https://www.yobit.net",doc:"https://www.yobit.net/en/api/"},api:{public:{get:["depth/{pair}","info","ticker/{pair}","trades/{pair}"]},private:{post:["ActiveOrders","CancelOrder","GetDepositAddress","getInfo","OrderInfo","Trade","TradeHistory","WithdrawCoinsToAddress"]}},fees:{trading:{maker:.002,taker:.002},funding:0}})}commonCurrencyCode(e){let t={AIR:"AirCoin",ANI:"ANICoin",ANT:"AntsCoin",ATM:"Autumncoin",BCC:"BCH",BTS:"Bitshares2",DCT:"Discount",DGD:"DarkGoldCoin",ICN:"iCoin",LIZI:"LiZi",LUN:"LunarCoin",NAV:"NavajoCoin",OMG:"OMGame",PAY:"EPAY",REP:"Republicoin"};return e in t?t[e]:e}currencyId(e){let t={AirCoin:"AIR",ANICoin:"ANI",AntsCoin:"ANT",Autumncoin:"ATM",BCH:"BCC",Bitshares2:"BTS",Discount:"DCT",DarkGoldCoin:"DGD",iCoin:"ICN",LiZi:"LIZI",LunarCoin:"LUN",NavajoCoin:"NAV",OMGame:"OMG",EPAY:"PAY",Republicoin:"REP"};return e in t?t[e]:e}async fetchBalance(e={}){await this.loadMarkets();let t=(await this.privatePostGetInfo()).return,i={info:t},s={free:"funds",total:"funds_incl_orders"},r=Object.keys(s);for(let a=0;a<r.length;a++){let e=r[a],o=s[e];if(o in t){let s=Object.keys(t[o]);for(let r=0;r<s.length;r++){let a=s[r],n=a.toUpperCase(),d=this.commonCurrencyCode(n),c=void 0;(c=d in i?i[d]:this.account())[e]=t[o][a],c.total&&c.free&&(c.used=c.total-c.free),i[d]=c}}}return this.parseBalance(i)}async createDepositAddress(e,t={}){let i=await this.fetchDepositAddress(e,this.extend({need_new:1},t));return{currency:e,address:i.address,status:"ok",info:i.info}}async fetchDepositAddress(e,t={}){let i={coinName:this.currencyId(e),need_new:0},s=await this.privatePostGetDepositAddress(this.extend(i,t));return{currency:e,address:this.safeString(s.return,"address"),status:"ok",info:s}}async withdraw(e,t,i,s={}){await this.loadMarkets();return{info:await this.privatePostWithdrawCoinsToAddress(this.extend({coinName:e,amount:t,address:i},s)),id:void 0}}async request(e,t="public",i="GET",s={},n,d){let c=await this.fetch2(e,t,i,s,n,d);if("success"in c&&!c.success)throw c.error.indexOf("Insufficient funds")>=0?new a(this.id+" "+this.json(c)):"Requests too often"==c.error?new o(this.id+" "+this.json(c)):"not available"==c.error||"external service unavailable"==c.error?new o(this.id+" "+this.json(c)):new r(this.id+" "+this.json(c));return c}}},function(e,t,i){"use strict";const s=i(323);e.exports=class extends s{describe(){return this.deepExtend(super.describe(),{id:"yunbi",name:"YUNBI",countries:"CN",rateLimit:1e3,version:"v2",hasCORS:!1,hasFetchTickers:!0,hasFetchOHLCV:!0,timeframes:{"1m":"1","5m":"5","15m":"15","30m":"30","1h":"60","2h":"120","4h":"240","12h":"720","1d":"1440","3d":"4320","1w":"10080"},urls:{logo:"https://user-images.githubusercontent.com/1294454/28570548-4d646c40-7147-11e7-9cf6-839b93e6d622.jpg",extension:".json",api:"https://yunbi.com",www:"https://yunbi.com",doc:["https://yunbi.com/documents/api/guide","https://yunbi.com/swagger/"]},api:{public:{get:["tickers","tickers/{market}","markets","order_book","k","depth","trades","k_with_pending_trades","timestamp","addresses/{address}","partners/orders/{id}/trades"]},private:{get:["deposits","members/me","deposit","deposit_address","order","orders","trades/my"],post:["order/delete","orders","orders/multi","orders/clear"]}}})}}},function(e,t,i){"use strict";const s=i(310),{ExchangeError:r}=i(309);e.exports=class extends s{describe(){return this.deepExtend(super.describe(),{id:"zaif",name:"Zaif",countries:"JP",rateLimit:2e3,version:"1",hasCORS:!1,hasFetchOpenOrders:!0,hasFetchClosedOrders:!0,hasWithdraw:!0,urls:{logo:"https://user-images.githubusercontent.com/1294454/27766927-39ca2ada-5eeb-11e7-972f-1b4199518ca6.jpg",api:"https://api.zaif.jp",www:"https://zaif.jp",doc:["http://techbureau-api-document.readthedocs.io/ja/latest/index.html","https://corp.zaif.jp/api-docs","https://corp.zaif.jp/api-docs/api_links","https://www.npmjs.com/package/zaif.jp","https://github.com/you21979/node-zaif"]},api:{public:{get:["depth/{pair}","currencies/{pair}","currencies/all","currency_pairs/{pair}","currency_pairs/all","last_price/{pair}","ticker/{pair}","trades/{pair}"]},private:{post:["active_orders","cancel_order","deposit_history","get_id_info","get_info","get_info2","get_personal_info","trade","trade_history","withdraw","withdraw_history"]},ecapi:{post:["createInvoice","getInvoice","getInvoiceIdsByOrderNumber","cancelInvoice"]},tlapi:{post:["get_positions","position_history","active_positions","create_position","change_position","cancel_position"]},fapi:{get:["groups/{group_id}","last_price/{group_id}/{pair}","ticker/{group_id}/{pair}","trades/{group_id}/{pair}","depth/{group_id}/{pair}"]}}})}async fetchMarkets(){let e=await this.publicGetCurrencyPairsAll(),t=[];for(let i=0;i<e.length;i++){let s=e[i],r=s.currency_pair,a=s.name,[o,n]=a.split("/");t.push({id:r,symbol:a,base:o,quote:n,info:s})}return t}async fetchBalance(e={}){await this.loadMarkets();let t=(await this.privatePostGetInfo()).return,i={info:t},s=Object.keys(t.funds);for(let r=0;r<s.length;r++){let e=s[r],a=t.funds[e],o=e.toUpperCase(),n={free:a,used:0,total:a};"deposit"in t&&e in t.deposit&&(n.total=t.deposit[e],n.used=n.total-n.free),i[o]=n}return this.parseBalance(i)}async fetchOrderBook(e,t={}){await this.loadMarkets();let i=await this.publicGetDepthPair(this.extend({pair:this.marketId(e)},t));return this.parseOrderBook(i)}async fetchTicker(e,t={}){await this.loadMarkets();let i=await this.publicGetTickerPair(this.extend({pair:this.marketId(e)},t)),s=this.milliseconds(),r=i.vwap,a=i.volume,o=a*r;return{symbol:e,timestamp:s,datetime:this.iso8601(s),high:i.high,low:i.low,bid:i.bid,ask:i.ask,vwap:r,open:void 0,close:void 0,first:void 0,last:i.last,change:void 0,percentage:void 0,average:void 0,baseVolume:a,quoteVolume:o,info:i}}parseTrade(e,t){let i="bid"==e.trade_type?"buy":"sell",s=1e3*e.date,r=this.safeString(e,"id");return r=this.safeString(e,"tid",r),t||(t=this.markets_by_id[e.currency_pair]),{id:r.toString(),info:e,timestamp:s,datetime:this.iso8601(s),symbol:t.symbol,type:void 0,side:i,price:e.price,amount:e.amount}}async fetchTrades(e,t,i,s={}){await this.loadMarkets();let r=this.market(e),a=await this.publicGetTradesPair(this.extend({pair:r.id},s));return this.parseTrades(a,r,t,i)}async createOrder(e,t,i,s,a,o={}){if(await this.loadMarkets(),"market"==t)throw new r(this.id+" allows limit orders only");let n=await this.privatePostTrade(this.extend({currency_pair:this.marketId(e),action:"buy"==i?"bid":"ask",amount:s,price:a},o));return{info:n,id:n.return.order_id.toString()}}async cancelOrder(e,t,i={}){return await this.privatePostCancelOrder(this.extend({order_id:e},i))}parseOrder(e,t){let i="bid"==e.action?"buy":"sell",s=1e3*parseInt(e.timestamp);t||(t=this.markets_by_id[e.currency_pair]);let r=e.price,a=e.amount;return{id:e.id.toString(),timestamp:s,datetime:this.iso8601(s),status:"open",symbol:t.symbol,type:"limit",side:i,price:r,cost:r*a,amount:a,filled:void 0,remaining:void 0,trades:void 0,fee:void 0}}parseOrders(e,t,i,s){let r=Object.keys(e),a=[];for(let o=0;o<r.length;o++){let i=r[o],s=e[i],n=this.extend(s,{id:i});a.push(this.parseOrder(n,t))}return this.filterBySinceLimit(a,i,s)}async fetchOpenOrders(e,t,i,s={}){await this.loadMarkets();let r=void 0,a={};e&&(r=this.market(e),a.currency_pair=r.id);let o=await this.privatePostActiveOrders(this.extend(a,s));return this.parseOrders(o.return,r,t,i)}async fetchClosedOrders(e,t,i,s={}){await this.loadMarkets();let r=void 0,a={};e&&(r=this.market(e),a.currency_pair=r.id);let o=await this.privatePostTradeHistory(this.extend(a,s));return this.parseOrders(o.return,r,t,i)}async withdraw(e,t,i,s={}){if(await this.loadMarkets(),"JPY"==e)throw new r(this.id+" does not allow "+e+" withdrawals");let a=await this.privatePostWithdraw(this.extend({currency:e,amount:t,address:i},s));return{info:a,id:a.return.txid,fee:a.return.fee}}sign(e,t="public",i="GET",s={},r,a){let o=this.urls.api+"/";if("public"==t)o+="api/"+this.version+"/"+this.implodeParams(e,s);else if("fapi"==t)o+="fapi/"+this.version+"/"+this.implodeParams(e,s);else{this.checkRequiredCredentials(),o+="ecapi"==t?"ecapi":"tlapi"==t?"tlapi":"tapi";let i=this.nonce();a=this.urlencode(this.extend({method:e,nonce:i},s)),r={"Content-Type":"application/x-www-form-urlencoded",Key:this.apiKey,Sign:this.hmac(this.encode(a),this.encode(this.secret),"sha512")}}return{url:o,method:i,body:a,headers:r}}async request(e,t="api",i="GET",s={},a,o){let n=await this.fetch2(e,t,i,s,a,o);if("error"in n)throw new r(this.id+" "+n.error);if("success"in n&&!n.success)throw new r(this.id+" "+this.json(n));return n}}}]));
//# sourceMappingURL=0.837c8c22.chunk.js.map